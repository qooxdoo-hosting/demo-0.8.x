qx={Bootstrap:{genericToString:function(){return "[Class "+this.classname+"]";},createNamespace:function(name,object){var splits=name.split(".");var parent=window;var part=splits[0];for(var i=0,len=splits.length-1;i<len;i++,part=splits[i]){if(!parent[part]){parent=parent[part]={};}else{parent=parent[part];}}parent[part]=object;return part;},define:function(name,config){if(!config){var config={statics:{}};}var clazz;var proto=null;if(config.members){clazz=config.construct||new Function;var statics=config.statics;for(var key in statics){clazz[key]=statics[key];}proto=clazz.prototype;var members=config.members;for(var key in members){proto[key]=members[key];}}else{clazz=config.statics||{};}var basename=this.createNamespace(name,clazz);clazz.name=clazz.classname=name;clazz.basename=basename;clazz.$$type="Class";if(!clazz.hasOwnProperty("toString")){clazz.toString=this.genericToString;}if(config.defer){config.defer(clazz,proto);}qx.Bootstrap.$$registry[name]=config.statics;}}};qx.Bootstrap.define("qx.Bootstrap",{statics:{LOADSTART:new Date,createNamespace:qx.Bootstrap.createNamespace,define:qx.Bootstrap.define,genericToString:qx.Bootstrap.genericToString,getByName:function(name){return this.$$registry[name];},$$registry:{}}});qx.Bootstrap.define("qx.util.ResourceManager",{statics:{__registry:window.qxresources||{},has:function(id){return !!this.__registry[id];},getData:function(id){return this.__registry[id]||null;},getImageWidth:function(id){var entry=this.__registry[id];return entry?entry[0]:null;},getImageHeight:function(id){var entry=this.__registry[id];return entry?entry[1]:null;},getImageFormat:function(id){var entry=this.__registry[id];return entry?entry[2]:null;},isClippedImage:function(id){var entry=this.__registry[id];return entry&&entry.length>4;},toUri:function(id){if(id==null){return id;}var entry=this.__registry[id];if(!entry){return id;}if(typeof entry==="string"){var lib=entry;}else{var lib=entry[3];if(!lib){return id;}}return window.qxlibraries[lib].resourceUri+"/"+id;}}});qx.Bootstrap.define("qx.core.Setting",{statics:{__settings:{},define:function(key,defaultValue){if(defaultValue===undefined){throw new Error('Default value of setting "'+key+'" must be defined!');}if(!this.__settings[key]){this.__settings[key]={};}else if(this.__settings[key].defaultValue!==undefined){throw new Error('Setting "'+key+'" is already defined!');}this.__settings[key].defaultValue=defaultValue;},get:function(key){var cache=this.__settings[key];if(cache===undefined){throw new Error('Setting "'+key+'" is not defined.');}if(cache.value!==undefined){return cache.value;}return cache.defaultValue;},__init:function(){if(window.qxsettings){for(var key in qxsettings){if((key.split(".")).length<2){throw new Error('Malformed settings key "'+key+'". Must be following the schema "namespace.key".');}if(!this.__settings[key]){this.__settings[key]={};}this.__settings[key].value=qxsettings[key];}window.qxsettings=undefined;try{delete window.qxsettings;}catch(ex){}this.__loadUrlSettings();}},__loadUrlSettings:function(){if(this.get("qx.allowUrlSettings")!=true){return;}var urlSettings=document.location.search.slice(1).split("&");for(var i=0;i<urlSettings.length;i++){var setting=urlSettings[i].split(":");if(setting.length!=3||setting[0]!="qxsetting"){continue;}var key=setting[1];if(!this.__settings[key]){this.__settings[key]={};}this.__settings[key].value=decodeURIComponent(setting[2]);}}},defer:function(statics){statics.define("qx.allowUrlSettings",false);statics.define("qx.allowUrlVariants",false);statics.__init();}});qx.Bootstrap.define("qx.bom.client.Engine",{statics:{NAME:"",FULLVERSION:"0.0.0",VERSION:0.0,OPERA:false,WEBKIT:false,GECKO:false,MSHTML:false,__init:function(){var engine="unknown";var version="0.0.0";var agent=navigator.userAgent;if(window.opera){engine="opera";this.OPERA=true;if(/Opera[\s\/]([0-9\.]*)/.test(agent)){version=RegExp.$1.substring(0,3)+"."+RegExp.$1.substring(3);}else{throw new Error("Could not detect Opera version: "+agent+"!");}}else if(navigator.vendor&&(navigator.vendor==="Apple Computer, Inc."||navigator.vendor==="Adobe Systems Incorporated")){engine="webkit";this.WEBKIT=true;if(/AppleWebKit\/([^ ]+)/.test(agent)){version=RegExp.$1;var invalidCharacter=RegExp("[^\\.0-9]").exec(version);if(invalidCharacter){version=version.slice(0,invalidCharacter.index);}}else{throw new Error("Could not detect Webkit version: "+agent+"!");}}else if(window.controllers&&navigator.product==="Gecko"){engine="gecko";this.GECKO=true;if(/rv\:([^\);]+)(\)|;)/.test(agent)){version=RegExp.$1;}else{throw new Error("Could not detect Gecko version: "+agent+"!");}}else if(navigator.cpuClass&&/MSIE\s+([^\);]+)(\)|;)/.test(agent)){engine="mshtml";version=RegExp.$1;this.MSHTML=true;}else{throw new Error("Unsupported client: "+agent+"!");}this.NAME=engine;this.FULLVERSION=version;this.VERSION=parseFloat(version);}},defer:function(statics){statics.__init();}});qx.Bootstrap.define("qx.core.Variant",{statics:{__variants:{},__cache:{},compilerIsSet:function(){return true;},define:function(key,allowedValues,defaultValue){if(qx.core.Variant.compilerIsSet("qx.debug","on")){if(!this.__isValidArray(allowedValues)){throw new Error('Allowed values of variant "'+key+'" must be defined!');}if(defaultValue===undefined){throw new Error('Default value of variant "'+key+'" must be defined!');}}if(!this.__variants[key]){this.__variants[key]={};}else if(qx.core.Variant.compilerIsSet("qx.debug","on")){if(this.__variants[key].defaultValue!==undefined){throw new Error('Variant "'+key+'" is already defined!');}}this.__variants[key].allowedValues=allowedValues;this.__variants[key].defaultValue=defaultValue;},get:function(key){var data=this.__variants[key];if(qx.core.Variant.compilerIsSet("qx.debug","on")){if(data===undefined){throw new Error('Variant "'+key+'" is not defined.');}}if(data.value!==undefined){return data.value;}return data.defaultValue;},__init:function(){if(window.qxvariants){for(var key in qxvariants){if(qx.core.Variant.compilerIsSet("qx.debug","on")){if((key.split(".")).length<2){throw new Error('Malformed settings key "'+key+'". Must be following the schema "namespace.key".');}}if(!this.__variants[key]){this.__variants[key]={};}this.__variants[key].value=qxvariants[key];}window.qxvariants=undefined;try{delete window.qxvariants;}catch(ex){}this.__loadUrlVariants(this.__variants);}},__loadUrlVariants:function(){if(qx.core.Setting.get("qx.allowUrlVariants")!=true){return;}var urlVariants=document.location.search.slice(1).split("&");for(var i=0;i<urlVariants.length;i++){var variant=urlVariants[i].split(":");if(variant.length!=3||variant[0]!="qxvariant"){continue;}var key=variant[1];if(!this.__variants[key]){this.__variants[key]={};}this.__variants[key].value=decodeURIComponent(variant[2]);}},select:function(key,variantFunctionMap){if(qx.core.Variant.compilerIsSet("qx.debug","on")){if(!this.__isValidObject(this.__variants[key])){throw new Error("Variant \""+key+"\" is not defined");}if(!this.__isValidObject(variantFunctionMap)){throw new Error("the second parameter must be a map!");}}for(var variant in variantFunctionMap){if(this.isSet(key,variant)){return variantFunctionMap[variant];}}if(variantFunctionMap["default"]!==undefined){return variantFunctionMap["default"];}if(qx.core.Variant.compilerIsSet("qx.debug","on")){throw new Error('No match for variant "'+key+'" in variants ['+qx.lang.Object.getKeysAsString(variantFunctionMap)+'] found, and no default ("default") given');}},isSet:function(key,variants){var access=key+"$"+variants;if(this.__cache[access]!==undefined){return this.__cache[access];}var retval=false;if(variants.indexOf("|")<0){retval=this.get(key)===variants;}else{var keyParts=variants.split("|");for(var i=0,l=keyParts.length;i<l;i++){if(this.get(key)===keyParts[i]){retval=true;break;}}}this.__cache[access]=retval;return retval;},__isValidArray:function(v){return typeof v==="object"&&v!==null&&v instanceof Array;},__isValidObject:function(v){return typeof v==="object"&&v!==null&&!(v instanceof Array);},__arrayContains:function(arr,obj){for(var i=0,l=arr.length;i<l;i++){if(arr[i]==obj){return true;}}return false;}},defer:function(statics){statics.define("qx.client",["gecko","mshtml","opera","webkit"],qx.bom.client.Engine.NAME);statics.define("qx.debug",["on","off"],"on");statics.define("qx.compatibility",["on","off"],"on");statics.define("qx.eventMonitorNoListeners",["on","off"],"off");statics.define("qx.aspects",["on","off"],"off");statics.define("qx.deprecationWarnings",["on","off"],"on");statics.define("qx.dynamicLocaleSwitch",["on","off"],"on");statics.__init();}});qx.Bootstrap.define("qx.lang.Object",{statics:{isEmpty:function(map){for(var key in map){return false;}return true;},hasMinLength:function(map,length){var i=0;for(var key in map){if((++i)>=length){return true;}}return false;},getLength:function(map){var i=0;for(var key in map){i++;}return i;},_shadowedKeys:["isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf"],getKeys:qx.core.Variant.select("qx.client",{"mshtml":function(map){var arr=[];for(var key in map){arr.push(key);}for(var i=0,a=this._shadowedKeys,l=a.length;i<l;i++){if(map.hasOwnProperty(a[i])){arr.push(a[i]);}}return arr;},"default":function(map){var arr=[];for(var key in map){arr.push(key);}return arr;}}),getKeysAsString:function(map){var keys=qx.lang.Object.getKeys(map);if(keys.length==0){return "";}return '"'+keys.join('\", "')+'"';},getValues:function(map){var arr=[];for(var key in map){arr.push(map[key]);}return arr;},mergeWith:function(target,source,overwrite){if(overwrite===undefined){overwrite=true;}for(var key in source){if(overwrite||target[key]===undefined){target[key]=source[key];}}return target;},carefullyMergeWith:function(target,source){return qx.lang.Object.mergeWith(target,source,false);},merge:function(target,varargs){var len=arguments.length;for(var i=1;i<len;i++){qx.lang.Object.mergeWith(target,arguments[i]);}return target;},copy:function(source){var clone={};for(var key in source){clone[key]=source[key];}return clone;},invert:function(map){var result={};for(var key in map){result[map[key].toString()]=key;}return result;},getKeyFromValue:function(obj,value){for(var key in obj){if(obj[key]===value){return key;}}return null;},select:function(key,map){return map[key];},fromArray:function(array){var obj={};for(var i=0,l=array.length;i<l;i++){if(qx.core.Variant.isSet("qx.debug","on")){switch(typeof array[i]){case "object":case "function":case "undefined":throw new Error("Could not convert complex objects like "+array[i]+" at array index "+i+" to map syntax");}}obj[array[i].toString()]=true;}return obj;}}});qx.Bootstrap.define("qx.core.Aspect",{statics:{__registry:[],wrap:function(fullName,fcn,type){var before=[];var after=[];var reg=this.__registry;var entry;for(var i=0;i<reg.length;i++){entry=reg[i];if((entry.type==null||type==entry.type||entry.type=="*")&&(entry.name==null||fullName.match(entry.name))){entry.pos==-1?before.push(entry.fcn):after.push(entry.fcn);}}if(before.length===0&&after.length===0){return fcn;}var wrapper=function(){for(var i=0;i<before.length;i++){before[i].call(this,fullName,fcn,type,arguments);}var ret=fcn.apply(this,arguments);for(var i=0;i<after.length;i++){after[i].call(this,fullName,fcn,type,arguments,ret);}return ret;};if(type!=="static"){wrapper.self=fcn.self;wrapper.base=fcn.base;}fcn.wrapper=wrapper;wrapper.original=fcn;return wrapper;},addAdvice:function(fcn,position,type,name){this.__registry.push({fcn:fcn,pos:position==="before"?-1:1,type:type,name:name});}}});qx.Bootstrap.define("qx.Class",{statics:{define:function(name,config){if(!config){var config={};}if(config.include&&!(config.include instanceof Array)){config.include=[config.include];}if(config.implement&&!(config.implement instanceof Array)){config.implement=[config.implement];}if(!config.hasOwnProperty("extend")&&!config.type){config.type="static";}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateConfig(name,config);}var clazz=this.__createClass(name,config.type,config.extend,config.statics,config.construct,config.destruct);if(config.extend){if(config.properties){this.__addProperties(clazz,config.properties,true);}if(config.members){this.__addMembers(clazz,config.members,true,true,false);}if(config.events){this.__addEvents(clazz,config.events,true);}if(config.include){for(var i=0,l=config.include.length;i<l;i++){this.__addMixin(clazz,config.include[i],false);}}}if(config.settings){for(var key in config.settings){qx.core.Setting.define(key,config.settings[key]);}}if(config.variants){for(var key in config.variants){qx.core.Variant.define(key,config.variants[key].allowedValues,config.variants[key].defaultValue);}}if(config.implement){for(var i=0,l=config.implement.length;i<l;i++){this.__addInterface(clazz,config.implement[i]);}}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateAbstractInterfaces(clazz);}if(config.defer){config.defer.self=clazz;config.defer(clazz,clazz.prototype,{add:function(name,config){var properties={};properties[name]=config;qx.Class.__addProperties(clazz,properties,true);}});}},isDefined:function(name){return this.getByName(name)!==undefined;},getTotalNumber:function(){return qx.lang.Object.getLength(this.$$registry);},getByName:function(name){return this.$$registry[name];},include:function(clazz,mixin){if(qx.core.Variant.isSet("qx.debug","on")){if(!mixin){throw new Error("Includes of mixins must be mixins. A dynamic mixin of class '"+clazz.classname+"' is undefined/null!");}qx.Mixin.isCompatible(mixin,clazz);}qx.Class.__addMixin(clazz,mixin,false);},patch:function(clazz,mixin){if(qx.core.Variant.isSet("qx.debug","on")){if(!mixin){throw new Error("Includes of mixins must be mixins. A dynamic mixin of class '"+clazz.classname+"' is undefined/null!");}qx.Mixin.isCompatible(mixin,clazz);}qx.Class.__addMixin(clazz,mixin,true);},isSubClassOf:function(clazz,superClass){if(!clazz){return false;}if(clazz==superClass){return true;}if(clazz.prototype instanceof superClass){return true;}return false;},getPropertyDefinition:function(clazz,name){while(clazz){if(clazz.$$properties&&clazz.$$properties[name]){return clazz.$$properties[name];}clazz=clazz.superclass;}return null;},getProperties:function(clazz){var list=[];while(clazz){if(clazz.$$properties){list.push.apply(list,qx.lang.Object.getKeys(clazz.$$properties));}clazz=clazz.superclass;}return list;},getByProperty:function(clazz,name){while(clazz){if(clazz.$$properties&&clazz.$$properties[name]){return clazz;}clazz=clazz.superclass;}return null;},hasProperty:function(clazz,name){return !!this.getPropertyDefinition(clazz,name);},getEventType:function(clazz,name){var clazz=clazz.constructor;while(clazz.superclass){if(clazz.$$events&&clazz.$$events[name]!==undefined){return clazz.$$events[name];}clazz=clazz.superclass;}return null;},supportsEvent:function(clazz,name){return !!this.getEventType(clazz,name);},hasOwnMixin:function(clazz,mixin){return clazz.$$includes&&clazz.$$includes.indexOf(mixin)!==-1;},getByMixin:function(clazz,mixin){var list,i,l;while(clazz){if(clazz.$$includes){list=clazz.$$flatIncludes;for(i=0,l=list.length;i<l;i++){if(list[i]===mixin){return clazz;}}}clazz=clazz.superclass;}return null;},getMixins:function(clazz){var list=[];while(clazz){if(clazz.$$includes){list.push.apply(list,clazz.$$flatIncludes);}clazz=clazz.superclass;}return list;},hasMixin:function(clazz,mixin){return !!this.getByMixin(clazz,mixin);},hasOwnInterface:function(clazz,iface){return clazz.$$implements&&clazz.$$implements.indexOf(iface)!==-1;},getByInterface:function(clazz,iface){var list,i,l;while(clazz){if(clazz.$$implements){list=clazz.$$flatImplements;for(i=0,l=list.length;i<l;i++){if(list[i]===iface){return clazz;}}}clazz=clazz.superclass;}return null;},getInterfaces:function(clazz){var list=[];while(clazz){if(clazz.$$implements){list.push.apply(list,clazz.$$flatImplements);}clazz=clazz.superclass;}return list;},hasInterface:function(clazz,iface){return !!this.getByInterface(clazz,iface);},implementsInterface:function(clazz,iface){if(this.hasInterface(clazz,iface)){return true;}try{qx.Interface.assert(clazz,iface,false);return true;}catch(ex){}return false;},getInstance:function(){if(!this.$$instance){this.$$allowconstruct=true;this.$$instance=new this;delete this.$$allowconstruct;}return this.$$instance;},genericToString:function(){return "[Class "+this.classname+"]";},$$registry:qx.Bootstrap.$$registry,__allowedKeys:qx.core.Variant.select("qx.debug",{"on":{"type":"string","extend":"function","implement":"object","include":"object","construct":"function","statics":"object","properties":"object","members":"object","settings":"object","variants":"object","events":"object","defer":"function","destruct":"function"},"default":null}),__staticAllowedKeys:qx.core.Variant.select("qx.debug",{"on":{"type":"string","statics":"object","settings":"object","variants":"object","defer":"function"},"default":null}),__validateConfig:qx.core.Variant.select("qx.debug",{"on":function(name,config){if(config.type&&!(config.type==="static"||config.type==="abstract"||config.type==="singleton")){throw new Error('Invalid type "'+config.type+'" definition for class "'+name+'"!');}var allowed=config.type==="static"?this.__staticAllowedKeys:this.__allowedKeys;for(var key in config){if(!allowed[key]){throw new Error('The configuration key "'+key+'" in class "'+name+'" is not allowed!');}if(config[key]==null){throw new Error('Invalid key "'+key+'" in class "'+name+'"! The value is undefined/null!');}if(typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" in class "'+name+'"! The type of the key must be "'+allowed[key]+'"!');}}var maps=["statics","properties","members","settings","variants","events"];for(var i=0,l=maps.length;i<l;i++){var key=maps[i];if(config[key]!==undefined&&(config[key] instanceof Array||config[key] instanceof RegExp||config[key] instanceof Date||config[key].classname!==undefined)){throw new Error('Invalid key "'+key+'" in class "'+name+'"! The value needs to be a map!');}}if(config.include){if(config.include instanceof Array){for(var i=0,a=config.include,l=a.length;i<l;i++){if(a[i]==null||a[i].$$type!=="Mixin"){throw new Error('The include definition in class "'+name+'" contains an invalid mixin at position '+i+': '+a[i]);}}}else{throw new Error('Invalid include definition in class "'+name+'"! Only mixins and arrays of mixins are allowed!');}}if(config.implement){if(config.implement instanceof Array){for(var i=0,a=config.implement,l=a.length;i<l;i++){if(a[i]==null||a[i].$$type!=="Interface"){throw new Error('The implement definition in class "'+name+'" contains an invalid interface at position '+i+': '+a[i]);}}}else{throw new Error('Invalid implement definition in class "'+name+'"! Only interfaces and arrays of interfaces are allowed!');}}if(config.include){try{qx.Mixin.checkCompatibility(config.include);}catch(ex){throw new Error('Error in include definition of class "'+name+'"! '+ex.message);}}if(config.settings){for(var key in config.settings){if(key.substr(0,key.indexOf("."))!=name.substr(0,name.indexOf("."))){throw new Error('Forbidden setting "'+key+'" found in "'+name+'". It is forbidden to define a default setting for an external namespace!');}}}if(config.variants){for(var key in config.variants){if(key.substr(0,key.indexOf("."))!=name.substr(0,name.indexOf("."))){throw new Error('Forbidden variant "'+key+'" found in "'+name+'". It is forbidden to define a variant for an external namespace!');}}}},"default":function(){}}),__validateAbstractInterfaces:qx.core.Variant.select("qx.debug",{"on":function(clazz){var superclass=clazz.superclass;while(superclass){if(superclass.$$classtype!=="abstract"){break;}var interfaces=superclass.$$implements;if(interfaces){for(var i=0;i<interfaces.length;i++){qx.Interface.assert(clazz,interfaces[i],true);}}superclass=superclass.superclass;}},"default":function(){}}),__createClass:function(name,type,extend,statics,construct,destruct){var clazz;if(!extend&&qx.core.Variant.isSet("qx.aspects","off")){clazz=statics||{};}else{clazz={};if(extend){if(!construct){construct=this.__createDefaultConstructor();}clazz=this.__wrapConstructor(construct,name,type);}if(statics){var key;for(var i=0,a=qx.lang.Object.getKeys(statics),l=a.length;i<l;i++){key=a[i];if(qx.core.Variant.isSet("qx.aspects","on")){var staticValue=statics[key];if(staticValue instanceof Function){staticValue=qx.core.Aspect.wrap(name+"."+key,staticValue,"static");}clazz[key]=staticValue;}else{clazz[key]=statics[key];}}}}var basename=qx.Bootstrap.createNamespace(name,clazz,false);clazz.name=clazz.classname=name;clazz.basename=basename;clazz.$$type="Class";if(type){clazz.$$classtype=type;}if(!clazz.hasOwnProperty("toString")){clazz.toString=this.genericToString;}if(extend){var superproto=extend.prototype;var helper=this.__createEmptyFunction();helper.prototype=superproto;var proto=new helper;clazz.prototype=proto;proto.name=proto.classname=name;proto.basename=basename;construct.base=clazz.superclass=extend;construct.self=clazz.constructor=proto.constructor=clazz;if(destruct){if(qx.core.Variant.isSet("qx.aspects","on")){destruct=qx.core.Aspect.wrap(name,destruct,"destructor");}clazz.$$destructor=destruct;}}this.$$registry[name]=clazz;return clazz;},__addEvents:function(clazz,events,patch){if(qx.core.Variant.isSet("qx.debug","on")){if(typeof events!=="object"||events instanceof Array){throw new Error(clazz.classname+": the events must be defined as map!");}for(var key in events){if(typeof events[key]!=="string"){throw new Error(clazz.classname+"/"+key+": the event value needs to be a string with the class name of the event object which will be fired.");}}if(clazz.$$events&&patch!==true){for(var key in events){if(clazz.$$events[key]!==undefined&&clazz.$$events[key]!==events[key]){throw new Error(clazz.classname+"/"+key+": the event value/type cannot be changed from "+clazz.$$events[key]+" to "+events[key]);}}}}if(clazz.$$events){for(var key in events){clazz.$$events[key]=events[key];}}else{clazz.$$events=events;}},__addProperties:function(clazz,properties,patch){var config;if(patch===undefined){patch=false;}var attach=!!clazz.$$propertiesAttached;for(var name in properties){config=properties[name];if(qx.core.Variant.isSet("qx.debug","on")){this.__validateProperty(clazz,name,config,patch);}config.name=name;if(!config.refine){if(clazz.$$properties===undefined){clazz.$$properties={};}clazz.$$properties[name]=config;}if(config.init!==undefined){clazz.prototype["$$init_"+name]=config.init;}if(config.event!==undefined){var event={};event[config.event]="qx.event.type.Data";this.__addEvents(clazz,event,patch);}if(config.inheritable){qx.core.Property.$$inheritable[name]=true;}if(attach){qx.core.Property.attachMethods(clazz,name,config);}}},__validateProperty:qx.core.Variant.select("qx.debug",{"on":function(clazz,name,config,patch){var has=this.hasProperty(clazz,name);if(has){var existingProperty=this.getPropertyDefinition(clazz,name);if(config.refine&&existingProperty.init===undefined){throw new Error("Could not refine a init value if there was previously no init value defined. Property '"+name+"' of class '"+clazz.classname+"'.");}}if(!has&&config.refine){throw new Error("Could not refine non-existent property: "+name+"!");}if(has&&!patch){throw new Error("Class "+clazz.classname+" already has a property: "+name+"!");}if(has&&patch){if(!config.refine){throw new Error('Could not refine property "'+name+'" without a "refine" flag in the property definition! This class: '+clazz.classname+', original class: '+this.getByProperty(clazz,name).classname+'.');}for(var key in config){if(key!=="init"&&key!=="refine"){throw new Error("Class "+clazz.classname+" could not refine property: "+name+"! Key: "+key+" could not be refined!");}}}var allowed=config.group?qx.core.Property.$$allowedGroupKeys:qx.core.Property.$$allowedKeys;for(var key in config){if(allowed[key]===undefined){throw new Error('The configuration key "'+key+'" of property "'+name+'" in class "'+clazz.classname+'" is not allowed!');}if(config[key]===undefined){throw new Error('Invalid key "'+key+'" of property "'+name+'" in class "'+clazz.classname+'"! The value is undefined: '+config[key]);}if(allowed[key]!==null&&typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" of property "'+name+'" in class "'+clazz.classname+'"! The type of the key must be "'+allowed[key]+'"!');}}if(config.transform!=null){if(!(typeof config.transform=="string")){throw new Error('Invalid transform definition of property "'+name+'" in class "'+clazz.classname+'"! Needs to be a String.');}}if(config.check!=null){if(!(typeof config.check=="string"||config.check instanceof Array||config.check instanceof Function)){throw new Error('Invalid check definition of property "'+name+'" in class "'+clazz.classname+'"! Needs to be a String, Array or Function.');}}},"default":null}),__addMembers:function(clazz,members,patch,base,wrap){var proto=clazz.prototype;var key,member;for(var i=0,a=qx.lang.Object.getKeys(members),l=a.length;i<l;i++){key=a[i];member=members[key];if(qx.core.Variant.isSet("qx.debug","on")){if(proto[key]!==undefined&&key.charAt(0)=="_"&&key.charAt(1)=="_"){throw new Error('Overwriting private member "'+key+'" of Class "'+clazz.classname+'" is not allowed!');}if(patch!==true&&proto.hasOwnProperty(key)){throw new Error('Overwriting member "'+key+'" of Class "'+clazz.classname+'" is not allowed!');}}if(base!==false&&member instanceof Function&&member.$$type==null){if(wrap==true){member=this.__mixinMemberWrapper(member,proto[key]);}else{if(proto[key]){member.base=proto[key];}member.self=clazz;}if(qx.core.Variant.isSet("qx.aspects","on")){member=qx.core.Aspect.wrap(clazz.classname+"."+key,member,"member");}}proto[key]=member;}},__mixinMemberWrapper:function(member,base){if(base){return function(){var oldBase=member.base;member.base=base;var retval=member.apply(this,arguments);member.base=oldBase;return retval;};}else{return member;}},__addInterface:function(clazz,iface){if(qx.core.Variant.isSet("qx.debug","on")){if(!clazz||!iface){throw new Error("Incomplete parameters!");}if(this.hasOwnInterface(clazz,iface)){throw new Error('Interface "'+iface.name+'" is already used by Class "'+clazz.classname+'!');}if(clazz.$$classtype!=="abstract"){qx.Interface.assert(clazz,iface,true);}}var list=qx.Interface.flatten([iface]);if(clazz.$$implements){clazz.$$implements.push(iface);clazz.$$flatImplements.push.apply(clazz.$$flatImplements,list);}else{clazz.$$implements=[iface];clazz.$$flatImplements=list;}},__addMixin:function(clazz,mixin,patch){if(qx.core.Variant.isSet("qx.debug","on")){if(!clazz||!mixin){throw new Error("Incomplete parameters!");}}if(this.hasMixin(clazz,mixin)){qx.log.Logger.warn('Mixin "'+mixin.name+'" is already included into Class "'+clazz.classname+'" by class: '+this.getByMixin(clazz,mixin).classname+'!');return;}var list=qx.Mixin.flatten([mixin]);var entry;for(var i=0,l=list.length;i<l;i++){entry=list[i];if(entry.$$events){this.__addEvents(clazz,entry.$$events,patch);}if(entry.$$properties){this.__addProperties(clazz,entry.$$properties,patch);}if(entry.$$members){this.__addMembers(clazz,entry.$$members,patch,patch,patch);}}if(clazz.$$includes){clazz.$$includes.push(mixin);clazz.$$flatIncludes.push.apply(clazz.$$flatIncludes,list);}else{clazz.$$includes=[mixin];clazz.$$flatIncludes=list;}},__createDefaultConstructor:function(){function defaultConstructor(){arguments.callee.base.apply(this,arguments);}return defaultConstructor;},__createEmptyFunction:function(){return function(){};},__wrapConstructor:function(construct,name,type){var wrapper=function(){var clazz=arguments.callee.constructor;if(qx.core.Variant.isSet("qx.debug","on")){if(!(this instanceof clazz)){throw new Error("Please initialize '"+name+"' objects using the new keyword!");}if(type==="abstract"){if(this.classname===name){throw new Error("The class ',"+name+"' is abstract! It is not possible to instantiate it.");}}else if(type==="singleton"){if(!clazz.$$allowconstruct){throw new Error("The class '"+name+"' is a singleton! It is not possible to instantiate it directly. Use the static getInstance() method instead.");}}}if(!clazz.$$propertiesAttached){qx.core.Property.attach(clazz);}var retval=clazz.$$original.apply(this,arguments);if(clazz.$$includes){var mixins=clazz.$$flatIncludes;for(var i=0,l=mixins.length;i<l;i++){if(mixins[i].$$constructor){mixins[i].$$constructor.apply(this,arguments);}}}if(this.classname===name.classname){this.$$initialized=true;}return retval;};if(qx.core.Variant.isSet("qx.aspects","on")){var aspectWrapper=qx.core.Aspect.wrap(name,wrapper,"constructor");wrapper.$$original=construct;wrapper.constructor=aspectWrapper;wrapper=aspectWrapper;}if(type==="singleton"){wrapper.getInstance=this.getInstance;}wrapper.$$original=construct;construct.wrapper=wrapper;return wrapper;}},defer:function(statics){for(var classname in qx.Bootstrap.$$registry){var statics=qx.Bootstrap.$$registry[classname];for(var key in statics){if(statics[key] instanceof Function){statics[key]=qx.core.Aspect.wrap(classname+"."+key,statics[key],"static");}}}}});qx.Class.define("qx.bom.Stylesheet",{statics:{includeFile:function(href,doc){if(!doc){doc=document;}var el=doc.createElement("link");el.type="text/css";el.rel="stylesheet";el.href=qx.util.ResourceManager.toUri(href);var head=doc.getElementsByTagName("head")[0];head.appendChild(el);},createElement:qx.core.Variant.select("qx.client",{"mshtml":function(text){var sheet=document.createStyleSheet();if(text){sheet.cssText=text;}return sheet;},"default":function(text){var elem=document.createElement("style");elem.type="text/css";if(text){elem.appendChild(document.createTextNode(text));}document.getElementsByTagName("head")[0].appendChild(elem);return elem.sheet;}}),addRule:qx.core.Variant.select("qx.client",{"mshtml":function(sheet,selector,entry){sheet.addRule(selector,entry);},"default":function(sheet,selector,entry){sheet.insertRule(selector+"{"+entry+"}",sheet.cssRules.length);}}),removeRule:qx.core.Variant.select("qx.client",{"mshtml":function(sheet,selector){var rules=sheet.rules;var len=rules.length;for(var i=len-1;i>=0;--i){if(rules[i].selectorText==selector){sheet.removeRule(i);}}},"default":function(sheet,selector){var rules=sheet.cssRules;var len=rules.length;for(var i=len-1;i>=0;--i){if(rules[i].selectorText==selector){sheet.deleteRule(i);}}}}),removeAllRules:qx.core.Variant.select("qx.client",{"mshtml":function(sheet){var rules=sheet.rules;var len=rules.length;for(var i=len-1;i>=0;i--){sheet.removeRule(i);}},"default":function(sheet){var rules=sheet.cssRules;var len=rules.length;for(var i=len-1;i>=0;i--){sheet.deleteRule(i);}}}),addImport:qx.core.Variant.select("qx.client",{"mshtml":function(sheet,url){sheet.addImport(url);},"default":function(sheet,url){sheet.insertRule('@import "'+url+'";',sheet.cssRules.length);}}),removeImport:qx.core.Variant.select("qx.client",{"mshtml":function(sheet,url){var imports=sheet.imports;var len=imports.length;for(var i=len-1;i>=0;i--){if(imports[i].href==url){sheet.removeImport(i);}}},"default":function(sheet,url){var rules=sheet.cssRules;var len=rules.length;for(var i=len-1;i>=0;i--){if(rules[i].href==url){sheet.deleteRule(i);}}}}),removeAllImports:qx.core.Variant.select("qx.client",{"mshtml":function(sheet){var imports=sheet.imports;var len=imports.length;for(var i=len-1;i>=0;i--){sheet.removeImport(i);}},"default":function(sheet){var rules=sheet.cssRules;var len=rules.length;for(var i=len-1;i>=0;i--){if(rules[i].type==rules[i].IMPORT_RULE){sheet.deleteRule(i);}}}})}});qx.Bootstrap.define("qx.bom.Event",{statics:{addNativeListener:qx.core.Variant.select("qx.client",{"mshtml":function(target,type,listener){target.attachEvent("on"+type,listener);},"default":function(target,type,listener){target.addEventListener(type,listener,false);}}),removeNativeListener:qx.core.Variant.select("qx.client",{"mshtml":function(target,type,listener){target.detachEvent("on"+type,listener);},"default":function(target,type,listener){target.removeEventListener(type,listener,false);}}),getTarget:function(e){return e.target||e.srcElement;},getRelatedTarget:qx.core.Variant.select("qx.client",{"mshtml":function(e){if(e.type==="mouseover"){return e.fromEvent;}else{return e.toElement;}},"default":function(e){return e.relatedTarget;}}),preventDefault:qx.core.Variant.select("qx.client",{"gecko":function(e){if(qx.bom.client.Engine.VERSION>=1.9&&e.type=="mousedown"&&e.button==2){return;}e.preventDefault();try{e.keyCode=0;}catch(e){}},"mshtml":function(e){try{e.keyCode=0;}catch(e){}e.returnValue=false;},"default":function(e){e.preventDefault();}}),stopPropagation:function(e){if(e.stopPropagation){e.stopPropagation();}e.cancelBubble=true;}}});qx.Bootstrap.define("qx.event.Manager",{construct:function(win){this.__window=win;this.__disposeWrapper=qx.lang.Function.bind(this.dispose,this);qx.bom.Event.addNativeListener(win,"unload",this.__disposeWrapper);this.__listeners={};this.__handlers={};this.__dispatchers={};this.__handlerCache={};},members:{dispose:function(){qx.bom.Event.removeNativeListener(this.__window,"unload",this.__disposeWrapper);qx.event.Registration.removeManager(this);this.__listeners=this.__window=this.__handlers=this.__dispatchers=this.__disposeWrapper=this.__handlerCache=null;},getWindow:function(){return this.__window;},getHandler:function(clazz){var handler=this.__handlers[clazz.classname];if(handler){return handler;}return this.__handlers[clazz.classname]=new clazz(this);},getDispatcher:function(clazz){var dispatcher=this.__dispatchers[clazz.classname];if(dispatcher){return dispatcher;}return this.__dispatchers[clazz.classname]=new clazz(this);},getListeners:function(target,type,capture){var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey];if(!targetMap){return null;}var entryKey=type+(capture?"|capture":"|bubble");var entryList=targetMap[entryKey];return entryList?entryList.concat():null;},hasListener:function(target,type,capture){if(qx.core.Variant.isSet("qx.debug","on")){if(target==null){qx.log.Logger.trace(this);throw new Error("Invalid object: "+target);}}var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey];if(!targetMap){return false;}var entryKey=type+(capture?"|capture":"|bubble");var entryList=targetMap[entryKey];if(!entryList){return false;}return entryList.length>0;},importListeners:function(target,list){if(qx.core.Variant.isSet("qx.debug","on")){if(target==null){qx.log.Logger.trace(this);throw new Error("Invalid object: "+target);}}var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey]={};for(var listKey in list){var item=list[listKey];var entryKey=item.type+(item.capture?"|capture":"|bubble");var entryList=targetMap[entryKey];if(!entryList){entryList=targetMap[entryKey]=[];this.__registerAtHandler(target,item.type,item.capture);}entryList.push({handler:item.listener,context:item.self});}},addListener:function(target,type,listener,self,capture){if(qx.core.Variant.isSet("qx.debug","on")){var msg="Failed to add event listener for type '"+type+"'"+" to the target '"+target+"': ";qx.core.Assert.assertObject(target,msg+"Invalid Target.");qx.core.Assert.assertString(type,msg+"Invalid event type.");qx.core.Assert.assertFunction(listener,msg+"Invalid callback function");if(self!==undefined){qx.core.Assert.assertObject(self,"Invalid context for callback.");}if(capture!==undefined){qx.core.Assert.assertBoolean(capture,"Invalid capture falg.");}}var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey];if(!targetMap){targetMap=this.__listeners[targetKey]={};}var entryKey=type+(capture?"|capture":"|bubble");var entryList=targetMap[entryKey];if(!entryList){entryList=targetMap[entryKey]=[];}if(entryList.length===0){this.__registerAtHandler(target,type,capture);}entryList.push({handler:listener,context:self});},_findHandler:function(target,type){var key;var isDomNode=false;var isWindow=false;var isObject=false;if(target.nodeType===1){isDomNode=true;key="DOM_"+target.tagName.toLowerCase()+"_"+type;}else if(target==this.__window){isWindow=true;key="WIN_"+type;}else if(target.classname){isObject=true;key="QX_"+target.classname+"_"+type;}else{key="UNKNOWN_"+target+"_"+type;}var cache=this.__handlerCache;if(cache[key]){return cache[key];}var classes=qx.event.Registration.getHandlers();var instance;for(var i=0,l=classes.length;i<l;i++){var clazz=classes[i];var supportedTypes=clazz.SUPPORTED_TYPES;if(supportedTypes&&!supportedTypes[type]){continue;}var IEventHandler=qx.event.IEventHandler;var targetCheck=clazz.TARGET_CHECK;if(targetCheck){if(targetCheck===IEventHandler.TARGET_DOMNODE&&!isDomNode){continue;}else if(targetCheck===IEventHandler.TARGET_WINDOW&&!isWindow){continue;}else if(targetCheck===IEventHandler.TARGET_OBJECT&&!isObject){continue;}}instance=this.getHandler(classes[i]);if(clazz.IGNORE_CAN_HANDLE||instance.canHandleEvent(target,type)){cache[key]=instance;return instance;}}return null;},__registerAtHandler:function(target,type,capture){var handler=this._findHandler(target,type);if(handler){handler.registerEvent(target,type,capture);return;}if(qx.core.Variant.isSet("qx.debug","on")){qx.log.Logger.warn(this,"There is no event handler for the event '"+type+"' on target '"+target+"'!");}},removeListener:function(target,type,listener,self,capture){if(qx.core.Variant.isSet("qx.debug","on")){var msg="Failed to dd event listener for type '"+type+"'"+" to the target '"+target+"': ";qx.core.Assert.assertObject(target,msg+"Invalid Target.");qx.core.Assert.assertString(type,msg+"Invalid event type.");qx.core.Assert.assertFunction(listener,msg+"Invalid callback function");if(self!==undefined){qx.core.Assert.assertObject(self,"Invalid context for callback.");}if(capture!==undefined){qx.core.Assert.assertBoolean(capture,"Invalid capture falg.");}}var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey];if(!targetMap){return false;}var entryKey=type+(capture?"|capture":"|bubble");var entryList=targetMap[entryKey];if(!entryList){return false;}for(var i=0,l=entryList.length;i<l;i++){var entry=entryList[i];if(entry.handler===listener&&entry.context===self){qx.lang.Array.removeAt(entryList,i);if(entryList.length==0){this.__unregisterAtHandler(target,type,capture);}return true;}}return false;},removeAllListeners:function(target){var targetKey=qx.core.ObjectRegistry.toHashCode(target);var targetMap=this.__listeners[targetKey];if(!targetMap){return false;}var split,type,capture;for(var entryKey in targetMap){if(targetMap[entryKey].length>0){split=entryKey.split('|');type=split[0];capture=split[1]==="capture";this.__unregisterAtHandler(target,type,capture);}}delete this.__listeners[targetKey];return true;},__unregisterAtHandler:function(target,type,capture){var handler=this._findHandler(target,type);if(handler){handler.unregisterEvent(target,type,capture);return;}if(qx.core.Variant.isSet("qx.debug","on")){qx.log.Logger.warn(this,"There is no event handler for the event '"+type+"' on target '"+target+"'!");}},dispatchEvent:function(target,event){if(qx.core.Variant.isSet("qx.debug","on")){var msg="Could not dispatch event '"+event+"' on target '"+target+"': ";qx.core.Assert.assertNotUndefined(target,msg+"Invalid event target.");qx.core.Assert.assertNotNull(target,msg+"Invalid event target.");qx.core.Assert.assertInstance(event,qx.event.type.Event,msg+"Invalid event object.");}var type=event.getType();if(!event.getBubbles()&&!this.hasListener(target,type)){qx.event.Pool.getInstance().poolObject(event);return true;}if(!event.getTarget()){event.setTarget(target);}var classes=qx.event.Registration.getDispatchers();var instance;var dispatched=false;for(var i=0,l=classes.length;i<l;i++){instance=this.getDispatcher(classes[i]);if(instance.canDispatchEvent(target,event,type)){instance.dispatchEvent(target,event,type);dispatched=true;break;}}if(!dispatched){qx.log.Logger.error(this,"No dispatcher can handle event of type "+type+" on "+target);return true;}var preventDefault=event.getDefaultPrevented();qx.event.Pool.getInstance().poolObject(event);return !preventDefault;}}});qx.Class.define("qx.dom.Node",{statics:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12,getDocument:function(node){if(this.isDocument(node)){return node;}return node.ownerDocument||node.document||null;},getWindow:qx.core.Variant.select("qx.client",{"mshtml":function(node){return this.getDocument(node).parentWindow;},"default":function(node){return this.getDocument(node).defaultView;}}),getDocumentElement:function(node){return this.getDocument(node).documentElement;},getBodyElement:function(node){return this.getDocument(node).body;},isElement:function(node){return !!(node&&node.nodeType===qx.dom.Node.ELEMENT);},isDocument:function(node){return !!(node&&node.nodeType===qx.dom.Node.DOCUMENT);},isText:function(node){return !!(node&&node.nodeType===qx.dom.Node.TEXT);},isWindow:function(obj){return !!(typeof obj==="object"&&obj&&obj.Array);},getText:function(node){if(!node||!node.nodeType){return null;}switch(node.nodeType){case 1:var i,a=[],nodes=node.childNodes,length=nodes.length;for(i=0;i<length;i++){a[i]=this.getText(nodes[i]);}return a.join("");case 2:return node.nodeValue;break;case 3:return node.nodeValue;break;}return null;}}});qx.Bootstrap.define("qx.lang.Array",{statics:{fromArguments:function(args,offset){return Array.prototype.slice.call(args,offset||0);},fromCollection:function(coll){if(qx.core.Variant.isSet("qx.client","mshtml")){if(coll.item){var arr=[];for(var i=0,l=coll.length;i<l;i++){arr[i]=coll[i];}return arr;}}return Array.prototype.slice.call(coll,0);},fromShortHand:function(input){var len=input.length;var result=qx.lang.Array.copy(input);switch(len){case 1:result[1]=result[2]=result[3]=result[0];break;case 2:result[2]=result[0];case 3:result[3]=result[1];}return result;},copy:function(arr){return arr.concat();},clone:function(arr){return arr.concat();},getLast:function(arr){return arr[arr.length-1];},getFirst:function(arr){return arr[0];},insertAt:function(arr,obj,i){arr.splice(i,0,obj);return arr;},insertBefore:function(arr,obj,obj2){var i=arr.indexOf(obj2);if(i==-1){arr.push(obj);}else{arr.splice(i,0,obj);}return arr;},insertAfter:function(arr,obj,obj2){var i=arr.indexOf(obj2);if(i==-1||i==(arr.length-1)){arr.push(obj);}else{arr.splice(i+1,0,obj);}return arr;},removeAt:function(arr,i){return arr.splice(i,1)[0];},removeAll:function(arr){return arr.length=0;},append:function(arr,a){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertArray(a,"The second parameter must be an array.");}Array.prototype.push.apply(arr,a);return arr;},remove:function(arr,obj){var i=arr.indexOf(obj);if(i!=-1){arr.splice(i,1);return obj;}},contains:function(arr,obj){return arr.indexOf(obj)!==-1;},equals:function(arr1,arr2){var length=arr1.length;if(length!==arr2.length){return false;}for(var i=0;i<length;i++){if(arr1[i]!==arr2[i]){return false;}}return true;},sum:function(arr){var result=0;for(var i=0,l=arr.length;i<l;i++){result+=arr[i];}return result;},max:function(arr){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertArray(arr,"Parameter must be an array.");}var i,len=arr.length,result=arr[0];for(i=1;i<len;i++){if(arr[i]>result){result=arr[i];}}return result===undefined?null:result;},min:function(arr){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertArray(arr,"Parameter must be an array.");}var i,len=arr.length,result=arr[0];for(i=1;i<len;i++){if(arr[i]<result){result=arr[i];}}return result===undefined?null:result;}}});qx.Bootstrap.define("qx.lang.Function",{statics:{getCaller:function(args){return args.caller?args.caller.callee:args.callee.caller;},getName:function(fcn){if(fcn.$$original){return fcn.classname+":constructor wrapper";}if(fcn.wrapper){return fcn.wrapper.classname+":constructor";}if(fcn.classname){return fcn.classname+":constructor";}if(fcn.mixin){for(var key in fcn.mixin.$$members){if(fcn.mixin.$$members[key]==fcn){return fcn.mixin.name+":"+key;}}for(var key in fcn.mixin){if(fcn.mixin[key]==fcn){return fcn.mixin.name+":"+key;}}}if(fcn.self){var clazz=fcn.self.constructor;if(clazz){for(var key in clazz.prototype){if(clazz.prototype[key]==fcn){return clazz.classname+":"+key;}}for(var key in clazz){if(clazz[key]==fcn){return clazz.classname+":"+key;}}}}var fcnReResult=fcn.toString().match(/(function\s*\w*\(.*?\))/);if(fcnReResult&&fcnReResult.length>=1&&fcnReResult[1]){return fcnReResult[1];}var fcnReResult=fcn.toString().match(/(function\s*\(.*?\))/);if(fcnReResult&&fcnReResult.length>=1&&fcnReResult[1]){return "anonymous: "+fcnReResult[1];}return 'anonymous';},globalEval:function(data){if(window.execScript){return window.execScript(data);}else{return eval.call(window,data);}},returnTrue:function(){return true;},returnFalse:function(){return false;},returnNull:function(){return null;},returnThis:function(){return this;},returnZero:function(){return 0;},create:function(func,options){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertFunction(func,"Invalid parameter 'func'.");}if(!options){return func;}if(!(options.self||options.args||options.delay!=null||options.periodical!=null||options.attempt)){return func;}return function(event){var args=qx.lang.Array.fromArguments(arguments);if(options.args){args=options.args.concat(args);}if(options.delay||options.periodical){var returns=function(){return func.apply(options.self||this,args);};if(options.delay){return setTimeout(returns,options.delay);}if(options.periodical){return setInterval(returns,options.periodical);}}else if(options.attempt){var ret=false;try{ret=func.apply(options.self||this,args);}catch(ex){}return ret;}else{return func.apply(options.self||this,args);}};},bind:function(func,self,varargs){return this.create(func,{self:self,args:varargs!==undefined?qx.lang.Array.fromArguments(arguments,2):null});},curry:function(func,varargs){return this.create(func,{args:varargs!==undefined?qx.lang.Array.fromArguments(arguments,1):null});},listener:function(func,self,varargs){if(varargs===undefined){return function(event){return func.call(self||this,event||window.event);};}else{var optargs=qx.lang.Array.fromArguments(arguments,2);return function(event){var args=[event||window.event];args.push.apply(args,optargs);func.apply(self||this,args);};}},attempt:function(func,self,varargs){return this.create(func,{self:self,attempt:true,args:varargs!==undefined?qx.lang.Array.fromArguments(arguments,2):null})();},delay:function(func,delay,self,varargs){return this.create(func,{delay:delay,self:self,args:varargs!==undefined?qx.lang.Array.fromArguments(arguments,3):null})();},periodical:function(func,interval,self,varargs){return this.create(func,{periodical:interval,self:self,args:varargs!==undefined?qx.lang.Array.fromArguments(arguments,3):null})();}}});qx.Bootstrap.define("qx.event.Registration",{statics:{__managers:{},getManager:function(target){if(qx.dom.Node.isWindow(target)){var win=target;}else if(qx.dom.Node.isElement(target)){var win=qx.dom.Node.getWindow(target);}else{var win=window;}var id=qx.core.ObjectRegistry.toHashCode(win);var manager=this.__managers[id];if(!manager){manager=new qx.event.Manager(win);this.__managers[id]=manager;}return manager;},removeManager:function(mgr){var id=qx.core.ObjectRegistry.toHashCode(mgr.getWindow());delete this.__managers[id];},addListener:function(target,type,listener,self,capture){this.getManager(target).addListener(target,type,listener,self,capture);},removeListener:function(target,type,listener,self,capture){this.getManager(target).removeListener(target,type,listener,self,capture);},removeAllListeners:function(target){this.getManager(target).removeAllListeners(target);},hasListener:function(target,type,capture){return this.getManager(target).hasListener(target,type,capture);},createEvent:function(type,clazz,args){if(qx.core.Variant.isSet("qx.debug","on")){if(arguments.length>1&&clazz===undefined){throw new Error("Create event of type "+type+" with undefined class. Please use null to explicit fallback to default event type!");}}if(clazz==null){clazz=qx.event.type.Event;}var obj=qx.event.Pool.getInstance().getObject(clazz);if(!obj){return;}args?obj.init.apply(obj,args):obj.init();if(type){obj.setType(type);}return obj;},dispatchEvent:function(target,event){return this.getManager(target).dispatchEvent(target,event);},fireEvent:function(target,type,clazz,args){if(qx.core.Variant.isSet("qx.debug","on")){if(arguments.length>2&&clazz===undefined&&args!==undefined){throw new Error("Create event of type "+type+" with undefined class. Please use null to explicit fallback to default event type!");}var msg="Could not fire event '"+type+"' on target '"+target+"': ";qx.core.Assert.assertNotUndefined(target,msg+"Invalid event target.");qx.core.Assert.assertNotNull(target,msg+"Invalid event target.");}var evt=this.createEvent(type,clazz||null,args);return this.getManager(target).dispatchEvent(target,evt);},fireNonBubblingEvent:function(target,type,clazz,args){if(qx.core.Variant.isSet("qx.debug","on")){if(arguments.length>2&&clazz===undefined&&args!==undefined){throw new Error("Create event of type "+type+" with undefined class. Please use null to explicit fallback to default event type!");}}var mgr=this.getManager(target);if(!mgr.hasListener(target,type,false)){return true;}var evt=this.createEvent(type,clazz||null,args);return mgr.dispatchEvent(target,evt);},PRIORITY_FIRST:-32000,PRIORITY_NORMAL:0,PRIORITY_LAST:32000,__handlers:[],addHandler:function(handler){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertInterface(handler,qx.event.IEventHandler,"Invalid event handler.");}this.__handlers.push(handler);this.__handlers.sort(function(a,b){return a.PRIORITY-b.PRIORITY;});},getHandlers:function(){return this.__handlers;},__dispatchers:[],addDispatcher:function(dispatcher,priority){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertInterface(dispatcher,qx.event.IEventDispatcher,"Invalid event dispatcher!");}this.__dispatchers.push(dispatcher);this.__dispatchers.sort(function(a,b){return a.PRIORITY-b.PRIORITY;});},getDispatchers:function(){return this.__dispatchers;}}});qx.Class.define("qx.core.Property",{statics:{__checks:{"Boolean":'qx.core.Assert.assertBoolean(value, msg) || true',"String":'qx.core.Assert.assertString(value, msg) || true',"Number":'qx.core.Assert.assertNumber(value, msg) || true',"Integer":'qx.core.Assert.assertInteger(value, msg) || true',"PositiveNumber":'qx.core.Assert.assertPositiveNumber(value, msg) || true',"PositiveInteger":'qx.core.Assert.assertPositiveInteger(value, msg) || true',"Error":'qx.core.Assert.assertInstance(value, Error, msg) || true',"RegExp":'qx.core.Assert.assertInstance(value, RegExp, msg) || true',"Object":'qx.core.Assert.assertObject(value, msg) || true',"Array":'qx.core.Assert.assertArray(value, msg) || true',"Map":'qx.core.Assert.assertMap(value, msg) || true',"Function":'qx.core.Assert.assertFunction(value, msg) || true',"Date":'qx.core.Assert.assertInstance(value, Date, msg) || true',"Node":'value !== null && value.nodeType !== undefined',"Element":'value !== null && value.nodeType === 1 && value.attributes',"Document":'value !== null && value.nodeType === 9 && value.documentElement',"Window":'value !== null && value.document',"Event":'value !== null && value.type !== undefined',"Class":'value !== null && value.$$type === "Class"',"Mixin":'value !== null && value.$$type === "Mixin"',"Interface":'value !== null && value.$$type === "Interface"',"Theme":'value !== null && value.$$type === "Theme"',"Color":'(typeof value === "string" || value instanceof String) && qx.util.ColorUtil.isValidPropertyValue(value)',"Decorator":'value !== null && qx.theme.manager.Decoration.getInstance().isValidPropertyValue(value)',"Font":'value !== null && qx.theme.manager.Font.getInstance().isDynamic(value)'},__dispose:{"Object":true,"Array":true,"Map":true,"Function":true,"Date":true,"Node":true,"Element":true,"Document":true,"Window":true,"Event":true,"Class":true,"Mixin":true,"Interface":true,"Theme":true,"Font":true,"Decorator":true},$$inherit:"inherit",$$store:{runtime:{},user:{},theme:{},inherit:{},init:{},useinit:{}},$$method:{get:{},set:{},reset:{},init:{},refresh:{},setRuntime:{},resetRuntime:{},setThemed:{},resetThemed:{}},$$allowedKeys:{name:"string",dispose:"boolean",inheritable:"boolean",nullable:"boolean",themeable:"boolean",refine:"boolean",init:null,apply:"string",event:"string",check:null,transform:"string",deferredInit:"boolean"},$$allowedGroupKeys:{name:"string",group:"object",mode:"string",themeable:"boolean"},$$inheritable:{},refresh:function(widget){var parent=widget.getLayoutParent();if(parent){var clazz=widget.constructor;var inherit=this.$$store.inherit;var init=this.$$store.init;var refresh=this.$$method.refresh;var properties;var value;if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.propertyDebugLevel")>1){widget.debug("Update property inheritance");}}while(clazz){properties=clazz.$$properties;if(properties){for(var name in this.$$inheritable){if(properties[name]&&widget[refresh[name]]){value=parent[inherit[name]];if(value===undefined){value=parent[init[name]];}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.propertyDebugLevel")>2){widget.debug("Updating property: "+name+" to '"+value+"'");}}widget[refresh[name]](value);}}}clazz=clazz.superclass;}}},attach:function(clazz){var properties=clazz.$$properties;if(properties){for(var name in properties){this.attachMethods(clazz,name,properties[name]);}}clazz.$$propertiesAttached=true;},attachMethods:function(clazz,name,config){config.group?this.__attachGroupMethods(clazz,config,name):this.__attachPropertyMethods(clazz,config,name);},__attachGroupMethods:function(clazz,config,name){var upname=qx.lang.String.firstUp(name);var members=clazz.prototype;var themeable=config.themeable===true;if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.propertyDebugLevel")>1){qx.log.Logger.debug("Generating property group: "+name);}}var setter=[];var resetter=[];if(themeable){var styler=[];var unstyler=[];}var argHandler="var a=arguments[0] instanceof Array?arguments[0]:arguments;";setter.push(argHandler);if(themeable){styler.push(argHandler);}if(config.mode=="shorthand"){var shorthand="a=qx.lang.Array.fromShortHand(qx.lang.Array.fromArguments(a));";setter.push(shorthand);if(themeable){styler.push(shorthand);}}for(var i=0,a=config.group,l=a.length;i<l;i++){if(qx.core.Variant.isSet("qx.debug","on")){if(!this.$$method.set[a[i]]||!this.$$method.reset[a[i]]){throw new Error("Cannot create property group '"+name+"' including non-existing property '"+a[i]+"'!");}}setter.push("this.",this.$$method.set[a[i]],"(a[",i,"]);");resetter.push("this.",this.$$method.reset[a[i]],"();");if(themeable){if(qx.core.Variant.isSet("qx.debug","on")){if(!this.$$method.setThemed[a[i]]){throw new Error("Cannot add the non themable property '"+a[i]+"' to the themable property group '"+name+"'");}}styler.push("this.",this.$$method.setThemed[a[i]],"(a[",i,"]);");unstyler.push("this.",this.$$method.resetThemed[a[i]],"();");}}this.$$method.set[name]="set"+upname;members[this.$$method.set[name]]=new Function(setter.join(""));this.$$method.reset[name]="reset"+upname;members[this.$$method.reset[name]]=new Function(resetter.join(""));if(themeable){this.$$method.setThemed[name]="setThemed"+upname;members[this.$$method.setThemed[name]]=new Function(styler.join(""));this.$$method.resetThemed[name]="resetThemed"+upname;members[this.$$method.resetThemed[name]]=new Function(unstyler.join(""));}},__attachPropertyMethods:function(clazz,config,name){var upname=qx.lang.String.firstUp(name);var members=clazz.prototype;if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.propertyDebugLevel")>1){qx.log.Logger.debug("Generating property wrappers: "+name);}}if(config.dispose===undefined&&typeof config.check==="string"){config.dispose=this.__dispose[config.check]||qx.Class.isDefined(config.check)||qx.Interface.isDefined(config.check);}var method=this.$$method;var store=this.$$store;store.runtime[name]="$$runtime_"+name;store.user[name]="$$user_"+name;store.theme[name]="$$theme_"+name;store.init[name]="$$init_"+name;store.inherit[name]="$$inherit_"+name;store.useinit[name]="$$useinit_"+name;method.get[name]="get"+upname;members[method.get[name]]=function(){return qx.core.Property.executeOptimizedGetter(this,clazz,name,"get");};method.set[name]="set"+upname;members[method.set[name]]=function(value){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"set",arguments);};method.reset[name]="reset"+upname;members[method.reset[name]]=function(){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"reset");};if(config.inheritable||config.apply||config.event||config.deferredInit){method.init[name]="init"+upname;members[method.init[name]]=function(value){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"init",arguments);};}if(config.inheritable){method.refresh[name]="refresh"+upname;members[method.refresh[name]]=function(value){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"refresh",arguments);};}method.setRuntime[name]="setRuntime"+upname;members[method.setRuntime[name]]=function(value){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"setRuntime",arguments);};method.resetRuntime[name]="resetRuntime"+upname;members[method.resetRuntime[name]]=function(){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"resetRuntime");};if(config.themeable){method.setThemed[name]="setThemed"+upname;members[method.setThemed[name]]=function(value){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"setThemed",arguments);};method.resetThemed[name]="resetThemed"+upname;members[method.resetThemed[name]]=function(){return qx.core.Property.executeOptimizedSetter(this,clazz,name,"resetThemed");};}if(config.check==="Boolean"){members["toggle"+upname]=new Function("return this."+method.set[name]+"(!this."+method.get[name]+"())");members["is"+upname]=new Function("return this."+method.get[name]+"()");}},__errors:{0:'Could not change or apply init value after constructing phase!',1:'Requires exactly one argument!',2:'Undefined value is not allowed!',3:'Does not allow any arguments!',4:'Null value is not allowed!',5:'Is invalid!'},error:function(obj,id,property,variant,value){var classname=obj.constructor.classname;var msg="Error in property "+property+" of class "+classname+" in method "+this.$$method[variant][property]+" with incoming value '"+value+"': ";throw new Error(msg+(this.__errors[id]||"Unknown reason: "+id));},__unwrapFunctionFromCode:function(instance,members,name,variant,code,args){var store=this.$$method[variant][name];if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.propertyDebugLevel")>1){qx.log.Logger.debug("Code["+this.$$method[variant][name]+"]: "+code.join(""));}try{members[store]=new Function("value",code.join(""));}catch(ex){alert("Malformed generated code to unwrap method: "+this.$$method[variant][name]+"\n"+code.join(""));}}else{members[store]=new Function("value",code.join(""));}if(qx.core.Variant.isSet("qx.aspects","on")){members[store]=qx.core.Aspect.wrap(instance.classname+"."+store,members[store],"property");}if(args===undefined){return instance[store]();}else if(qx.core.Variant.isSet("qx.debug","on")){return instance[store].apply(instance,args);}else{return instance[store](args[0]);}},executeOptimizedGetter:function(instance,clazz,name,variant){var config=clazz.$$properties[name];var members=clazz.prototype;var code=[];var store=this.$$store;code.push('if(this.',store.runtime[name],'!==undefined)');code.push('return this.',store.runtime[name],';');if(config.inheritable){code.push('else if(this.',store.inherit[name],'!==undefined)');code.push('return this.',store.inherit[name],';');code.push('else ');}code.push('if(this.',store.user[name],'!==undefined)');code.push('return this.',store.user[name],';');if(config.themeable){code.push('else if(this.',store.theme[name],'!==undefined)');code.push('return this.',store.theme[name],';');}if(config.deferredInit&&config.init===undefined){code.push('else if(this.',store.init[name],'!==undefined)');code.push('return this.',store.init[name],';');}code.push('else ');if(config.init!==undefined){if(config.inheritable){code.push('var init=this.',store.init[name],';');if(config.nullable){code.push('if(init==qx.core.Property.$$inherit)init=null;');}else if(config.init!==undefined){code.push('return this.',store.init[name],';');}else{code.push('if(init==qx.core.Property.$$inherit)throw new Error("Inheritable property ',name,' of an instance of ',clazz.classname,' is not (yet) ready!");');}code.push('return init;');}else{code.push('return this.',store.init[name],';');}}else if(config.inheritable||config.nullable){code.push('return null;');}else{code.push('throw new Error("Property ',name,' of an instance of ',clazz.classname,' is not (yet) ready!");');}return this.__unwrapFunctionFromCode(instance,members,name,variant,code);},executeOptimizedSetter:function(instance,clazz,name,variant,args){var config=clazz.$$properties[name];var members=clazz.prototype;var code=[];var incomingValue=variant==="set"||variant==="setThemed"||variant==="setRuntime"||(variant==="init"&&config.init===undefined);var resetValue=variant==="reset"||variant==="resetThemed"||variant==="resetRuntime";var hasCallback=config.apply||config.event||config.inheritable;if(variant==="setRuntime"||variant==="resetRuntime"){var store=this.$$store.runtime[name];}else if(variant==="setThemed"||variant==="resetThemed"){var store=this.$$store.theme[name];}else if(variant==="init"){var store=this.$$store.init[name];}else{var store=this.$$store.user[name];}if(qx.core.Variant.isSet("qx.debug","on")){code.push('var prop=qx.core.Property;');if(variant==="init"){code.push('if(this.$$initialized)prop.error(this,0,"',name,'","',variant,'",value);');}if(variant==="refresh"){}else if(incomingValue){code.push('if(arguments.length!==1)prop.error(this,1,"',name,'","',variant,'",value);');code.push('if(value===undefined)prop.error(this,2,"',name,'","',variant,'",value);');}else{code.push('if(arguments.length!==0)prop.error(this,3,"',name,'","',variant,'",value);');}}else{if(!config.nullable||config.check||config.inheritable){code.push('var prop=qx.core.Property;');}if(variant==="set"){code.push('if(value===undefined)prop.error(this,2,"',name,'","',variant,'",value);');}}if(incomingValue){if(config.transform){code.push('value=this.',config.transform,'(value);');}}if(hasCallback){if(incomingValue){code.push('if(this.',store,'===value)return value;');}else if(resetValue){code.push('if(this.',store,'===undefined)return;');}}if(config.inheritable){code.push('var inherit=prop.$$inherit;');}if(qx.core.Variant.isSet("qx.debug","on")){if(incomingValue){if(!config.nullable){code.push('if(value===null)prop.error(this,4,"',name,'","',variant,'",value);');}if(config.check!==undefined){code.push('var msg = "Invalid incoming value for property \''+name+'\' of class \''+clazz.classname+'\'";');if(config.nullable){code.push('if(value!==null)');}if(config.inheritable){code.push('if(value!==inherit)');}code.push('if(');if(this.__checks[config.check]!==undefined){code.push('!(',this.__checks[config.check],')');}else if(qx.Class.isDefined(config.check)){code.push('qx.core.Assert.assertInstance(value, qx.Class.getByName("',config.check,'"), msg)');}else if(qx.Interface&&qx.Interface.isDefined(config.check)){code.push('qx.core.Assert.assertInterface(value, qx.Interface.getByName("',config.check,'"), msg)');}else if(typeof config.check==="function"){code.push('!',clazz.classname,'.$$properties.',name);code.push('.check.call(this, value)');}else if(typeof config.check==="string"){code.push('!(',config.check,')');}else if(config.check instanceof Array){code.push('qx.core.Assert.assertInArray(value, ',clazz.classname,'.$$properties.',name,'.check, msg)');}else{throw new Error("Could not add check to property "+name+" of class "+clazz.classname);}code.push(')prop.error(this,5,"',name,'","',variant,'",value);');}}}if(!hasCallback){if(variant==="setRuntime"){code.push('this.',this.$$store.runtime[name],'=value;');}else if(variant==="resetRuntime"){code.push('if(this.',this.$$store.runtime[name],'!==undefined)');code.push('delete this.',this.$$store.runtime[name],';');}else if(variant==="set"){code.push('this.',this.$$store.user[name],'=value;');}else if(variant==="reset"){code.push('if(this.',this.$$store.user[name],'!==undefined)');code.push('delete this.',this.$$store.user[name],';');}else if(variant==="setThemed"){code.push('this.',this.$$store.theme[name],'=value;');}else if(variant==="resetThemed"){code.push('if(this.',this.$$store.theme[name],'!==undefined)');code.push('delete this.',this.$$store.theme[name],';');}else if(variant==="init"&&incomingValue){code.push('this.',this.$$store.init[name],'=value;');}}else{if(config.inheritable){code.push('var computed, old=this.',this.$$store.inherit[name],';');}else{code.push('var computed, old;');}code.push('if(this.',this.$$store.runtime[name],'!==undefined){');if(variant==="setRuntime"){code.push('computed=this.',this.$$store.runtime[name],'=value;');}else if(variant==="resetRuntime"){code.push('delete this.',this.$$store.runtime[name],';');code.push('if(this.',this.$$store.user[name],'!==undefined)');code.push('computed=this.',this.$$store.user[name],';');code.push('else if(this.',this.$$store.theme[name],'!==undefined)');code.push('computed=this.',this.$$store.theme[name],';');code.push('else if(this.',this.$$store.init[name],'!==undefined){');code.push('computed=this.',this.$$store.init[name],';');code.push('this.',this.$$store.useinit[name],'=true;');code.push('}');}else{code.push('old=computed=this.',this.$$store.runtime[name],';');if(variant==="set"){code.push('this.',this.$$store.user[name],'=value;');}else if(variant==="reset"){code.push('delete this.',this.$$store.user[name],';');}else if(variant==="setThemed"){code.push('this.',this.$$store.theme[name],'=value;');}else if(variant==="resetThemed"){code.push('delete this.',this.$$store.theme[name],';');}else if(variant==="init"&&incomingValue){code.push('this.',this.$$store.init[name],'=value;');}}code.push('}');code.push('else if(this.',this.$$store.user[name],'!==undefined){');if(variant==="set"){if(!config.inheritable){code.push('old=this.',this.$$store.user[name],';');}code.push('computed=this.',this.$$store.user[name],'=value;');}else if(variant==="reset"){if(!config.inheritable){code.push('old=this.',this.$$store.user[name],';');}code.push('delete this.',this.$$store.user[name],';');code.push('if(this.',this.$$store.runtime[name],'!==undefined)');code.push('computed=this.',this.$$store.runtime[name],';');code.push('if(this.',this.$$store.theme[name],'!==undefined)');code.push('computed=this.',this.$$store.theme[name],';');code.push('else if(this.',this.$$store.init[name],'!==undefined){');code.push('computed=this.',this.$$store.init[name],';');code.push('this.',this.$$store.useinit[name],'=true;');code.push('}');}else{if(variant==="setRuntime"){code.push('computed=this.',this.$$store.runtime[name],'=value;');}else if(config.inheritable){code.push('computed=this.',this.$$store.user[name],';');}else{code.push('old=computed=this.',this.$$store.user[name],';');}if(variant==="setThemed"){code.push('this.',this.$$store.theme[name],'=value;');}else if(variant==="resetThemed"){code.push('delete this.',this.$$store.theme[name],';');}else if(variant==="init"&&incomingValue){code.push('this.',this.$$store.init[name],'=value;');}}code.push('}');if(config.themeable){code.push('else if(this.',this.$$store.theme[name],'!==undefined){');if(!config.inheritable){code.push('old=this.',this.$$store.theme[name],';');}if(variant==="setRuntime"){code.push('computed=this.',this.$$store.runtime[name],'=value;');}else if(variant==="set"){code.push('computed=this.',this.$$store.user[name],'=value;');}else if(variant==="setThemed"){code.push('computed=this.',this.$$store.theme[name],'=value;');}else if(variant==="resetThemed"){code.push('delete this.',this.$$store.theme[name],';');code.push('if(this.',this.$$store.init[name],'!==undefined){');code.push('computed=this.',this.$$store.init[name],';');code.push('this.',this.$$store.useinit[name],'=true;');code.push('}');}else if(variant==="init"){if(incomingValue){code.push('this.',this.$$store.init[name],'=value;');}code.push('computed=this.',this.$$store.theme[name],';');}else if(variant==="refresh"){code.push('computed=this.',this.$$store.theme[name],';');}code.push('}');}code.push('else if(this.',this.$$store.useinit[name],'){');if(!config.inheritable){code.push('old=this.',this.$$store.init[name],';');}if(variant==="init"){if(incomingValue){code.push('computed=this.',this.$$store.init[name],'=value;');}else{code.push('computed=this.',this.$$store.init[name],';');}}else if(variant==="set"||variant==="setRuntime"||variant==="setThemed"||variant==="refresh"){code.push('delete this.',this.$$store.useinit[name],';');if(variant==="setRuntime"){code.push('computed=this.',this.$$store.runtime[name],'=value;');}else if(variant==="set"){code.push('computed=this.',this.$$store.user[name],'=value;');}else if(variant==="setThemed"){code.push('computed=this.',this.$$store.theme[name],'=value;');}else if(variant==="refresh"){code.push('computed=this.',this.$$store.init[name],';');}}code.push('}');if(variant==="set"||variant==="setRuntime"||variant==="setThemed"||variant==="init"){code.push('else{');if(variant==="setRuntime"){code.push('computed=this.',this.$$store.runtime[name],'=value;');}else if(variant==="set"){code.push('computed=this.',this.$$store.user[name],'=value;');}else if(variant==="setThemed"){code.push('computed=this.',this.$$store.theme[name],'=value;');}else if(variant==="init"){if(incomingValue){code.push('computed=this.',this.$$store.init[name],'=value;');}else{code.push('computed=this.',this.$$store.init[name],';');}code.push('this.',this.$$store.useinit[name],'=true;');}code.push('}');}}if(config.inheritable){code.push('if(computed===undefined||computed===inherit){');if(variant==="refresh"){code.push('computed=value;');}else{code.push('var pa=this.getLayoutParent();if(pa)computed=pa.',this.$$store.inherit[name],';');}code.push('if((computed===undefined||computed===inherit)&&');code.push('this.',this.$$store.init[name],'!==undefined&&');code.push('this.',this.$$store.init[name],'!==inherit){');code.push('computed=this.',this.$$store.init[name],';');code.push('this.',this.$$store.useinit[name],'=true;');code.push('}else{');code.push('delete this.',this.$$store.useinit[name],';}');code.push('}');code.push('if(old===computed)return value;');code.push('if(computed===inherit){');code.push('computed=undefined;delete this.',this.$$store.inherit[name],';');code.push('}');code.push('else if(computed===undefined)');code.push('delete this.',this.$$store.inherit[name],';');code.push('else this.',this.$$store.inherit[name],'=computed;');code.push('var backup=computed;');code.push('if(old===undefined)old=null;');code.push('if(computed===undefined||computed==inherit)computed=null;');}else if(hasCallback){if(variant!=="set"&&variant!=="setRuntime"&&variant!=="setThemed"){code.push('if(computed===undefined)computed=null;');}code.push('if(old===computed)return value;');code.push('if(old===undefined)old=null;');}if(hasCallback){if(config.apply){code.push('this.',config.apply,'(computed, old, "',name,'");');}if(config.event){code.push("var reg=qx.event.Registration;","if(reg.hasListener(this, '",config.event,"')){","reg.fireEvent(this, '",config.event,"', qx.event.type.Data, [computed, old]",")}");}if(config.inheritable&&members._getChildren){code.push('var a=this._getChildren();if(a)for(var i=0,l=a.length;i<l;i++){');code.push('if(a[i].',this.$$method.refresh[name],')a[i].',this.$$method.refresh[name],'(backup);');code.push('}');}}if(incomingValue){code.push('return value;');}return this.__unwrapFunctionFromCode(instance,members,name,variant,code,args);}},settings:{"qx.propertyDebugLevel":0}});qx.Bootstrap.define("qx.core.ObjectRegistry",{statics:{__registry:{},__nextHash:0,inShutDown:false,__freeHashes:[],register:function(obj){var registry=this.__registry;if(!registry){return;}var hash=obj.$$hash;if(hash==null){var cache=this.__freeHashes;if(cache.length>0){hash=cache.pop();}else{hash=(this.__nextHash++).toString(36);}obj.$$hash=hash;}if(qx.core.Variant.isSet("qx.debug","on")){if(!obj.dispose){throw new Error("Invalid object: "+obj);}}registry[hash]=obj;},unregister:function(obj){var hash=obj.$$hash;if(hash==null){return;}var registry=this.__registry;if(registry&&registry[hash]){delete registry[hash];this.__freeHashes.push(hash);}},toHashCode:function(obj){if(qx.core.Variant.isSet("qx.debug","on")){if(obj==null){qx.log.Logger.trace(this);throw new Error("Invalid object: "+obj);}}var hash=obj.$$hash;if(hash!=null){return hash;}var cache=this.__freeHashes;if(cache.length>0){hash=cache.pop();}else{hash=(this.__nextHash++).toString(36);}return obj.$$hash=hash;},fromHashCode:function(hash){return this.__registry[hash]||null;},shutdown:function(){this.inShutDown=true;var registry=this.__registry;var hashes=[];for(var hash in registry){hashes.push(hash);}hashes.sort(function(a,b){return parseInt(b,36)-parseInt(a,36);});var obj,i=0,l=hashes.length;while(true){try{for(;i<l;i++){hash=hashes[i];obj=registry[hash];if(obj&&obj.dispose){obj.dispose();}}}catch(ex){qx.log.Logger.error(this,"Could not dispose object "+obj.toString()+": "+ex);if(i!==0){continue;}}break;}qx.log.Logger.debug(this,"Disposed "+l+" objects");delete this.__registry;},getRegistry:function(){return this.__registry;}}});qx.Class.define("qx.core.Assert",{statics:{__assert:function(condition,comment,msg){if(!condition){var errorMsg="Assertion error! "+comment+": "+msg;qx.log.Logger.error(errorMsg);if(qx.Class.isDefined("qx.core.AssertionError")){var err=new qx.core.AssertionError(comment,msg);qx.log.Logger.error("Stack trace: \n"+err.getStackTrace());throw err;}else{throw new Error(errorMsg);}}},assert:function(condition,msg){this.__assert(condition==true,msg||"","Called assert with 'false'");},fail:function(msg){this.__assert(false,msg||"","Called fail().");},assertTrue:function(value,msg){this.__assert(value===true,msg||"","Called assertTrue with 'false'");},assertFalse:function(value,msg){this.__assert(value===false,msg||"","Called assertFalse with 'true'");},assertEquals:function(expected,found,msg){this.__assert(expected==found,msg||"","Expected '"+expected+"' but found '"+found+"'!");},assertIdentical:function(expected,found,msg){this.__assert(expected===found,msg||"","Expected '"+expected+"' (identical) but found '"+found+"'!");},assertNotIdentical:function(expected,found,msg){this.__assert(expected!==found,msg||"","Expected '"+expected+"' to be not identical with '"+found+"'!");},assertNotUndefined:function(value,msg){this.__assert(value!==undefined,msg||"","Expected value not to be undefined but found "+value+"!");},assertUndefined:function(value,msg){this.__assert(value===undefined,msg||"","Expected value to be undefined but found "+value+"!");},assertNotNull:function(value,msg){this.__assert(value!==null,msg||"","Expected value not to be null but found "+value+"!");},assertNull:function(value,msg){this.__assert(value===null,msg||"","Expected value to be null but found "+value+"!");},assertJsonEquals:function(expected,found,msg){this.assertEquals(qx.util.Json.stringify(expected),qx.util.Json.stringify(found),msg);},assertMatch:function(str,re,msg){this.assertString(str);this.__assert(str.search(re)>=0?true:false,msg||"","The String '"+str+"' does not match the regular expression '"+re.toString()+"'!");},assertArgumentsCount:function(args,minCount,maxCount,msg){var argCount=args.length;this.__assert((argCount>=minCount&&argCount<=maxCount),msg||"","Wrong number of arguments given. Expected '"+minCount+"' to '"+maxCount+"' arguments but found '"+arguments.length+"' arguments.");},assertException:function(callback,exception,re,msg){var exception=exception||Error;var error;qx.log.Logger.warn("This exception is expected:");try{callback();}catch(e){error=e;}if(error==null){this.__assert(false,msg||"","The function did not raise an exception!");}this.__assert(error instanceof exception,msg||"","The raised exception does not have the expected type!");if(re){this.assertMatch(error.toString(),re,msg);}},assertInArray:function(value,array,msg){this.__assert(array.indexOf(value)!==-1,msg||"","The value '"+value+"' must have any of the values defined in the array '"+array.join(", ")+"'");},assertKeyInMap:function(value,map,msg){this.__assert(map[value]!==undefined,msg||"","The value '"+value+"' must must be a key of the map '"+qx.util.Json.stringify(map)+"'");},assertFunction:function(value,msg){this.__assert(typeof value==="function",msg||"","Expected value to be typeof function but found "+value+"!");},assertString:function(value,msg){this.__assert(typeof value==="string"||value instanceof String,msg||"","Expected value to be a string but found "+value+"!");},assertBoolean:function(value,msg){this.__assert(typeof value==="boolean"||value instanceof Boolean,msg||"","Expected value to be a boolean but found "+value+"!");},assertNumber:function(value,msg){this.__assert((typeof value==="number"||value instanceof Number)&&isFinite(value),msg||"","Expected value to be a number but found "+value+"!");},assertPositiveNumber:function(value,msg){this.__assert((typeof value==="number"||value instanceof Number)&&isFinite(value)&&value>=0,msg||"","Expected value to be a number >= 0 but found "+value+"!");},assertInteger:function(value,msg){this.__assert(((typeof value==="number"||value instanceof Number)&&isFinite(value)&&value%1===0),msg||"","Expected value to be an integer but found "+value+"!");},assertPositiveInteger:function(value,msg){this.__assert(((typeof value==="number"||value instanceof Number)&&isFinite(value)&&value%1===0&&value>=0),msg||"","Expected value to be an integer >= 0 but found "+value+"!");},assertInRange:function(value,min,max,msg){this.__assert(value>=min&&value<=max,msg||"",qx.lang.String.format("Expected value '%1' to be in the range '%2'..'%3'!",[value,min,max]));},assertObject:function(value,msg){this.__assert(typeof value==="object"&&value!==null,msg||"","Expected value to be typeof object but found "+value+"!");},assertArray:function(value,msg){this.__assert(value instanceof Array,msg||"","Expected value to be an array but found "+value+"!");},assertMap:function(value,msg){var objConstructor=({}).constructor;this.__assert(value&&value.constructor===objConstructor,msg||"","Expected value to be a map but found "+value+"!");},assertType:function(value,type,msg){this.__assert(typeof (value)===type,msg||"","Expected value to be typeof '"+type+"' but found "+value+"!");},assertInstance:function(value,clazz,msg){var className=clazz.classname||clazz+"";this.__assert(value instanceof clazz,msg||"","Expected value to be instanceof '"+className+"' but found "+value+"!");},assertInterface:function(value,iface,msg){this.__assert(qx.Class.implementsInterface(value.constructor,iface),msg||"","Expected object '"+value+"' to implement the interface '"+iface+"'!");},assertCssColor:function(expected,value,msg){var ColorUtil=qx.util.ColorUtil;var expectedRgb=ColorUtil.stringToRgb(expected);try{var valueRgb=ColorUtil.stringToRgb(value);}catch(e){this.__assert(false,msg||"",qx.lang.String.format("Expected value to be the CSS color '%1' (rgb(%2)), but found value '%3', which cannot be converted to a CSS color!",[expected,expectedRgb.join(","),value]));}this.__assert(expectedRgb[0]==valueRgb[0]&&expectedRgb[1]==valueRgb[1]&&expectedRgb[2]==valueRgb[2],msg||"",qx.lang.String.format("Expected value to be the CSS color '%1' (rgb(%2)), but found value '%3' (rgb(%4))!",[expected,expectedRgb.join(","),value,valueRgb.join(",")]));},assertElement:function(value,msg){this.__assert(qx.dom.Node.isElement(value),msg||"",qx.lang.String.format("Expected value to be a DOM element but found  '%1'!",[value]));},assertQxObject:function(value,msg){this.__assert(value instanceof qx.core.Object,msg||"","Expected value to be a qooxdoo object but found "+value+"!");},assertQxWidget:function(value,msg){this.__assert(value instanceof qx.ui.core.Widget,msg||"","Expected value to be a qooxdoo widget but found "+value+"!");}}});qx.Class.define("qx.Mixin",{statics:{define:function(name,config){if(config){if(config.include&&!(config.include instanceof Array)){config.include=[config.include];}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateConfig(name,config);}var mixin=config.statics?config.statics:{};for(var key in mixin){mixin[key].mixin=mixin;}if(config.construct){mixin.$$constructor=config.construct;}if(config.include){mixin.$$includes=config.include;}if(config.properties){mixin.$$properties=config.properties;}if(config.members){mixin.$$members=config.members;}for(var key in mixin.$$members){if(mixin.$$members[key] instanceof Function){mixin.$$members[key].mixin=mixin;}}if(config.events){mixin.$$events=config.events;}if(config.destruct){mixin.$$destructor=config.destruct;}}else{var mixin={};}mixin.$$type="Mixin";mixin.name=name;mixin.toString=this.genericToString;mixin.basename=qx.Bootstrap.createNamespace(name,mixin);this.$$registry[name]=mixin;return mixin;},checkCompatibility:function(mixins){var list=this.flatten(mixins);var len=list.length;if(len<2){return true;}var properties={};var members={};var events={};var mixin;for(var i=0;i<len;i++){mixin=list[i];for(var key in mixin.events){if(events[key]){throw new Error('Conflict between mixin "'+mixin.name+'" and "'+events[key]+'" in member "'+key+'"!');}events[key]=mixin.name;}for(var key in mixin.properties){if(properties[key]){throw new Error('Conflict between mixin "'+mixin.name+'" and "'+properties[key]+'" in property "'+key+'"!');}properties[key]=mixin.name;}for(var key in mixin.members){if(members[key]){throw new Error('Conflict between mixin "'+mixin.name+'" and "'+members[key]+'" in member "'+key+'"!');}members[key]=mixin.name;}}return true;},isCompatible:function(mixin,clazz){var list=qx.Class.getMixins(clazz);list.push(mixin);return qx.Mixin.checkCompatibility(list);},getByName:function(name){return this.$$registry[name];},isDefined:function(name){return this.getByName(name)!==undefined;},getTotalNumber:function(){return qx.lang.Object.getLength(this.$$registry);},flatten:function(mixins){if(!mixins){return [];}var list=mixins.concat();for(var i=0,l=mixins.length;i<l;i++){if(mixins[i].$$includes){list.push.apply(list,this.flatten(mixins[i].$$includes));}}return list;},genericToString:function(){return "[Mixin "+this.name+"]";},$$registry:{},__allowedKeys:qx.core.Variant.select("qx.debug",{"on":{"include":"object","statics":"object","members":"object","properties":"object","events":"object","destruct":"function","construct":"function"},"default":null}),__validateConfig:qx.core.Variant.select("qx.debug",{"on":function(name,config){var allowed=this.__allowedKeys;for(var key in config){if(!allowed[key]){throw new Error('The configuration key "'+key+'" in mixin "'+name+'" is not allowed!');}if(config[key]==null){throw new Error('Invalid key "'+key+'" in mixin "'+name+'"! The value is undefined/null!');}if(allowed[key]!==null&&typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" in mixin "'+name+'"! The type of the key must be "'+allowed[key]+'"!');}}var maps=["statics","members","properties","events"];for(var i=0,l=maps.length;i<l;i++){var key=maps[i];if(config[key]!==undefined&&(config[key] instanceof Array||config[key] instanceof RegExp||config[key] instanceof Date||config[key].classname!==undefined)){throw new Error('Invalid key "'+key+'" in mixin "'+name+'"! The value needs to be a map!');}}if(config.include){for(var i=0,a=config.include,l=a.length;i<l;i++){if(a[i]==null){throw new Error("Includes of mixins must be mixins. The include number '"+(i+1)+"' in mixin '"+name+"'is undefined/null!");}if(a[i].$$type!=="Mixin"){throw new Error("Includes of mixins must be mixins. The include number '"+(i+1)+"' in mixin '"+name+"'is not a mixin!");}}this.checkCompatibility(config.include);}},"default":function(){}})}});qx.Mixin.define("qx.core.MAssert",{members:{assert:function(condition,msg){qx.core.Assert.assert(condition,msg);},fail:function(msg){qx.core.Assert.fail(msg);},assertTrue:function(value,msg){qx.core.Assert.assertTrue(value,msg);},assertFalse:function(value,msg){qx.core.Assert.assertFalse(value,msg);},assertEquals:function(expected,found,msg){qx.core.Assert.assertEquals(expected,found,msg);},assertIdentical:function(expected,found,msg){qx.core.Assert.assertIdentical(expected,found,msg);},assertNotIdentical:function(expected,found,msg){qx.core.Assert.assertNotIdentical(expected,found,msg);},assertNotUndefined:function(value,msg){qx.core.Assert.assertNotUndefined(value,msg);},assertUndefined:function(value,msg){qx.core.Assert.assertUndefined(value,msg);},assertNotNull:function(value,msg){qx.core.Assert.assertNotNull(value,msg);},assertNull:function(value,msg){qx.core.Assert.assertNull(value,msg);},assertJsonEquals:function(expected,found,msg){qx.core.Assert.assertJsonEquals(expected,found,msg);},assertMatch:function(str,re,msg){qx.core.Assert.assertMatch(str,re,msg);},assertArgumentsCount:function(args,minCount,maxCount,msg){qx.core.Assert.assertArgumentsCount(args,minCount,maxCount,msg);},assertException:function(callback,exception,re,msg){qx.core.Assert.assertException(callback,exception,re,msg);},assertInArray:function(value,array,msg){qx.core.Assert.assertInArray(value,array,msg);},assertKeyInMap:function(value,map,msg){qx.core.Assert.assertKeyInMap(value,map,msg);},assertFunction:function(value,msg){qx.core.Assert.assertFunction(value,msg);},assertString:function(value,msg){qx.core.Assert.assertString(value,msg);},assertBoolean:function(value,msg){qx.core.Assert.assertBoolean(value,msg);},assertNumber:function(value,msg){qx.core.Assert.assertNumber(value,msg);},assertPositiveNumber:function(value,msg){qx.core.Assert.assertPositiveNumber(value,msg);},assertInteger:function(value,msg){qx.core.Assert.assertInteger(value,msg);},assertPositiveInteger:function(value,msg){qx.core.Assert.assertPositiveInteger(value,msg);},assertInRange:function(value,min,max,msg){qx.core.Assert.assertInRange(value,min,max,msg);},assertObject:function(value,msg){qx.core.Assert.assertObject(value,msg);},assertArray:function(value,msg){qx.core.Assert.assertArray(value,msg);},assertMap:function(value,msg){qx.core.Assert.assertMap(value,msg);},assertType:function(value,type,msg){qx.core.Assert.assertType(value,type,msg);},assertInstance:function(value,clazz,msg){qx.core.Assert.assertInstance(value,clazz,msg);},assertInterface:function(value,iface,msg){qx.core.Assert.assertInterface(value,iface,msg);},assertCssColor:function(expected,value,msg){qx.core.Assert.assertCssColor(expected,value,msg);},assertElement:function(value,msg){qx.core.Assert.assertElement(value,msg);},assertQxObject:function(value,msg){qx.core.Assert.assertQxObject(value,msg);},assertQxWidget:function(value,msg){qx.core.Assert.assertQxWidget(value,msg);}}});qx.Bootstrap.define("qx.log.Logger",{statics:{__treshold:50,__level:"debug",setLevel:function(value){this.__level=value;},getLevel:function(){return this.__level;},setTreshold:function(value){this.__treshold=value;},getTreshold:function(){return this.__treshold;},__appender:{},__id:0,register:function(appender){if(appender.$$id){return;}var id=this.__id++;this.__appender[id]=appender;appender.$$id=id;var buffer=this.__buffer;for(var i=0,l=buffer.length;i<l;i++){appender.process(buffer[i]);}},unregister:function(appender){var id=appender.$$id;if(id==null){return;}delete this.__appender[id];delete appender.$$id;},debug:function(object,message){this.__log("debug",arguments);},info:function(object,message){this.__log("info",arguments);},warn:function(object,message){this.__log("warn",arguments);},error:function(object,message){this.__log("error",arguments);},trace:function(object){this.__log("info",[object,qx.dev.StackTrace.getStackTrace().join("\n")]);},deprecatedMethodWarning:function(fcn,msg){if(qx.core.Variant.isSet("qx.deprecationWarnings","on")){var functionName=qx.lang.Function.getName(fcn);var className=fcn.self?fcn.self.classname:"unknown";this.warn("The method '"+functionName+"' of class '"+className+"' is deprecated: "+msg||"Please consult the API documentation of this method for alternatives.");this.trace();}},deprecatedClassWarning:function(clazz,msg){if(qx.core.Variant.isSet("qx.deprecationWarnings","on")){var className=clazz.self?clazz.self.classname:"unknown";this.warn("The method class '"+className+"' is deprecated: "+msg||"Please consult the API documentation of this class for alternatives.");this.trace();}},clear:function(){this.__buffer=[];},__buffer:[],__levels:{debug:0,info:1,warn:2,error:3},__log:function(level,args){var levels=this.__levels;if(levels[level]<levels[this.__level]){return;}var object=args.length<2?null:args[0];var start=object?1:0;var items=[];for(var i=start,l=args.length;i<l;i++){items.push(this.__serialize(args[i],true));}var time=new Date;var entry={time:time,offset:time-qx.Bootstrap.LOADSTART,level:level,items:items};if(object){if(object instanceof qx.core.Object){entry.object=object.$$hash;}else if(object.$$type){entry.clazz=object;}}var buffer=this.__buffer;buffer.push(entry);if(buffer.length>(this.__treshold+10)){buffer.splice(this.__treshold,buffer.length);}var appender=this.__appender;for(var id in appender){appender[id].process(entry);}},__detect:function(value){if(value===undefined){return "undefined";}else if(value===null){return "null";}if(value.$$type){return "class";}var type=typeof value;if(type==="function"||type=="string"||type==="number"||type==="boolean"){return type;}else if(type==="object"){if(value.nodeType){return "node";}else if(value.classname){return "instance";}else if(value instanceof Array){return "array";}else if(value instanceof Error){return "error";}else{return "map";}}if(value.toString){return "stringify";}return "unknown";},__serialize:function(value,deep){var type=this.__detect(value);var text="unknown";switch(type){case "null":case "undefined":text=type;break;case "string":case "number":case "boolean":text=value;break;case "node":if(value.nodeType===9){text="document";}else if(value.nodeType===3){text="text["+value.nodeValue+"]";}else if(value.nodeType===1){text=value.nodeName.toLowerCase();if(value.id){text+="#"+value.id;}}else{text="node";}break;case "function":text=qx.lang.Function.getName(value)||type;break;case "instance":text=value.basename+"["+value.$$hash+"]";break;case "class":case "stringify":case "error":text=value.toString();break;case "array":if(deep){text=[];for(var i=0,l=value.length;i<l;i++){if(text.length>20){text.push("...(+"+(l-i)+")");break;}text.push(this.__serialize(value[i],false));}}else{text="[...("+value.length+")]";}break;case "map":if(deep){var temp;var sorted=[];for(var key in value){sorted.push(key);}sorted.sort();text=[];for(var i=0,l=sorted.length;i<l;i++){if(text.length>20){text.push("...(+"+(l-i)+")");break;}key=sorted[i];temp=this.__serialize(value[key],false);temp.key=key;text.push(temp);}}else{var number=0;for(var key in value){number++;}text="{...("+number+")}";}break;}return {type:type,text:text};}}});qx.Class.define("qx.core.Object",{extend:Object,construct:function(){qx.core.ObjectRegistry.register(this);},statics:{$$type:"Object"},members:{toHashCode:function(){return this.$$hash;},toString:function(){return this.classname+"["+this.$$hash+"]";},base:function(args,varags){if(arguments.length===1){return args.callee.base.call(this);}else{return args.callee.base.apply(this,Array.prototype.slice.call(arguments,1));}},self:function(args){return args.callee.self;},clone:function(){var clazz=this.constructor;var clone=new clazz;var props=qx.Class.getProperties(clazz);var user=qx.core.Property.$$store.user;var setter=qx.core.Property.$$method.set;var name;for(var i=0,l=props.length;i<l;i++){name=props[i];if(this.hasOwnProperty(user[name])){clone[setter[name]](this[user[name]]);}}return clone;},serialize:function(){var clazz=this.constructor;var props=qx.Class.getProperties(clazz);var user=qx.core.Property.$$store.user;var setter=qx.core.Property.$$method.set;var name;var result={classname:clazz.classname,properties:{}};for(var i=0,l=props.length;i<l;i++){name=props[i];if(this.hasOwnProperty(user[name])){value=this[user[name]];if(value instanceof qx.core.Object){result.properties[name]={$$hash:value.$$hash};}else{result.properties[name]=value;}}}return result;},set:function(data,value){var setter=qx.core.Property.$$method.set;if(typeof data==="string"){if(qx.core.Variant.isSet("qx.debug","on")){if(!this[setter[data]]){this.warn("No such property: "+data);return this;}}return this[setter[data]](value);}else{for(var prop in data){if(qx.core.Variant.isSet("qx.debug","on")){if(!this[setter[prop]]){this.warn("No such property: "+prop);continue;}}this[setter[prop]](data[prop]);}return this;}},get:function(prop){var getter=qx.core.Property.$$method.get;if(qx.core.Variant.isSet("qx.debug","on")){if(!this[getter[prop]]){this.warn("No such property: "+prop);return;}}return this[getter[prop]]();},reset:function(prop){var resetter=qx.core.Property.$$method.reset;if(qx.core.Variant.isSet("qx.debug","on")){if(!this[resetter[prop]]){this.warn("No such property: "+prop);return;}}this[resetter[prop]]();},__Registration:qx.event.Registration,addListener:function(type,listener,self,capture){if(!this.$$disposed){this.__Registration.addListener(this,type,listener,self,capture);}},addListenerOnce:function(type,listener,self,capture){var callback=function(e){listener.call(self||this,e);this.removeListener(type,callback,this,capture);};this.addListener(type,callback,this,capture);},removeListener:function(type,listener,self,capture){if(!this.$$disposed){this.__Registration.removeListener(this,type,listener,self,capture);}},hasListener:function(type,capture){return this.__Registration.hasListener(this,type,capture);},dispatchEvent:function(evt){if(!this.$$disposed){return this.__Registration.dispatchEvent(this,evt);}return true;},fireEvent:function(type,clazz,args){if(!this.$$disposed){return this.__Registration.fireEvent(this,type,clazz,args);}return true;},fireNonBubblingEvent:function(type,clazz,args){if(!this.$$disposed){return this.__Registration.fireNonBubblingEvent(this,type,clazz,args);}return true;},fireDataEvent:function(type,data,oldData,cancelable){if(!this.$$disposed){return this.__Registration.fireNonBubblingEvent(this,type,qx.event.type.Data,[data,oldData||null,!!cancelable]);}return true;},__userData:null,setUserData:function(key,value){if(!this.__userData){this.__userData={};}this.__userData[key]=value;},getUserData:function(key){if(!this.__userData){return null;}return this.__userData[key];},__Logger:qx.log.Logger,debug:function(msg){this.__Logger.debug(this,msg);},info:function(msg){this.__Logger.info(this,msg);},warn:function(msg){this.__Logger.warn(this,msg);},error:function(msg){this.__Logger.error(this,msg);},trace:function(){this.__Logger.trace(this);},isDisposed:function(){return this.$$disposed||false;},dispose:function(){if(this.$$disposed){return;}this.$$disposed=true;if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.disposerDebugLevel")>1){qx.log.Logger.debug(this,"Disposing "+this.classname+"["+this.toHashCode()+"]");}}var clazz=this.constructor;var mixins;while(clazz.superclass){if(clazz.$$destructor){clazz.$$destructor.call(this);}if(clazz.$$includes){mixins=clazz.$$flatIncludes;for(var i=0,l=mixins.length;i<l;i++){if(mixins[i].$$destructor){mixins[i].$$destructor.call(this);}}}clazz=clazz.superclass;}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.disposerDebugLevel")>0){var key,value;for(key in this){value=this[key];if(value!==null&&typeof value==="object"&&!(value instanceof String)){if(this.constructor.prototype[key]!=null){continue;}qx.log.Logger.warn(this,"Missing destruct definition for '"+key+"' in "+this.classname+"["+this.toHashCode()+"]: "+value);delete this[key];}}}}},_disposeFields:function(varargs){qx.util.DisposeUtil.disposeFields(this,arguments);},_disposeObjects:function(varargs){qx.util.DisposeUtil.disposeObjects(this,arguments);},_disposeArray:function(field){qx.util.DisposeUtil.disposeArray(this,field);},_disposeMap:function(field){qx.util.DisposeUtil.disposeMap(this,field);}},settings:{"qx.disposerDebugLevel":0},defer:function(statics){if(qx.core.Variant.isSet("qx.debug","on")){qx.Class.include(statics,qx.core.MAssert);}},destruct:function(){qx.event.Registration.removeAllListeners(this);qx.core.ObjectRegistry.unregister(this);this._disposeFields("__userData");var clazz=this.constructor;var properties;var store=qx.core.Property.$$store;var storeUser=store.user;var storeTheme=store.theme;var storeInherit=store.inherit;var storeUseinit=store.useinit;var storeInit=store.init;while(clazz){properties=clazz.$$properties;if(properties){for(var name in properties){if(properties[name].dispose){this[storeUser[name]]=this[storeTheme[name]]=this[storeInherit[name]]=this[storeUseinit[name]]=this[storeInit[name]]=undefined;}}}clazz=clazz.superclass;}}});qx.Bootstrap.define("qx.lang.String",{statics:{camelCase:function(str){return str.replace(/\-([a-z])/g,function(match,chr){return chr.toUpperCase();});},hyphenate:function(str){return str.replace(/[A-Z]/g,function(match){return ('-'+match.charAt(0).toLowerCase());});},capitalize:function(str){return str.replace(/\b[a-z]/g,function(match){return match.toUpperCase();});},trimLeft:function(str){return str.replace(/^\s+/,"");},trimRight:function(str){return str.replace(/\s+$/,"");},trim:function(str){return str.replace(/^\s+|\s+$/g,"");},startsWith:function(fullstr,substr){return fullstr.substring(0,substr.length)===substr;},endsWith:function(fullstr,substr){return fullstr.substring(fullstr.length-substr.length,fullstr.length)===substr;},pad:function(str,length,ch){if(typeof ch==="undefined"){ch="0";}var temp="";for(var i=str.length;i<length;i++){temp+=ch;}return temp+str;},firstUp:function(str){return str.charAt(0).toUpperCase()+str.substr(1);},firstLow:function(str){return str.charAt(0).toLowerCase()+str.substr(1);},contains:function(str,substring){return str.indexOf(substring)!=-1;},format:function(pattern,args){var str=pattern;for(var i=0;i<args.length;i++){str=str.replace(new RegExp("%"+(i+1),"g"),args[i]);}return str;},escapeRegexpChars:function(str){return str.replace(/([.*+?^${}()|[\]\/\\])/g,'\\$1');},toArray:function(str){return str.split(/\B|\b/g);},stripTags:function(str){return str.replace(/<\/?[^>]+>/gi,"");}}});qx.Class.define("qx.Interface",{statics:{define:function(name,config){if(config){if(config.extend&&!(config.extend instanceof Array)){config.extend=[config.extend];}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateConfig(name,config);}var iface=config.statics?config.statics:{};if(config.extend){iface.$$extends=config.extend;}if(config.properties){iface.$$properties=config.properties;}if(config.members){iface.$$members=config.members;}if(config.events){iface.$$events=config.events;}}else{var iface={};}iface.$$type="Interface";iface.name=name;iface.toString=this.genericToString;iface.basename=qx.Bootstrap.createNamespace(name,iface);qx.Interface.$$registry[name]=iface;return iface;},getByName:function(name){return this.$$registry[name];},isDefined:function(name){return this.getByName(name)!==undefined;},getTotalNumber:function(){return qx.lang.Object.getLength(this.$$registry);},flatten:function(ifaces){if(!ifaces){return [];}var list=ifaces.concat();for(var i=0,l=ifaces.length;i<l;i++){if(ifaces[i].$$extends){list.push.apply(list,this.flatten(ifaces[i].$$extends));}}return list;},assert:function(clazz,iface,wrap){var members=iface.$$members;if(members){var proto=clazz.prototype;for(var key in members){if(typeof members[key]==="function"){if(typeof proto[key]==="function"){if(wrap===true&&!qx.Class.hasInterface(clazz,iface)){proto[key]=this.__wrapInterfaceMember(iface,proto[key],key,members[key]);}}else{var match=key.match(/^(get|set|reset)(.*)$/);if(!match||!qx.Class.hasProperty(clazz,qx.lang.String.firstLow(match[2]))){throw new Error('Implementation of method "'+key+'" is missing in class "'+clazz.classname+'" required by interface "'+iface.name+'"');}}}else{if(typeof proto[key]===undefined){if(typeof proto[key]!=="function"){throw new Error('Implementation of member "'+key+'" is missing in class "'+clazz.classname+'" required by interface "'+iface.name+'"');}}}}}if(iface.$$properties){for(var key in iface.$$properties){if(!qx.Class.hasProperty(clazz,key)){throw new Error('The property "'+key+'" is not supported by Class "'+clazz.classname+'"!');}}}if(iface.$$events){for(var key in iface.$$events){if(!qx.Class.supportsEvent(clazz,key)){throw new Error('The event "'+key+'" is not supported by Class "'+clazz.classname+'"!');}}}var extend=iface.$$extends;if(extend){for(var i=0,l=extend.length;i<l;i++){this.assert(clazz,extend[i],wrap);}}},genericToString:function(){return "[Interface "+this.name+"]";},$$registry:{},__wrapInterfaceMember:qx.core.Variant.select("qx.debug",{"on":function(iface,origFunction,functionName,preCondition){function wrappedFunction(){preCondition.apply(this,arguments);return origFunction.apply(this,arguments);}origFunction.wrapper=wrappedFunction;return wrappedFunction;},"default":function(){}}),__allowedKeys:qx.core.Variant.select("qx.debug",{"on":{"extend":"object","statics":"object","members":"object","properties":"object","events":"object"},"default":null}),__validateConfig:qx.core.Variant.select("qx.debug",{"on":function(name,config){if(qx.core.Variant.isSet("qx.debug","on")){var allowed=this.__allowedKeys;for(var key in config){if(allowed[key]===undefined){throw new Error('The configuration key "'+key+'" in class "'+name+'" is not allowed!');}if(config[key]==null){throw new Error("Invalid key '"+key+"' in interface '"+name+"'! The value is undefined/null!");}if(allowed[key]!==null&&typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" in interface "'+name+'"! The type of the key must be "'+allowed[key]+'"!');}}var maps=["statics","members","properties","events"];for(var i=0,l=maps.length;i<l;i++){var key=maps[i];if(config[key]!==undefined&&(config[key] instanceof Array||config[key] instanceof RegExp||config[key] instanceof Date||config[key].classname!==undefined)){throw new Error('Invalid key "'+key+'" in interface "'+name+'"! The value needs to be a map!');}}if(config.extend){for(var i=0,a=config.extend,l=a.length;i<l;i++){if(a[i]==null){throw new Error("Extends of interfaces must be interfaces. The extend number '"+i+1+"' in interface '"+name+"' is undefined/null!");}if(a[i].$$type!=="Interface"){throw new Error("Extends of interfaces must be interfaces. The extend number '"+i+1+"' in interface '"+name+"' is not an interface!");}}}if(config.statics){for(var key in config.statics){if(key.toUpperCase()!==key){throw new Error('Invalid key "'+key+'" in interface "'+name+'"! Static constants must be all uppercase.');}switch(typeof config.statics[key]){case "boolean":case "string":case "number":break;default:throw new Error('Invalid key "'+key+'" in interface "'+name+'"! Static constants must be all of a primitive type.');}}}}},"default":function(){}})}});qx.Interface.define("qx.event.IEventHandler",{statics:{TARGET_DOMNODE:1,TARGET_WINDOW:2,TARGET_OBJECT:3},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){}}});qx.Class.define("qx.event.handler.Application",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this._window=manager.getWindow();this._initObserver();qx.event.handler.Application.$$instance=this;},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{ready:1,shutdown:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true,ready:function(){var inst=qx.event.handler.Application.$$instance;if(inst){inst.__fireReady();}}},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},__fireReady:function(){if(!this.__isReady){this.__isReady=true;qx.event.Registration.fireEvent(window,"ready");}},_initObserver:function(){this._onNativeLoadWrapped=qx.lang.Function.bind(this._onNativeLoad,this);this._onNativeUnloadWrapped=qx.lang.Function.bind(this._onNativeUnload,this);qx.bom.Event.addNativeListener(window,"load",this._onNativeLoadWrapped);qx.bom.Event.addNativeListener(window,"unload",this._onNativeUnloadWrapped);},_stopObserver:function(){qx.bom.Event.removeNativeListener(window,"load",this._onNativeLoadWrapped);qx.bom.Event.removeNativeListener(window,"unload",this._onNativeUnloadWrapped);this._onNativeLoadWrapped=null;this._onNativeUnloadWrapped=null;},_onNativeLoad:function(e){if(!window.qxloader){this.__fireReady();}},_onNativeUnload:function(e){if(!this.__isUnloaded){this.__isUnloaded=true;qx.event.Registration.fireEvent(window,"shutdown");qx.core.ObjectRegistry.shutdown();}}},destruct:function(){this._stopObserver();this._disposeFields("_window");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Interface.define("qx.event.IEventDispatcher",{members:{canDispatchEvent:function(target,event,type){this.assertInstance(event,qx.event.type.Event);this.assertString(type);},dispatchEvent:function(target,event,type){this.assertInstance(event,qx.event.type.Event);this.assertString(type);}}});qx.Class.define("qx.event.dispatch.Direct",{extend:qx.core.Object,implement:qx.event.IEventDispatcher,construct:function(manager){this._manager=manager;},statics:{PRIORITY:qx.event.Registration.PRIORITY_LAST},members:{canDispatchEvent:function(target,event,type){return !event.getBubbles();},dispatchEvent:function(target,event,type){event.setEventPhase(qx.event.type.Event.AT_TARGET);var listeners=this._manager.getListeners(target,type,false);if(listeners){for(var i=0,l=listeners.length;i<l;i++){var context=listeners[i].context||target;listeners[i].handler.call(context,event);}}}},defer:function(statics){qx.event.Registration.addDispatcher(statics);}});qx.Class.define("qx.core.Init",{statics:{getApplication:function(){return this.__application||null;},__ready:function(){qx.log.Logger.debug(this,"Load runtime: "+(new Date-qx.Bootstrap.LOADSTART)+"ms");var app=qx.core.Setting.get("qx.application");var clazz=qx.Class.getByName(app);if(clazz){this.__application=new clazz;var start=new Date;this.__application.main();qx.log.Logger.debug(this,"Main runtime: "+(new Date-start)+"ms");var start=new Date;this.__application.finalize();qx.log.Logger.debug(this,"Finalize runtime: "+(new Date-start)+"ms");}else{qx.log.Logger.warn("Missing application class: "+app);}},__shutdown:function(){var app=this.__application;if(app){app.terminate();}}},defer:function(statics){if(qx.core.Variant.isSet("qx.client","mshtml")){if(/complete|interactive/.test(document.readyState)){setTimeout(function(){statics.__ready();},0);}else{qx.event.Registration.addListener(window,"ready",statics.__ready,statics);}}else{qx.event.Registration.addListener(window,"ready",statics.__ready,statics);}qx.event.Registration.addListener(window,"shutdown",statics.__shutdown,statics);}});qx.Interface.define("qx.application.IApplication",{members:{main:function(){},finalize:function(){},terminate:function(){}}});qx.Mixin.define("qx.locale.MTranslation",{members:{tr:function(messageId,varargs){var nlsManager=qx.locale.Manager;if(nlsManager){return nlsManager.tr.apply(nlsManager,arguments);}throw new Error("To enable localization please include qx.locale.Manager into your build!");},trn:function(singularMessageId,pluralMessageId,count,varargs){var nlsManager=qx.locale.Manager;if(nlsManager){return nlsManager.trn.apply(nlsManager,arguments);}throw new Error("To enable localization please include qx.locale.Manager into your build!");},marktr:function(messageId){var nlsManager=qx.locale.Manager;if(nlsManager){return nlsManager.marktr.apply(nlsManager,arguments);}throw new Error("To enable localization please include qx.locale.Manager into your build!");}}});qx.Class.define("qx.application.AbstractGui",{type:"abstract",extend:qx.core.Object,implement:[qx.application.IApplication],include:qx.locale.MTranslation,members:{__root:null,_createRootWidget:function(){throw new Error("Abstract method call");},getRoot:function(){return this.__root;},main:function(){qx.theme.manager.Meta.getInstance().initialize();this.__root=this._createRootWidget();},finalize:function(){this.render();},render:function(){qx.ui.core.queue.Manager.flush();},terminate:function(){}},destruct:function(){this._disposeFields("__root");}});qx.Class.define("qx.application.Standalone",{extend:qx.application.AbstractGui,members:{_createRootWidget:function(){return new qx.ui.root.Application(document);}}});qx.Class.define("demobrowser.Application",{extend:qx.application.Standalone,members:{main:function(){this.base(arguments);if(qx.core.Variant.isSet("qx.debug","on")){qx.log.appender.Native;qx.log.appender.Console;}this.viewer=new demobrowser.DemoBrowser;this.getRoot().add(this.viewer,{edge:0});},finalize:function(){this.base(arguments);this.viewer.dataLoader("script/demodata.js");}},defer:function(){qx.bom.Stylesheet.includeFile("demobrowser/css/style.css");qx.bom.Stylesheet.includeFile("demobrowser/css/sourceview.css");},destruct:function(){this._disposeObjects("viewer");}});qx.Bootstrap.define("qx.lang.Core");if(!Error.prototype.toString||Error.prototype.toString()=="[object Error]"){Error.prototype.toString=function(){return this.message;};}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){if(fromIndex==null){fromIndex=0;}else if(fromIndex<0){fromIndex=Math.max(0,this.length+fromIndex);}for(var i=fromIndex;i<this.length;i++){if(this[i]===searchElement){return i;}}return -1;};}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(searchElement,fromIndex){if(fromIndex==null){fromIndex=this.length-1;}else if(fromIndex<0){fromIndex=Math.max(0,this.length+fromIndex);}for(var i=fromIndex;i>=0;i--){if(this[i]===searchElement){return i;}}return -1;};}if(!Array.prototype.forEach){Array.prototype.forEach=function(callback,obj){var l=this.length;for(var i=0;i<l;i++){callback.call(obj,this[i],i,this);}};}if(!Array.prototype.filter){Array.prototype.filter=function(callback,obj){var l=this.length;var res=[];for(var i=0;i<l;i++){if(callback.call(obj,this[i],i,this)){res.push(this[i]);}}return res;};}if(!Array.prototype.map){Array.prototype.map=function(callback,obj){var l=this.length;var res=[];for(var i=0;i<l;i++){res.push(callback.call(obj,this[i],i,this));}return res;};}if(!Array.prototype.some){Array.prototype.some=function(callback,obj){var l=this.length;for(var i=0;i<l;i++){if(callback.call(obj,this[i],i,this)){return true;}}return false;};}if(!Array.prototype.every){Array.prototype.every=function(callback,obj){var l=this.length;for(var i=0;i<l;i++){if(!callback.call(obj,this[i],i,this)){return false;}}return true;};}if(!String.prototype.quote){String.prototype.quote=function(){return '"'+this.replace(/\\/g,"\\\\").replace(/\"/g,"\\\"")+'"';};}qx.Bootstrap.define("qx.lang.Generics",{statics:{__map:{"Array":["join","reverse","sort","push","pop","shift","unshift","splice","concat","slice","indexOf","lastIndexOf","forEach","map","filter","some","every"],"String":["quote","substring","toLowerCase","toUpperCase","charAt","charCodeAt","indexOf","lastIndexOf","toLocaleLowerCase","toLocaleUpperCase","localeCompare","match","search","replace","split","substr","concat","slice"]},__wrap:function(obj,func){return function(s){return obj.prototype[func].apply(s,Array.prototype.slice.call(arguments,1));};},__init:function(){var map=qx.lang.Generics.__map;for(var key in map){var obj=window[key];var arr=map[key];for(var i=0,l=arr.length;i<l;i++){var func=arr[i];if(!obj[func]){obj[func]=qx.lang.Generics.__wrap(obj,func);}}}}},defer:function(statics){statics.__init();}});qx.Class.define("qx.dev.StackTrace",{statics:{getStackTrace:qx.core.Variant.select("qx.client",{"gecko":function(){try{throw new Error();}catch(e){var errorTrace=this.getStackTraceFromError(e);qx.lang.Array.removeAt(errorTrace,0);var callerTrace=this.getStackTraceFromCaller(arguments);var trace=callerTrace.length>errorTrace.length?callerTrace:errorTrace;for(var i=0;i<Math.min(callerTrace.length,errorTrace.length);i++){var callerCall=callerTrace[i];if(callerCall.indexOf("anonymous")>=0){continue;}var callerArr=callerCall.split(":");if(callerArr.length!=2){continue;}var callerClassName=callerArr[0];var methodName=callerArr[1];var errorCall=errorTrace[i];var errorArr=errorCall.split(":");var errorClassName=errorArr[0];var lineNumber=errorArr[1];if(qx.Class.getByName(errorClassName)){var className=errorClassName;}else{className=callerClassName;}var line=className+":";if(methodName){line+=methodName+":";}line+=lineNumber;trace[i]=line;}return trace;}},"mshtml|webkit":function(){return this.getStackTraceFromCaller(arguments);},"opera":function(){var foo;try{foo.bar();}catch(e){var trace=this.getStackTraceFromError(e);qx.lang.Array.removeAt(trace,0);return trace;}return [];}}),getStackTraceFromCaller:qx.core.Variant.select("qx.client",{"opera":function(args){return [];},"default":function(args){var trace=[];var fcn=qx.lang.Function.getCaller(args);var knownFunction={};while(fcn){var fcnName=qx.lang.Function.getName(fcn);trace.push(fcnName);try{fcn=fcn.caller;}catch(e){break;}if(!fcn){break;}var hash=qx.core.ObjectRegistry.toHashCode(fcn);if(knownFunction[hash]){trace.push("...");break;}knownFunction[hash]=fcn;}return trace;}}),getStackTraceFromError:qx.core.Variant.select("qx.client",{"gecko":function(error){if(!error.stack){return [];}var lineRe=/@(.+):(\d+)$/gm;var hit;var trace=[];while((hit=lineRe.exec(error.stack))!=null){var url=hit[1];var lineNumber=hit[2];var className=this.__fileNameToClassName(url);trace.push(className+":"+lineNumber);}return trace;},"webkit":function(error){if(error.sourceURL&&error.line){return [this.__fileNameToClassName(error.sourceURL)+":"+error.line];}else{return [];}},"opera":function(error){if(error.message.indexOf("Backtrace:")<0){return [];}var trace=[];var traceString=qx.lang.String.trim(error.message.split("Backtrace:")[1]);var lines=traceString.split("\n");for(var i=0;i<lines.length;i++){var reResult=lines[i].match(/\s*Line ([0-9]+) of.* (\S.*)/);if(reResult&&reResult.length>=2){var lineNumber=reResult[1];var fileName=this.__fileNameToClassName(reResult[2]);trace.push(fileName+":"+lineNumber);}}return trace;},"default":function(){return [];}}),__fileNameToClassName:function(fileName){var scriptDir="/source/class/";var jsPos=fileName.indexOf(scriptDir);var className=(jsPos==-1)?fileName:fileName.substring(jsPos+scriptDir.length).replace(/\//g,".").replace(/\.js$/,"");return className;}}});qx.Class.define("qx.core.AssertionError",{extend:Error,construct:function(comment,failMessage){Error.call(this,failMessage);this.__comment=comment||"";this.__msg=failMessage||"";this.__trace=qx.dev.StackTrace.getStackTrace();},members:{__comment:null,__msg:null,__trace:null,getComment:function(){return this.__comment;},message:function(){return this.__msg;},toString:function(){return this.__comment+": "+this.__msg;},getStackTrace:function(){return this.__trace;}}});qx.Class.define("qx.util.Json",{statics:{BEAUTIFYING_INDENT:"  ",BEAUTIFYING_LINE_END:"\n",__map:{"function":"__convertFunction","boolean":"__convertBoolean","number":"__convertNumber","string":"__convertString","object":"__convertObject","undefined":"__convertUndefined"},__convertFunction:function(incoming){return String(incoming);},__convertBoolean:function(incoming){return String(incoming);},__convertNumber:function(incoming){return isFinite(incoming)?String(incoming):"null";},__convertString:function(incoming){var result;if(/["\\\x00-\x1f]/.test(incoming)){result=incoming.replace(/([\x00-\x1f\\"])/g,qx.util.Json.__convertStringHelper);}else{result=incoming;}return '"'+result+'"';},__convertStringEscape:{'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},__convertStringHelper:function(a,b){var result=qx.util.Json.__convertStringEscape[b];if(result){return result;}result=b.charCodeAt();return '\\u00'+Math.floor(result/16).toString(16)+(result%16).toString(16);},__convertArray:function(incoming){var stringBuilder=[],first=true,func,obj;var beautify=qx.util.Json.__beautify;stringBuilder.push("[");if(beautify){qx.util.Json.__indent+=qx.util.Json.BEAUTIFYING_INDENT;stringBuilder.push(qx.util.Json.__indent);}for(var i=0,l=incoming.length;i<l;i++){obj=incoming[i];func=this.__map[typeof obj];if(func){obj=this[func](obj);if(typeof obj=="string"){if(!first){stringBuilder.push(",");if(beautify){stringBuilder.push(qx.util.Json.__indent);}}stringBuilder.push(obj);first=false;}}}if(beautify){qx.util.Json.__indent=qx.util.Json.__indent.substring(0,qx.util.Json.__indent.length-qx.util.Json.BEAUTIFYING_INDENT.length);stringBuilder.push(qx.util.Json.__indent);}stringBuilder.push("]");return stringBuilder.join("");},__convertDate:function(incoming){var dateParams=incoming.getUTCFullYear()+","+incoming.getUTCMonth()+","+incoming.getUTCDate()+","+incoming.getUTCHours()+","+incoming.getUTCMinutes()+","+incoming.getUTCSeconds()+","+incoming.getUTCMilliseconds();return "new Date(Date.UTC("+dateParams+"))";},__convertMap:function(incoming){var stringBuilder=[],first=true,func,obj;var beautify=qx.util.Json.__beautify;stringBuilder.push("{");if(beautify){qx.util.Json.__indent+=qx.util.Json.BEAUTIFYING_INDENT;stringBuilder.push(qx.util.Json.__indent);}for(var key in incoming){obj=incoming[key];func=this.__map[typeof obj];if(func){obj=this[func](obj);if(typeof obj=="string"){if(!first){stringBuilder.push(",");if(beautify){stringBuilder.push(qx.util.Json.__indent);}}stringBuilder.push(this.__convertString(key),":",obj);first=false;}}}if(beautify){qx.util.Json.__indent=qx.util.Json.__indent.substring(0,qx.util.Json.__indent.length-qx.util.Json.BEAUTIFYING_INDENT.length);stringBuilder.push(qx.util.Json.__indent);}stringBuilder.push("}");return stringBuilder.join("");},__convertObject:function(incoming){if(incoming){var constructorName=incoming.constructor.name;if(incoming instanceof Array||constructorName=="Array"){return this.__convertArray(incoming);}else if(incoming instanceof Date||constructorName=="Date"){return this.__convertDate(incoming);}else if(incoming instanceof Object||constructorName=="Object"){return this.__convertMap(incoming);}return "";}return "null";},__convertUndefined:function(incoming){if(qx.core.Setting.get("qx.jsonEncodeUndefined")){return "null";}},stringify:function(obj,beautify){this.__beautify=beautify;this.__indent=this.BEAUTIFYING_LINE_END;var result=this[this.__map[typeof obj]](obj);if(typeof result!="string"){result=null;}if(qx.core.Setting.get("qx.jsonDebugging")){qx.log.Logger.debug(this,"JSON request: "+result);}return result;},parse:function(text){if(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(text.replace(/"(\\.|[^"\\])*"/g,""))){throw new Error("Could not parse JSON string!");}try{return eval("("+text+")");}catch(ex){throw new Error("Could not evaluate JSON string: "+ex.message);}},parseQx:function(text){if(qx.core.Setting.get("qx.jsonDebugging")){qx.log.Logger.debug(this,"JSON response: "+text);}var obj=(text&&text.length>0)?eval('('+text+')'):null;return obj;}},settings:{"qx.jsonEncodeUndefined":true,"qx.jsonDebugging":false}});qx.Class.define("qx.util.ColorUtil",{statics:{REGEXP:{hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rgb:/^rgb\(\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*,\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*,\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*\)$/},SYSTEM:{activeborder:true,activecaption:true,appworkspace:true,background:true,buttonface:true,buttonhighlight:true,buttonshadow:true,buttontext:true,captiontext:true,graytext:true,highlight:true,highlighttext:true,inactiveborder:true,inactivecaption:true,inactivecaptiontext:true,infobackground:true,infotext:true,menu:true,menutext:true,scrollbar:true,threeddarkshadow:true,threedface:true,threedhighlight:true,threedlightshadow:true,threedshadow:true,window:true,windowframe:true,windowtext:true},NAMED:{black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:[-1,-1,-1],magenta:[255,0,255],orange:[255,165,0],brown:[165,42,42]},isNamedColor:function(value){return this.NAMED[value]!==undefined;},isSystemColor:function(value){return this.SYSTEM[value]!==undefined;},supportsThemes:function(){return qx.Class.isDefined("qx.theme.manager.Color");},isThemedColor:function(value){if(!this.supportsThemes()){return false;}return qx.theme.manager.Color.getInstance().isDynamic(value);},stringToRgb:function(str){if(this.supportsThemes()&&this.isThemedColor(str)){var str=qx.theme.manager.Color.getInstance().resolveDynamic(str);}if(this.isNamedColor(str)){return this.NAMED[str];}else if(this.isSystemColor(str)){throw new Error("Could not convert system colors to RGB: "+str);}else if(this.isRgbString(str)){return this.__rgbStringToRgb();}else if(this.isHex3String(str)){return this.__hex3StringToRgb();}else if(this.isHex6String(str)){return this.__hex6StringToRgb();}throw new Error("Could not parse color: "+str);},cssStringToRgb:function(str){if(this.isNamedColor(str)){return this.NAMED[str];}else if(this.isSystemColor(str)){throw new Error("Could not convert system colors to RGB: "+str);}else if(this.isRgbString(str)){return this.__rgbStringToRgb();}else if(this.isHex3String(str)){return this.__hex3StringToRgb();}else if(this.isHex6String(str)){return this.__hex6StringToRgb();}throw new Error("Could not parse color: "+str);},stringToRgbString:function(str){return this.rgbToRgbString(this.stringToRgb(str));},rgbToRgbString:function(rgb){return "rgb("+rgb[0]+","+rgb[1]+","+rgb[2]+")";},rgbToHexString:function(rgb){return (qx.lang.String.pad(rgb[0].toString(16).toUpperCase(),2)+qx.lang.String.pad(rgb[1].toString(16).toUpperCase(),2)+qx.lang.String.pad(rgb[2].toString(16).toUpperCase(),2));},isValidPropertyValue:function(str){return this.isThemedColor(str)||this.isNamedColor(str)||this.isHex3String(str)||this.isHex6String(str)||this.isRgbString(str);},isCssString:function(str){return this.isSystemColor(str)||this.isNamedColor(str)||this.isHex3String(str)||this.isHex6String(str)||this.isRgbString(str);},isHex3String:function(str){return this.REGEXP.hex3.test(str);},isHex6String:function(str){return this.REGEXP.hex6.test(str);},isRgbString:function(str){return this.REGEXP.rgb.test(str);},__rgbStringToRgb:function(){var red=parseInt(RegExp.$1,10);var green=parseInt(RegExp.$2,10);var blue=parseInt(RegExp.$3,10);return [red,green,blue];},__hex3StringToRgb:function(){var red=parseInt(RegExp.$1,16)*17;var green=parseInt(RegExp.$2,16)*17;var blue=parseInt(RegExp.$3,16)*17;return [red,green,blue];},__hex6StringToRgb:function(){var red=(parseInt(RegExp.$1,16)*16)+parseInt(RegExp.$2,16);var green=(parseInt(RegExp.$3,16)*16)+parseInt(RegExp.$4,16);var blue=(parseInt(RegExp.$5,16)*16)+parseInt(RegExp.$6,16);return [red,green,blue];},hex3StringToRgb:function(value){if(this.isHex3String(value)){return this.__hex3StringToRgb(value);}throw new Error("Invalid hex3 value: "+value);},hex6StringToRgb:function(value){if(this.isHex6String(value)){return this.__hex6StringToRgb(value);}throw new Error("Invalid hex6 value: "+value);},hexStringToRgb:function(value){if(this.isHex3String(value)){return this.__hex3StringToRgb(value);}if(this.isHex6String(value)){return this.__hex6StringToRgb(value);}throw new Error("Invalid hex value: "+value);},rgbToHsb:function(rgb){var hue,saturation,brightness;var red=rgb[0];var green=rgb[1];var blue=rgb[2];var cmax=(red>green)?red:green;if(blue>cmax){cmax=blue;}var cmin=(red<green)?red:green;if(blue<cmin){cmin=blue;}brightness=cmax/255.0;if(cmax!=0){saturation=(cmax-cmin)/cmax;}else{saturation=0;}if(saturation==0){hue=0;}else{var redc=(cmax-red)/(cmax-cmin);var greenc=(cmax-green)/(cmax-cmin);var bluec=(cmax-blue)/(cmax-cmin);if(red==cmax){hue=bluec-greenc;}else if(green==cmax){hue=2.0+redc-bluec;}else{hue=4.0+greenc-redc;}hue=hue/6.0;if(hue<0){hue=hue+1.0;}}return [Math.round(hue*360),Math.round(saturation*100),Math.round(brightness*100)];},hsbToRgb:function(hsb){var i,f,p,q,t;var hue=hsb[0]/360;var saturation=hsb[1]/100;var brightness=hsb[2]/100;if(hue>=1.0){hue%=1.0;}if(saturation>1.0){saturation=1.0;}if(brightness>1.0){brightness=1.0;}var tov=Math.floor(255*brightness);var rgb={};if(saturation==0.0){rgb.red=rgb.green=rgb.blue=tov;}else{hue*=6.0;i=Math.floor(hue);f=hue-i;p=Math.floor(tov*(1.0-saturation));q=Math.floor(tov*(1.0-(saturation*f)));t=Math.floor(tov*(1.0-(saturation*(1.0-f))));switch(i){case 0:rgb.red=tov;rgb.green=t;rgb.blue=p;break;case 1:rgb.red=q;rgb.green=tov;rgb.blue=p;break;case 2:rgb.red=p;rgb.green=tov;rgb.blue=t;break;case 3:rgb.red=p;rgb.green=q;rgb.blue=tov;break;case 4:rgb.red=t;rgb.green=p;rgb.blue=tov;break;case 5:rgb.red=tov;rgb.green=p;rgb.blue=q;break;}}return rgb;},randomColor:function(){var r=Math.round(Math.random()*255);var g=Math.round(Math.random()*255);var b=Math.round(Math.random()*255);return this.rgbToRgbString([r,g,b]);}}});qx.Class.define("qx.event.type.Event",{extend:qx.core.Object,statics:{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3},members:{init:function(canBubble,cancelable){if(qx.core.Variant.isSet("qx.debug","on")){if(canBubble!==undefined){qx.core.Assert.assertBoolean(canBubble,"Invalid argument value 'canBubble'.");}if(cancelable!==undefined){qx.core.Assert.assertBoolean(cancelable,"Invalid argument value 'cancelable'.");}}this._type=null;this._target=null;this._currentTarget=null;this._relatedTarget=null;this._originalTarget=null;this._stopPropagation=false;this._preventDefault=false;this._bubbles=!!canBubble;this._cancelable=!!cancelable;this._timeStamp=(new Date()).getTime();this._eventPhase=null;return this;},clone:function(embryo){if(embryo){var clone=embryo;}else{var clone=qx.event.Pool.getInstance().getObject(this.constructor);}clone._type=this._type;clone._target=this._target;clone._currentTarget=this._currentTarget;clone._relatedTarget=this._relatedTarget;clone._originalTarget=this._originalTarget;clone._stopPropagation=this._stopPropagation;clone._bubbles=this._bubbles;clone._preventDefault=this._preventDefault;clone._cancelable=this._cancelable;return clone;},stopPropagation:function(){if(qx.core.Variant.isSet("qx.debug","on")){this.assertTrue(this._bubbles,"Cannot stop propagation on a non bubbling event: "+this.getType());}this._stopPropagation=true;},getPropagationStopped:function(){return !!this._stopPropagation;},preventDefault:function(){if(qx.core.Variant.isSet("qx.debug","on")){this.assertTrue(this._cancelable,"Cannot prevent default action on a non cancelable event: "+this.getType());}this._preventDefault=true;},getDefaultPrevented:function(){return !!this._preventDefault;},getType:function(){return this._type;},setType:function(type){this._type=type;},getEventPhase:function(){return this._eventPhase;},setEventPhase:function(eventPhase){this._eventPhase=eventPhase;},getTimeStamp:function(){return this._timeStamp;},getTarget:function(){return this._target;},setTarget:function(target){this._target=target;},getCurrentTarget:function(){return this._currentTarget||this._target;},setCurrentTarget:function(currentTarget){this._currentTarget=currentTarget;},getRelatedTarget:function(){return this._relatedTarget;},setRelatedTarget:function(relatedTarget){this._relatedTarget=relatedTarget;},getOriginalTarget:function(){return this._originalTarget;},setOriginalTarget:function(originalTarget){this._originalTarget=originalTarget;},getBubbles:function(){return this._bubbles;},setBubbles:function(bubbles){this._bubbles=bubbles;},isCancelable:function(){return this._cancelable;},setCancelable:function(cancelable){this._cancelable=cancelable;}},destruct:function(){this._disposeFields("_target","_currentTarget","_relatedTarget","_originalTarget");}});qx.Class.define("qx.event.type.Data",{extend:qx.event.type.Event,members:{init:function(data,old,cancelable){this.base(arguments,false,cancelable);this.__data=data;this.__old=old;return this;},clone:function(embryo){var clone=this.base(arguments,embryo);clone.__data=this.__data;clone.__old=this.__old;return clone;},getData:function(){return this.__data;},getOldData:function(){return this.__old;},getValue:function(){qx.log.Logger.deprecatedMethodWarning(arguments.callee,"Better use 'getData'");return this.__data;},getOldValue:function(){qx.log.Logger.deprecatedMethodWarning(arguments.callee,"Better use 'getOldData'");return this.__old;}},destruct:function(){this._disposeFields("__data","__old");}});qx.Class.define("qx.util.ObjectPool",{extend:qx.core.Object,construct:function(size){this.base(arguments);this.__pool={};if(size!==undefined){this.setSize(size);}},properties:{size:{check:"Integer",init:null,nullable:true}},members:{getObject:function(clazz){if(this.$$disposed){return;}if(!clazz){throw new Error("Class needs to be defined!");}var obj=null;var pool=this.__pool[clazz.classname];if(pool){obj=pool.pop();}if(obj){obj.$$pooled=false;}else{obj=new clazz;}return obj;},poolObject:function(obj){if(!this.__pool){return;}var classname=obj.classname;var pool=this.__pool[classname];if(obj.$$pooled){throw new Error("Object is already pooled: "+obj);}if(!pool){this.__pool[classname]=pool=[];}var size=this.getSize()||Infinity;if(pool.length>size){this.warn("Cannot pool "+obj+" because the pool is already full.");obj.dispose();return;}obj.$$pooled=true;pool.push(obj);}},destruct:function(){var pool=this.__pool;var classname,list,i,l;for(classname in pool){list=pool[classname];for(i=0,l=list.length;i<l;i++){list[i].dispose();}}delete this.__pool;}});qx.Class.define("qx.event.Pool",{extend:qx.util.ObjectPool,type:"singleton",construct:function(){this.base(arguments,30);},members:{__filter:{"qx.legacy.event.type.DragEvent":1,"qx.legacy.event.type.MouseEvent":1,"qx.legacy.event.type.KeyEvent":1},poolObject:function(obj){if(this.__filter[obj.classname]){return;}this.base(arguments,obj);}}});qx.Class.define("qx.event.handler.Object",{extend:qx.core.Object,implement:qx.event.IEventHandler,statics:{PRIORITY:qx.event.Registration.PRIORITY_LAST,SUPPORTED_TYPES:null,TARGET_CHECK:qx.event.IEventHandler.TARGET_OBJECT,IGNORE_CAN_HANDLE:false},members:{canHandleEvent:function(target,type){return qx.Class.supportsEvent(target.constructor,type);},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){}},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.util.DisposeUtil",{statics:{disposeFields:function(obj,arr){var name;for(var i=0,l=arr.length;i<l;i++){var name=arr[i];if(obj[name]==null||!obj.hasOwnProperty(name)){continue;}obj[name]=null;}},disposeObjects:function(obj,arr){var name;for(var i=0,l=arr.length;i<l;i++){name=arr[i];if(obj[name]==null||!obj.hasOwnProperty(name)){continue;}if(!qx.core.ObjectRegistry.inShutDown){if(obj[name].dispose){obj[name].dispose();}else{throw new Error("Has no disposable object under key: "+name+"!");}}obj[name]=null;}},disposeArray:function(obj,field){var data=obj[field];if(!data){return;}if(qx.core.ObjectRegistry.inShutDown){obj[field]=null;return;}try{var entry;for(var i=data.length-1;i>=0;i--){entry=data[i];if(entry){entry.dispose();}}}catch(ex){throw new Error("The array field: "+field+" of object: "+obj+" has non disposable entries: "+ex);}data.length=0;obj[field]=null;},disposeMap:function(obj,field){var data=obj[field];if(!data){return;}if(qx.core.ObjectRegistry.inShutDown){obj[field]=null;return;}try{for(var key in data){if(data.hasOwnProperty(key)){data[key].dispose();}}}catch(ex){throw new Error("The map field: "+field+" of object: "+obj+" has non disposable entries: "+ex);}obj[field]=null;}}});qx.Class.define("qx.theme.manager.Meta",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme"}},members:{_applyTheme:function(value,old){var color=null;var decoration=null;var font=null;var icon=null;var appearance=null;if(value){color=value.meta.color||null;decoration=value.meta.decoration||null;font=value.meta.font||null;icon=value.meta.icon||null;appearance=value.meta.appearance||null;}var colorMgr=qx.theme.manager.Color.getInstance();var decorationMgr=qx.theme.manager.Decoration.getInstance();var fontMgr=qx.theme.manager.Font.getInstance();var iconMgr=qx.theme.manager.Icon.getInstance();var appearanceMgr=qx.theme.manager.Appearance.getInstance();colorMgr.setTheme(color);decorationMgr.setTheme(decoration);fontMgr.setTheme(font);iconMgr.setTheme(icon);appearanceMgr.setAppearanceTheme(appearance);},initialize:function(){var setting=qx.core.Setting;var theme,obj;theme=setting.get("qx.theme");if(theme){obj=qx.Theme.getByName(theme);if(!obj){throw new Error("The theme to use is not available: "+theme);}this.setTheme(obj);}}},settings:{"qx.theme":"qx.theme.Classic"}});qx.Class.define("qx.util.ValueManager",{type:"abstract",extend:qx.core.Object,construct:function(){this.base(arguments);this._dynamic={};},members:{resolveDynamic:function(value){return this._dynamic[value];},isDynamic:function(value){return !!this._dynamic[value];},resolve:function(value){if(value&&this._dynamic[value]){return this._dynamic[value];}return value;}},destruct:function(){this._disposeFields("_dynamic");}});qx.Class.define("qx.theme.manager.Color",{type:"singleton",extend:qx.util.ValueManager,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme",event:"changeTheme"}},members:{_applyTheme:function(value){var dest=this._dynamic={};if(value){var source=value.colors;var util=qx.util.ColorUtil;var temp;for(var key in source){temp=source[key];if(typeof temp==="string"){if(!util.isCssString(temp)){throw new Error("Could not parse color: "+temp);}}else if(temp instanceof Array){temp=util.rgbToRgbString(temp);}else{throw new Error("Could not parse color: "+temp);}dest[key]=temp;}}}}});qx.Class.define("qx.theme.manager.Decoration",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme"}},members:{resolve:function(value){if(!value){return null;}if(typeof value==="object"){return value;}var theme=this.getTheme();if(!theme){return null;}var theme=this.getTheme();if(!theme){return null;}var cache=this.__dynamic;if(!cache){cache=this.__dynamic={};}var resolved=cache[value];if(resolved){return resolved;}var entry=theme.decorations[value];if(!entry){return null;}var clazz=entry.decorator;if(clazz==null){throw new Error("Missing definition of which decorator to use in entry: "+value+"!");}return cache[value]=(new clazz).set(entry.style);},isValidPropertyValue:function(value){if(typeof value==="string"){return this.isDynamic(value);}else if(typeof value==="object"){var clazz=value.constructor;return qx.Class.hasInterface(clazz,qx.ui.decoration.IDecorator);}return false;},isDynamic:function(value){if(!value){return false;}var theme=this.getTheme();if(!theme){return false;}return !!theme.decorations[value];},_applyTheme:function(value){var alias=qx.util.AliasManager.getInstance();value?alias.add("decoration",value.resource):alias.remove("decoration");}},destruct:function(){this._disposeMap("__dynamic");}});qx.Interface.define("qx.ui.decoration.IDecorator",{members:{init:function(element){},resize:function(element,width,height){},tint:function(element,bgcolor){},getMarkup:function(){},getInsets:function(){}}});qx.Class.define("qx.util.AliasManager",{type:"singleton",extend:qx.util.ValueManager,construct:function(){this.base(arguments);this._aliases={};this.add("static","qx/static");},members:{_preprocess:function(value){var dynamics=this._dynamic;if(dynamics[value]===false){return value;}else if(dynamics[value]===undefined){if(value.charAt(0)==="/"||value.charAt(0)==="."||value.indexOf("http://")===0||value.indexOf("https://")==="0"||value.indexOf("file://")===0){dynamics[value]=false;return value;}var alias=value.substring(0,value.indexOf("/"));var resolved=this._aliases[alias];if(resolved!==undefined){dynamics[value]=resolved+value.substring(alias.length);}}return value;},add:function(alias,base){this._aliases[alias]=base;var dynamics=this._dynamic;var paths={};for(var path in dynamics){if(path.substring(0,path.indexOf("/"))===alias){dynamics[path]=base+path.substring(alias.length);paths[path]=true;}}},remove:function(alias){delete this._aliases[alias];},resolve:function(path){if(path!==null){path=this._preprocess(path);}return this._dynamic[path]||path;}},destruct:function(){this._disposeFields("_aliases");}});qx.Class.define("qx.theme.manager.Font",{type:"singleton",extend:qx.util.ValueManager,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme",event:"changeTheme"}},members:{resolveDynamic:function(value){return value instanceof qx.bom.Font?value:this._dynamic[value];},isDynamic:function(value){return value&&(value instanceof qx.bom.Font||this._dynamic[value]!==undefined);},_applyTheme:function(value){var dest=this._dynamic;for(var key in dest){if(dest[key].themed){dest[key].dispose();delete dest[key];}}if(value){var source=value.fonts;var font=qx.bom.Font;for(var key in source){dest[key]=(new font).set(source[key]);dest[key].themed=true;}}}}});qx.Class.define("qx.bom.Font",{extend:qx.core.Object,construct:function(size,family){this.base(arguments);if(size!==undefined){this.setSize(size);}if(family!==undefined){this.setFamily(family);}},statics:{fromString:function(str){var font=new qx.bom.Font();var parts=str.split(/\s+/);var name=[];var part;for(var i=0;i<parts.length;i++){switch(part=parts[i]){case "bold":font.setBold(true);break;case "italic":font.setItalic(true);break;case "underline":font.setDecoration("underline");break;default:var temp=parseInt(part,10);if(temp==part||qx.lang.String.contains(part,"px")){font.setSize(temp);}else{name.push(part);}break;}}if(name.length>0){font.setFamily(name);}return font;},fromConfig:function(config){var font=new qx.bom.Font;font.set(config);return font;},__defaultStyles:{fontFamily:"",fontSize:"",fontWeight:"",fontStyle:"",textDecoration:"",lineHeight:1.2},getDefaultStyles:function(){return this.__defaultStyles;}},properties:{size:{check:"Integer",nullable:true,apply:"_applySize"},lineHeight:{check:"Number",nullable:true,apply:"_applyLineHeight"},family:{check:"Array",nullable:true,apply:"_applyFamily"},bold:{check:"Boolean",nullable:true,apply:"_applyBold"},italic:{check:"Boolean",nullable:true,apply:"_applyItalic"},decoration:{check:["underline","line-through","overline"],nullable:true,apply:"_applyDecoration"}},members:{__size:null,__family:null,__bold:null,__italic:null,__decoration:null,__lineHeight:null,_applySize:function(value,old){this.__size=value===null?null:value+"px";},_applyLineHeight:function(value,old){this.__lineHeight=value===null?null:value;},_applyFamily:function(value,old){var family="";for(var i=0,l=value.length;i<l;i++){if(value[i].indexOf(" ")>0){family+='"'+value[i]+'"';}else{family+=value[i];}if(i!==l-1){family+=",";}}this.__family=family;},_applyBold:function(value,old){this.__bold=value===null?null:value?"bold":"normal";},_applyItalic:function(value,old){this.__italic=value===null?null:value?"italic":"normal";},_applyDecoration:function(value,old){this.__decoration=value===null?null:value;},getStyles:function(){return {fontFamily:this.__family,fontSize:this.__size,fontWeight:this.__bold,fontStyle:this.__italic,textDecoration:this.__decoration,lineHeight:this.__lineHeight};}}});qx.Class.define("qx.theme.manager.Icon",{type:"singleton",extend:qx.core.Object,properties:{theme:{check:"Theme",nullable:true,apply:"_applyTheme"}},members:{_applyTheme:function(value,old){var alias=qx.util.AliasManager.getInstance();value?alias.add("icon",value.resource):alias.remove("icon");}}});qx.Class.define("qx.theme.manager.Appearance",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__styleCache={};this.__aliasMap={};},properties:{appearanceTheme:{check:"Theme",nullable:true,apply:"_applyAppearanceTheme",event:"changeAppearanceTheme"}},members:{__defaultStates:{},_applyAppearanceTheme:function(value,old){},__resolveId:function(id,theme){var db=theme.appearances;var entry=db[id];if(!entry){var divider="/";var end=[];var splitted=id.split(divider);var alias;while(!entry&&splitted.length>0){end.unshift(splitted.pop());var baseid=splitted.join(divider);entry=db[baseid];if(entry){alias=entry.alias||entry;if(typeof alias==="string"){var mapped=alias+divider+end.join(divider);return this.__resolveId(mapped,theme);}}}return null;}else if(typeof entry==="string"){return this.__resolveId(entry,theme);}else if(entry.include&&!entry.style){return this.__resolveId(entry.include,theme);}return id;},styleFrom:function(id,states,theme){if(!theme){theme=this.getAppearanceTheme();}var aliasMap=this.__aliasMap;var resolved=aliasMap[id];if(!resolved){resolved=aliasMap[id]=this.__resolveId(id,theme);}var entry=theme.appearances[resolved];if(!entry){this.warn("Missing appearance: "+id);return null;}if(!entry.style){return null;}var unique=resolved;if(states){var bits=entry.$$bits;if(!bits){bits=entry.$$bits={};entry.$$length=0;}var sum=0;for(var state in states){if(bits[state]==null){bits[state]=1<<entry.$$length++;}sum+=bits[state];}if(sum>0){unique+=":"+sum;}}var cache=this.__styleCache;if(cache[unique]!==undefined){return cache[unique];}if(!states){states=this.__defaultStates;}var result;if(entry.include||entry.base){var local=entry.style(states);var incl;if(entry.include){incl=this.styleFrom(entry.include,states,theme);}result={};if(entry.base){var base=this.styleFrom(resolved,states,entry.base);if(entry.include){for(var key in base){if(incl[key]===undefined&&local[key]===undefined){result[key]=base[key];}}}else{for(var key in base){if(local[key]===undefined){result[key]=base[key];}}}}if(entry.include){for(var key in incl){if(local[key]===undefined){result[key]=incl[key];}}}for(var key in local){result[key]=local[key];}}else{result=entry.style(states);}return cache[unique]=result||null;}},destruct:function(){this._disposeFields("__styleCache","__aliasMap");}});qx.Class.define("qx.Theme",{statics:{define:function(name,config){if(!config){var config={};}if(config.include&&!(config.include instanceof Array)){config.include=[config.include];}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateConfig(name,config);}var theme={$$type:"Theme",name:name,title:config.title,toString:this.genericToString};if(config.extend){theme.supertheme=config.extend;}if(config.resource){theme.resource=config.resource;}else if(config.extend&&config.extend.resource){theme.resource=config.extend.resource;}theme.basename=qx.Bootstrap.createNamespace(name,theme);this.__convert(theme,config);this.$$registry[name]=theme;if(config.include){for(var i=0,a=config.include,l=a.length;i<l;i++){this.include(theme,a[i]);}}},getAll:function(){return this.$$registry;},getByName:function(name){return this.$$registry[name];},isDefined:function(name){return this.getByName(name)!==undefined;},getTotalNumber:function(){return qx.lang.Object.getLength(this.$$registry);},genericToString:function(){return "[Theme "+this.name+"]";},__extractType:function(config){for(var i=0,keys=this.__inheritableKeys,l=keys.length;i<l;i++){if(config[keys[i]]){return keys[i];}}},__convert:function(theme,config){var type=this.__extractType(config);if(config.extend&&!type){type=config.extend.type;}theme.type=type||"other";if(!type){return;}var clazz=function(){};if(config.extend){clazz.prototype=new config.extend.$$clazz;}var target=clazz.prototype;var source=config[type];for(var id in source){target[id]=source[id];if(target[id].base){if(qx.core.Variant.isSet("qx.debug","on")){if(!config.extend){throw new Error("Found base flag in entry '"+id+"' of theme '"+config.name+"'. Base flags are not allowed for themes without a valid super theme!");}}target[id].base=config.extend;}}theme.$$clazz=clazz;theme[type]=new clazz;},$$registry:{},__inheritableKeys:["colors","borders","decorations","fonts","icons","widgets","appearances","meta"],__allowedKeys:qx.core.Variant.select("qx.debug",{"on":{"title":"string","resource":"string","type":"string","extend":"object","colors":"object","borders":"object","decorations":"object","fonts":"object","icons":"object","widgets":"object","appearances":"object","meta":"object","include":"object"},"default":null}),__metaKeys:qx.core.Variant.select("qx.debug",{"on":{"color":"object","border":"object","decoration":"object","font":"object","icon":"object","appearance":"object","widget":"object"},"default":null}),__validateConfig:qx.core.Variant.select("qx.debug",{"on":function(name,config){var allowed=this.__allowedKeys;for(var key in config){if(allowed[key]===undefined){throw new Error('The configuration key "'+key+'" in theme "'+name+'" is not allowed!');}if(config[key]==null){throw new Error('Invalid key "'+key+'" in theme "'+name+'"! The value is undefined/null!');}if(allowed[key]!==null&&typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" in theme "'+name+'"! The type of the key must be "'+allowed[key]+'"!');}}var maps=["colors","borders","decorations","fonts","icons","widgets","appearances","meta"];for(var i=0,l=maps.length;i<l;i++){var key=maps[i];if(config[key]!==undefined&&(config[key] instanceof Array||config[key] instanceof RegExp||config[key] instanceof Date||config[key].classname!==undefined)){throw new Error('Invalid key "'+key+'" in theme "'+name+'"! The value needs to be a map!');}}var counter=0;for(var i=0,l=maps.length;i<l;i++){var key=maps[i];if(config[key]){counter++;}if(counter>1){throw new Error("You can only define one theme category per file! Invalid theme: "+name);}}if(!config.extend&&counter===0){throw new Error("You must define at least one entry in your theme configuration :"+name);}if(config.meta){var value;for(var key in config.meta){value=config.meta[key];if(this.__metaKeys[key]===undefined){throw new Error('The key "'+key+'" is not allowed inside a meta theme block.');}if(typeof value!==this.__metaKeys[key]){throw new Error('The type of the key "'+key+'" inside the meta block is wrong.');}if(!(typeof value==="object"&&value!==null&&value.$$type==="Theme")){throw new Error('The content of a meta theme must reference to other themes. The value for "'+key+'" in theme "'+name+'" is invalid: '+value);}}}if(config.extend&&config.extend.$$type!=="Theme"){throw new Error('Invalid extend in theme "'+name+'": '+config.extend);}},"default":function(){}}),patch:function(theme,mixinTheme){var type=this.__extractType(mixinTheme);if(type!==this.__extractType(theme)){throw new Error("The mixins '"+theme.name+"' are not compatible '"+mixinTheme.name+"'!");}var source=mixinTheme[type];var target=theme[type];for(var key in source){target[key]=source[key];}},include:function(theme,mixinTheme){var type=mixinTheme.type;if(type!==theme.type){throw new Error("The mixins '"+theme.name+"' are not compatible '"+mixinTheme.name+"'!");}var source=mixinTheme[type];var target=theme[type];for(var key in source){if(target[key]!==undefined){throw new Error("It is not allowed to overwrite the key '"+key+"' of theme '"+theme.name+"' by mixin theme '"+mixinTheme.name+"'.");}target[key]=source[key];}}}});qx.Class.define("qx.event.handler.UserAction",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this.__manager=manager;this.__window=manager.getWindow();},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{useraction:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){}},destruct:function(){this._disposeFields("__manager","__window");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.util.DeferredCallManager",{extend:qx.core.Object,type:"singleton",construct:function(){this.__calls={};this.__timeoutWrapper=qx.lang.Function.bind(this.__timeout,this);this.__hasCalls=false;},members:{__timeoutId:null,__currentQueue:null,__calls:null,__hasCalls:null,schedule:function(deferredCall){if(this.__timeoutId==null){this.__timeoutId=window.setTimeout(this.__timeoutWrapper,0);}var callKey=deferredCall.toHashCode();if(this.__currentQueue&&this.__currentQueue[callKey]){return;}this.__calls[callKey]=deferredCall;this.__hasCalls=true;},cancel:function(deferredCall){var callKey=deferredCall.toHashCode();if(this.__currentQueue&&this.__currentQueue[callKey]){this.__currentQueue[callKey]=null;return;}delete this.__calls[callKey];if(qx.lang.Object.isEmpty(this.__calls)&&this.__timeoutId!=null){window.clearTimeout(this.__timeoutId);this.__timeoutId=null;}},__timeout:function(){this.__timeoutId=null;while(this.__hasCalls){this.__currentQueue=qx.lang.Object.copy(this.__calls);this.__calls={};this.__hasCalls=false;for(var key in this.__currentQueue){var call=this.__currentQueue[key];if(call){this.__currentQueue[key]=null;call.call();}}}this.__currentQueue=null;}},destruct:function(){if(this.__timeoutId!=null){window.clearTimeout(this.__timeoutId);}this._disposeFields("__timeoutWrapper","__calls");}});qx.Class.define("qx.util.DeferredCall",{extend:qx.core.Object,construct:function(callback,context){this.base(arguments);this.__callback=callback;this.__context=context||null;this.__manager=qx.util.DeferredCallManager.getInstance();},members:{__callback:null,__context:null,__manager:null,cancel:function(){this.__manager.cancel(this);},schedule:function(){this.__manager.schedule(this);},call:function(){this.__context?this.__callback.apply(this.__context):this.__callback();}},destruct:function(callback,context){this.cancel();this._disposeFields("__context","__callback","__manager");}});qx.Class.define("qx.html.Element",{extend:qx.core.Object,construct:function(tagName){this.base(arguments);this._nodeName=tagName||"div";},statics:{DEBUG:false,_modified:{},_visibility:{},_scroll:{},_actions:{},_supportedActions:["activate","focus","capture"],_scheduleFlush:function(job){qx.html.Element.__deferredCall.schedule();},_mshtmlVisibilitySort:qx.core.Variant.select("qx.client",{"mshtml":function(a,b){var al=a._element;var bl=b._element;if(al.contains(bl)){return 1;}if(bl.contains(al)){return -1;}return 0;},"default":null}),flush:function(){var obj;if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG){qx.log.Logger.debug(this,"Flushing elements...");}}var later=[];var modified=this._modified;for(var hc in modified){obj=modified[hc];if(obj.__willBeSeeable()){if(obj._element&&qx.dom.Hierarchy.isRendered(obj._element)){later.push(obj);}else{if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG){obj.debug("Flush invisible element");}}obj.__flush();}delete modified[hc];}}for(var i=0,l=later.length;i<l;i++){obj=later[i];if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG){obj.debug("Flush rendered element");}}obj.__flush();}var visibility=this._visibility;if(qx.core.Variant.isSet("qx.client","mshtml")){var list=[];for(var hc in visibility){list.push(visibility[hc]);}if(list.length>1){list.sort(this._mshtmlVisibilitySort);visibility=this._visibility={};for(var i=0;i<list.length;i++){obj=list[i];visibility[obj.$$hash]=obj;}}}for(var hc in visibility){obj=visibility[hc];if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG){qx.log.Logger.debug(this,"Switching visibility to: "+obj._visible);}}obj._element.style.display=obj._visible?"":"none";delete visibility[hc];}var scroll=this._scroll;for(var hc in scroll){obj=scroll[hc];var elem=obj._element;if(elem&&elem.offsetWidth){var done=true;if(obj.__lazyScrollX!=null){obj._element.scrollLeft=obj.__lazyScrollX;delete obj.__lazyScrollX;}if(obj.__lazyScrollY!=null){obj._element.scrollTop=obj.__lazyScrollY;delete obj.__lazyScrollY;}var intoViewX=obj.__lazyScrollIntoViewX;if(intoViewX!=null){var child=intoViewX.element.getDomElement();if(child&&child.offsetWidth){qx.bom.element.Scroll.intoViewX(child,elem,intoViewX.align);delete obj.__lazyScrollIntoViewX;}else{done=false;}}var intoViewY=obj.__lazyScrollIntoViewY;if(intoViewY!=null){var child=intoViewY.element.getDomElement();if(child&&child.offsetWidth){qx.bom.element.Scroll.intoViewY(child,elem,intoViewY.align);delete obj.__lazyScrollIntoViewY;}else{done=false;}}if(done){delete scroll[hc];}}}var post=this._actions;var actions=this._supportedActions;var action,element;for(var i=0,l=actions.length;i<l;i++){action=actions[i];if(post[action]){element=post[action]._element;if(element){qx.bom.Element[action](element);}delete post[action];}}qx.event.handler.Appear.refresh();}},members:{_element:null,_root:false,_included:true,_visible:true,_scheduleChildrenUpdate:function(){if(this._modifiedChildren){return;}this._modifiedChildren=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element");},_createDomElement:function(){return qx.bom.Element.create(this._nodeName);},__flush:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG){this.debug("Flush: "+this.getAttribute("id"));}}var children=this.__children;if(children){var length=children.length;var child;for(var i=0;i<length;i++){child=children[i];if(child._visible&&child._included&&!child._element){child.__flush();}}}if(!this._element){this._element=this._createDomElement();this._element.$$hash=this.$$hash;this._copyData(false);if(children&&length>0){this._insertChildren();}}else{this._syncData();if(this._modifiedChildren){this._syncChildren();}}delete this._modifiedChildren;},_insertChildren:function(){var children=this.__children;var length=children.length;var child;if(length>2){var domElement=document.createDocumentFragment();for(var i=0;i<length;i++){child=children[i];if(child._element&&child._included){domElement.appendChild(child._element);}}this._element.appendChild(domElement);}else{var domElement=this._element;for(var i=0;i<length;i++){child=children[i];if(child._element&&child._included){domElement.appendChild(child._element);}}}},_syncChildren:function(){var ObjectRegistry=qx.core.ObjectRegistry;var dataChildren=this.__children;var dataLength=dataChildren.length;var dataChild;var dataEl;var domParent=this._element;var domChildren=domParent.childNodes;var domPos=0;var domEl;if(qx.core.Variant.isSet("qx.debug","on")){var domOperations=0;}for(var i=domChildren.length-1;i>=0;i--){domEl=domChildren[i];dataEl=ObjectRegistry.fromHashCode(domEl.$$hash);if(!dataEl||!dataEl._included||dataEl.__parent!==this){domParent.removeChild(domEl);if(qx.core.Variant.isSet("qx.debug","on")){domOperations++;}}}for(var i=0;i<dataLength;i++){dataChild=dataChildren[i];if(dataChild._included){dataEl=dataChild._element;domEl=domChildren[domPos];if(!dataEl){continue;}if(dataEl!=domEl){if(domEl){domParent.insertBefore(dataEl,domEl);}else{domParent.appendChild(dataEl);}if(qx.core.Variant.isSet("qx.debug","on")){domOperations++;}}domPos++;}}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.html.Element.DEBUG){this.debug("Synced DOM with "+domOperations+" operations");}}},_copyData:function(fromMarkup){var elem=this._element;var data=this.__attribValues;if(data){var Attribute=qx.bom.element.Attribute;for(var key in data){Attribute.set(elem,key,data[key]);}}var data=this.__styleValues;if(data){var Style=qx.bom.element.Style;if(fromMarkup){for(var key in data){Style.set(elem,key,data[key]);}}else{Style.setCss(elem,Style.compile(data));}}var data=this.__propertyValues;if(data){for(var key in data){this._applyProperty(key,data[key]);}}var data=this.__eventValues;if(data){qx.event.Registration.getManager(elem).importListeners(elem,data);delete this.__eventValues;}},_syncData:function(){var elem=this._element;var Attribute=qx.bom.element.Attribute;var Style=qx.bom.element.Style;var jobs=this.__attribJobs;if(jobs){var data=this.__attribValues;if(data){var value;for(var key in jobs){value=data[key];if(value!==undefined){Attribute.set(elem,key,value);}else{Attribute.reset(elem,key);}}}this.__attribJobs=null;}var jobs=this.__styleJobs;if(jobs){var data=this.__styleValues;if(data){var value;for(var key in jobs){value=data[key];if(value!==undefined){Style.set(elem,key,value);}else{Style.reset(elem,key);}}}this.__styleJobs=null;}var jobs=this.__propertyJobs;if(jobs){var data=this.__propertyValues;if(data){var value;for(var key in jobs){this._applyProperty(key,data[key]);}}this.__propertyJobs=null;}},__willBeSeeable:function(){var pa=this;while(pa){if(pa._root){return true;}if(!pa._included||!pa._visible){return false;}pa=pa.__parent;}return false;},__generateListenerId:function(type,listener,self,capture){var reg=qx.core.ObjectRegistry;var id="evt-"+type+"-"+reg.toHashCode(listener);if(self){id+="-"+reg.toHashCode(self);}if(capture){id+="-capture";}return id;},__addChildHelper:function(child){if(child.__parent===this){throw new Error("Child is already in: "+child);}if(child._root){throw new Error("Root elements could not be inserted into other ones.");}if(child.__parent){child.__parent.remove(child);}child.__parent=this;if(!this.__children){this.__children=[];}if(this._element){this._scheduleChildrenUpdate();}},__removeChildHelper:function(child){if(child.__parent!==this){throw new Error("Has no child: "+child);}if(this._element){this._scheduleChildrenUpdate();}delete child.__parent;},__moveChildHelper:function(child){if(child.__parent!==this){throw new Error("Has no child: "+child);}if(this._element){this._scheduleChildrenUpdate();}},getChildren:function(){return this.__children||null;},getChild:function(index){var children=this.__children;return children&&children[index]||null;},hasChildren:function(){var children=this.__children;return children&&children[0]!==undefined;},indexOf:function(child){var children=this.__children;return children?children.indexOf(child):-1;},hasChild:function(child){var children=this.__children;return children&&children.indexOf(child)!==-1;},add:function(varargs){if(arguments[1]){for(var i=0,l=arguments.length;i<l;i++){this.__addChildHelper(arguments[i]);}this.__children.push.apply(this.__children,arguments);}else{this.__addChildHelper(varargs);this.__children.push(varargs);}return this;},addAt:function(child,index){this.__addChildHelper(child);qx.lang.Array.insertAt(this.__children,child,index);return this;},remove:function(childs){var children=this.__children;if(!children){return;}if(arguments[1]){var child;for(var i=0,l=arguments.length;i<l;i++){child=arguments[i];this.__removeChildHelper(child);qx.lang.Array.remove(children,child);}}else{this.__removeChildHelper(childs);qx.lang.Array.remove(children,childs);}return this;},removeAt:function(index){var children=this.__children;if(!children){throw new Error("Has no children!");}var child=children[index];if(!child){throw new Error("Has no child at this position!");}this.__removeChildHelper(child);qx.lang.Array.removeAt(this.__children,index);return this;},removeAll:function(){var children=this.__children;if(children){for(var i=0,l=children.length;i<l;i++){this.__removeChildHelper(children[i]);}children.length=0;}return this;},getParent:function(){return this.__parent||null;},insertInto:function(parent,index){parent.__addChildHelper(this);if(index==null){parent.__children.push(this);}else{qx.lang.Array.insertAt(this.__children,this,index);}return this;},insertBefore:function(rel){var parent=rel.__parent;parent.__addChildHelper(this);qx.lang.Array.insertBefore(parent.__children,this,rel);return this;},insertAfter:function(rel){var parent=rel.__parent;parent.__addChildHelper(this);qx.lang.Array.insertAfter(parent.__children,this,rel);return this;},moveTo:function(index){var parent=this.__parent;parent.__moveChildHelper(this);var oldIndex=parent.__children.indexOf(this);if(oldIndex===index){throw new Error("Could not move to same index!");}else if(oldIndex<index){index--;}qx.lang.Array.removeAt(parent.__children,oldIndex);qx.lang.Array.insertAt(parent.__children,this,index);return this;},moveBefore:function(rel){var parent=this.__parent;return this.moveTo(parent.__children.indexOf(rel));},moveAfter:function(rel){var parent=this.__parent;return this.moveTo(parent.__children.indexOf(rel)+1);},free:function(){var parent=this.__parent;if(!parent){throw new Error("Has no parent to remove from.");}if(!parent.__children){return;}parent.__removeChildHelper(this);qx.lang.Array.remove(parent.__children,this);return this;},getDomElement:function(){return this._element||null;},getNodeName:function(){return this._nodeName;},useMarkup:function(html){if(this._element){throw new Error("Could not overwrite existing element!");}if(qx.core.Variant.isSet("qx.client","mshtml")){var helper=document.createElement("div");}else{var helper=qx.html.Element.__markupHelper;if(!helper){helper=qx.html.Element.__markupHelper=document.createElement("div");}}helper.innerHTML=html;this._element=helper.firstChild;this._element.$$hash=this.$$hash;this._copyData(true);return this._element;},useElement:function(elem){if(this._element){throw new Error("Could not overwrite existing element!");}this._element=elem;this._element.$$hash=this.$$hash;this._copyData(true);},isFocusable:function(){var tabIndex=this.getAttribute("tabIndex");if(tabIndex>=1){return true;}var focusable=qx.event.handler.Focus.FOCUSABLE_ELEMENTS;if(tabIndex>=0&&focusable[this._nodeName]){return true;}return false;},isNativelyFocusable:function(){return !!qx.event.handler.Focus.FOCUSABLE_ELEMENTS[this._nodeName];},include:function(){if(this._included){return;}delete this._included;if(this.__parent){this.__parent._scheduleChildrenUpdate();}return this;},exclude:function(){if(!this._included){return;}this._included=false;if(this.__parent){this.__parent._scheduleChildrenUpdate();}return this;},isIncluded:function(){return this._included===true;},show:function(){if(this._visible){return;}if(this._element){qx.html.Element._visibility[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}if(this.__parent){this.__parent._scheduleChildrenUpdate();}delete this._visible;},hide:function(){if(!this._visible){return;}if(this._element){qx.html.Element._visibility[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}this._visible=false;},isVisible:function(){return this._visible===true;},scrollChildIntoViewX:function(elem,align,direct){var thisEl=this._element;var childEl=elem.getDomElement();if(direct!==false&&thisEl&&thisEl.offsetWidth&&childEl&&childEl.offsetWidth){qx.bom.element.Scroll.intoViewX(childEl,thisEl,align);}else{this.__lazyScrollIntoViewX={element:elem,align:align};qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}delete this.__lazyScrollX;},scrollChildIntoViewY:function(elem,align,direct){var thisEl=this._element;var childEl=elem.getDomElement();if(direct!==false&&thisEl&&thisEl.offsetWidth&&childEl&&childEl.offsetWidth){qx.bom.element.Scroll.intoViewY(childEl,thisEl,align);}else{this.__lazyScrollIntoViewY={element:elem,align:align};qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}delete this.__lazyScrollY;},scrollToX:function(x,lazy){var thisEl=this._element;if(lazy!==true&&thisEl&&thisEl.offsetWidth){thisEl.scrollLeft=x;}else{this.__lazyScrollX=x;qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}delete this.__lazyScrollIntoViewX;},getScrollX:function(){var thisEl=this._element;if(thisEl){return thisEl.scrollLeft;}return this.__lazyScrollX||0;},scrollToY:function(y,lazy){var thisEl=this._element;if(lazy!==true&&thisEl&&thisEl.offsetWidth){thisEl.scrollTop=y;}else{this.__lazyScrollY=y;qx.html.Element._scroll[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}delete this.__lazyScrollIntoViewY;},getScrollY:function(){var thisEl=this._element;if(thisEl){return thisEl.scrollTop;}return this.__lazyScrollY||0;},getSelection:function(){var el=this._element;if(el){return qx.bom.Selection.get(el);}return null;},getSelectionLength:function(){var el=this._element;if(el){return qx.bom.Selection.getLength(el);}return null;},setSelection:function(start,end){var el=this._element;if(el){qx.bom.Selection.set(el,start,end);}},clearSelection:function(){var el=this._element;if(el){qx.bom.Selection.clear(el);}},focus:function(){var el=this._element;if(el){return qx.bom.Element.focus(el);}qx.html.Element._actions.focus=this;qx.html.Element._scheduleFlush("element");},blur:function(){var el=this._element;if(el){qx.bom.Element.blur(el);}},activate:function(){var el=this._element;if(el){return qx.bom.Element.activate(el);}qx.html.Element._actions.activate=this;qx.html.Element._scheduleFlush("element");},deactivate:function(){var el=this._element;if(el){qx.bom.Element.deactivate(el);}},capture:function(){var el=this._element;if(el){return qx.bom.Element.capture(el);}qx.html.Element._actions.capture=this;qx.html.Element._scheduleFlush("element");},releaseCapture:function(){var el=this._element;if(el){qx.bom.Element.releaseCapture(el);}},setStyle:function(key,value,direct){if(!this.__styleValues){this.__styleValues={};}if(this.__styleValues[key]==value){return;}if(value==null){delete this.__styleValues[key];}else{this.__styleValues[key]=value;}if(this._element){if(direct){qx.bom.element.Style.set(this._element,key,value);return this;}if(!this.__styleJobs){this.__styleJobs={};}this.__styleJobs[key]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}return this;},setStyles:function(map,direct){for(var key in map){this.setStyle(key,map[key],direct);}return this;},removeStyle:function(key,direct){this.setStyle(key,null,direct);},getStyle:function(key){return this.__styleValues?this.__styleValues[key]:null;},setAttribute:function(key,value,direct){if(!this.__attribValues){this.__attribValues={};}if(this.__attribValues[key]==value){return;}if(value==null){delete this.__attribValues[key];}else{this.__attribValues[key]=value;}if(this._element){if(direct){qx.bom.element.Attribute.set(this._element,key,value);return this;}if(!this.__attribJobs){this.__attribJobs={};}this.__attribJobs[key]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}return this;},setAttributes:function(map,direct){for(var key in map){this.setAttribute(key,map[key],direct);}return this;},removeAttribute:function(key,direct){this.setAttribute(key,null,direct);},getAttribute:function(key){return this.__attribValues?this.__attribValues[key]:null;},_applyProperty:function(name,value){},_setProperty:function(key,value,direct){if(!this.__propertyValues){this.__propertyValues={};}if(this.__propertyValues[key]==value){return;}if(value==null){delete this.__propertyValues[key];}else{this.__propertyValues[key]=value;}if(this._element){if(direct){this._applyProperty(key,value);return this;}if(!this.__propertyJobs){this.__propertyJobs={};}this.__propertyJobs[key]=true;qx.html.Element._modified[this.$$hash]=this;qx.html.Element._scheduleFlush("element");}return this;},_removeProperty:function(key,direct){this._setProperty(key,null,direct);},_getProperty:function(key){return this.__propertyValues?this.__propertyValues[key]:null;},addListener:function(type,listener,self,capture){if(this.isDisposed()){return;}if(qx.core.Variant.isSet("qx.debug","on")){var msg="Failed to add event listener for type '"+type+"'"+" to the target '"+this+"': ";this.assertString(type,msg+"Invalid event type.");this.assertFunction(listener,msg+"Invalid callback function");if(self!==undefined){this.assertObject(self,"Invalid context for callback.");}if(capture!==undefined){this.assertBoolean(capture,"Invalid capture falg.");}}if(this._element){qx.event.Registration.addListener(this._element,type,listener,self,capture);}else{if(!this.__eventValues){this.__eventValues={};}var key=this.__generateListenerId(type,listener,self,capture);if(this.__eventValues[key]){this.warn("A listener of this configuration does already exist!");return false;}this.__eventValues[key]={type:type,listener:listener,self:self,capture:capture};}return this;},removeListener:function(type,listener,self,capture){if(this.isDisposed()){return;}if(qx.core.Variant.isSet("qx.debug","on")){var msg="Failed to dd event listener for type '"+type+"'"+" to the target '"+this+"': ";this.assertString(type,msg+"Invalid event type.");this.assertFunction(listener,msg+"Invalid callback function");if(self!==undefined){this.assertObject(self,"Invalid context for callback.");}if(capture!==undefined){this.assertBoolean(capture,"Invalid capture falg.");}}if(this._element){qx.event.Registration.removeListener(this._element,type,listener,self,capture);}else{var key=this.__generateListenerId(type,listener,self,capture);if(!this.__eventValues||!this.__eventValues[key]){this.warn("A listener of this configuration does not exist!");return false;}delete this.__eventValues[key];}return this;},hasListener:function(type,capture){throw new Error("hasListener() needs implementation!");}},defer:function(statics){statics.__deferredCall=new qx.util.DeferredCall(statics.flush,statics);},destruct:function(){var el=this._element;if(el){qx.event.Registration.getManager(el).removeAllListeners(el);el.$$hash="";}if(!qx.core.ObjectRegistry.inShutDown){var parent=this.__parent;if(parent&&!parent.$$disposed){parent.remove(this);}}this._disposeArray("__children");this._disposeFields("__attribValues","__styleValues","__eventValues","__propertyValues","__attribJobs","__styleJobs","__propertyJobs","_element","__parent","__lazyScrollIntoViewX","__lazyScrollIntoViewY");}});qx.Class.define("qx.ui.core.queue.Manager",{statics:{__scheduled:false,__jobs:{},scheduleFlush:function(job){var self=qx.ui.core.queue.Manager;self.__jobs[job]=true;if(!self.__scheduled){self.__deferredCall.schedule();self.__scheduled=true;}},flush:function(){var self=qx.ui.core.queue.Manager;if(self.__inFlush){return;}self.__inFlush=true;self.__deferredCall.cancel();var jobs=self.__jobs;while(jobs.widget||jobs.appearance||jobs.decorator||jobs.layout){if(jobs.widget){delete jobs.widget;qx.ui.core.queue.Widget.flush();if(jobs.widget){continue;}}if(jobs.appearance){delete jobs.appearance;qx.ui.core.queue.Appearance.flush();if(jobs.appearance){continue;}}if(jobs.layout){delete jobs.layout;qx.ui.core.queue.Layout.flush();}}qx.ui.core.queue.Manager.__scheduled=false;if(jobs.element){delete jobs.element;qx.html.Element.flush();}if(jobs.dispose){delete jobs.dispose;qx.ui.core.queue.Dispose.flush();}self.__inFlush=false;}},defer:function(statics){statics.__deferredCall=new qx.util.DeferredCall(statics.flush);qx.html.Element._scheduleFlush=statics.scheduleFlush;qx.event.Registration.addListener(window,"useraction",statics.flush);}});qx.Class.define("qx.dom.Hierarchy",{statics:{getNodeIndex:function(node){var index=0;while(node&&(node=node.previousSibling)){index++;}return index;},getElementIndex:function(element){var index=0;var type=qx.dom.Node.ELEMENT;while(element&&(element=element.previousSibling)){if(element.nodeType==type){index++;}}return index;},getNextElementSibling:function(element){while(element&&(element=element.nextSibling)&&!qx.dom.Node.isElement(element)){continue;}return element||null;},getPreviousElementSibling:function(element){while(element&&(element=element.previousSibling)&&!qx.dom.Node.isElement(element)){continue;}return element||null;},contains:qx.core.Variant.select("qx.client",{"webkit|mshtml|opera":function(element,target){if(qx.dom.Node.isDocument(element)){var doc=qx.dom.Node.getDocument(target);return element&&doc==element;}else if(qx.dom.Node.isDocument(target)){return false;}else{return element.contains(target);}},"gecko":function(element,target){return !!(element.compareDocumentPosition(target)&16);},"default":function(element,target){while(target){if(element==target){return true;}target=target.parentNode;}return false;}}),isRendered:function(element){if(!element.offsetParent){return false;}var doc=element.ownerDocument||element.document;if(doc.body.contains){return doc.body.contains(element);}if(doc.compareDocumentPosition){return !!(doc.compareDocumentPosition(element)&16);}throw new Error("Missing support for isRendered()!");},isDescendantOf:function(element,ancestor){return this.contains(ancestor,element);},getCommonParent:qx.core.Variant.select("qx.client",{"mshtml|opera":function(element1,element2){if(element1===element2){return element1;}while(element1){if(element1.contains(element2)){return element1;}element1=element1.parentNode;}return null;},"default":function(element1,element2){if(element1===element2){return element1;}var known={};var obj=qx.core.ObjectRegistry;var h1,h2;while(element1||element2){if(element1){h1=obj.toHashCode(element1);if(known[h1]){return known[h1];}known[h1]=element1;element1=element1.parentNode;}if(element2){h2=obj.toHashCode(element2);if(known[h2]){return known[h2];}known[h2]=element2;element2=element2.parentNode;}}return null;}}),getAncestors:function(element){return this._recursivelyCollect(element,"parentNode");},getChildElements:function(element){element=element.firstChild;if(!element){return [];}var arr=this.getNextSiblings(element);arr.unshift(element);return arr;},getDescendants:function(element){return qx.lang.Array.fromCollection(element.getElementsByTagName("*"));},getFirstDescendant:function(element){element=element.firstChild;while(element&&element.nodeType!=1){element=element.nextSibling;}return element;},getLastDescendant:function(element){element=element.lastChild;while(element&&element.nodeType!=1){element=element.previousSibling;}return element;},getPreviousSiblings:function(element){return this._recursivelyCollect(element,"previousSibling");},getNextSiblings:function(element){return this._recursivelyCollect(element,"nextSibling");},_recursivelyCollect:function(element,property){var list=[];while(element=element[property]){if(element.nodeType==1){list.push(element);}}return list;},getSiblings:function(element){return this.getPreviousSiblings(element).reverse().concat(this.getNextSiblings(element));},isEmpty:function(element){element=element.firstChild;while(element){if(element.nodeType===qx.dom.Node.ELEMENT||element.nodeType===qx.dom.Node.TEXT){return false;}element=element.nextSibling;}return true;},cleanWhitespace:function(element){var node=element.firstChild;while(node){var nextNode=node.nextSibling;if(node.nodeType==3&&!/\S/.test(node.nodeValue)){element.removeChild(node);}node=nextNode;}}}});qx.Class.define("qx.bom.element.Scroll",{statics:{intoViewX:function(element,stop,align){var parent=element.parentNode;var doc=qx.dom.Node.getDocument(element);var body=doc.body;var parentLocation,parentLeft,parentRight;var parentOuterWidth,parentClientWidth,parentScrollWidth;var parentLeftBorder,parentRightBorder,parentScrollBarWidth;var elementLocation,elementLeft,elementRight,elementWidth;var leftOffset,rightOffset,scrollDiff;var alignLeft=align==="left";var alignRight=align==="right";stop=stop?stop.parentNode:doc;while(parent&&parent!=stop){if(parent.scrollWidth>parent.clientWidth&&(parent===body||qx.bom.element.Overflow.getY(parent)!="visible")){if(parent===body){parentLeft=parent.scrollLeft;parentRight=parentLeft+qx.bom.Viewport.getWidth();parentOuterWidth=qx.bom.Viewport.getWidth();parentClientWidth=parent.clientWidth;parentScrollWidth=parent.scrollWidth;parentLeftBorder=0;parentRightBorder=0;parentScrollBarWidth=0;}else{parentLocation=qx.bom.element.Location.get(parent);parentLeft=parentLocation.left;parentRight=parentLocation.right;parentOuterWidth=parent.offsetWidth;parentClientWidth=parent.clientWidth;parentScrollWidth=parent.scrollWidth;parentLeftBorder=parseInt(qx.bom.element.Style.get(parent,"borderLeftWidth"),10)||0;parentRightBorder=parseInt(qx.bom.element.Style.get(parent,"borderRightWidth"),10)||0;parentScrollBarWidth=parentOuterWidth-parentClientWidth-parentLeftBorder-parentRightBorder;}elementLocation=qx.bom.element.Location.get(element);elementLeft=elementLocation.left;elementRight=elementLocation.right;elementWidth=element.offsetWidth;leftOffset=elementLeft-parentLeft-parentLeftBorder;rightOffset=elementRight-parentRight+parentRightBorder;scrollDiff=0;if(alignLeft){scrollDiff=leftOffset;}else if(alignRight){scrollDiff=rightOffset+parentScrollBarWidth;}else if(leftOffset<0||elementWidth>parentClientWidth){scrollDiff=leftOffset;}else if(rightOffset>0){scrollDiff=rightOffset+parentScrollBarWidth;}parent.scrollLeft+=scrollDiff;if(qx.bom.client.Engine.GECKO){qx.event.Registration.fireNonBubblingEvent(parent,"scroll");}}if(parent===body){break;}parent=parent.parentNode;}},intoViewY:function(element,stop,align){var parent=element.parentNode;var doc=qx.dom.Node.getDocument(element);var body=doc.body;var parentLocation,parentTop,parentBottom;var parentOuterHeight,parentClientHeight,parentScrollHeight;var parentTopBorder,parentBottomBorder,parentScrollBarHeight;var elementLocation,elementTop,elementBottom,elementHeight;var topOffset,bottomOffset,scrollDiff;var alignTop=align==="top";var alignBottom=align==="bottom";stop=stop?stop.parentNode:doc;while(parent&&parent!=stop){if(parent.scrollHeight>parent.clientHeight&&(parent===body||qx.bom.element.Overflow.getY(parent)!="visible")){if(parent===body){parentTop=parent.scrollTop;parentBottom=parentTop+qx.bom.Viewport.getHeight();parentOuterHeight=qx.bom.Viewport.getHeight();parentClientHeight=parent.clientHeight;parentScrollHeight=parent.scrollHeight;parentTopBorder=0;parentBottomBorder=0;parentScrollBarHeight=0;}else{parentLocation=qx.bom.element.Location.get(parent);parentTop=parentLocation.top;parentBottom=parentLocation.bottom;parentOuterHeight=parent.offsetHeight;parentClientHeight=parent.clientHeight;parentScrollHeight=parent.scrollHeight;parentTopBorder=parseInt(qx.bom.element.Style.get(parent,"borderTopWidth"),10)||0;parentBottomBorder=parseInt(qx.bom.element.Style.get(parent,"borderBottomWidth"),10)||0;parentScrollBarHeight=parentOuterHeight-parentClientHeight-parentTopBorder-parentBottomBorder;}elementLocation=qx.bom.element.Location.get(element);elementTop=elementLocation.top;elementBottom=elementLocation.bottom;elementHeight=element.offsetHeight;topOffset=elementTop-parentTop-parentTopBorder;bottomOffset=elementBottom-parentBottom+parentBottomBorder;scrollDiff=0;if(alignTop){scrollDiff=topOffset;}else if(alignBottom){scrollDiff=bottomOffset+parentScrollBarHeight;}else if(topOffset<0||elementHeight>parentClientHeight){scrollDiff=topOffset;}else if(bottomOffset>0){scrollDiff=bottomOffset+parentScrollBarHeight;}parent.scrollTop+=scrollDiff;if(qx.bom.client.Engine.GECKO){qx.event.Registration.fireNonBubblingEvent(parent,"scroll");}}if(parent===body){break;}parent=parent.parentNode;}},intoView:function(element,stop,alignX,alignY){this.intoViewX(element,stop,alignX);this.intoViewY(element,stop,alignY);}}});qx.Class.define("qx.bom.element.Overflow",{statics:{__scrollbarSize:null,getScrollbarWidth:function(){if(this.__scrollbarSize!==null){return this.__scrollbarSize;}var Style=qx.bom.element.Style;var getStyleSize=function(el,propertyName){return parseInt(Style.get(el,propertyName))||0;};var getBorderRight=function(el){return (Style.get(el,"borderRightStyle")=="none"?0:getStyleSize(el,"borderRightWidth"));};var getBorderLeft=function(el){return (Style.get(el,"borderLeftStyle")=="none"?0:getStyleSize(el,"borderLeftWidth"));};var getInsetRight=qx.core.Variant.select("qx.client",{"mshtml":function(el){if(Style.get(el,"overflowY")=="hidden"||el.clientWidth==0){return getBorderRight(el);}return Math.max(0,el.offsetWidth-el.clientLeft-el.clientWidth);},"default":function(el){if(el.clientWidth==0){var ov=Style.get(el,"overflow");var sbv=(ov=="scroll"||ov=="-moz-scrollbars-vertical"?16:0);return Math.max(0,getBorderRight(el)+sbv);}return Math.max(0,(el.offsetWidth-el.clientWidth-getBorderLeft(el)));}});var getScrollBarSizeRight=function(el){return getInsetRight(el)-getBorderRight(el);};var t=document.createElement("div");var s=t.style;s.height=s.width="100px";s.overflow="scroll";document.body.appendChild(t);var c=getScrollBarSizeRight(t);this.__scrollbarSize=c?c:16;document.body.removeChild(t);return this.__scrollbarSize;},_compile:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(prop,value){if(value=="hidden"){value="-moz-scrollbars-none";}return "overflow:"+value+";";}:function(prop,value){return prop+":"+value+";";},"opera":qx.bom.client.Engine.VERSION<9.5?function(prop,value){return "overflow:"+value+";";}:function(prop,value){return prop+":"+value+";";},"default":function(prop,value){return prop+":"+value+";";}}),compileX:function(value){return this._compile("overflow-x",value);},compileY:function(value){return this._compile("overflow-y",value);},getX:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element,mode){var overflow=qx.bom.element.Style.get(element,"overflow",mode,false);if(overflow==="-moz-scrollbars-none"){overflow="hidden";}return overflow;}:function(element,mode){return qx.bom.element.Style.get(element,"overflowX",mode,false);},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,mode){return qx.bom.element.Style.get(element,"overflow",mode,false);}:function(element,mode){return qx.bom.element.Style.get(element,"overflowX",mode,false);},"default":function(element,mode){return qx.bom.element.Style.get(element,"overflowX",mode,false);}}),setX:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element,value){if(value=="hidden"){value="-moz-scrollbars-none";}element.style.overflow=value;}:function(element,value){element.style.overflowX=value;},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,value){element.style.overflow=value;}:function(element,value){element.style.overflowX=value;},"default":function(element,value){element.style.overflowX=value;}}),resetX:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element){element.style.overflow="";}:function(element){element.style.overflowX="";},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,value){element.style.overflow="";}:function(element,value){element.style.overflowX="";},"default":function(element){element.style.overflowX="";}}),getY:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element,mode){var overflow=qx.bom.element.Style.get(element,"overflow",mode,false);if(overflow==="-moz-scrollbars-none"){overflow="hidden";}return overflow;}:function(element,mode){return qx.bom.element.Style.get(element,"overflowY",mode,false);},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,mode){return qx.bom.element.Style.get(element,"overflow",mode,false);}:function(element,mode){return qx.bom.element.Style.get(element,"overflowY",mode,false);},"default":function(element,mode){return qx.bom.element.Style.get(element,"overflowY",mode,false);}}),setY:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element,value){if(value==="hidden"){value="-moz-scrollbars-none";}element.style.overflow=value;}:function(element,value){element.style.overflowY=value;},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,value){element.style.overflow=value;}:function(element,value){element.style.overflowY=value;},"default":function(element,value){element.style.overflowY=value;}}),resetY:qx.core.Variant.select("qx.client",{"gecko":qx.bom.client.Engine.VERSION<1.8?function(element){element.style.overflow="";}:function(element){element.style.overflowY="";},"opera":qx.bom.client.Engine.VERSION<9.5?function(element,value){element.style.overflow="";}:function(element,value){element.style.overflowY="";},"default":function(element){element.style.overflowY="";}})}});qx.Class.define("qx.bom.element.Style",{statics:{__hints:{styleNames:{"float":qx.core.Variant.select("qx.client",{"mshtml":"styleFloat","default":"cssFloat"}),"appearance":qx.core.Variant.select("qx.client",{"gecko":"MozAppearance","webkit":"WebkitAppearance","default":"appearance"}),"userSelect":qx.core.Variant.select("qx.client",{"gecko":"MozUserSelect","webkit":"WebkitUserSelect","default":"userSelect"})},cssNames:{"appearance":qx.core.Variant.select("qx.client",{"gecko":"-moz-appearance","webkit":"-webkit-appearance","default":"appearance"}),"userSelect":qx.core.Variant.select("qx.client",{"gecko":"-moz-user-select","webkit":"-webkit-user-select","default":"user-select"}),"textOverflow":qx.core.Variant.select("qx.client",{"opera":"-o-text-overflow","default":"text-overflow"})},mshtmlPixel:{width:"pixelWidth",height:"pixelHeight",left:"pixelLeft",right:"pixelRight",top:"pixelTop",bottom:"pixelBottom"},special:{clip:1,cursor:1,opacity:1,boxSizing:1,overflowX:1,overflowY:1}},__hyphens:{},compile:function(map){var html=[];var hints=this.__hints;var special=hints.special;var names=hints.cssNames;var hyphens=this.__hyphens;var str=qx.lang.String;var name,prop,value;for(name in map){value=map[name];if(value==null){continue;}name=names[name]||name;if(special[name]){switch(name){case "clip":html.push(qx.bom.element.Clip.compile(value));break;case "cursor":html.push(qx.bom.element.Cursor.compile(value));break;case "opacity":html.push(qx.bom.element.Opacity.compile(value));break;case "boxSizing":html.push(qx.bom.element.BoxSizing.compile(value));break;case "overflowX":html.push(qx.bom.element.Overflow.compileX(value));break;case "overflowY":html.push(qx.bom.element.Overflow.compileY(value));break;}}else{prop=hyphens[name];if(!prop){prop=hyphens[name]=str.hyphenate(name);}html.push(prop,":",value,";");}}return html.join("");},setCss:qx.core.Variant.select("qx.client",{"mshtml":function(element,value){element.style.cssText=value;},"default":function(element,value){element.setAttribute("style",value);}}),getCss:qx.core.Variant.select("qx.client",{"mshtml":function(element){return element.style.cssText.toLowerCase();},"default":function(element){return element.getAttribute("style");}}),COMPUTED_MODE:1,CASCADED_MODE:2,LOCAL_MODE:3,set:function(element,name,value,smart){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertElement(element,"Invalid argument 'element'");qx.core.Assert.assertString(name,"Invalid argument 'name'");if(smart!==undefined){qx.core.Assert.assertBoolean(smart,"Invalid argument 'smart'");}}var hints=this.__hints;name=hints.styleNames[name]||name;if(smart!==false&&hints.special[name]){switch(name){case "clip":return qx.bom.element.Clip.set(element,value);case "cursor":return qx.bom.element.Cursor.set(element,value);case "opacity":return qx.bom.element.Opacity.set(element,value);case "boxSizing":return qx.bom.element.BoxSizing.set(element,value);case "overflowX":return qx.bom.element.Overflow.setX(element,value);case "overflowY":return qx.bom.element.Overflow.setY(element,value);}}element.style[name]=value!==null?value:"";},setStyles:function(element,styles,smart){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertElement(element,"Invalid argument 'element'");qx.core.Assert.assertMap(styles,"Invalid argument 'styles'");if(smart!==undefined){qx.core.Assert.assertBoolean(smart,"Invalid argument 'smart'");}}for(var name in styles){this.set(element,name,styles[name],smart);}},reset:function(element,name,smart){var hints=this.__hints;name=hints.styleNames[name]||name;if(smart!==false&&hints.special[name]){switch(name){case "clip":return qx.bom.element.Clip.reset(element);case "cursor":return qx.bom.element.Cursor.reset(element);case "opacity":return qx.bom.element.Opacity.reset(element);case "boxSizing":return qx.bom.element.BoxSizing.reset(element);case "overflowX":return qx.bom.element.Overflow.resetX(element);case "overflowY":return qx.bom.element.Overflow.resetY(element);}}element.style[name]="";},get:qx.core.Variant.select("qx.client",{"mshtml":function(element,name,mode,smart){var hints=this.__hints;name=hints.styleNames[name]||name;if(smart!==false&&hints.special[name]){switch(name){case "clip":return qx.bom.element.Clip.get(element,mode);case "cursor":return qx.bom.element.Cursor.get(element,mode);case "opacity":return qx.bom.element.Opacity.get(element,mode);case "boxSizing":return qx.bom.element.BoxSizing.get(element,mode);case "overflowX":return qx.bom.element.Overflow.getX(element,mode);case "overflowY":return qx.bom.element.Overflow.getY(element,mode);}}if(!element.currentStyle){return element.style[name]||"";}switch(mode){case this.LOCAL_MODE:return element.style[name]||"";case this.CASCADED_MODE:return element.currentStyle[name]||"";default:var currentStyle=element.currentStyle[name]||"";if(/^-?[\.\d]+(px)?$/i.test(currentStyle)){return currentStyle;}var pixel=hints.mshtmlPixel[name];if(pixel){var localStyle=element.style[name];element.style[name]=currentStyle||0;var value=element.style[pixel]+"px";element.style[name]=localStyle;return value;}if(/^-?[\.\d]+(em|pt|%)?$/i.test(currentStyle)){throw new Error("Untranslated computed property value: "+name+". Only pixel values work well across different clients.");}return currentStyle;}},"default":function(element,name,mode,smart){var hints=this.__hints;name=hints.styleNames[name]||name;if(smart!==false&&hints.special[name]){switch(name){case "clip":return qx.bom.element.Clip.get(element,mode);case "cursor":return qx.bom.element.Cursor.get(element,mode);case "opacity":return qx.bom.element.Opacity.get(element,mode);case "boxSizing":return qx.bom.element.BoxSizing.get(element,mode);case "overflowX":return qx.bom.element.Overflow.getX(element,mode);case "overflowY":return qx.bom.element.Overflow.getY(element,mode);}}switch(mode){case this.LOCAL_MODE:return element.style[name]||"";case this.CASCADED_MODE:if(element.currentStyle){return element.currentStyle[name]||"";}throw new Error("Cascaded styles are not supported in this browser!");default:var doc=qx.dom.Node.getDocument(element);var computed=doc.defaultView.getComputedStyle(element,null);return computed?computed[name]:"";}}})}});qx.Class.define("qx.bom.element.Clip",{statics:{compile:function(map){if(!map){return "clip:auto;";}var left=map.left;var top=map.top;var width=map.width;var height=map.height;var right,bottom;if(left==null){right=(width==null?"auto":width+"px");left="auto";}else{right=(width==null?"auto":left+width+"px");left=left+"px";}if(top==null){bottom=(height==null?"auto":height+"px");top="auto";}else{bottom=(height==null?"auto":top+height+"px");top=top+"px";}return "clip:rect("+top+","+right+","+bottom+","+left+");";},get:function(element,mode){var clip=qx.bom.element.Style.get(element,"clip",mode,false);var left,top,width,height;var right,bottom;if(typeof clip==="string"&&clip!=="auto"&&clip!==""){clip=qx.lang.String.trim(clip);if(/\((.*)\)/.test(clip)){var split=RegExp.$1.split(",");top=qx.lang.String.trim(split[0]);right=qx.lang.String.trim(split[1]);bottom=qx.lang.String.trim(split[2]);left=qx.lang.String.trim(split[3]);if(left==="auto"){left=null;}if(top==="auto"){top=null;}if(right==="auto"){right=null;}if(bottom==="auto"){bottom=null;}if(top!=null){top=parseInt(top,10);}if(right!=null){right=parseInt(right,10);}if(bottom!=null){bottom=parseInt(bottom,10);}if(left!=null){left=parseInt(left,10);}if(right!=null&&left!=null){width=right-left;}else if(right!=null){width=right;}if(bottom!=null&&top!=null){height=bottom-top;}else if(bottom!=null){height=bottom;}}else{throw new Error("Could not parse clip string: "+clip);}}return {left:left||null,top:top||null,width:width||null,height:height||null};},set:function(element,map){if(!map){element.style.clip="rect(auto,auto,auto,auto)";return;}var left=map.left;var top=map.top;var width=map.width;var height=map.height;var right,bottom;if(left==null){right=(width==null?"auto":width+"px");left="auto";}else{right=(width==null?"auto":left+width+"px");left=left+"px";}if(top==null){bottom=(height==null?"auto":height+"px");top="auto";}else{bottom=(height==null?"auto":top+height+"px");top=top+"px";}element.style.clip="rect("+top+","+right+","+bottom+","+left+")";},reset:function(element){element.style.clip="";}}});qx.Class.define("qx.bom.element.Cursor",{statics:{__map:qx.core.Variant.select("qx.client",{"mshtml":{"cursor":"hand","ew-resize":"e-resize","ns-resize":"n-resize","nesw-resize":"ne-resize","nwse-resize":"nw-resize"},"opera":{"col-resize":"e-resize","row-resize":"n-resize","ew-resize":"e-resize","ns-resize":"n-resize","nesw-resize":"ne-resize","nwse-resize":"nw-resize"},"default":{}}),compile:function(cursor){return "cursor:"+(this.__map[cursor]||cursor)+";";},get:function(element,mode){return qx.bom.element.Style.get(element,"cursor",mode,false);},set:function(element,value){element.style.cursor=this.__map[value]||value;},reset:function(element){element.style.cursor="";}}});qx.Class.define("qx.bom.element.Opacity",{statics:{compile:qx.core.Variant.select("qx.client",{"mshtml":function(opacity){if(opacity>=1){return "";}if(opacity<0.00001){opacity=0;}return "zoom:1;filter:alpha(opacity="+(opacity*100)+");";},"gecko":function(opacity){if(opacity==1){opacity=0.999999;}if(qx.bom.client.Engine.VERSION<1.7){return "-moz-opacity:"+opacity+";";}else{return "opacity:"+opacity+";";}},"default":function(opacity){if(opacity==1){return "";}return "opacity:"+opacity+";";}}),set:qx.core.Variant.select("qx.client",{"mshtml":function(element,opacity){var filter=qx.bom.element.Style.get(element,"filter",qx.bom.element.Style.COMPUTED_MODE,false);if(opacity>=1){element.style.filter=filter.replace(/alpha\([^\)]*\)/gi,"");return;}if(opacity<0.00001){opacity=0;}if(!element.currentStyle.hasLayout){element.style.zoom=1;}element.style.filter=filter.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+opacity*100+")";},"gecko":function(element,opacity){if(opacity==1){opacity=0.999999;}if(qx.bom.client.Engine.VERSION<1.7){element.style.MozOpacity=opacity;}else{element.style.opacity=opacity;}},"default":function(element,opacity){if(opacity==1){opacity="";}element.style.opacity=opacity;}}),reset:qx.core.Variant.select("qx.client",{"mshtml":function(element){var filter=qx.bom.element.Style.get(element,"filter",qx.bom.element.Style.COMPUTED_MODE,false);element.style.filter=filter.replace(/alpha\([^\)]*\)/gi,"");},"gecko":function(element){if(qx.bom.client.Engine.VERSION<1.7){element.style.MozOpacity="";}else{element.style.opacity="";}},"default":function(element){element.style.opacity="";}}),get:qx.core.Variant.select("qx.client",{"mshtml":function(element,mode){var filter=qx.bom.element.Style.get(element,"filter",mode,false);if(filter){var opacity=filter.match(/alpha\(opacity=(.*)\)/);if(opacity&&opacity[1]){return parseFloat(opacity[1])/100;}}return 1.0;},"gecko":function(element,mode){var opacity=qx.bom.element.Style.get(element,qx.bom.client.Engine.VERSION<1.7?"MozOpacity":"opacity",mode,false);if(opacity==0.999999){opacity=1.0;}if(opacity!=null){return parseFloat(opacity);}return 1.0;},"default":function(element,mode){var opacity=qx.bom.element.Style.get(element,"opacity",mode,false);if(opacity!=null){return parseFloat(opacity);}return 1.0;}})}});qx.Class.define("qx.bom.element.BoxSizing",{statics:{__styleProperties:qx.core.Variant.select("qx.client",{"mshtml":null,"webkit":["boxSizing","KhtmlBoxSizing","WebkitBoxSizing"],"gecko":["MozBoxSizing"],"opera":["boxSizing"]}),__cssProperties:qx.core.Variant.select("qx.client",{"mshtml":null,"webkit":["box-sizing","-khtml-box-sizing","-webkit-box-sizing"],"gecko":["-moz-box-sizing"],"opera":["box-sizing"]}),__nativeBorderBox:{tags:{button:true,select:true},types:{search:true,button:true,submit:true,reset:true,checkbox:true,radio:true}},__usesNativeBorderBox:function(element){var map=this.__nativeBorderBox;return map.tags[element.tagName.toLowerCase()]||map.types[element.type];},compile:qx.core.Variant.select("qx.client",{"mshtml":function(value){if(qx.core.Variant.isSet("qx.debug","on")){qx.log.Logger.warn(this,"This client do not support the dynamic modification of the box-sizing property.");qx.log.Logger.trace();}},"default":function(value){var props=this.__cssProperties;var css="";if(props){for(var i=0,l=props.length;i<l;i++){css+=props[i]+":"+value+";";}}return css;}}),get:qx.core.Variant.select("qx.client",{"mshtml":function(element){if(qx.bom.Document.isStandardMode(qx.dom.Node.getDocument(element))){if(!this.__usesNativeBorderBox(element)){return "content-box";}}return "border-box";},"default":function(element){var props=this.__styleProperties;var value;if(props){for(var i=0,l=props.length;i<l;i++){value=qx.bom.element.Style.get(element,props[i],null,false);if(value!=null&&value!==""){return value;}}}return "";}}),set:qx.core.Variant.select("qx.client",{"mshtml":function(element,value){if(qx.core.Variant.isSet("qx.debug","on")){qx.log.Logger.warn(this,"This client do not support the dynamic modification of the box-sizing property.");}},"default":function(element,value){var props=this.__styleProperties;if(props){for(var i=0,l=props.length;i<l;i++){element.style[props[i]]=value;}}}}),reset:function(element){this.set(element,"");}}});qx.Class.define("qx.bom.Document",{statics:{isQuirksMode:function(win){return (win||window).document.compatMode!=="CSS1Compat";},isStandardMode:function(win){return (win||window).document.compatMode==="CSS1Compat";},getWidth:function(win){var doc=(win||window).document;var view=qx.bom.Viewport.getWidth(win);var scroll=doc.compatMode==="CSS1Compat"?doc.documentElement.scrollWidth:doc.body.scrollWidth;return Math.max(scroll,view);},getHeight:function(win){var doc=(win||window).document;var view=qx.bom.Viewport.getHeight(win);var scroll=doc.compatMode==="CSS1Compat"?doc.documentElement.scrollHeight:doc.body.scrollHeight;return Math.max(scroll,view);}}});qx.Class.define("qx.bom.Viewport",{statics:{getWidth:qx.core.Variant.select("qx.client",{"opera":function(win){return (win||window).document.body.clientWidth;},"webkit":function(win){return (win||window).innerWidth;},"default":function(win){var doc=(win||window).document;return doc.compatMode==="CSS1Compat"?doc.documentElement.clientWidth:doc.body.clientWidth;}}),getHeight:qx.core.Variant.select("qx.client",{"opera":function(win){return (win||window).document.body.clientHeight;},"webkit":function(win){return (win||window).innerHeight;},"default":function(win){var doc=(win||window).document;return doc.compatMode==="CSS1Compat"?doc.documentElement.clientHeight:doc.body.clientHeight;}}),getScrollLeft:qx.core.Variant.select("qx.client",{"mshtml":function(win){var doc=(win||window).document;return doc.documentElement.scrollLeft||doc.body.scrollLeft;},"default":function(win){return (win||window).pageXOffset;}}),getScrollTop:qx.core.Variant.select("qx.client",{"mshtml":function(win){var doc=(win||window).document;return doc.documentElement.scrollTop||doc.body.scrollTop;},"default":function(win){return (win||window).pageYOffset;}})}});qx.Class.define("qx.bom.element.Location",{statics:{__style:function(elem,style){return qx.bom.element.Style.get(elem,style,qx.bom.element.Style.COMPUTED_MODE,false);},__num:function(elem,style){return parseInt(qx.bom.element.Style.get(elem,style,qx.bom.element.Style.COMPUTED_MODE,false),10)||0;},__computeScroll:function(elem){var left=0,top=0;if(elem.getBoundingClientRect){var win=qx.dom.Node.getWindow(elem);left-=qx.bom.Viewport.getScrollLeft(win);top-=qx.bom.Viewport.getScrollTop(win);}else{var body=qx.dom.Node.getDocument(elem).body;elem=elem.parentNode;while(elem&&elem!=body){left+=elem.scrollLeft;top+=elem.scrollTop;elem=elem.parentNode;}}return {left:left,top:top};},__computeBody:qx.core.Variant.select("qx.client",{"mshtml":function(elem){var doc=qx.dom.Node.getDocument(elem);var body=doc.body;var left=body.offsetLeft;var top=body.offsetTop;left-=body.parentNode.clientLeft;top-=body.parentNode.clientTop;if(doc.compatMode==="CSS1Compat"){left+=this.__num(body,"marginLeft");top+=this.__num(body,"marginTop");}return {left:left,top:top};},"webkit":function(elem){var doc=qx.dom.Node.getDocument(elem);var body=doc.body;var left=body.offsetLeft;var top=body.offsetTop;left+=this.__num(body,"borderLeftWidth");top+=this.__num(body,"borderTopWidth");if(doc.compatMode==="CSS1Compat"){left+=this.__num(body,"marginLeft");top+=this.__num(body,"marginTop");}return {left:left,top:top};},"gecko":function(elem){var body=qx.dom.Node.getDocument(elem).body;var left=body.offsetLeft;var top=body.offsetTop;if(qx.bom.element.BoxSizing.get(body)!=="border-box"){left+=this.__num(body,"borderLeftWidth");top+=this.__num(body,"borderTopWidth");if(!elem.getBoundingClientRect){var hasAbs;while(elem){if(this.__style(elem,"position")==="absolute"||this.__style(elem,"position")==="fixed"){hasAbs=true;break;}elem=elem.offsetParent;}if(!hasAbs){left+=this.__num(body,"borderLeftWidth");top+=this.__num(body,"borderTopWidth");}}}return {left:left,top:top};},"default":function(elem){var body=qx.dom.Node.getDocument(elem).body;var left=body.offsetLeft;var top=body.offsetTop;return {left:left,top:top};}}),__computeOffset:qx.core.Variant.select("qx.client",{"mshtml|webkit":function(elem){var doc=qx.dom.Node.getDocument(elem);if(elem.getBoundingClientRect){var rect=elem.getBoundingClientRect();var left=rect.left;var top=rect.top;if(doc.compatMode==="CSS1Compat"){left-=this.__num(elem,"borderLeftWidth");top-=this.__num(elem,"borderTopWidth");}}else{var left=elem.offsetLeft;var top=elem.offsetTop;elem=elem.offsetParent;var body=doc.body;while(elem&&elem!=body){left+=elem.offsetLeft;top+=elem.offsetTop;left+=this.__num(elem,"borderLeftWidth");top+=this.__num(elem,"borderTopWidth");elem=elem.offsetParent;}}return {left:left,top:top};},"gecko":function(elem){if(elem.getBoundingClientRect){var rect=elem.getBoundingClientRect();var left=Math.round(rect.left);var top=Math.round(rect.top);}else{var left=0;var top=0;var body=qx.dom.Node.getDocument(elem).body;var box=qx.bom.element.BoxSizing;if(box.get(elem)!=="border-box"){left-=this.__num(elem,"borderLeftWidth");top-=this.__num(elem,"borderTopWidth");}while(elem&&elem!==body){left+=elem.offsetLeft;top+=elem.offsetTop;if(box.get(elem)!=="border-box"){left+=this.__num(elem,"borderLeftWidth");top+=this.__num(elem,"borderTopWidth");}if(elem.parentNode&&this.__style(elem.parentNode,"overflow")!="visible"){left+=this.__num(elem.parentNode,"borderLeftWidth");top+=this.__num(elem.parentNode,"borderTopWidth");}elem=elem.offsetParent;}}return {left:left,top:top};},"default":function(elem){var left=0;var top=0;var body=qx.dom.Node.getDocument(elem).body;while(elem&&elem!==body){left+=elem.offsetLeft;top+=elem.offsetTop;elem=elem.offsetParent;}return {left:left,top:top};}}),get:function(elem,mode){var body=this.__computeBody(elem);if(elem.tagName=="BODY"){var left=body.left;var top=body.top;}else{var offset=this.__computeOffset(elem);var scroll=this.__computeScroll(elem);var left=offset.left+body.left-scroll.left;var top=offset.top+body.top-scroll.top;}var right=left+elem.offsetWidth;var bottom=top+elem.offsetHeight;if(mode){if(mode=="padding"||mode=="scroll"){var overX=qx.bom.element.Overflow.getX(elem);if(overX=="scroll"||overX=="auto"){right+=elem.scrollWidth-elem.offsetWidth+this.__num(elem,"borderLeftWidth")+this.__num(elem,"borderRightWidth");}var overY=qx.bom.element.Overflow.getY(elem);if(overY=="scroll"||overY=="auto"){bottom+=elem.scrollHeight-elem.offsetHeight+this.__num(elem,"borderTopWidth")+this.__num(elem,"borderBottomWidth");}}switch(mode){case "padding":left+=this.__num(elem,"paddingLeft");top+=this.__num(elem,"paddingTop");right-=this.__num(elem,"paddingRight");bottom-=this.__num(elem,"paddingBottom");case "scroll":left-=elem.scrollLeft;top-=elem.scrollTop;right-=elem.scrollLeft;bottom-=elem.scrollTop;case "border":left+=this.__num(elem,"borderLeftWidth");top+=this.__num(elem,"borderTopWidth");right-=this.__num(elem,"borderRightWidth");bottom-=this.__num(elem,"borderBottomWidth");break;case "margin":left-=this.__num(elem,"marginLeft");top-=this.__num(elem,"marginTop");right+=this.__num(elem,"marginRight");bottom+=this.__num(elem,"marginBottom");break;}}return {left:left,top:top,right:right,bottom:bottom};},getLeft:function(elem,mode){return this.get(elem,mode).left;},getTop:function(elem,mode){return this.get(elem,mode).top;},getRight:function(elem,mode){return this.get(elem,mode).right;},getBottom:function(elem,mode){return this.get(elem,mode).bottom;},getRelative:function(elem1,elem2,mode1,mode2){var loc1=this.get(elem1,mode1);var loc2=this.get(elem2,mode2);return {left:loc1.left-loc2.left,top:loc1.top-loc2.top,right:loc1.right-loc2.right,bottom:loc1.bottom-loc2.bottom};}}});qx.Class.define("qx.event.handler.Appear",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this.__manager=manager;this.__targets={};qx.event.handler.Appear.__instances[this.$$hash]=this;},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{appear:true,disappear:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true,__instances:{},refresh:function(){var all=this.__instances;for(var hash in all){all[hash].refresh();}}},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){var hash=qx.core.ObjectRegistry.toHashCode(target);var targets=this.__targets;if(targets&&!targets[hash]){targets[hash]=target;target.$$displayed=target.offsetWidth>0;}},unregisterEvent:function(target,type,capture){var hash=qx.core.ObjectRegistry.toHashCode(target);var targets=this.__targets;if(!targets){return;}if(targets[hash]){delete targets[hash];target.$$displayed=null;}},refresh:function(){var targets=this.__targets;var elem;for(var hash in targets){elem=targets[hash];var displayed=elem.offsetWidth>0;if((!!elem.$$displayed)!==displayed){elem.$$displayed=displayed;var evt=qx.event.Registration.createEvent(displayed?"appear":"disappear");this.__manager.dispatchEvent(elem,evt);}}}},destruct:function(){this._disposeFields("__manager","__targets");delete qx.event.handler.Appear.__instances[this.$$hash];},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.event.dispatch.AbstractBubbling",{extend:qx.core.Object,implement:qx.event.IEventDispatcher,type:"abstract",construct:function(manager){this._manager=manager;},members:{_getParent:function(target){throw new Error("Missing implementation");},canDispatchEvent:function(target,event,type){return event.getBubbles();},dispatchEvent:function(target,event,type){var parent=target;var manager=this._manager;var captureListeners,bubbleListeners;var localList;var listener,context;var currentTarget;var targetList=[];captureListeners=manager.getListeners(target,type,true);bubbleListeners=manager.getListeners(target,type,false);if(captureListeners){targetList.push(captureListeners);}if(bubbleListeners){targetList.push(bubbleListeners);}var parent=this._getParent(target);var bubbleList=[];var bubbleTargets=[];var captureList=[];var captureTargets=[];while(parent!=null){captureListeners=manager.getListeners(parent,type,true);if(captureListeners){captureList.push(captureListeners);captureTargets.push(parent);}bubbleListeners=manager.getListeners(parent,type,false);if(bubbleListeners){bubbleList.push(bubbleListeners);bubbleTargets.push(parent);}parent=this._getParent(parent);}event.setEventPhase(qx.event.type.Event.CAPTURING_PHASE);for(var i=captureList.length-1;i>=0;i--){currentTarget=captureTargets[i];event.setCurrentTarget(currentTarget);localList=captureList[i];for(var j=0,jl=localList.length;j<jl;j++){listener=localList[j];context=listener.context||currentTarget;listener.handler.call(context,event);}if(event.getPropagationStopped()){return;}}event.setEventPhase(qx.event.type.Event.AT_TARGET);event.setCurrentTarget(target);for(var i=0,il=targetList.length;i<il;i++){localList=targetList[i];for(var j=0,jl=localList.length;j<jl;j++){listener=localList[j];context=listener.context||target;listener.handler.call(context,event);}if(event.getPropagationStopped()){return;}}event.setEventPhase(qx.event.type.Event.BUBBLING_PHASE);for(var i=0,il=bubbleList.length;i<il;i++){currentTarget=bubbleTargets[i];event.setCurrentTarget(currentTarget);localList=bubbleList[i];for(var j=0,jl=localList.length;j<jl;j++){listener=localList[j];context=listener.context||currentTarget;listener.handler.call(context,event);}if(event.getPropagationStopped()){return;}}}}});qx.Class.define("qx.event.dispatch.DomBubbling",{extend:qx.event.dispatch.AbstractBubbling,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL},members:{_getParent:function(target){return target.parentNode;},canDispatchEvent:function(target,event,type){return target.nodeType!==undefined&&event.getBubbles();}},defer:function(statics){qx.event.Registration.addDispatcher(statics);}});qx.Class.define("qx.event.handler.Keyboard",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this.__manager=manager;this.__window=manager.getWindow();if(qx.core.Variant.isSet("qx.client","gecko")){this.__root=this.__window;}else{this.__root=this.__window.document.documentElement;}this.__lastUpDownType={};this._initKeyObserver();},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{keyup:1,keydown:1,keypress:1,keyinput:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true,isValidKeyIdentifier:function(keyIdentifier){if(this._identifierToKeyCodeMap[keyIdentifier]){return true;}if(keyIdentifier.length!=1){return false;}if(keyIdentifier>="0"&&keyIdentifier<="9"){return true;}if(keyIdentifier>="A"&&keyIdentifier<="Z"){return true;}switch(keyIdentifier){case "+":case "-":case "*":case "/":return true;default:return false;}}},members:{__onKeyUpDownWrapper:null,__manager:null,__window:null,__root:null,__lastUpDownType:null,canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},_fireInputEvent:function(domEvent,charCode){var focusHandler=this.__manager.getHandler(qx.event.handler.Focus);var target=focusHandler.getActive();if(!target||target.offsetWidth==0){target=focusHandler.getFocus();}if(target&&target.offsetWidth!=0){var event=qx.event.Registration.createEvent("keyinput",qx.event.type.KeyInput,[domEvent,target,charCode]);this.__manager.dispatchEvent(target,event);}if(this.__window){qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,["keyinput"]);}},_fireSequenceEvent:function(domEvent,type,keyIdentifier){var focusHandler=this.__manager.getHandler(qx.event.handler.Focus);var target=focusHandler.getActive();if(!target||target.offsetWidth==0){target=focusHandler.getFocus();}if(!target||target.offsetWidth==0){target=this.__manager.getWindow().document.body;}var event=qx.event.Registration.createEvent(type,qx.event.type.KeySequence,[domEvent,target,keyIdentifier]);this.__manager.dispatchEvent(target,event);if(qx.core.Variant.isSet("qx.client","mshtml|webkit")){if(type=="keydown"&&event.getDefaultPrevented()){var keyCode=domEvent.keyCode;if(!(this._isNonPrintableKeyCode(keyCode)||keyCode==8||keyCode==9)){this._fireSequenceEvent(domEvent,"keypress",keyIdentifier);}}}if(this.__window){qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,[type]);}},_initKeyObserver:function(){this.__onKeyUpDownWrapper=qx.lang.Function.listener(this._onKeyUpDown,this);this._onKeyPressWrapper=qx.lang.Function.listener(this._onKeyPress,this);var Event=qx.bom.Event;Event.addNativeListener(this.__root,"keyup",this.__onKeyUpDownWrapper);Event.addNativeListener(this.__root,"keydown",this.__onKeyUpDownWrapper);Event.addNativeListener(this.__root,"keypress",this._onKeyPressWrapper);},_stopKeyObserver:function(){var Event=qx.bom.Event;Event.removeNativeListener(this.__root,"keyup",this.__onKeyUpDownWrapper);Event.removeNativeListener(this.__root,"keydown",this.__onKeyUpDownWrapper);Event.removeNativeListener(this.__root,"keypress",this._onKeyPressWrapper);},_onKeyUpDown:qx.core.Variant.select("qx.client",{"mshtml":function(domEvent){domEvent=window.event||domEvent;var keyCode=domEvent.keyCode;var charCode=0;var type=domEvent.type;if(!(this.__lastUpDownType[keyCode]=="keydown"&&type=="keydown")){this._idealKeyHandler(keyCode,charCode,type,domEvent);}if(type=="keydown"){if(this._isNonPrintableKeyCode(keyCode)||keyCode==8||keyCode==9){this._idealKeyHandler(keyCode,charCode,"keypress",domEvent);}}this.__lastUpDownType[keyCode]=type;},"gecko":function(domEvent){var keyCode=this._keyCodeFix[domEvent.keyCode]||domEvent.keyCode;var charCode=domEvent.charCode;var type=domEvent.type;if(qx.bom.client.Platform.WIN){var keyIdentifier=keyCode?this._keyCodeToIdentifier(keyCode):this._charCodeToIdentifier(charCode);if(!(this.__lastUpDownType[keyIdentifier]=="keydown"&&type=="keydown")){this._idealKeyHandler(keyCode,charCode,type,domEvent);}this.__lastUpDownType[keyIdentifier]=type;}else{this._idealKeyHandler(keyCode,charCode,type,domEvent);}},"webkit":function(domEvent){var keyCode=0;var charCode=0;var type=domEvent.type;if(qx.bom.client.Engine.VERSION<525.13){if(type=="keyup"||type=="keydown"){keyCode=this._charCode2KeyCode[domEvent.charCode]||domEvent.keyCode;}else{if(this._charCode2KeyCode[domEvent.charCode]){keyCode=this._charCode2KeyCode[domEvent.charCode];}else{charCode=domEvent.charCode;}}this._idealKeyHandler(keyCode,charCode,type,domEvent);}else{keyCode=domEvent.keyCode;if(!(this.__lastUpDownType[keyCode]=="keydown"&&type=="keydown")){this._idealKeyHandler(keyCode,charCode,type,domEvent);}if(type=="keydown"){if(this._isNonPrintableKeyCode(keyCode)||keyCode==8||keyCode==9){this._idealKeyHandler(keyCode,charCode,"keypress",domEvent);}}this.__lastUpDownType[keyCode]=type;}},"opera":function(domEvent){this._idealKeyHandler(domEvent.keyCode,0,domEvent.type,domEvent);}}),_onKeyPress:qx.core.Variant.select("qx.client",{"mshtml":function(domEvent){domEvent=window.event||domEvent;if(this._charCode2KeyCode[domEvent.keyCode]){this._idealKeyHandler(this._charCode2KeyCode[domEvent.keyCode],0,domEvent.type,domEvent);}else{this._idealKeyHandler(0,domEvent.keyCode,domEvent.type,domEvent);}},"gecko":function(domEvent){var keyCode=this._keyCodeFix[domEvent.keyCode]||domEvent.keyCode;var charCode=domEvent.charCode;var type=domEvent.type;this._idealKeyHandler(keyCode,charCode,type,domEvent);},"webkit":function(domEvent){if(qx.bom.client.Engine.VERSION<525.13){var keyCode=0;var charCode=0;var type=domEvent.type;if(type=="keyup"||type=="keydown"){keyCode=this._charCode2KeyCode[domEvent.charCode]||domEvent.keyCode;}else{if(this._charCode2KeyCode[domEvent.charCode]){keyCode=this._charCode2KeyCode[domEvent.charCode];}else{charCode=domEvent.charCode;}}this._idealKeyHandler(keyCode,charCode,type,domEvent);}else{if(this._charCode2KeyCode[domEvent.keyCode]){this._idealKeyHandler(this._charCode2KeyCode[domEvent.keyCode],0,domEvent.type,domEvent);}else{this._idealKeyHandler(0,domEvent.keyCode,domEvent.type,domEvent);}}},"opera":function(domEvent){if(this._keyCodeToIdentifierMap[domEvent.keyCode]){this._idealKeyHandler(domEvent.keyCode,0,domEvent.type,domEvent);}else{this._idealKeyHandler(0,domEvent.keyCode,domEvent.type,domEvent);}}}),_idealKeyHandler:function(keyCode,charCode,eventType,domEvent){if(!keyCode&&!charCode){return;}var keyIdentifier;if(keyCode){keyIdentifier=this._keyCodeToIdentifier(keyCode);this._fireSequenceEvent(domEvent,eventType,keyIdentifier);}else{keyIdentifier=this._charCodeToIdentifier(charCode);this._fireSequenceEvent(domEvent,"keypress",keyIdentifier);this._fireInputEvent(domEvent,charCode);}},_specialCharCodeMap:{8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:"Space"},_keyCodeToIdentifierMap:{16:"Shift",17:"Control",18:"Alt",20:"CapsLock",224:"Meta",37:"Left",38:"Up",39:"Right",40:"Down",33:"PageUp",34:"PageDown",35:"End",36:"Home",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",44:"PrintScreen",145:"Scroll",19:"Pause",91:"Win",93:"Apps"},_numpadToCharCode:{96:"0".charCodeAt(0),97:"1".charCodeAt(0),98:"2".charCodeAt(0),99:"3".charCodeAt(0),100:"4".charCodeAt(0),101:"5".charCodeAt(0),102:"6".charCodeAt(0),103:"7".charCodeAt(0),104:"8".charCodeAt(0),105:"9".charCodeAt(0),106:"*".charCodeAt(0),107:"+".charCodeAt(0),109:"-".charCodeAt(0),110:",".charCodeAt(0),111:"/".charCodeAt(0)},_charCodeA:"A".charCodeAt(0),_charCodeZ:"Z".charCodeAt(0),_charCode0:"0".charCodeAt(0),_charCode9:"9".charCodeAt(0),_isNonPrintableKeyCode:function(keyCode){return this._keyCodeToIdentifierMap[keyCode]?true:false;},_isIdentifiableKeyCode:function(keyCode){if(keyCode>=this._charCodeA&&keyCode<=this._charCodeZ){return true;}if(keyCode>=this._charCode0&&keyCode<=this._charCode9){return true;}if(this._specialCharCodeMap[keyCode]){return true;}if(this._numpadToCharCode[keyCode]){return true;}if(this._isNonPrintableKeyCode(keyCode)){return true;}return false;},_keyCodeToIdentifier:function(keyCode){if(this._isIdentifiableKeyCode(keyCode)){var numPadKeyCode=this._numpadToCharCode[keyCode];if(numPadKeyCode){return String.fromCharCode(numPadKeyCode);}return (this._keyCodeToIdentifierMap[keyCode]||this._specialCharCodeMap[keyCode]||String.fromCharCode(keyCode));}else{return "Unidentified";}},_charCodeToIdentifier:function(charCode){return this._specialCharCodeMap[charCode]||String.fromCharCode(charCode).toUpperCase();},_identifierToKeyCode:function(keyIdentifier){return qx.event.handler.Keyboard._identifierToKeyCodeMap[keyIdentifier]||keyIdentifier.charCodeAt(0);}},destruct:function(){this._stopKeyObserver();this._disposeFields("__manager","__window","__root","__lastUpDownType");},defer:function(statics,members,properties){qx.event.Registration.addHandler(statics);if(!statics._identifierToKeyCodeMap){statics._identifierToKeyCodeMap={};for(var key in members._keyCodeToIdentifierMap){statics._identifierToKeyCodeMap[members._keyCodeToIdentifierMap[key]]=parseInt(key,10);}for(var key in members._specialCharCodeMap){statics._identifierToKeyCodeMap[members._specialCharCodeMap[key]]=parseInt(key,10);}}if(qx.core.Variant.isSet("qx.client","mshtml")){members._charCode2KeyCode={13:13,27:27};}else if(qx.core.Variant.isSet("qx.client","gecko")){members._keyCodeFix={12:members._identifierToKeyCode("NumLock")};}else if(qx.core.Variant.isSet("qx.client","webkit")){if(qx.bom.client.Engine.VERSION<525.13){members._charCode2KeyCode={63289:members._identifierToKeyCode("NumLock"),63276:members._identifierToKeyCode("PageUp"),63277:members._identifierToKeyCode("PageDown"),63275:members._identifierToKeyCode("End"),63273:members._identifierToKeyCode("Home"),63234:members._identifierToKeyCode("Left"),63232:members._identifierToKeyCode("Up"),63235:members._identifierToKeyCode("Right"),63233:members._identifierToKeyCode("Down"),63272:members._identifierToKeyCode("Delete"),63302:members._identifierToKeyCode("Insert"),63236:members._identifierToKeyCode("F1"),63237:members._identifierToKeyCode("F2"),63238:members._identifierToKeyCode("F3"),63239:members._identifierToKeyCode("F4"),63240:members._identifierToKeyCode("F5"),63241:members._identifierToKeyCode("F6"),63242:members._identifierToKeyCode("F7"),63243:members._identifierToKeyCode("F8"),63244:members._identifierToKeyCode("F9"),63245:members._identifierToKeyCode("F10"),63246:members._identifierToKeyCode("F11"),63247:members._identifierToKeyCode("F12"),63248:members._identifierToKeyCode("PrintScreen"),3:members._identifierToKeyCode("Enter"),12:members._identifierToKeyCode("NumLock"),13:members._identifierToKeyCode("Enter")};}else{members._charCode2KeyCode={13:13,27:27};}}}});qx.Class.define("qx.event.handler.Mouse",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this.__manager=manager;this.__window=manager.getWindow();this.__root=this.__window.document.documentElement;this._initButtonObserver();this._initMoveObserver();this._initWheelObserver();},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{mousemove:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,click:1,dblclick:1,contextmenu:1,mousewheel:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true},members:{__onButtonEventWrapper:null,__onMoveEventWrapper:null,__onWheelEventWrapper:null,__lastEventType:null,__lastMouseDownTarget:null,__manager:null,__window:null,__root:null,canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},__fireEvent:function(domEvent,type,target){if(!target){target=domEvent.target||domEvent.srcElement;}qx.event.Registration.fireEvent(target,type||domEvent.type,qx.event.type.Mouse,[domEvent,target,null,true,true]);qx.event.Registration.fireEvent(this.__window,"useraction",qx.event.type.Data,[type||domEvent.type]);},_initButtonObserver:function(){this.__onButtonEventWrapper=qx.lang.Function.listener(this._onButtonEvent,this);var Event=qx.bom.Event;Event.addNativeListener(this.__root,"mousedown",this.__onButtonEventWrapper);Event.addNativeListener(this.__root,"mouseup",this.__onButtonEventWrapper);Event.addNativeListener(this.__root,"click",this.__onButtonEventWrapper);Event.addNativeListener(this.__root,"dblclick",this.__onButtonEventWrapper);Event.addNativeListener(this.__root,"contextmenu",this.__onButtonEventWrapper);},_initMoveObserver:function(){this.__onMoveEventWrapper=qx.lang.Function.listener(this._onMoveEvent,this);var Event=qx.bom.Event;Event.addNativeListener(this.__root,"mousemove",this.__onMoveEventWrapper);Event.addNativeListener(this.__root,"mouseover",this.__onMoveEventWrapper);Event.addNativeListener(this.__root,"mouseout",this.__onMoveEventWrapper);},_initWheelObserver:function(){this.__onWheelEventWrapper=qx.lang.Function.listener(this._onWheelEvent,this);var Event=qx.bom.Event;var type=qx.core.Variant.isSet("qx.client","mshtml|webkit|opera")?"mousewheel":"DOMMouseScroll";Event.addNativeListener(this.__root,type,this.__onWheelEventWrapper);},_stopButtonObserver:function(){var Event=qx.bom.Event;Event.removeNativeListener(this.__root,"mousedown",this.__onButtonEventWrapper);Event.removeNativeListener(this.__root,"mouseup",this.__onButtonEventWrapper);Event.removeNativeListener(this.__root,"click",this.__onButtonEventWrapper);Event.removeNativeListener(this.__root,"dblclick",this.__onButtonEventWrapper);Event.removeNativeListener(this.__root,"contextmenu",this.__onButtonEventWrapper);},_stopMoveObserver:function(){var Event=qx.bom.Event;Event.removeNativeListener(this.__root,"mousemove",this.__onMoveEventWrapper);Event.removeNativeListener(this.__root,"mouseover",this.__onMoveEventWrapper);Event.removeNativeListener(this.__root,"mouseout",this.__onMoveEventWrapper);},_stopWheelObserver:function(){var Event=qx.bom.Event;var type=qx.core.Variant.isSet("qx.client","mshtml|webkit|opera")?"mousewheel":"DOMMouseScroll";Event.removeNativeListener(this.__root,type,this.__onWheelEventWrapper);},_onMoveEvent:function(domEvent){this.__fireEvent(domEvent);},_onButtonEvent:function(domEvent){var type=domEvent.type;var target=domEvent.target||domEvent.srcElement;if(qx.core.Variant.isSet("qx.client","gecko|webkit")){if(target&&target.nodeType==3){target=target.parentNode;}}if(this.__rightClickFixPre){this.__rightClickFixPre(domEvent,type,target);}if(this.__doubleClickFixPre){this.__doubleClickFixPre(domEvent,type,target);}this.__fireEvent(domEvent,type,target);if(this.__rightClickFixPost){this.__rightClickFixPost(domEvent,type,target);}if(this.__differentTargetClickFixPost){this.__differentTargetClickFixPost(domEvent,type,target);}this.__lastEventType=type;},_onWheelEvent:function(domEvent){this.__fireEvent(domEvent,"mousewheel");},__rightClickFixPre:qx.core.Variant.select("qx.client",{"webkit":function(domEvent,type,target){if(type=="contextmenu"){this.__fireEvent(domEvent,"mousedown",target);this.__fireEvent(domEvent,"mouseup",target);}},"default":null}),__rightClickFixPost:qx.core.Variant.select("qx.client",{"opera":function(domEvent,type,target){if(type=="mouseup"&&domEvent.button==2){this.__fireEvent(domEvent,"contextmenu",target);}},"default":null}),__doubleClickFixPre:qx.core.Variant.select("qx.client",{"mshtml":function(domEvent,type,target){if(type=="mouseup"&&this.__lastEventType=="click"){this.__fireEvent(domEvent,"mousedown",target);}else if(type=="dblclick"){this.__fireEvent(domEvent,"click",target);}},"default":null}),__differentTargetClickFixPost:qx.core.Variant.select("qx.client",{"mshtml":null,"default":function(domEvent,type,target){switch(type){case "mousedown":this.__lastMouseDownTarget=target;break;case "mouseup":if(target!==this.__lastMouseDownTarget){var commonParent=qx.dom.Hierarchy.getCommonParent(target,this.__lastMouseDownTarget);this.__fireEvent(domEvent,"click",commonParent);}}}})},destruct:function(){this._stopButtonObserver();this._stopMoveObserver();this._stopWheelObserver();this._disposeFields("__manager","__window","__root","__lastMouseDownTarget");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.event.handler.Capture",{extend:qx.core.Object,implement:qx.event.IEventHandler,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{capture:true,losecapture:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){}},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.event.handler.DragDrop",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this.__manager=manager;this.__root=manager.getWindow().document.documentElement;this.__manager.addListener(this.__root,"mousedown",this._onMouseDown,this);this.__rebuildStructures();},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{dragstart:1,dragend:1,dragover:1,dragleave:1,drop:1,drag:1,dragchange:1,droprequest:1},IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},addType:function(type){this.__types[type]=true;},addAction:function(action){this.__actions[action]=true;},supportsType:function(type){return !!this.__types[type];},supportsAction:function(type){return !!this.__actions[type];},getData:function(type){if(!this.__validDrop||!this.__dropTarget){throw new Error("This method must not be used outside the drop event listener!");}if(!this.__types[type]){throw new Error("Unsupported data type: "+type+"!");}if(!this.__cache[type]){this.__currentType=type;this.__fireEvent("droprequest",this.__dragTarget,false);}if(!this.__cache[type]){throw new Error("Please use a dragrequest listener to the drag target to fill the manager with data!");}return this.__cache[type]||null;},getCurrentAction:function(){return this.__currentAction;},addData:function(type,data){this.__cache[type]=data;},getCurrentType:function(){return this.__currentType;},__rebuildStructures:function(){this.__types={};this.__actions={};this.__keys={};this.__cache={};},__detectAction:function(){var actions=this.__actions;var keys=this.__keys;var current=null;if(this.__validDrop){if(keys.Shift&&keys.Ctrl&&actions.alias){current="alias";}else if(keys.Shift&&keys.Alt&&actions.copy){current="copy";}else if(keys.Shift&&actions.move){current="move";}else if(keys.Alt&&actions.alias){current="alias";}else if(keys.Ctrl&&actions.copy){current="copy";}else if(actions.move){current="move";}else if(actions.copy){current="copy";}else if(actions.alias){current="alias";}}if(current!=this.__currentAction){this.__currentAction=current;this.__fireEvent("dragchange",this.__dragTarget,false);}},__fireEvent:function(type,target,cancelable,original){var Registration=qx.event.Registration;var dragEvent=Registration.createEvent(type,qx.event.type.Drag,[cancelable,original]);if(this.__dragTarget!==this.__dropTarget){if(target==this.__dragTarget){dragEvent.setRelatedTarget(this.__dropTarget);}else{dragEvent.setRelatedTarget(this.__dragTarget);}}return Registration.dispatchEvent(target,dragEvent);},__findDraggable:function(elem){while(elem&&elem.nodeType==1){if(elem.getAttribute("qxDraggable")=="on"){return elem;}elem=elem.parentNode;}return null;},__findDroppable:function(elem){while(elem&&elem.nodeType==1){if(elem.getAttribute("qxDroppable")=="on"){return elem;}elem=elem.parentNode;}return null;},__clearInit:function(){this.__dragTarget=null;this.__manager.removeListener(this.__root,"mousemove",this._onMouseMove,this,true);this.__manager.removeListener(this.__root,"mouseup",this._onMouseUp,this,true);qx.event.Registration.removeListener(window,"blur",this._onWindowBlur,this);this.__rebuildStructures();},__clearSession:function(){if(this.__sessionActive){this.__manager.removeListener(this.__root,"mouseover",this._onMouseOver,this,true);this.__manager.removeListener(this.__root,"mouseout",this._onMouseOut,this,true);this.__manager.removeListener(this.__root,"keydown",this._onKeyDown,this,true);this.__manager.removeListener(this.__root,"keyup",this._onKeyUp,this,true);this.__fireEvent("dragend",this.__dragTarget,false);this.__sessionActive=false;}this.__validDrop=false;this.__dropTarget=null;this.__clearInit();},__validDrop:false,_onWindowBlur:function(e){this.__clearSession();},_onKeyDown:function(e){var iden=e.getKeyIdentifier();switch(iden){case "Alt":case "Ctrl":case "Shift":if(!this.__keys[iden]){this.__keys[iden]=true;this.__detectAction();}}},_onKeyUp:function(e){var iden=e.getKeyIdentifier();switch(iden){case "Alt":case "Ctrl":case "Shift":if(this.__keys[iden]){this.__keys[iden]=false;this.__detectAction();}}},_onMouseDown:function(e){if(this.__sessionActive){return;}var dragable=this.__findDraggable(e.getTarget());if(dragable){this.__startLeft=e.getDocumentLeft();this.__startTop=e.getDocumentTop();this.__dragTarget=dragable;this.__manager.addListener(this.__root,"mousemove",this._onMouseMove,this,true);this.__manager.addListener(this.__root,"mouseup",this._onMouseUp,this,true);qx.event.Registration.addListener(window,"blur",this._onWindowBlur,this);}},_onMouseUp:function(e){if(this.__validDrop){this.__fireEvent("drop",this.__dropTarget,false,e);}if(this.__sessionActive){e.stopPropagation();}this.__clearSession();},_onMouseMove:function(e){if(this.__sessionActive){if(!this.__fireEvent("drag",this.__dragTarget,true,e)){this.__clearSession();}}else{if(Math.abs(e.getDocumentLeft()-this.__startLeft)>3||Math.abs(e.getDocumentTop()-this.__startTop)>3){if(this.__fireEvent("dragstart",this.__dragTarget,true,e)){this.__sessionActive=true;this.__manager.addListener(this.__root,"mouseover",this._onMouseOver,this,true);this.__manager.addListener(this.__root,"mouseout",this._onMouseOut,this,true);this.__manager.addListener(this.__root,"keydown",this._onKeyDown,this,true);this.__manager.addListener(this.__root,"keyup",this._onKeyUp,this,true);var keys=this.__keys;keys.Ctrl=e.isCtrlPressed();keys.Shift=e.isShiftPressed();keys.Alt=e.isAltPressed();this.__detectAction();}else{this.__fireEvent("dragend",this.__dragTarget,false);this.__clearInit();}}}},_onMouseOver:function(e){var target=e.getTarget();var dropable=this.__findDroppable(target);if(dropable&&dropable!=this.__dropTarget){this.__validDrop=this.__fireEvent("dragover",dropable,true,e);this.__dropTarget=dropable;this.__detectAction();}},_onMouseOut:function(e){var target=e.getTarget();var dropable=this.__findDroppable(target);if(dropable&&dropable==this.__dropTarget){this.__fireEvent("dragleave",this.__dropTarget,false,e);this.__dropTarget=null;this.__validDrop=false;this.__detectAction();}}},destruct:function(){this.__clearSession();this.__manager.removeListener(this.__root,"mousedown",this._onMouseDown,this);this._disposeFields("__dragTarget","__dropTarget","__manager","__root","__types","__actions","__keys","__cache");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.event.handler.Element",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this._manager=manager;this._registeredEvents={};},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{abort:true,scroll:true,select:true,reset:true,submit:true},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){var elementId=qx.core.ObjectRegistry.toHashCode(target);var eventId=elementId+"-"+type;var listener=qx.lang.Function.listener(this._onNative,this,eventId);qx.bom.Event.addNativeListener(target,type,listener);this._registeredEvents[eventId]={element:target,type:type,listener:listener};},unregisterEvent:function(target,type,capture){var events=this._registeredEvents;if(!events){return;}var elementId=qx.core.ObjectRegistry.toHashCode(target);var eventId=elementId+"-"+type;var eventData=this._registeredEvents[eventId];qx.bom.Event.removeNativeListener(target,type,eventData.listener);delete this._registeredEvents[eventId];},_onNative:function(nativeEvent,eventId){var events=this._registeredEvents;if(!events){return;}var eventData=events[eventId];qx.event.Registration.fireNonBubblingEvent(eventData.element,eventData.type,qx.event.type.Native,[nativeEvent]);}},destruct:function(){var entry;var events=this._registeredEvents;for(var id in events){entry=events[id];qx.bom.Event.removeNativeListener(entry.element,entry.type,entry.listener);}this._disposeFields("_manager","_registeredEvents");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.bom.Element",{statics:{__initialAttributes:{"onload":true,"onpropertychange":true,"oninput":true,"onchange":true,"name":true,"type":true,"checked":true,"disabled":true},create:function(name,attributes,win,ns){if(!win){win=window;}if(!name){throw new Error("The tag name is missing!");}var initial=this.__initialAttributes;var attributesHtml="";for(var key in attributes){if(initial[key]){attributesHtml+=key+"='"+attributes[key]+"' ";}}var element;if(attributesHtml!=""){if(qx.bom.client.Engine.MSHTML){element=win.document.createElement("<"+name+" "+attributesHtml+">");}else{var helper=win.document.createElement("div");helper.innerHTML="<"+name+" "+attributesHtml+"></"+name+">";element=helper.firstChild;}}else{if(win.document.createElementNS){element=win.document.createElementNS("http://www.w3.org/1999/xhtml",name);}else{element=win.document.createElement(name);}}for(var key in attributes){if(!initial[key]){qx.bom.element.Attribute.set(element,key,attributes[key]);}}return element;},empty:function(element){return element.innerHTML="";},addListener:function(element,type,listener,self,capture){return qx.event.Registration.addListener(element,type,listener,self,capture);},removeListener:function(element,type,listener,self,capture){return qx.event.Registration.removeListener(element,type,listener,self,capture);},hasListener:function(element,type,capture){return qx.event.Registration.hasListener(element,type,capture);},focus:function(element){qx.event.Registration.getManager(element).getHandler(qx.event.handler.Focus).focus(element);},blur:function(element){qx.event.Registration.getManager(element).getHandler(qx.event.handler.Focus).blur(element);},activate:function(element){qx.event.Registration.getManager(element).getHandler(qx.event.handler.Focus).activate(element);},deactivate:function(element){qx.event.Registration.getManager(element).getHandler(qx.event.handler.Focus).deactivate(element);},capture:function(element){qx.event.Registration.getManager(element).getDispatcher(qx.event.dispatch.MouseCapture).activateCapture(element);},releaseCapture:function(element){qx.event.Registration.getManager(element).getDispatcher(qx.event.dispatch.MouseCapture).releaseCapture(element);}}});qx.Class.define("qx.event.handler.Focus",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this._manager=manager;this._window=manager.getWindow();this._document=this._window.document;this._root=this._document.documentElement;this._body=this._document.body;this._initObserver();},properties:{active:{apply:"_applyActive",nullable:true},focus:{apply:"_applyFocus",nullable:true}},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{focus:1,blur:1,focusin:1,focusout:1,activate:1,deactivate:1},IGNORE_CAN_HANDLE:true,FOCUSABLE_ELEMENTS:qx.core.Variant.select("qx.client",{"mshtml|gecko":{a:1,body:1,button:1,frame:1,iframe:1,img:1,input:1,object:1,select:1,textarea:1},"opera|webkit":{button:1,input:1,select:1,textarea:1}})},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},focus:function(element){try{element.focus();}catch(ex){}this.setFocus(element);this.setActive(element);},activate:function(element){this.setActive(element);},blur:function(element){try{element.blur();}catch(ex){}if(this.getActive()===element){this.resetActive();}if(this.getFocus()===element){this.resetFocus();}},deactivate:function(element){if(this.getActive()===element){this.resetActive();}},tryActivate:function(element){var active=this.__findActivatableElement(element);if(active){this.setActive(active);}},__fireEvent:function(target,related,type,bubbles){var Registration=qx.event.Registration;var evt=Registration.createEvent(type,qx.event.type.Focus,[target,related,bubbles]);Registration.dispatchEvent(target,evt);},_windowFocused:true,__doWindowBlur:function(){if(this._windowFocused){this._windowFocused=false;this.__fireEvent(this._window,null,"blur",false);}},__doWindowFocus:function(){if(!this._windowFocused){this._windowFocused=true;this.__fireEvent(this._window,null,"focus",false);}},_initObserver:qx.core.Variant.select("qx.client",{"gecko":function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusWrapper=qx.lang.Function.listener(this.__onNativeFocus,this);this.__onNativeBlurWrapper=qx.lang.Function.listener(this.__onNativeBlur,this);this.__onNativeDragGestureWrapper=qx.lang.Function.listener(this.__onNativeDragGesture,this);this._document.addEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._document.addEventListener("mouseup",this.__onNativeMouseUpWrapper,true);this._window.addEventListener("focus",this.__onNativeFocusWrapper,true);this._window.addEventListener("blur",this.__onNativeBlurWrapper,true);this._window.addEventListener("draggesture",this.__onNativeDragGestureWrapper,true);},"mshtml":function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusInWrapper=qx.lang.Function.listener(this.__onNativeFocusIn,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);this.__onNativeSelectStartWrapper=qx.lang.Function.listener(this.__onNativeSelectStart,this);this._document.attachEvent("onmousedown",this.__onNativeMouseDownWrapper);this._document.attachEvent("onmouseup",this.__onNativeMouseUpWrapper);this._document.attachEvent("onfocusin",this.__onNativeFocusInWrapper);this._document.attachEvent("onfocusout",this.__onNativeFocusOutWrapper);this._document.attachEvent("onselectstart",this.__onNativeSelectStartWrapper);},"webkit":function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);this.__onNativeFocusWrapper=qx.lang.Function.listener(this.__onNativeFocus,this);this.__onNativeBlurWrapper=qx.lang.Function.listener(this.__onNativeBlur,this);this.__onNativeSelectStartWrapper=qx.lang.Function.listener(this.__onNativeSelectStart,this);this._document.addEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._document.addEventListener("mouseup",this.__onNativeMouseUpWrapper,true);this._document.addEventListener("selectstart",this.__onNativeSelectStartWrapper,false);this._window.addEventListener("DOMFocusOut",this.__onNativeFocusOutWrapper,true);this._window.addEventListener("focus",this.__onNativeFocusWrapper,true);this._window.addEventListener("blur",this.__onNativeBlurWrapper,true);},"opera":function(){this.__onNativeMouseDownWrapper=qx.lang.Function.listener(this.__onNativeMouseDown,this);this.__onNativeMouseUpWrapper=qx.lang.Function.listener(this.__onNativeMouseUp,this);this.__onNativeFocusInWrapper=qx.lang.Function.listener(this.__onNativeFocusIn,this);this.__onNativeFocusOutWrapper=qx.lang.Function.listener(this.__onNativeFocusOut,this);this._document.addEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._document.addEventListener("mouseup",this.__onNativeMouseUpWrapper,true);this._window.addEventListener("DOMFocusIn",this.__onNativeFocusInWrapper,true);this._window.addEventListener("DOMFocusOut",this.__onNativeFocusOutWrapper,true);}}),_stopObserver:qx.core.Variant.select("qx.client",{"gecko":function(){this._document.removeEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._document.removeEventListener("mouseup",this.__onNativeMouseUpWrapper,true);this._window.removeEventListener("focus",this.__onNativeFocusWrapper,true);this._window.removeEventListener("blur",this.__onNativeBlurWrapper,true);this._window.removeEventListener("draggesture",this.__onNativeDragGestureWrapper,true);},"mshtml":function(){this._document.detachEvent("onmousedown",this.__onNativeMouseDownWrapper);this._document.detachEvent("onmouseup",this.__onNativeMouseUpWrapper);this._document.detachEvent("onfocusin",this.__onNativeFocusInWrapper);this._document.detachEvent("onfocusout",this.__onNativeFocusOutWrapper);this._document.detachEvent("onselectstart",this.__onNativeSelectStartWrapper);},"webkit":function(){this._document.removeEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._document.removeEventListener("selectstart",this.__onNativeSelectStartWrapper,false);this._window.removeEventListener("DOMFocusIn",this.__onNativeFocusInWrapper,true);this._window.removeEventListener("DOMFocusOut",this.__onNativeFocusOutWrapper,true);this._window.removeEventListener("focus",this.__onNativeFocusWrapper,true);this._window.removeEventListener("blur",this.__onNativeBlurWrapper,true);},"opera":function(){this._document.removeEventListener("mousedown",this.__onNativeMouseDownWrapper,true);this._window.removeEventListener("DOMFocusIn",this.__onNativeFocusInWrapper,true);this._window.removeEventListener("DOMFocusOut",this.__onNativeFocusOutWrapper,true);this._window.removeEventListener("focus",this.__onNativeFocusWrapper,true);this._window.removeEventListener("blur",this.__onNativeBlurWrapper,true);}}),__onNativeDragGesture:qx.core.Variant.select("qx.client",{"gecko":function(e){if(!this.__isSelectable(e.target)){qx.bom.Event.preventDefault(e);}},"default":null}),__onNativeFocusIn:qx.core.Variant.select("qx.client",{"mshtml":function(e){this.__doWindowFocus();var target=e.srcElement;var focusTarget=this.__findFocusableElement(target);if(focusTarget){this.setFocus(focusTarget);}this.tryActivate(target);},"opera":function(e){var target=e.target;if(target==this._document||target==this._window){this.__doWindowFocus();if(this.__previousFocus){this.setFocus(this.__previousFocus);delete this.__previousFocus;}if(this.__previousActive){this.setActive(this.__previousActive);delete this.__previousActive;}}else{this.setFocus(target);this.tryActivate(target);if(!this.__isSelectable(target)){target.selectionStart=0;target.selectionEnd=0;}}},"default":null}),__onNativeFocusOut:qx.core.Variant.select("qx.client",{"mshtml":function(e){if(!e.toElement){this.__doWindowBlur();this.resetFocus();this.resetActive();}},"webkit":function(e){var target=e.target;if(target===this.getFocus()){this.resetFocus();}if(target===this.getActive()){this.resetActive();}},"opera":function(e){var target=e.target;if(target==this._document){this.__doWindowBlur();this.__previousFocus=this.getFocus();this.__previousActive=this.getActive();this.resetFocus();this.resetActive();}else{if(target===this.getFocus()){this.resetFocus();}if(target===this.getActive()){this.resetActive();}}},"default":null}),__onNativeBlur:qx.core.Variant.select("qx.client",{"gecko":function(e){if(e.target===this._window||e.target===this._document){this.__doWindowBlur();this.resetActive();this.resetFocus();}},"webkit":function(e){if(e.target===this._window||e.target===this._document){this.__doWindowBlur();this.__previousFocus=this.getFocus();this.__previousActive=this.getActive();this.resetActive();this.resetFocus();}},"default":null}),__onNativeFocus:qx.core.Variant.select("qx.client",{"gecko":function(e){var target=e.target;if(target===this._window||target===this._document){this.__doWindowFocus();target=this._body;}this.setFocus(target);this.tryActivate(target);},"webkit":function(e){var target=e.target;if(target===this._window||target===this._document){this.__doWindowFocus();if(this.__previousFocus){this.setFocus(this.__previousFocus);delete this.__previousFocus;}if(this.__previousActive){this.setActive(this.__previousActive);delete this.__previousActive;}}else{this.setFocus(target);this.tryActivate(target);}},"default":null}),__onNativeMouseDown:qx.core.Variant.select("qx.client",{"gecko":function(e){var target=e.target;var focusTarget=this.__findFocusableElement(target);var selectable=this.__isSelectable(target);if(!selectable){qx.bom.Event.preventDefault(e);if(focusTarget){focusTarget.focus();}}else if(!focusTarget){qx.bom.Event.preventDefault(e);}},"mshtml":function(e){var target=e.srcElement;var focusTarget=this.__findFocusableElement(target);if(focusTarget){if(!this.__isSelectable(target)){target.unselectable="on";document.selection.empty();focusTarget.focus();}}else{qx.bom.Event.preventDefault(e);if(!this.__isSelectable(target)){target.unselectable="on";}}},"webkit":function(e){var target=e.target;var focusTarget=this.__findFocusableElement(target);if(focusTarget){this.setFocus(focusTarget);}else{qx.bom.Event.preventDefault(e);}},"opera":function(e){var target=e.target;var focusTarget=this.__findFocusableElement(target);if(!this.__isSelectable(target)){qx.bom.Event.preventDefault(e);if(focusTarget){var current=this.getFocus();if(current&&current.selectionEnd){current.selectionStart=0;current.selectionEnd=0;current.blur();}if(focusTarget){this.setFocus(focusTarget);}}}else if(focusTarget){this.setFocus(focusTarget);}},"default":null}),__onNativeMouseUp:qx.core.Variant.select("qx.client",{"mshtml":function(e){var target=e.srcElement;if(target.unselectable){target.unselectable="off";}this.tryActivate(target);},"gecko":function(e){var target=e.target;while(target&&target.offsetWidth===undefined){target=target.parentNode;}if(target){this.tryActivate(target);}if(this.__lastUserSelectBlocked){this.__lastUserSelectBlocked.style.MozUserSelect="";this.__lastUserSelectBlocked=null;}},"webkit|opera":function(e){this.tryActivate(e.target);},"default":null}),__onNativeSelectStart:qx.core.Variant.select("qx.client",{"mshtml|webkit":function(e){if(!this.__isSelectable(e.srcElement)){qx.bom.Event.preventDefault(e);}},"default":null}),__isFocusable:function(el){var index=qx.bom.element.Attribute.get(el,"tabIndex");if(index>=1){return true;}var focusable=qx.event.handler.Focus.FOCUSABLE_ELEMENTS;if(index>=0&&focusable[el.tagName]){return true;}return false;},__findFocusableElement:function(el){while(el&&el.nodeType===1){if(el.getAttribute("qxKeepFocus")=="on"){return null;}if(this.__isFocusable(el)){return el;}el=el.parentNode;}return this._body;},__findActivatableElement:function(el){var orig=el;while(el&&el.nodeType===1){if(el.getAttribute("qxKeepActive")=="on"){return null;}el=el.parentNode;}return orig;},__isSelectable:function(node){while(node&&node.nodeType===1){var attr=node.getAttribute("qxSelectable");if(attr!=null){return attr==="on";}node=node.parentNode;}return true;},_applyActive:function(value,old){if(old){this.__fireEvent(old,value,"deactivate",true);}if(value){this.__fireEvent(value,old,"activate",true);}},_applyFocus:function(value,old){if(old){this.__fireEvent(old,value,"focusout",true);}if(value){this.__fireEvent(value,old,"focusin",true);}if(old){this.__fireEvent(old,value,"blur",false);}if(value){this.__fireEvent(value,old,"focus",false);}}},destruct:function(){this._stopObserver();this._disposeFields("_manager","_window","_document","_root","_body","__mouseActive");},defer:function(statics){qx.event.Registration.addHandler(statics);var focusable=statics.FOCUSABLE_ELEMENTS;for(var entry in focusable){focusable[entry.toUpperCase()]=1;}}});qx.Class.define("qx.event.type.Focus",{extend:qx.event.type.Event,members:{init:function(target,relatedTarget,canBubble){this.base(arguments,canBubble,false);this._target=target;this._relatedTarget=relatedTarget;return this;}}});qx.Class.define("qx.bom.element.Attribute",{statics:{__hints:{names:{"class":"className","for":"htmlFor",html:"innerHTML",text:qx.core.Variant.isSet("qx.client","mshtml")?"innerText":"textContent",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellpadding:"cellPadding",cellspacing:"cellSpacing",frameborder:"frameBorder",usemap:"useMap"},runtime:{"html":1,"text":1},bools:{compact:1,nowrap:1,ismap:1,declare:1,noshade:1,checked:1,disabled:1,readonly:1,multiple:1,selected:1,noresize:1,defer:1},property:{$$html:1,$$widget:1,disabled:1,checked:1,readOnly:1,multiple:1,selected:1,value:1,maxLength:1,className:1,innerHTML:1,innerText:1,textContent:1,htmlFor:1,tabIndex:1},original:{href:1,src:1,type:1}},compile:function(map){var html=[];var runtime=this.__hints.runtime;for(var key in map){if(!runtime[key]){html.push(key,"='",map[key],"'");}}return html.join("");},get:qx.core.Variant.select("qx.client",{"mshtml":function(element,name){var hints=this.__hints;var value;name=hints.names[name]||name;if(hints.original[name]){value=element.getAttribute(name,2);}else if(hints.property[name]){value=element[name];}else{value=element.getAttribute(name);}if(hints.bools[name]){return !!value;}return value;},"default":function(element,name){var hints=this.__hints;var value;name=hints.names[name]||name;if(hints.property[name]){value=element[name];if(value==null){value=element.getAttribute(name);}}else{value=element.getAttribute(name);}if(hints.bools[name]){return !!value;}return value;}}),set:function(element,name,value){var hints=this.__hints;name=hints.names[name]||name;if(hints.bools[name]){value=!!value;}if(hints.property[name]){element[name]=value;}else if(value===true){element.setAttribute(name,name);}else if(value===false||value===null){element.removeAttribute(name);}else{element.setAttribute(name,value);}},reset:function(element,name){this.set(element,name,null);}}});qx.Class.define("qx.event.type.Native",{extend:qx.event.type.Event,members:{init:function(nativeEvent,target,relatedTarget,canBubble,cancelable){this.base(arguments,canBubble,cancelable);this._target=target||qx.bom.Event.getTarget(nativeEvent);this._relatedTarget=relatedTarget||qx.bom.Event.getRelatedTarget(nativeEvent);if(nativeEvent.timeStamp){this._timeStamp=nativeEvent.timeStamp;}this._native=nativeEvent;return this;},clone:function(embryo){var clone=this.base(arguments,embryo);clone._native=this._native;return clone;},preventDefault:function(){this.base(arguments);qx.bom.Event.preventDefault(this._native);},stop:function(){this.stopPropagation();this.preventDefault();},getNativeEvent:function(){return this._native;}},destruct:function(){this._disposeFields("_native");}});qx.Class.define("qx.event.type.Dom",{extend:qx.event.type.Native,statics:{SHIFT_MASK:1,CTRL_MASK:2,ALT_MASK:4,META_MASK:8},members:{getModifiers:function(){if(!this.__modifiers){var mask=0;var evt=this._native;if(evt.shiftKey){mask|=qx.event.type.Dom.SHIFT_MASK;}if(evt.ctrlKey){mask|=qx.event.type.Dom.CTRL_MASK;}if(evt.altKey){mask|=qx.event.type.Dom.ALT_MASK;}if(evt.metaKey){mask|=qx.event.type.Dom.META_MASK;}return mask;}return this.__modifiers;},isCtrlPressed:function(){return this._native.ctrlKey;},isShiftPressed:function(){return this._native.shiftKey;},isAltPressed:function(){return this._native.altKey;},isMetaPressed:function(){return this._native.metaKey;},isCtrlOrCommandPressed:function(){if(qx.bom.client.Platform.MAC){return this._native.metaKey;}else{return this._native.ctrlKey;}}}});qx.Class.define("qx.event.type.KeyInput",{extend:qx.event.type.Dom,members:{init:function(domEvent,target,charCode){this.base(arguments,domEvent,target,null,true,true);this._charCode=charCode;return this;},clone:function(embryo){var clone=this.base(arguments,embryo);clone._charCode=this._charCode;return clone;},getCharCode:function(){return this._charCode;},getChar:function(){return String.fromCharCode(this._charCode);}}});qx.Bootstrap.define("qx.bom.client.Platform",{statics:{NAME:"",WIN:false,MAC:false,UNIX:false,__init:function(){var input=navigator.platform;if(input==null||input===""){input=navigator.userAgent;}if(input.indexOf("Windows")!=-1||input.indexOf("Win32")!=-1||input.indexOf("Win64")!=-1){this.WIN=true;this.NAME="win";}else if(input.indexOf("Macintosh")!=-1||input.indexOf("MacPPC")!=-1||input.indexOf("MacIntel")!=-1||input.indexOf("iPod")!=-1||input.indexOf("iPhone")!=-1){this.MAC=true;this.NAME="mac";}else if(input.indexOf("X11")!=-1||input.indexOf("Linux")!=-1||input.indexOf("BSD")!=-1){this.UNIX=true;this.NAME="unix";}else{throw new Error("Unable to detect platform: "+input);}}},defer:function(statics){statics.__init();}});qx.Class.define("qx.event.type.KeySequence",{extend:qx.event.type.Dom,members:{init:function(domEvent,target,identifier){this.base(arguments,domEvent,target,null,true,true);this._identifier=identifier;return this;},clone:function(embryo){var clone=this.base(arguments,embryo);clone._identifier=this._identifier;return clone;},getKeyIdentifier:function(){return this._identifier;}}});qx.Class.define("qx.event.type.Mouse",{extend:qx.event.type.Dom,members:{init:function(nativeEvent,target,relatedTarget,canBubble,cancelable){this.base(arguments,nativeEvent,target,relatedTarget,canBubble,cancelable);if(!relatedTarget){this._relatedTarget=qx.bom.Event.getRelatedTarget(nativeEvent);}return this;},__buttons:qx.core.Variant.select("qx.client",{"mshtml":{1:"left",2:"right",4:"middle"},"default":{0:"left",2:"right",1:"middle"}}),stop:function(){this.stopPropagation();},getButton:function(){switch(this._type){case "click":case "dblclick":return "left";case "contextmenu":return "right";default:return this.__buttons[this._native.button]||"none";}},isLeftPressed:function(){return this.getButton()==="left";},isMiddlePressed:function(){return this.getButton()==="middle";},isRightPressed:function(){return this.getButton()==="right";},getRelatedTarget:function(){return this._relatedTarget;},getViewportLeft:function(){return this._native.clientX;},getViewportTop:function(){return this._native.clientY;},getDocumentLeft:qx.core.Variant.select("qx.client",{"mshtml":function(){var win=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientX+qx.bom.Viewport.getScrollLeft(win);},"default":function(){return this._native.pageX;}}),getDocumentTop:qx.core.Variant.select("qx.client",{"mshtml":function(){var win=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientY+qx.bom.Viewport.getScrollTop(win);},"default":function(){return this._native.pageY;}}),getScreenLeft:function(){return this._native.screenX;},getScreenTop:function(){return this._native.screenY;},getWheelDelta:qx.core.Variant.select("qx.client",{"default":function(){return -(this._native.wheelDelta/40);},"gecko":function(){return this._native.detail;}})}});qx.Class.define("qx.event.type.Drag",{extend:qx.event.type.Event,members:{init:function(cancelable,originalEvent){this.base(arguments,false,cancelable);if(originalEvent){this._native=originalEvent.getNativeEvent()||null;this._originalTarget=originalEvent.getTarget()||null;}else{this._native=null;this._originalTarget=null;}return this;},clone:function(embryo){var clone=this.base(arguments,embryo);clone._native=this._native;return clone;},getDocumentLeft:qx.core.Variant.select("qx.client",{"mshtml":function(){if(this._native==null){return 0;}var win=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientX+qx.bom.Viewport.getScrollLeft(win);},"default":function(){if(this._native==null){return 0;}return this._native.pageX;}}),getDocumentTop:qx.core.Variant.select("qx.client",{"mshtml":function(){if(this._native==null){return 0;}var win=qx.dom.Node.getWindow(this._native.srcElement);return this._native.clientY+qx.bom.Viewport.getScrollTop(win);},"default":function(){if(this._native==null){return 0;}return this._native.pageY;}}),getManager:function(){return qx.event.Registration.getManager(this.getTarget()).getHandler(qx.event.handler.DragDrop);},addType:function(type){this.getManager().addType(type);},addAction:function(action){this.getManager().addAction(action);},supportsType:function(type){return this.getManager().supportsType(type);},supportsAction:function(action){return this.getManager().supportsAction(action);},addData:function(type,data){this.getManager().addData(type,data);},getData:function(type){return this.getManager().getData(type);},getCurrentType:function(){return this.getManager().getCurrentType();},getCurrentAction:function(){return this.getManager().getCurrentAction();}}});qx.Class.define("qx.event.dispatch.MouseCapture",{extend:qx.core.Object,implement:qx.event.IEventDispatcher,construct:function(manager){this.base(arguments);this.__manager=manager;this.__window=manager.getWindow();manager.addListener(this.__window,"blur",this.releaseCapture,this);manager.addListener(this.__window,"focus",this.releaseCapture,this);manager.addListener(this.__window,"scroll",this.releaseCapture,this);},statics:{PRIORITY:qx.event.Registration.PRIORITY_FIRST},members:{__captureElement:null,__manager:null,__window:null,canDispatchEvent:function(target,event,type){return this.__captureElement&&this.__captureEvents[type];},dispatchEvent:function(target,event,type){if(type=="click"){event.stopPropagation();this.releaseCapture();return;}var listeners=this.__manager.getListeners(this.__captureElement,type,false);if(listeners){event.setCurrentTarget(this.__captureElement);event.setEventPhase(qx.event.type.Event.AT_TARGET);for(var i=0,l=listeners.length;i<l;i++){var context=listeners[i].context||event.getCurrentTarget();listeners[i].handler.call(context,event);}}},__captureEvents:{"mouseup":1,"mousedown":1,"click":1,"dblclick":1,"mousemove":1,"mouseout":1,"mouseover":1},activateCapture:function(element){if(this.__captureElement===element){return;}if(this.__captureElement){this.releaseCapture();}this.__captureElement=element;qx.event.Registration.fireEvent(element,"capture",qx.event.type.Event,[true,false]);},releaseCapture:function(){var element=this.__captureElement;if(!element){return;}this.__captureElement=null;qx.event.Registration.fireEvent(element,"losecapture",qx.event.type.Event,[true,false]);}},destruct:function(){this._disposeFields("__captureElement","__manager","__window");},defer:function(statics){qx.event.Registration.addDispatcher(statics);}});qx.Class.define("qx.event.handler.Window",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(manager){this.base(arguments);this._manager=manager;this._window=manager.getWindow();this._initWindowObserver();},statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{error:1,load:1,beforeunload:1,unload:1,resize:1,scroll:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_WINDOW,IGNORE_CAN_HANDLE:true},members:{canHandleEvent:function(target,type){},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){},_initWindowObserver:function(){this._onNativeWrapper=qx.lang.Function.listener(this._onNative,this);var types=qx.event.handler.Window.SUPPORTED_TYPES;for(var key in types){qx.bom.Event.addNativeListener(this._window,key,this._onNativeWrapper);}},_stopWindowObserver:function(){var types=qx.event.handler.Window.SUPPORTED_TYPES;for(var key in types){qx.bom.Event.removeNativeListener(this._window,key,this._onNativeWrapper);}},_onNative:function(e){if(this.isDisposed()){return;}var win=this._window;var doc=win.document;var html=doc.documentElement;var target=e.target||e.srcElement;if(target==null||target===win||target===doc||target===html){qx.event.Registration.fireEvent(this._window,e.type);}}},destruct:function(){this._stopWindowObserver();this._disposeFields("_manager","_window");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.bom.Selection",{statics:{getSelectionObject:qx.core.Variant.select("qx.client",{"mshtml":function(documentNode){return documentNode.selection;},"default":function(documentNode){return qx.dom.Node.getWindow(documentNode).getSelection();}}),get:qx.core.Variant.select("qx.client",{"mshtml":function(node){var rng=qx.bom.Range.get(qx.dom.Node.getDocument(node));return rng.text;},"default":function(node){if(qx.dom.Node.isElement(node)&&(node.nodeName.toLowerCase()=="input"||node.nodeName.toLowerCase()=="textarea")){return node.value.substring(node.selectionStart,node.selectionEnd);}else{return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node)).toString();}return null;}}),getLength:qx.core.Variant.select("qx.client",{"mshtml":function(node){var selectedValue=qx.bom.Selection.get(node);var split=qx.util.StringSplit.split(selectedValue,/\r\n/);return selectedValue.length-(split.length-1);},"opera":function(node){var selectedValue,selectedLength,split;if(qx.dom.Node.isElement(node)&&(node.nodeName.toLowerCase()=="input"||node.nodeName.toLowerCase()=="textarea")){var start=node.selectionStart;var end=node.selectionEnd;selectedValue=node.value.substring(start,end);selectedLength=end-start;}else{selectedValue=qx.bom.Selection.get(node);selectedLength=selectedValue.length;}split=qx.util.StringSplit.split(selectedValue,/\r\n/);return selectedLength-(split.length-1);},"default":function(node){if(qx.dom.Node.isElement(node)&&(node.nodeName.toLowerCase()=="input"||node.nodeName.toLowerCase()=="textarea")){return node.selectionEnd-node.selectionStart;}else{return qx.bom.Selection.get(node).length;}return null;}}),set:qx.core.Variant.select("qx.client",{"mshtml":function(node,start,end){var rng;if(qx.dom.Node.isDocument(node)){node=node.body;}if(qx.dom.Node.isElement(node)||qx.dom.Node.isText(node)){switch(node.nodeName.toLowerCase()){case "input":case "textarea":case "button":if(end===undefined){end=node.value.length;}if(start>=0&&start<=node.value.length&&end>=0&&end<=node.value.length){rng=qx.bom.Range.get(node);rng.collapse(true);rng.moveStart("character",start);rng.moveEnd("character",end);rng.select();return true;}break;case "#text":if(end===undefined){end=node.nodeValue.length;}if(start>=0&&start<=node.nodeValue.length&&end>=0&&end<=node.nodeValue.length){rng=qx.bom.Range.get(qx.dom.Node.getBodyElement(node));rng.moveToElementText(node.parentNode);rng.collapse(true);rng.moveStart("character",start);rng.moveEnd("character",end);rng.select();return true;}break;default:if(end===undefined){end=node.childNodes.length-1;}if(node.childNodes[start]&&node.childNodes[end]){rng=qx.bom.Range.get(qx.dom.Node.getBodyElement(node));rng.moveToElementText(node.childNodes[start]);rng.collapse(true);var newRng=qx.bom.Range.get(qx.dom.Node.getBodyElement(node));newRng.moveToElementText(node.childNodes[end]);rng.setEndPoint("EndToEnd",newRng);rng.select();return true;}}}return false;},"default":function(node,start,end){var nodeName=node.nodeName.toLowerCase();if(qx.dom.Node.isElement(node)&&(nodeName=="input"||nodeName=="textarea")){if(end===undefined){end=node.value.length;}if(start>=0&&start<=node.value.length&&end>=0&&end<=node.value.length){node.select();node.setSelectionRange(start,end);return true;}}else{var validBoundaries=false;var sel=qx.dom.Node.getWindow(node).getSelection();var rng=qx.bom.Range.get(node);if(qx.dom.Node.isText(node)){if(end===undefined){end=node.length;}if(start>=0&&start<node.length&&end>=0&&end<=node.length){validBoundaries=true;}}else if(qx.dom.Node.isElement(node)){if(end===undefined){end=node.childNodes.length-1;}if(start>=0&&node.childNodes[start]&&end>=0&&node.childNodes[end]){validBoundaries=true;}}else if(qx.dom.Node.isDocument(node)){node=node.body;if(end===undefined){end=node.childNodes.length-1;}if(start>=0&&node.childNodes[start]&&end>=0&&node.childNodes[end]){validBoundaries=true;}}if(validBoundaries){if(!sel.isCollapsed){sel.collapseToStart();}rng.setStart(node,start);if(qx.dom.Node.isText(node)){rng.setEnd(node,end);}else{rng.setEndAfter(node.childNodes[end]);}if(sel.rangeCount>0){sel.removeAllRanges();}sel.addRange(rng);return true;}}return false;}}),setAll:function(node){return qx.bom.Selection.set(node,0);},clear:qx.core.Variant.select("qx.client",{"mshtml":function(node){var sel=qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node));var rng=qx.bom.Range.get(node);var parent=rng.parentElement();var documentRange=qx.bom.Range.get(qx.dom.Node.getDocument(node));if(parent==documentRange.parentElement()&&parent==node){sel.empty();}},"default":function(node){var sel=qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node));var nodeName=node.nodeName.toLowerCase();if(qx.dom.Node.isElement(node)&&(nodeName=="input"||nodeName=="textarea")){node.setSelectionRange(0,0);qx.bom.Element.blur(node);}else if(qx.dom.Node.isDocument(node)||nodeName=="body"){sel.collapse(node.body?node.body:node,0);}else{var rng=qx.bom.Range.get(node);if(!rng.collapsed){var compareNode;var commonAncestor=rng.commonAncestorContainer;if(qx.dom.Node.isElement(node)&&qx.dom.Node.isText(commonAncestor)){compareNode=commonAncestor.parentNode;}else{compareNode=commonAncestor;}if(compareNode==node){sel.collapse(node,0);}}}}})}});qx.Class.define("qx.bom.Range",{statics:{get:qx.core.Variant.select("qx.client",{"mshtml":function(node){if(qx.dom.Node.isElement(node)){switch(node.nodeName.toLowerCase()){case "input":switch(node.type){case "text":case "password":case "hidden":case "button":case "reset":case "file":case "submit":return node.createTextRange();break;default:return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node)).createRange();}break;case "textarea":case "body":case "button":return node.createTextRange();break;default:return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node)).createRange();}}else{return qx.bom.Selection.getSelectionObject(qx.dom.Node.getDocument(node)).createRange();}},"default":function(node){var doc=qx.dom.Node.getDocument(node);var sel=qx.bom.Selection.getSelectionObject(doc);if(sel.rangeCount>0){return sel.getRangeAt(0);}else{return doc.createRange();}}})}});qx.Bootstrap.define("qx.util.StringSplit",{statics:{split:function(string,separator,limit){var flags="";if(separator===undefined){return [string.toString()];}else if(separator===null||separator.constructor!==RegExp){separator=new RegExp(String(separator).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&"),"g");}else{flags=separator.toString().replace(/^[\S\s]+\//,"");if(!separator.global){separator=new RegExp(separator.source,"g"+flags);}}var separator2=new RegExp("^"+separator.source+"$",flags);if(limit===undefined||+limit<0){limit=false;}else{limit=Math.floor(+limit);if(!limit){return [];}}var match,output=[],lastLastIndex=0,i=0;while((limit?i++<=limit:true)&&(match=separator.exec(string))){if((match[0].length===0)&&(separator.lastIndex>match.index)){separator.lastIndex--;}if(separator.lastIndex>lastLastIndex){if(match.length>1){match[0].replace(separator2,function(){for(var j=1;j<arguments.length-2;j++){if(arguments[j]===undefined){match[j]=undefined;}}});}output=output.concat(string.substring(lastLastIndex,match.index),(match.index===string.length?[]:match.slice(1)));lastLastIndex=separator.lastIndex;}if(match[0].length===0){separator.lastIndex++;}}return (lastLastIndex===string.length)?(separator.test("")?output:output.concat("")):(limit?output:output.concat(string.substring(lastLastIndex)));}}});qx.Class.define("qx.ui.core.queue.Widget",{statics:{__queue:{},add:function(widget){var queue=this.__queue;if(queue[widget.$$hash]){return;}queue[widget.$$hash]=widget;qx.ui.core.queue.Manager.scheduleFlush("widget");},flush:function(){var queue=this.__queue;var obj;for(var hash in queue){obj=queue[hash];delete queue[hash];obj.syncWidget();}for(var hash in queue){return;}this.__queue={};}}});qx.Class.define("qx.ui.core.queue.Appearance",{statics:{__queue:{},add:function(widget){var queue=this.__queue;if(queue[widget.$$hash]){return;}queue[widget.$$hash]=widget;qx.ui.core.queue.Manager.scheduleFlush("appearance");},flush:function(){var queue=this.__queue;var obj;for(var hash in queue){obj=queue[hash];delete queue[hash];obj.syncAppearance();}for(var hash in queue){return;}this.__queue={};}}});qx.Class.define("qx.ui.core.queue.Layout",{statics:{__queue:{},add:function(widget){this.__queue[widget.$$hash]=widget;qx.ui.core.queue.Manager.scheduleFlush("layout");},flush:function(){var queue=this.__getSortedQueue();for(var i=queue.length-1;i>=0;i--){var widget=queue[i];if(widget.hasValidLayout()){continue;}if(widget.isRootWidget()&&!widget.hasUserBounds()){var hint=widget.getSizeHint();widget.renderLayout(0,0,hint.width,hint.height);}else{var bounds=widget.getBounds();widget.renderLayout(bounds.left,bounds.top,bounds.width,bounds.height);}}},getNestingLevel:function(widget){var cache=this.__nesting;var level=0;var parent=widget;while(true){if(cache[parent.$$hash]!=null){level+=cache[parent.$$hash];break;}if(!parent.$$parent){break;}parent=parent.$$parent;level+=1;}var leveldown=level;while(widget&&widget!==parent){cache[widget.$$hash]=leveldown--;widget=widget.$$parent;}return level;},isWidgetVisible:function(widget){var cache=this.__visibility;var parent=widget;var value=false;while(parent){if(cache[parent.$$hash]!=null){value=cache[parent.$$hash];break;}if(parent.isRootWidget()){value=true;break;}if(!parent.shouldBeLayouted()){break;}parent=parent.$$parent;}while(widget&&widget!==parent){cache[widget.$$hash]=value;widget=widget.$$parent;}return value;},__getLevelGroupedWidgets:function(){this.__visibility={};this.__nesting={};var levels=[];var queue=this.__queue;var widget,level;for(var hash in queue){widget=queue[hash];if(this.isWidgetVisible(widget)){level=this.getNestingLevel(widget);if(!levels[level]){levels[level]={};}levels[level][hash]=widget;delete queue[hash];}}return levels;},__getSortedQueue:function(){var sortedQueue=[];var levels=this.__getLevelGroupedWidgets();for(var level=levels.length-1;level>=0;level--){if(!levels[level]){continue;}for(var hash in levels[level]){var widget=levels[level][hash];if(level==0||widget.isRootWidget()||widget.hasUserBounds()){sortedQueue.push(widget);widget.invalidateLayoutCache();continue;}var oldSizeHint=widget.getSizeHint(false);if(oldSizeHint){widget.invalidateLayoutCache();var newSizeHint=widget.getSizeHint();var hintChanged=(!widget.getBounds()||oldSizeHint.minWidth!==newSizeHint.minWidth||oldSizeHint.width!==newSizeHint.width||oldSizeHint.maxWidth!==newSizeHint.maxWidth||oldSizeHint.minHeight!==newSizeHint.minHeight||oldSizeHint.height!==newSizeHint.height||oldSizeHint.maxHeight!==newSizeHint.maxHeight);}else{hintChanged=true;}if(hintChanged){var parent=widget.getLayoutParent();if(!levels[level-1]){levels[level-1]={};}levels[level-1][parent.$$hash]=parent;}else{sortedQueue.push(widget);}}}return sortedQueue;}}});qx.Class.define("qx.ui.core.queue.Dispose",{statics:{__queue:{},add:function(widget){var queue=this.__queue;if(queue[widget.$$hash]){return;}queue[widget.$$hash]=widget;qx.ui.core.queue.Manager.scheduleFlush("dispose");},flush:function(){var queue=this.__queue;for(var hash in queue){queue[hash].dispose();delete queue[hash];}for(var hash in queue){return;}this.__queue={};}}});qx.Mixin.define("qx.ui.core.MChildrenHandling",{members:{getChildren:function(){return this._getChildren();},hasChildren:function(){return this._hasChildren();},indexOf:function(child){return this._indexOf(child);},add:function(child,options){this._add(child,options);},addAt:function(child,index,options){this._addAt(child,index,options);},addBefore:function(child,before,options){this._addBefore(child,before,options);},addAfter:function(child,after,options){this._addAfter(child,after,options);},remove:function(child){this._remove(child);},removeAt:function(index){this._removeAt(index);},removeAll:function(){this._removeAll();}},statics:{remap:function(members){members.getChildren=members._getChildren;members.hasChildren=members._hasChildren;members.indexOf=members._indexOf;members.add=members._add;members.addAt=members._addAt;members.addBefore=members._addBefore;members.addAfter=members._addAfter;members.remove=members._remove;members.removeAt=members._removeAt;members.removeAll=members._removeAll;}}});qx.Class.define("qx.ui.core.LayoutItem",{type:"abstract",extend:qx.core.Object,properties:{minWidth:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},width:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},maxWidth:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},minHeight:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},height:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},maxHeight:{check:"Integer",nullable:true,apply:"_applyDimension",init:null,themeable:true},allowGrowX:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowShrinkX:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowGrowY:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowShrinkY:{check:"Boolean",apply:"_applyStretching",init:true,themeable:true},allowStretchX:{group:["allowGrowX","allowShrinkX"],mode:"shorthand",themeable:true},allowStretchY:{group:["allowGrowY","allowShrinkY"],mode:"shorthand",themeable:true},marginTop:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginRight:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginBottom:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},marginLeft:{check:"Integer",init:0,apply:"_applyMargin",themeable:true},margin:{group:["marginTop","marginRight","marginBottom","marginLeft"],mode:"shorthand",themeable:true},alignX:{check:["left","center","right"],nullable:true,apply:"_applyAlign",themeable:true},alignY:{check:["top","middle","bottom","baseline"],nullable:true,apply:"_applyAlign",themeable:true}},members:{__computedHeightForWidth:null,__computedLayout:null,__hasInvalidLayout:null,__sizeHint:null,__updateMargin:null,__userBounds:null,__layoutProperties:null,getBounds:function(){return this.__userBounds||this.__computedLayout||null;},clearSeparators:function(){},renderSeparator:function(separator,bounds){},renderLayout:function(left,top,width,height){if(qx.core.Variant.isSet("qx.debug","on")){var msg="Something went wrong with the layout of "+this.toString()+"!";this.assertInteger(left,"Wrong 'left' argument. "+msg);this.assertInteger(top,"Wrong 'top' argument. "+msg);this.assertInteger(width,"Wrong 'width' argument. "+msg);this.assertInteger(height,"Wrong 'height' argument. "+msg);}var flowHeight=null;if(this.getHeight()==null&&this._hasHeightForWidth()){var flowHeight=this._getHeightForWidth(width);}if(flowHeight!=null&&flowHeight!==this.__computedHeightForWidth){this.__computedHeightForWidth=flowHeight;qx.ui.core.queue.Layout.add(this);return null;}var computed=this.__computedLayout;if(!computed){computed=this.__computedLayout={};}var changes={};if(left!==computed.left||top!==computed.top){changes.position=true;computed.left=left;computed.top=top;}if(width!==computed.width||height!==computed.height){changes.size=true;computed.width=width;computed.height=height;}if(this.__hasInvalidLayout){changes.local=true;delete this.__hasInvalidLayout;}if(this.__updateMargin){changes.margin=true;delete this.__updateMargin;}return changes;},shouldBeLayouted:function(){return true;},hasValidLayout:function(){return !this.__hasInvalidLayout;},scheduleLayoutUpdate:function(){qx.ui.core.queue.Layout.add(this);},invalidateLayoutCache:function(){this.__hasInvalidLayout=true;this.__sizeHint=null;},getSizeHint:function(compute){var hint=this.__sizeHint;if(hint){return hint;}if(compute===false){return null;}hint=this.__sizeHint=this._computeSizeHint();if(this.__computedHeightForWidth&&this.getHeight()==null){hint.height=this.__computedHeightForWidth;}if(!this.getAllowShrinkX()){hint.minWidth=hint.width;}else if(hint.minWidth>hint.width){hint.width=hint.minWidth;}if(!this.getAllowShrinkY()){hint.minHeight=hint.height;}else if(hint.minHeight>hint.height){hint.height=hint.minHeight;}if(!this.getAllowGrowX()){hint.maxWidth=hint.width;}else if(hint.width>hint.maxWidth){hint.width=hint.maxWidth;}if(!this.getAllowGrowY()){hint.maxHeight=hint.height;}else if(hint.height>hint.maxHeight){hint.height=hint.maxHeight;}return hint;},_computeSizeHint:function(){var minWidth=this.getMinWidth()||0;var minHeight=this.getMinHeight()||0;var width=this.getWidth()||minWidth;var height=this.getHeight()||minHeight;var maxWidth=this.getMaxWidth()||Infinity;var maxHeight=this.getMaxHeight()||Infinity;return {minWidth:minWidth,width:width,maxWidth:maxWidth,minHeight:minHeight,height:height,maxHeight:maxHeight};},_hasHeightForWidth:function(){return false;},_getHeightForWidth:function(width){return null;},_applyMargin:function(){this.__updateMargin=true;var parent=this.$$parent;if(parent){parent.updateLayoutProperties();}},_applyAlign:function(){var parent=this.$$parent;if(parent){parent.updateLayoutProperties();}},_applyDimension:function(){qx.ui.core.queue.Layout.add(this);},_applyStretching:function(){qx.ui.core.queue.Layout.add(this);},hasUserBounds:function(){return !!this.__userBounds;},setUserBounds:function(left,top,width,height){this.__userBounds={left:left,top:top,width:width,height:height};qx.ui.core.queue.Layout.add(this);},resetUserBounds:function(){delete this.__userBounds;qx.ui.core.queue.Layout.add(this);},__emptyProperties:{},setLayoutProperties:function(props){if(props==null){return;}var storage=this.__layoutProperties;if(!storage){storage=this.__layoutProperties={};}var parent=this.getLayoutParent();if(parent){parent.updateLayoutProperties(props);}for(var key in props){if(props[key]==null){delete storage[key];}else{storage[key]=props[key];}}},getLayoutProperties:function(){return this.__layoutProperties||this.__emptyProperties;},clearLayoutProperties:function(){delete this.__layoutProperties;},updateLayoutProperties:function(props){var layout=this._getLayout();if(layout){if(qx.core.Variant.isSet("qx.debug","on")){if(props){for(var key in props){if(props[key]!==null){layout.verifyLayoutProperty(this,key,props[key]);}}}}layout.invalidateChildrenCache();}qx.ui.core.queue.Layout.add(this);},getApplicationRoot:function(){return qx.core.Init.getApplication().getRoot();},getLayoutParent:function(){return this.$$parent||null;},setLayoutParent:function(parent){this.$$parent=parent;},isRootWidget:function(){return false;},_getRoot:function(){var parent=this;while(parent){if(parent.isRootWidget()){return parent;}parent=parent.$$parent;}return null;},clone:function(){var clone=this.base(arguments);var props=this.__layoutProperties;if(props){clone.__layoutProperties=qx.lang.Object.copy(props);}return clone;},serialize:function(){var result=this.base(arguments);var props=this.__layoutProperties;if(props){result.layoutProperties=qx.lang.Object.copy(props);}return result;}},destruct:function(){this._disposeFields("$$parent","$$subparent","__layoutProperties","__computedLayout","__userBounds","__sizeHint");}});qx.Class.define("qx.ui.core.Widget",{extend:qx.ui.core.LayoutItem,include:[qx.locale.MTranslation],construct:function(){this.base(arguments);this.__containerElement=this._createContainerElement();this.__contentElement=this.__createContentElement();this.__containerElement.add(this.__contentElement);this.__containerElement.setAttribute("$$widget",this.toHashCode());if(qx.core.Variant.isSet("qx.debug","on")){this.__containerElement.setAttribute("qxClass",this.classname);}qx.ui.core.queue.Appearance.add(this);this.initFocusable();this.initSelectable();this.initCursor();this.initKeepFocus();this.initKeepActive();},events:{appear:"qx.event.type.Event",disappear:"qx.event.type.Event",resize:"qx.event.type.Data",move:"qx.event.type.Data",mousemove:"qx.event.type.Mouse",mouseover:"qx.event.type.Mouse",mouseout:"qx.event.type.Mouse",mousedown:"qx.event.type.Mouse",mouseup:"qx.event.type.Mouse",click:"qx.event.type.Mouse",dblclick:"qx.event.type.Mouse",contextmenu:"qx.event.type.Mouse",mousewheel:"qx.event.type.Mouse",keyup:"qx.event.type.KeySequence",keydown:"qx.event.type.KeySequence",keypress:"qx.event.type.KeySequence",keyinput:"qx.event.type.KeyInput",focus:"qx.event.type.Focus",blur:"qx.event.type.Focus",focusin:"qx.event.type.Focus",focusout:"qx.event.type.Focus",activate:"qx.event.type.Focus",deactivate:"qx.event.type.Focus",capture:"qx.event.type.Event",losecapture:"qx.event.type.Event",drop:"qx.event.type.Drag",dragleave:"qx.event.type.Drag",dragover:"qx.event.type.Drag",drag:"qx.event.type.Drag",dragstart:"qx.event.type.Drag",dragend:"qx.event.type.Drag",dragchange:"qx.event.type.Drag",droprequest:"qx.event.type.Drag"},properties:{paddingTop:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingRight:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingBottom:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},paddingLeft:{check:"Integer",init:0,apply:"_applyPadding",themeable:true},padding:{group:["paddingTop","paddingRight","paddingBottom","paddingLeft"],mode:"shorthand",themeable:true},zIndex:{nullable:true,init:null,apply:"_applyZIndex",event:"changeZIndex",check:"Integer",themeable:true},decorator:{nullable:true,init:null,apply:"_applyDecorator",event:"changeDecorator",check:"Decorator",themeable:true},shadow:{nullable:true,init:null,apply:"_applyShadow",event:"changeShadow",check:"Decorator",themeable:true},backgroundColor:{nullable:true,check:"Color",apply:"_applyBackgroundColor",event:"changeBackgroundColor",themeable:true},textColor:{nullable:true,check:"Color",apply:"_applyTextColor",event:"changeTextColor",themeable:true,inheritable:true},font:{nullable:true,apply:"_applyFont",check:"Font",event:"changeFont",themeable:true,inheritable:true},opacity:{check:"Number",apply:"_applyOpacity",themeable:true,nullable:true,init:null},cursor:{check:"String",apply:"_applyCursor",themeable:true,inheritable:true,nullable:true,init:null},toolTip:{check:"qx.ui.tooltip.ToolTip",nullable:true},visibility:{check:["visible","hidden","excluded"],init:"visible",apply:"_applyVisibility",event:"changeVisibility"},enabled:{init:true,check:"Boolean",inheritable:true,apply:"_applyEnabled",event:"changeEnabled"},anonymous:{init:false,check:"Boolean"},tabIndex:{check:"Integer",nullable:true,apply:"_applyTabIndex"},focusable:{check:"Boolean",init:false,apply:"_applyFocusable"},keepFocus:{check:"Boolean",init:false,apply:"_applyKeepFocus"},keepActive:{check:"Boolean",init:false,apply:"_applyKeepActive"},draggable:{check:"Boolean",init:false,apply:"_applyDraggable"},droppable:{check:"Boolean",init:false,apply:"_applyDroppable"},selectable:{check:"Boolean",init:false,apply:"_applySelectable"},contextMenu:{check:"qx.ui.menu.Menu",apply:"_applyContextMenu",nullable:true,event:"changeContextMenu"},appearance:{check:"String",init:"widget",apply:"_applyAppearance",event:"changeAppearance"}},statics:{DEBUG:false,getWidgetByElement:function(element){try{while(element){var widgetKey=element.$$widget;if(widgetKey!=null){return qx.core.ObjectRegistry.fromHashCode(widgetKey);}element=element.parentNode;}}catch(ex){}return null;},contains:function(parent,child){while(child){if(parent==child){return true;}child=child.getLayoutParent();}return false;},__decoratorPool:{}},members:{__containerElement:null,__contentElement:null,__decoratorElement:null,__shadowElement:null,__protectorElement:null,__layoutManager:null,_getLayout:function(){return this.__layoutManager;},_setLayout:function(layout){if(qx.core.Variant.isSet("qx.debug","on")){if(layout){this.assertInstance(layout,qx.ui.layout.Abstract);}}if(this.__layoutManager){this.__layoutManager.connectToWidget(null);}if(layout){layout.connectToWidget(this);}this.__layoutManager=layout;qx.ui.core.queue.Layout.add(this);},setLayoutParent:function(parent){if(this.$$parent===parent){return;}if(this.$$parent){this.$$parent.getContentElement().remove(this.__containerElement);}this.$$parent=parent||null;if(this.$$parent){this.$$parent.getContentElement().add(this.__containerElement);}qx.core.Property.refresh(this);},__updateInsets:null,renderLayout:function(left,top,width,height){var changes=this.base(arguments,left,top,width,height);if(!changes){return;}var container=this.__containerElement;var content=this.__contentElement;var inner=changes.size||this.__updateInsets;var pixel="px";if(changes.position){container.setStyle("left",left+pixel);container.setStyle("top",top+pixel);}if(changes.size){container.setStyle("width",width+pixel);container.setStyle("height",height+pixel);}if(inner||changes.local||changes.margin){var insets=this.getInsets();var innerWidth=width-insets.left-insets.right;var innerHeight=height-insets.top-insets.bottom;}if(this.__updateInsets){content.setStyle("left",insets.left+pixel);content.setStyle("top",insets.top+pixel);}if(inner){content.setStyle("width",innerWidth+pixel);content.setStyle("height",innerHeight+pixel);}if(changes.size){var protector=this.__protectorElement;if(protector){protector.setStyles({width:width+"px",height:height+"px"});}}if(changes.size||this.__updateInsets){var manager=qx.theme.manager.Decoration.getInstance();var decorator=this.getDecorator();if(decorator){var element=this.__decoratorElement;var instance=manager.resolve(decorator);instance.resize(element,width,height);}}if(changes.size){var shadow=this.getShadow();if(shadow){var element=this.__shadowElement;var instance=manager.resolve(shadow);var insets=instance.getInsets();var shadowWidth=width+insets.left+insets.right;var shadowHeight=height+insets.top+insets.bottom;instance.resize(element,shadowWidth,shadowHeight);}}if(inner||changes.local||changes.margin){if(this.__layoutManager&&this.hasLayoutChildren()){this.__layoutManager.renderLayout(innerWidth,innerHeight);}else if(this.hasLayoutChildren()){throw new Error("At least one child in control "+this._findTopControl()+" requires a layout, but no one was defined!");}}if(changes.position&&this.hasListener("move")){this.fireDataEvent("move",this.getBounds());}if(changes.size&&this.hasListener("resize")){this.fireDataEvent("resize",this.getBounds());}delete this.__updateInsets;},__separators:null,clearSeparators:function(){var reg=this.__separators;if(!reg){return;}var pool=qx.ui.core.Widget.__decoratorPool;var content=this.__contentElement;var separator,elem;for(var i=0,l=reg.length;i<l;i++){elem=reg[i];separator=elem.$$separator;if(!pool[separator]){pool[separator]=[elem];}else{pool[separator].push(elem);}content.remove(elem);}reg.length=0;},renderSeparator:function(separator,bounds){var pool=qx.ui.core.Widget.__decoratorPool;var mgr=qx.theme.manager.Decoration.getInstance();if(typeof separator=="object"){var id=separator.toHashCode();var instance=separator;}else{var id=separator;var instance=mgr.resolve(separator);}var list=pool[separator];if(list&&list.length>0){var elem=list.pop();}else{var elem=this.__createDecoratorElement(instance);}this.__contentElement.add(elem);instance.resize(elem,bounds.width,bounds.height);var style=elem.getDomElement().style;style.left=bounds.left+"px";style.top=bounds.top+"px";if(!this.__separators){this.__separators=[elem];}else{this.__separators.push(elem);}elem.$$separator=id;},_computeSizeHint:function(){var width=this.getWidth();var minWidth=this.getMinWidth();var maxWidth=this.getMaxWidth();var height=this.getHeight();var minHeight=this.getMinHeight();var maxHeight=this.getMaxHeight();var contentHint=this._getContentHint();var insets=this.getInsets();var insetX=insets.left+insets.right;var insetY=insets.top+insets.bottom;if(width==null){width=contentHint.width+insetX;}if(height==null){height=contentHint.height+insetY;}if(minWidth==null){minWidth=insetX;if(contentHint.minWidth!=null){minWidth+=contentHint.minWidth;}}if(minHeight==null){minHeight=insetY;if(contentHint.minHeight!=null){minHeight+=contentHint.minHeight;}}if(maxWidth==null){if(contentHint.maxWidth==null){maxWidth=Infinity;}else{maxWidth=contentHint.maxWidth+insetX;}}if(maxHeight==null){if(contentHint.maxHeight==null){maxHeight=Infinity;}else{maxHeight=contentHint.maxHeight+insetY;}}return {width:width,minWidth:minWidth,maxWidth:maxWidth,height:height,minHeight:minHeight,maxHeight:maxHeight};},invalidateLayoutCache:function(){this.base(arguments);if(this.__layoutManager){this.__layoutManager.invalidateLayoutCache();}},_getContentHint:function(){var layout=this.__layoutManager;if(layout){if(this.hasLayoutChildren()){var hint=layout.getSizeHint();if(qx.core.Variant.isSet("qx.debug","on")){var msg="The layout of the widget"+this.toString()+" returned an invalid size hint!";this.assertInteger(hint.width,"Wrong 'left' argument. "+msg);this.assertInteger(hint.height,"Wrong 'top' argument. "+msg);}return hint;}else{return {width:0,height:0};}}else{return {width:100,height:50};}},_getHeightForWidth:function(width){var insets=this.getInsets();var insetX=insets.left+insets.right;var insetY=insets.top+insets.bottom;var contentWidth=width-insetX;var contentHeight=this._getContentHeightForWidth(contentWidth);var height=contentHeight+insetY;return height;},_getContentHeightForWidth:function(width){throw new Error("Abstract method call: _getContentHeightForWidth()!");},getInsets:function(){var top=this.getPaddingTop();var right=this.getPaddingRight();var bottom=this.getPaddingBottom();var left=this.getPaddingLeft();var decorator=this.getDecorator();if(decorator){var manager=qx.theme.manager.Decoration.getInstance();var instance=manager.resolve(decorator);var inset=instance.getInsets();if(qx.core.Variant.isSet("qx.debug","on")){if(typeof inset.top!="number"){throw new Error("Invalid top decorator inset detected: "+inset.top);}if(typeof inset.right!="number"){throw new Error("Invalid right decorator inset detected: "+inset.right);}if(typeof inset.bottom!="number"){throw new Error("Invalid bottom decorator inset detected: "+inset.bottom);}if(typeof inset.left!="number"){throw new Error("Invalid left decorator inset detected: "+inset.left);}}top+=inset.top;right+=inset.right;bottom+=inset.bottom;left+=inset.left;}return {"top":top,"right":right,"bottom":bottom,"left":left};},getInnerSize:function(){var computed=this.getBounds();if(!computed){return null;}var insets=this.getInsets();return {width:computed.width-insets.left-insets.right,height:computed.height-insets.top-insets.bottom};},show:function(){this.setVisibility("visible");},hide:function(){this.setVisibility("hidden");},exclude:function(){this.setVisibility("excluded");},isVisible:function(){return this.getVisibility()==="visible";},isHidden:function(){return this.getVisibility()!=="visible";},isExcluded:function(){return this.getVisibility()==="excluded";},_createContainerElement:function(){var el=new qx.html.Element("div");if(qx.core.Variant.isSet("qx.debug","on")){el.setAttribute("qxType","container");}el.setStyle("position","absolute");el.setStyle("zIndex",0);return el;},__createContentElement:function(){var el=this._createContentElement();if(qx.core.Variant.isSet("qx.debug","on")){el.setAttribute("qxType","content");}el.setStyle("position","absolute");el.setStyle("zIndex",10);return el;},_createContentElement:function(){var el=new qx.html.Element("div");el.setStyle("overflowX","hidden");el.setStyle("overflowY","hidden");return el;},getContainerElement:function(){return this.__containerElement;},getContentElement:function(){return this.__contentElement;},getDecoratorElement:function(){return this.__decoratorElement;},__widgetChildren:null,__layoutChildren:null,getLayoutChildren:function(){var children=this.__widgetChildren;if(!children){return this.__emptyChildren;}if(this.__layoutChildren){return this.__layoutChildren;}var layoutChildren=[];for(var i=0,l=children.length;i<l;i++){var child=children[i];if(!child.hasUserBounds()&&child.shouldBeLayouted()){layoutChildren.push(child);}}this.__layoutChildren=layoutChildren;return layoutChildren;},scheduleLayoutUpdate:function(){qx.ui.core.queue.Layout.add(this);},invalidateLayoutChildren:function(){var layout=this.__layoutManager;if(layout){layout.invalidateChildrenCache();}this.__layoutChildren=null;qx.ui.core.queue.Layout.add(this);},shouldBeLayouted:function(){return this.getVisibility()!=="excluded";},hasLayoutChildren:function(){var children=this.getLayoutChildren();return children&&children.length>0;},getChildrenContainer:function(){return this;},__emptyChildren:[],_getChildren:function(){return this.__widgetChildren||this.__emptyChildren;},_indexOf:function(child){var children=this.__widgetChildren;if(!children){return -1;}return children.indexOf(child);},_hasChildren:function(){var children=this.__widgetChildren;return children&&(!!children[0]);},_add:function(child,options){if(child.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,child);}if(this.__widgetChildren){this.__widgetChildren.push(child);}else{this.__widgetChildren=[child];}this.__addHelper(child,options);},_addAt:function(child,index,options){if(!this.__widgetChildren){this.__widgetChildren=[];}if(child.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,child);}var ref=this.__widgetChildren[index];if(ref===child){return child.setLayoutProperties(options);}if(ref){qx.lang.Array.insertBefore(this.__widgetChildren,child,ref);}else{this.__widgetChildren.push(child);}this.__addHelper(child,options);},_addBefore:function(child,before,options){if(qx.core.Variant.isSet("qx.debug","on")){this.assertInArray(before,this._getChildren(),"The 'before' widget is not a child of this widget!");}if(child==before){return;}if(!this.__widgetChildren){this.__widgetChildren=[];}if(child.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,child);}qx.lang.Array.insertBefore(this.__widgetChildren,child,before);this.__addHelper(child,options);},_addAfter:function(child,after,options){if(qx.core.Variant.isSet("qx.debug","on")){this.assertInArray(after,this._getChildren(),"The 'before' widget is not a child of this widget!");}if(child==after){return;}if(!this.__widgetChildren){this.__widgetChildren=[];}if(child.getLayoutParent()==this){qx.lang.Array.remove(this.__widgetChildren,child);}qx.lang.Array.insertAfter(this.__widgetChildren,child,after);this.__addHelper(child,options);},_remove:function(child){if(!this.__widgetChildren){return;}qx.lang.Array.remove(this.__widgetChildren,child);this.__removeHelper(child);},_removeAt:function(index){if(!this.__widgetChildren){throw new Error("This widget has no children!");}var child=this.__widgetChildren[index];qx.lang.Array.removeAt(this.__widgetChildren,index);this.__removeHelper(child);},_removeAll:function(){if(!this.__widgetChildren){return;}var children=this.__widgetChildren.concat();this.__widgetChildren.length=0;for(var i=children.length-1;i>=0;i--){children[i].setLayoutParent(null);}qx.ui.core.queue.Layout.add(this);},_afterAddChild:null,_afterRemoveChild:null,__addHelper:function(child,options){if(qx.core.Variant.isSet("qx.debug","on")){this.assertInstance(child,qx.ui.core.LayoutItem,"Invalid widget to add: "+child);this.assertNotIdentical(child,this,"Could not add widget to itself: "+child);if(options!=null){this.assertType(options,"object","Invalid layout data: "+options);}}var parent=child.getLayoutParent();if(parent&&parent!=this){parent._remove(child);}child.setLayoutParent(this);if(options){child.setLayoutProperties(options);}else{this.updateLayoutProperties();}this.__layoutChildren=null;if(this._afterAddChild){this._afterAddChild(child);}},__removeHelper:function(child){if(qx.core.Variant.isSet("qx.debug","on")){this.assertNotUndefined(child);this.assertNotIdentical(child.getLayoutParent,this,"Remove Error: "+child+" is not a child of this widget!");}child.setLayoutParent(null);if(this.__layoutManager){this.__layoutManager.invalidateChildrenCache();}this.__layoutChildren=null;qx.ui.core.queue.Layout.add(this);if(this._afterRemoveChild){this._afterRemoveChild(child);}},capture:function(){this.__containerElement.capture();},releaseCapture:function(){this.__containerElement.releaseCapture();},_applyPadding:function(value,old,name){this.__updateInsets=true;qx.ui.core.queue.Layout.add(this);},_createProtectorElement:function(){if(this.__protectorElement){return;}var protect=this.__protectorElement=new qx.html.Element;if(qx.core.Variant.isSet("qx.debug","on")){protect.setAttribute("qxType","protector");}protect.setStyles({position:"absolute",top:0,left:0,zIndex:7});if(qx.core.Variant.isSet("qx.client","mshtml")){protect.setStyles({backgroundImage:"url("+qx.util.ResourceManager.toUri("qx/static/blank.gif")+")",backgroundRepeat:"repeat"});}this.__containerElement.add(protect);},__createDecoratorElement:function(decorator){var element=new qx.html.Element;element.setStyles({position:"absolute",top:0,left:0});if(qx.core.Variant.isSet("qx.debug","on")){element.setAttribute("qxType","decorator");}decorator.init(element);return element;},_applyDecorator:function(value,old){var pool=qx.ui.core.Widget.__decoratorPool;var mgr=qx.theme.manager.Decoration.getInstance();var container=this.__containerElement;var elem=this.__decoratorElement;if(!this.__protectorElement){this._createProtectorElement();}var oldId;if(old){if(typeof old==="object"){oldId=old.toHashCode();}else{oldId=old;old=mgr.resolve(old);}}var valueId;if(value){if(typeof value==="object"){valueId=value.toHashCode();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.ui.core.Widget.DEBUG){this.warn("Decorator instances may increase memory usage and processing time. Often it is better to lay them out to a theme file. Hash code of decorator object: "+value);}}}else{valueId=value;value=mgr.resolve(value);}}if(old){if(!pool[oldId]){pool[oldId]=[];}container.remove(elem);pool[oldId].push(elem);}if(value){if(pool[valueId]&&pool[valueId].length>0){elem=pool[valueId].pop();}else{elem=this.__createDecoratorElement(value);elem.setStyle("zIndex",5);}var bgcolor=this.getBackgroundColor();value.tint(elem,bgcolor);container.add(elem);this.__decoratorElement=elem;}else{delete this.__decoratorElement;this._applyBackgroundColor(this.getBackgroundColor());}if(value&&!old&&bgcolor){this.getContainerElement().setStyle("backgroundColor",null);}if(qx.ui.decoration.Util.insetsModified(old,value)){this.__updateInsets=true;qx.ui.core.queue.Layout.add(this);}else if(value){var bounds=this.getBounds();if(bounds){mgr.resolve(value).resize(elem,bounds.width,bounds.height);}}},_applyShadow:function(value,old){var pool=qx.ui.core.Widget.__decoratorPool;var mgr=qx.theme.manager.Decoration.getInstance();var container=this.__containerElement;var oldId;if(old){if(typeof old==="object"){oldId=old.toHashCode();}else{oldId=old;old=mgr.resolve(old);}}var valueId;if(value){if(typeof value==="object"){valueId=value.toHashCode();}else{valueId=value;value=mgr.resolve(value);}}if(old){if(!pool[oldId]){pool[oldId]=[];}container.remove(this.__shadowElement);pool[oldId].push(this.__shadowElement);}if(value){var elem;if(pool[valueId]&&pool[valueId].length>0){elem=pool[valueId].pop();}else{elem=this.__createDecoratorElement(value);}container.add(elem);this.__shadowElement=elem;var insets=value.getInsets();elem.setStyles({left:(-insets.left)+"px",top:(-insets.top)+"px"});var bounds=this.getBounds();if(bounds){var shadowWidth=bounds.width+insets.left+insets.right;var shadowHeight=bounds.height+insets.top+insets.bottom;value.resize(elem,shadowWidth,shadowHeight);}}else{delete this.__shadowElement;}},_applyTextColor:function(value,old){},_applyZIndex:function(value,old){this.__containerElement.setStyle("zIndex",value==null?0:value);},_applyVisibility:function(value,old){if(value==="visible"){this.__containerElement.show();}else{this.__containerElement.hide();}var parent=this.$$parent;if(parent&&(old==null||value==null||old==="excluded"||value==="excluded")){parent.invalidateLayoutChildren();}},_applyOpacity:function(value,old){this.__containerElement.setStyle("opacity",value);},_applyCursor:function(value,old){if(value==null&&!this.isSelectable()){value="default";}this.__containerElement.setStyle("cursor",value);},_applyBackgroundColor:function(value,old){var decorator=this.getDecorator();var shadow=this.getShadow();var color=this.getBackgroundColor();var container=this.__containerElement;if(decorator||shadow){var elem=this.__decoratorElement;if(elem){var instance=qx.theme.manager.Decoration.getInstance().resolve(decorator);instance.tint(this.__decoratorElement,color);}container.setStyle("backgroundColor",null);}else{var resolved=qx.theme.manager.Color.getInstance().resolve(color);container.setStyle("backgroundColor",resolved);}},_applyFont:function(value,old){},hasState:function(state){var states=this.__states;return states&&states[state];},__states:null,addState:function(state){var states=this.__states;if(!states){states=this.__states={};}if(states[state]){return;}this.__states[state]=true;if(state==="hovered"){this.syncAppearance();}else{qx.ui.core.queue.Appearance.add(this);}var forward=this._forwardStates;var controls=this.__childControls;if(forward&&forward[state]&&controls){var control;for(var id in controls){control=controls[id];if(control instanceof qx.ui.core.Widget){controls[id].addState(state);}}}},removeState:function(state){var states=this.__states;if(!states||!states[state]){return;}delete this.__states[state];if(state==="hovered"){this.syncAppearance();}else{qx.ui.core.queue.Appearance.add(this);}var forward=this._forwardStates;var controls=this.__childControls;if(forward&&forward[state]&&controls){for(var id in controls){var control=controls[id];if(control instanceof qx.ui.core.Widget){control.removeState(state);}}}},replaceState:function(old,value){var states=this.__states;if(!states){states=this.__states={};}if(!states[value]){states[value]=true;}if(states[old]){delete states[old];}qx.ui.core.queue.Appearance.add(this);var forward=this._forwardStates;var controls=this.__childControls;if(forward&&forward[value]&&controls){for(var id in controls){var control=controls[id];if(control instanceof qx.ui.core.Widget){control.replaceState(old,value);}}}},__appearanceSelector:null,__updateSelector:null,syncAppearance:function(){var states=this.__states;var selector=this.__appearanceSelector;var manager=qx.theme.manager.Appearance.getInstance();var styler=qx.core.Property.$$method.setThemed;var unstyler=qx.core.Property.$$method.resetThemed;if(this.__updateSelector){delete this.__updateSelector;if(selector){var oldData=manager.styleFrom(selector,states);if(oldData){selector=null;}}}if(!selector){var obj=this;var id=[];do{id.push(obj.$$subcontrol||obj.getAppearance());}while(obj=obj.$$subparent);selector=this.__appearanceSelector=id.reverse().join("/");}var newData=manager.styleFrom(selector,states);if(newData){if(oldData){for(var prop in oldData){if(newData[prop]===undefined){this[unstyler[prop]]();}}}if(qx.core.Variant.isSet("qx.debug","on")){for(var prop in newData){if(!this[styler[prop]]){throw new Error(this.classname+' has no themeable property "'+prop+'" while styling '+selector);}}}var value;var undef="undefined";for(var prop in newData){value=newData[prop];value===undef?this[unstyler[prop]]():this[styler[prop]](value);}}else if(oldData){for(var prop in oldData){this[unstyler[prop]]();}}},_applyAppearance:function(value,old){this.updateAppearance();},updateAppearance:function(){this.__updateSelector=true;qx.ui.core.queue.Appearance.add(this);var controls=this.__childControls;if(controls){var obj;for(var id in controls){obj=controls[id];if(obj instanceof qx.ui.core.Widget){obj.updateAppearance();}}}},syncWidget:function(){},getEventTarget:function(){var target=this;while(target.getAnonymous()){target=target.getLayoutParent();if(!target){return null;}}return target;},getFocusTarget:function(){var target=this;if(!target.getEnabled()){return null;}while(target.getAnonymous()||!target.getFocusable()){target=target.getLayoutParent();if(!target||!target.getEnabled()){return null;}}return target;},getFocusElement:function(){return this.__containerElement;},isTabable:function(){return this.isFocusable();},_applyFocusable:function(value,old){var target=this.getFocusElement();if(value){var tabIndex=this.getTabIndex();if(tabIndex==null){tabIndex=1;}target.setAttribute("tabIndex",tabIndex);if(qx.core.Variant.isSet("qx.client","mshtml")){target.setAttribute("hideFocus","true");}else{target.setStyle("outline","none");}}else{if(target.isNativelyFocusable()){target.setAttribute("tabIndex",-1);}else if(old){target.setAttribute("tabIndex",null);}}},_applyKeepFocus:function(value){var target=this.getFocusElement();target.setAttribute("qxKeepFocus",value?"on":null);},_applyKeepActive:function(value){var target=this.getContainerElement();target.setAttribute("qxKeepActive",value?"on":null);},_applyTabIndex:function(value){if(value==null){value=1;}else if(value<1||value>32000){throw new Error("TabIndex property must be between 1 and 32000");}if(this.getFocusable()&&value!=null){this.getFocusElement().setAttribute("tabIndex",value);}},_applySelectable:function(value){this._applyCursor(this.getCursor());this.__containerElement.setAttribute("qxSelectable",value?"on":"off");if(qx.core.Variant.isSet("qx.client","webkit")){this.__containerElement.setStyle("userSelect",value?"normal":"none");}},_applyEnabled:function(value,old){if(value===false){this.addState("disabled");this.removeState("hovered");if(this.isFocusable()){this.removeState("focused");this._applyFocusable(false,true);}}else{this.removeState("disabled");if(this.isFocusable()){this._applyFocusable(true,false);}}},_applyContextMenu:function(value,old){if(old){old.removeState("contextmenu");if(old.getOpener()==this){old.resetOpener();}if(!value){this.removeListener("contextmenu",this._onContextMenuOpen);}}if(value){value.setOpener(this);value.addState("contextmenu");if(!old){this.addListener("contextmenu",this._onContextMenuOpen);}}},_onContextMenuOpen:function(e){var menu=this.getContextMenu();menu.placeToMouse(e);menu.show();e.preventDefault();},_onStopEvent:function(e){e.stopPropagation();},_applyDraggable:function(value,old){qx.ui.core.DragDropCursor.getInstance();if(value){this.addListener("dragstart",this._onDragStart);this.addListener("drag",this._onDrag);this.addListener("dragend",this._onDragEnd);this.addListener("dragchange",this._onDragChange);}else{this.removeListener("dragstart",this._onDragStart);this.removeListener("drag",this._onDrag);this.removeListener("dragend",this._onDragEnd);this.removeListener("dragchange",this._onDragChange);}this.__containerElement.setAttribute("qxDraggable",value?"on":null);},_applyDroppable:function(value,old){this.__containerElement.setAttribute("qxDroppable",value?"on":null);},_onDragStart:function(e){qx.ui.core.DragDropCursor.getInstance().placeToMouse(e);this.getApplicationRoot().setGlobalCursor("default");},_onDrag:function(e){qx.ui.core.DragDropCursor.getInstance().placeToMouse(e);},_onDragEnd:function(e){qx.ui.core.DragDropCursor.getInstance().moveTo(-1000,-1000);this.getApplicationRoot().resetGlobalCursor();},_onDragChange:function(e){var cursor=qx.ui.core.DragDropCursor.getInstance();var action=e.getCurrentAction();action?cursor.setAction(action):cursor.resetAction();},visualizeFocus:function(){this.addState("focused");},visualizeBlur:function(){this.removeState("focused");},scrollChildIntoView:function(child,alignX,alignY,direct){this.scrollChildIntoViewX(child,alignX,direct);this.scrollChildIntoViewY(child,alignY,direct);},scrollChildIntoViewX:function(child,align,direct){this.__contentElement.scrollChildIntoViewX(child.getContainerElement(),align,direct);},scrollChildIntoViewY:function(child,align,direct){this.__contentElement.scrollChildIntoViewY(child.getContainerElement(),align,direct);},focus:function(){if(this.isFocusable()){this.getFocusElement().focus();}else{throw new Error("Widget is not focusable!");}},blur:function(){if(this.isFocusable()){this.getFocusElement().blur();}else{throw new Error("Widget is not focusable!");}},activate:function(){this.__containerElement.activate();},deactivate:function(){this.__containerElement.deactivate();},tabFocus:function(){this.getFocusElement().focus();},_hasChildControl:function(id){if(!this.__childControls){return false;}return !!this.__childControls[id];},__childControls:null,_getChildControl:function(id,notcreate){if(!this.__childControls){if(notcreate){return null;}this.__childControls={};}var control=this.__childControls[id];if(control){return control;}if(notcreate===true){return null;}return this._createChildControl(id);},_showChildControl:function(id){var control=this._getChildControl(id);control.show();return control;},_excludeChildControl:function(id){var control=this._getChildControl(id,true);if(control){control.exclude();}},_isChildControlVisible:function(id){var control=this._getChildControl(id,true);if(control){return control.isVisible();}return false;},_createChildControl:function(id){if(!this.__childControls){this.__childControls={};}else if(this.__childControls[id]){throw new Error("Child control '"+id+"' already created!");}var control=this._createChildControlImpl(id);if(!control){throw new Error("Unsupported control: "+id);}control.$$subcontrol=id;control.$$subparent=this;var states=this.__states;var forward=this._forwardStates;if(states&&forward&&control instanceof qx.ui.core.Widget){for(var state in states){if(forward[state]){control.addState(state);}}}return this.__childControls[id]=control;},_createChildControlImpl:function(id){return null;},_disposeChildControls:function(){var controls=this.__childControls;if(!controls){return;}var Widget=qx.ui.core.Widget;for(var id in controls){var control=controls[id];if(!Widget.contains(this,control)){control.destroy();}else{control.dispose();}}delete this.__childControls;},_findTopControl:function(){var obj=this;while(obj){if(!obj.$$subparent){return obj;}obj=obj.$$subparent;}return null;},getContainerLocation:function(mode){var domEl=this.getContainerElement().getDomElement();return domEl?qx.bom.element.Location.get(domEl,mode):null;},getContentLocation:function(mode){var domEl=this.getContentElement().getDomElement();return domEl?qx.bom.element.Location.get(domEl,mode):null;},setDomLeft:function(value){var domEl=this.getContainerElement().getDomElement();if(domEl){domEl.style.left=value+"px";}else{throw new Error("DOM element is not yet created!");}},setDomTop:function(value){var domEl=this.getContainerElement().getDomElement();if(domEl){domEl.style.top=value+"px";}else{throw new Error("DOM element is not yet created!");}},setDomPosition:function(left,top){var domEl=this.getContainerElement().getDomElement();if(domEl){domEl.style.left=left+"px";domEl.style.top=top+"px";}else{throw new Error("DOM element is not yet created!");}},destroy:function(){if(this.$$disposed){return;}var parent=this.getLayoutParent();if(parent){parent._remove(this);}qx.ui.core.queue.Dispose.add(this);},clone:function(){var clone=this.base(arguments);if(this.getChildren){var children=this.getChildren();for(var i=0,l=children.length;i<l;i++){clone.add(children[i].clone());}}return clone;},serialize:function(){var result=this.base(arguments);if(this.getChildren){var children=this.getChildren();if(children.length>0){result.children=[];for(var i=0,l=children.length;i<l;i++){result.children.push(children[i].serialize());}}}if(this.getLayout){var layout=this.getLayout();if(layout){result.layout=layout.serialize();}}return result;}},destruct:function(){if(!qx.core.ObjectRegistry.inShutDown){this.__containerElement.setAttribute("$$widget",null,true);this._disposeChildControls();}this._disposeArray("__widgetChildren");this._disposeArray("__layoutChildren");this._disposeArray("__separators");this._disposeFields("__states");this._disposeObjects("__layoutManager","__containerElement","__contentElement","__decoratorElement","__shadowElement","__protectorElement");}});qx.Mixin.define("qx.ui.core.MBlocker",{properties:{blockerColor:{check:"Color",init:null,nullable:true,apply:"_applyBlockerColor",themeable:true},blockerOpacity:{check:"Number",init:1,apply:"_applyBlockerOpacity",themeable:true}},members:{__blocker:null,__isBlocked:null,__oldAnonymous:null,__contentBlocker:null,__isContentBlocked:null,_applyBlockerColor:function(value,old){var blockers=[];this.__blocker&&blockers.push(this.__blocker);this.__contentBlocker&&blockers.push(this.__contentBlocker);for(var i=0;i<blockers.length;i++){blockers[i].setStyle("backgroundColor",qx.theme.manager.Color.getInstance().resolve(value));}},_applyBlockerOpacity:function(value,old){var blockers=[];this.__blocker&&blockers.push(this.__blocker);this.__contentBlocker&&blockers.push(this.__contentBlocker);for(var i=0;i<blockers.length;i++){blockers[i].setStyle("opacity",value);}},__createBlockerElement:function(){var blocker=new qx.html.Element().setStyles({position:"absolute",width:"100%",height:"100%",opacity:this.getBlockerOpacity(),backgroundColor:qx.theme.manager.Color.getInstance().resolve(this.getBlockerColor())});if(qx.core.Variant.isSet("qx.client","mshtml")){blocker.setStyles({backgroundImage:"url("+qx.util.ResourceManager.toUri("qx/static/blank.gif")+")",backgroundRepeat:"repeat"});}return blocker;},_getBlocker:function(){if(!this.__blocker){this.__blocker=this.__createBlockerElement();this.getContentElement().add(this.__blocker);this.__blocker.exclude();}return this.__blocker;},block:function(){if(this.__isBlocked){return;}this.__isBlocked=true;this._getBlocker().include();this.__oldAnonymous=this.getAnonymous();this.setAnonymous(true);},isBlocked:function(){return !!this.__isBlocked;},unblock:function(){if(!this.__isBlocked){return;}this.__isBlocked=false;this.setAnonymous(this.__oldAnonymous);this._getBlocker().exclude();},_getContentBlocker:function(){if(!this.__contentBlocker){this.__contentBlocker=this.__createBlockerElement();this.getContentElement().add(this.__contentBlocker);this.__contentBlocker.exclude();}return this.__contentBlocker;},blockContent:function(zIndex){var blocker=this._getContentBlocker();blocker.setStyle("zIndex",zIndex);if(this.__isContentBlocked){return;}this.__isContentBlocked=true;blocker.include();},isContentBlocked:function(){return !!this.__isContentBlocked;},unblockContent:function(){if(!this.__isContentBlocked){return;}this.__isContentBlocked=false;this._getContentBlocker().exclude();}},destruct:function(){this._disposeObjects("__contentBlocker");}});qx.Mixin.define("qx.ui.window.MDesktop",{properties:{activeWindow:{check:"qx.ui.window.Window",apply:"_applyActiveWindow"}},members:{__windows:null,__manager:null,getWindowManager:function(){if(!this.__manager){this.setWindowManager(new qx.ui.window.Window.DEFAULT_MANAGER_CLASS());}return this.__manager;},supportsMaximize:function(){return true;},setWindowManager:function(manager){if(this.__manager){this.__manager.setDesktop(null);}manager.setDesktop(this);this.__manager=manager;},_onChangeActive:function(e){if(e.getData()){this.setActiveWindow(e.getTarget());}},_applyActiveWindow:function(value,old){this.getWindowManager().changeActiveWindow(value,old);value.setActive(true);if(old){old.resetActive();}},_onChangeModal:function(e){this.getWindowManager().updateStack();},_onChangeVisibility:function(){this.getWindowManager().updateStack();},_afterAddChild:function(win){if(qx.Class.isDefined("qx.ui.window.Window")&&win instanceof qx.ui.window.Window){this._addWindow(win);}},_addWindow:function(win){this.getWindows().push(win);win.addListener("changeActive",this._onChangeActive,this);win.addListener("changeModal",this._onChangeModal,this);win.addListener("changeVisibility",this._onChangeVisibility,this);if(win.getActive()){this.setActiveWindow(win);}this.getWindowManager().updateStack();},_afterRemoveChild:function(win){if(qx.Class.isDefined("qx.ui.window.Window")&&win instanceof qx.ui.window.Window){this._removeWindow(win);}},_removeWindow:function(win){qx.lang.Array.remove(this.getWindows(),win);win.removeListener("changeActive",this._onChangeActive,this);win.removeListener("changeModal",this._onChangeModal,this);win.removeListener("changeVisibility",this._onChangeVisibility,this);this.getWindowManager().updateStack();},getWindows:function(){if(!this.__windows){this.__windows=[];}return this.__windows;}},destruct:function(){this._disposeArray("__windows");this._disposeObjects("__manager");}});qx.Class.define("qx.ui.root.Abstract",{type:"abstract",extend:qx.ui.core.Widget,include:[qx.ui.core.MChildrenHandling,qx.ui.core.MBlocker,qx.ui.window.MDesktop],construct:function(){this.base(arguments);qx.ui.core.FocusHandler.getInstance().addRoot(this);},properties:{appearance:{refine:true,init:"root"},enabled:{refine:true,init:true},focusable:{refine:true,init:true},globalCursor:{check:"String",nullable:true,themeable:true,apply:"_applyGlobalCursor",event:"changeGlobalCursor"},nativeContextMenu:{check:"Boolean",nullable:true,apply:"_applyNativeContextMenu",init:true}},members:{isRootWidget:function(){return true;},getLayout:function(){return this._getLayout();},_applyGlobalCursor:qx.core.Variant.select("qx.client",{"mshtml":function(value,old){},"default":function(value,old){var Stylesheet=qx.bom.Stylesheet;var sheet=this.__globalCursorStyleSheet;if(!sheet){this.__globalCursorStyleSheet=sheet=Stylesheet.createElement();}Stylesheet.removeAllRules(sheet);if(value){Stylesheet.addRule(sheet,"*",qx.bom.element.Cursor.compile(value).replace(";","")+" !important");}}}),_applyNativeContextMenu:function(value,old){if(value){this.removeListener("contextmenu",this._onNativeContextMenu,this,true);}else{this.addListener("contextmenu",this._onNativeContextMenu,this,true);}},_onNativeContextMenu:function(e){e.preventDefault();}},destruct:function(){this._disposeFields("__globalCursorStyleSheet");},defer:function(statics,members){qx.ui.core.MChildrenHandling.remap(members);}});qx.Class.define("qx.ui.root.Application",{extend:qx.ui.root.Abstract,construct:function(doc){this._window=qx.dom.Node.getWindow(doc);this._doc=doc;this.base(arguments);qx.event.Registration.addListener(this._window,"resize",this._onResize,this);this._setLayout(new qx.ui.layout.Canvas());qx.ui.core.queue.Layout.add(this);qx.ui.core.FocusHandler.getInstance().connectTo(this);},members:{_createContainerElement:function(){var doc=this._doc;var hstyle=doc.documentElement.style;var bstyle=doc.body.style;hstyle.overflow=bstyle.overflow="hidden";hstyle.padding=hstyle.margin=bstyle.padding=bstyle.margin="0px";hstyle.width=hstyle.height=bstyle.width=bstyle.height="100%";var elem=doc.createElement("div");doc.body.appendChild(elem);var root=new qx.html.Root(elem);root.setStyle("position","absolute");return root;},_onResize:function(e){qx.ui.core.queue.Layout.add(this);},_computeSizeHint:function(){var width=qx.bom.Viewport.getWidth(this._window);var height=qx.bom.Viewport.getHeight(this._window);return {minWidth:width,width:width,maxWidth:width,minHeight:height,height:height,maxHeight:height};}},destruct:function(){this._disposeFields("_window","_doc");}});qx.Class.define("qx.ui.core.EventHandler",{extend:qx.core.Object,implement:qx.event.IEventHandler,construct:function(){this.base(arguments);this.__manager=qx.event.Registration.getManager();},statics:{PRIORITY:qx.event.Registration.PRIORITY_FIRST,SUPPORTED_TYPES:{mousemove:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,click:1,dblclick:1,contextmenu:1,mousewheel:1,keyup:1,keydown:1,keypress:1,keyinput:1,capture:1,losecapture:1,focusin:1,focusout:1,focus:1,blur:1,activate:1,deactivate:1,appear:1,disappear:1,dragstart:1,dragend:1,dragover:1,dragleave:1,drop:1,drag:1,dragchange:1,droprequest:1},IGNORE_CAN_HANDLE:false},members:{__manager:null,__focusEvents:{focusin:1,focusout:1,focus:1,blur:1},__ignoreDisabled:{mouseover:1,mouseout:1,appear:1,disappear:1},canHandleEvent:function(target,type){return target instanceof qx.ui.core.Widget;},_dispatchEvent:function(domEvent){var domTarget=domEvent.getTarget();var widgetTarget=qx.ui.core.Widget.getWidgetByElement(domTarget,true);while(widgetTarget&&widgetTarget.isAnonymous()){widgetTarget=widgetTarget.getLayoutParent();}if(!widgetTarget){return;}if(this.__focusEvents[domEvent.getType()]){widgetTarget=widgetTarget.getFocusTarget();if(!widgetTarget){return;}}if(domEvent.getRelatedTarget){var domRelatedTarget=domEvent.getRelatedTarget();var widgetRelatedTarget=qx.ui.core.Widget.getWidgetByElement(domRelatedTarget);while(widgetRelatedTarget&&widgetRelatedTarget.isAnonymous()){widgetRelatedTarget=widgetRelatedTarget.getLayoutParent();}if(widgetRelatedTarget){if(this.__focusEvents[domEvent.getType()]){widgetRelatedTarget=widgetRelatedTarget.getFocusTarget();}if(widgetRelatedTarget===widgetTarget){return;}}}var currentTarget=domEvent.getCurrentTarget();var currentWidget=qx.ui.core.Widget.getWidgetByElement(currentTarget);if(!currentWidget||currentWidget.isAnonymous()){return;}if(this.__focusEvents[domEvent.getType()]){currentWidget=currentWidget.getFocusTarget();}var type=domEvent.getType();if(!(currentWidget.isEnabled()||this.__ignoreDisabled[type])){return;}var capture=domEvent.getEventPhase()==qx.event.type.Event.CAPTURING_PHASE;var listeners=this.__manager.getListeners(currentWidget,type,capture);if(!listeners||listeners.length===0){return;}var widgetEvent=qx.event.Pool.getInstance().getObject(domEvent.constructor);domEvent.clone(widgetEvent);widgetEvent.setTarget(widgetTarget);widgetEvent.setRelatedTarget(widgetRelatedTarget||null);widgetEvent.setCurrentTarget(widgetTarget);var orig=domEvent.getOriginalTarget();if(orig){var widgetOriginalTarget=qx.ui.core.Widget.getWidgetByElement(orig);while(widgetOriginalTarget&&widgetOriginalTarget.isAnonymous()){widgetOriginalTarget=widgetOriginalTarget.getLayoutParent();}widgetEvent.setOriginalTarget(widgetOriginalTarget);}else{widgetEvent.setOriginalTarget(domTarget);}for(var i=0,l=listeners.length;i<l;i++){var context=listeners[i].context||currentWidget;listeners[i].handler.call(context,widgetEvent);}if(widgetEvent.getPropagationStopped()){domEvent.stopPropagation();}if(widgetEvent.getDefaultPrevented()){domEvent.preventDefault();}qx.event.Pool.getInstance().poolObject(widgetEvent);},registerEvent:function(target,type,capture){var elem;if(type==="focus"||type==="blur"){elem=target.getFocusElement();}else if(type==="load"||type==="input"){elem=target.getContentElement();}else{elem=target.getContainerElement();}if(elem){elem.addListener(type,this._dispatchEvent,this,capture);}},unregisterEvent:function(target,type,capture){var elem;if(type==="focus"||type==="blur"){elem=target.getFocusElement();}else if(type==="load"||type==="input"){elem=target.getContentElement();}else{elem=target.getContainerElement();}if(elem){elem.removeListener(type,this._dispatchEvent,this,capture);}}},destruct:function(){this._disposeFields("__manager");},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.ui.layout.Abstract",{type:"abstract",extend:qx.core.Object,members:{__sizeHint:null,_invalidChildrenCache:null,__widget:null,invalidateLayoutCache:function(){this.__sizeHint=null;},renderLayout:function(availWidth,availHeight){this.warn("Missing renderLayout() implementation!");},getSizeHint:function(){if(this.__sizeHint){return this.__sizeHint;}return this.__sizeHint=this._computeSizeHint();},_computeSizeHint:function(){return null;},invalidateChildrenCache:function(){this._invalidChildrenCache=true;},verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){},"off":null}),_clearSeparators:function(){var widget=this.__widget;if(widget instanceof qx.ui.core.LayoutItem){widget.clearSeparators();}},_renderSeparator:function(separator,bounds){this.__widget.renderSeparator(separator,bounds);},connectToWidget:function(widget){if(widget&&this.__widget){throw new Error("It is not possible to manually set the connected widget.");}this.__widget=widget;this.invalidateChildrenCache();},_applyLayoutChange:function(){if(this.__widget){this.__widget.scheduleLayoutUpdate();}},_getLayoutChildren:function(){return this.__widget.getLayoutChildren();}},destruct:function(){this._disposeFields("__widget","__sizeHint");}});qx.Class.define("qx.ui.decoration.Util",{statics:{insetsModified:function(a,b){if(a==b){return false;}if(a==null||b==null){return true;}var manager=qx.theme.manager.Decoration.getInstance();var first=manager.resolve(a).getInsets();var second=manager.resolve(b).getInsets();if(first.top!=second.top||first.right!=second.right||first.bottom!=second.bottom||first.left!=second.left){return true;}return false;},generateBackgroundMarkup:function(image,repeat,styles){if(image){var resolved=qx.util.AliasManager.getInstance().resolve(image);if(repeat=="scale"){var uri=qx.util.ResourceManager.toUri(resolved);return '<img src="'+uri+'" style="vertical-align:top;'+styles+'"/>';}else{var back=qx.bom.element.Background.compile(resolved,repeat,0,0);return '<div style="'+back+styles+'"></div>';}}else{if(styles){return '<div style="'+styles+'"></div>';}else{return "";}}}}});qx.Class.define("qx.bom.element.Background",{statics:{__tmpl:["background-image:url(",null,");","background-position:",null,";","background-repeat:",null,";"],__emptyStyles:{backgroundImage:null,backgroundPosition:null,backgroundRepeat:null},compile:function(source,repeat,left,top){var Engine=qx.bom.client.Engine;if(Engine.GECKO&&Engine.VERSION<1.9&&left==top&&left!=null){top+=0.01;}if(left!=null||top!=null){var position=(left==null?"0px":left+"px")+" "+(top==null?"0px":top+"px");}else{var position="0 0";}var backgroundImageUrl=qx.util.ResourceManager.toUri(source);if(qx.core.Variant.isSet("qx.client","mshtml")){backgroundImageUrl=this.__checkImageUrl(backgroundImageUrl);}var tmpl=this.__tmpl;tmpl[1]=backgroundImageUrl;tmpl[4]=position;tmpl[7]=repeat;return tmpl.join("");},getStyles:function(source,repeat,left,top){if(!source){return this.__emptyStyles;}var Engine=qx.bom.client.Engine;if(Engine.GECKO&&Engine.VERSION<1.9&&left==top&&left!=null){top+=0.01;}if(left!=null||top!=null){var position=(left==null?"0px":left+"px")+" "+(top==null?"0px":top+"px");}var backgroundImageUrl=qx.util.ResourceManager.toUri(source);if(qx.core.Variant.isSet("qx.client","mshtml")){backgroundImageUrl=this.__checkImageUrl(backgroundImageUrl);}var map={backgroundImage:"url("+backgroundImageUrl+")"};if(position!=null){map.backgroundPosition=position;}if(repeat!=null){map.backgroundRepeat=repeat;}return map;},set:function(element,source,repeat,left,top){var styles=this.getStyles(source,repeat,left,top);for(var prop in styles){element.style[prop]=styles[prop];}},__checkImageUrl:qx.core.Variant.select("qx.client",{"mshtml":function(url){var urlPrefix="";if(window.location.protocol==="https:"){if(url.match(/^\/\//)!=null){urlPrefix=window.location.protocol;}else if(url.match(/^\.\//)!=null){url=url.substring(url.indexOf("/"));urlPrefix=document.URL.substring(0,document.URL.lastIndexOf("/"));}else{urlPrefix=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1);}}return urlPrefix+url;},"default":function(){}})}});qx.Class.define("qx.ui.basic.Image",{extend:qx.ui.core.Widget,construct:function(source){this.base(arguments);if(source){this.setSource(source);}},properties:{source:{check:"String",init:null,nullable:true,event:"changeSource",apply:"_applySource",themeable:true},scale:{check:"Boolean",init:false,themeable:true,apply:"_applyScale"},appearance:{refine:true,init:"image"},allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false}},members:{__width:null,__height:null,_createContentElement:function(){return new qx.html.Image();},_getContentHint:function(){return {width:this.__width||0,height:this.__height||0};},_applyEnabled:function(value,old){this.base(arguments,value,old);if(this.getSource()){this._styleSource();}},_applySource:function(value){this._styleSource();},_applyScale:function(value){var el=this.getContentElement();el.setScale(value);},_styleSource:function(){var source=qx.util.AliasManager.getInstance().resolve(this.getSource());var el=this.getContentElement();if(!source){el.resetSource();return;}var ResourceManager=qx.util.ResourceManager;var ImageLoader=qx.io2.ImageLoader;if(ResourceManager.has(source)){if(!this.getEnabled()){var disabled=source.replace(/\.([a-z]+)$/,"-disabled.$1");if(ResourceManager.has(disabled)){source=disabled;this.addState("replacement");}else{this.removeState("replacement");}}if(el.getSource()===source){return;}el.setSource(source);this._updateSize(ResourceManager.getImageWidth(source),ResourceManager.getImageHeight(source));}else if(ImageLoader.isLoaded(source)){el.setSource(source);var width=ImageLoader.getWidth(source);var height=ImageLoader.getHeight(source);this._updateSize(width,height);}else{if(qx.core.Variant.isSet("qx.debug","on")){var self=this.self(arguments);if(!self.__warned){self.__warned={};}if(!self.__warned[source]){this.debug("Unknown image: "+source);self.__warned[source]=true;}}if(!qx.io2.ImageLoader.isFailed(source)){qx.io2.ImageLoader.load(source,this.__loaderCallback,this);}}},__loaderCallback:function(source,size){if(source!==qx.util.AliasManager.getInstance().resolve(this.getSource())){return;}if(!size){this.warn("Image could not be loaded: "+source);return;}this._styleSource();},_updateSize:function(width,height){if(width!==this.__width||height!==this.__height){this.__width=width;this.__height=height;qx.ui.core.queue.Layout.add(this);}}}});qx.Mixin.define("qx.ui.core.MPlacement",{properties:{position:{check:["top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],init:"bottom-left",themeable:true},domMove:{check:"Boolean",init:false},smart:{check:"Boolean",init:true,themeable:true},offsetLeft:{check:"Integer",init:0,themeable:true},offsetTop:{check:"Integer",init:0,themeable:true},offsetRight:{check:"Integer",init:0,themeable:true},offsetBottom:{check:"Integer",init:0,themeable:true},offset:{group:["offsetTop","offsetRight","offsetBottom","offsetLeft"],mode:"shorthand",themeable:true}},members:{getLayoutLocation:function(widget){var insets,bounds,left,top;bounds=widget.getBounds();left=bounds.left;top=bounds.top;var size=bounds;widget=widget.getLayoutParent();while(widget&&!widget.isRootWidget()){bounds=widget.getBounds();left+=bounds.left;top+=bounds.top;insets=widget.getInsets();left+=insets.left;top+=insets.top;widget=widget.getLayoutParent();}if(widget.isRootWidget()){var rootCoords=widget.getContainerLocation();if(rootCoords){left+=rootCoords.left;top+=rootCoords.top;}}return {left:left,top:top,right:left+size.width,bottom:top+size.height};},moveTo:function(left,top){if(this.getDomMove()){this.setDomPosition(left,top);}else{this.setLayoutProperties({left:left,top:top});}},placeToWidget:function(target){var coords=target.getContainerLocation()||this.getLayoutLocation(target);this.__place(coords);},placeToMouse:function(event){var left=event.getDocumentLeft();var top=event.getDocumentTop();var coords={left:left,top:top,right:left,bottom:top};this.__place(coords);},placeToElement:function(elem){var location=qx.bom.element.Location.get(elem);var coords={left:location.left,top:location.top,right:location.left+elem.offsetWidth,bottom:location.top+elem.offsetHeight};this.__place(coords);},placeToPoint:function(point){var coords={left:point.left,top:point.top,right:point.left,bottom:point.top};this.__place(coords);},__place:function(coords){var size=this.getSizeHint();var area=this.getLayoutParent().getBounds();var position=this.getPosition();var smart=this.getSmart();var offsets={left:this.getOffsetLeft(),top:this.getOffsetTop(),right:this.getOffsetRight(),bottom:this.getOffsetBottom()};var result=qx.util.PlaceUtil.compute(size,area,coords,position,smart,offsets);this.moveTo(result.left,result.top);}}});qx.Class.define("qx.ui.core.DragDropCursor",{extend:qx.ui.basic.Image,include:qx.ui.core.MPlacement,type:"singleton",construct:function(){this.base(arguments);this.setZIndex(1e8);this.setDomMove(true);var root=this.getApplicationRoot();root.add(this,{left:-1000,top:-1000});},properties:{appearance:{refine:true,init:"dragdrop-cursor"},action:{check:["alias","copy","move"],apply:"_applyAction",nullable:true}},members:{_applyAction:function(value,old){if(old){this.removeState(old);}if(value){this.addState(value);}}}});qx.Class.define("qx.html.Image",{extend:qx.html.Element,members:{_applyProperty:function(name,value){this.base(arguments,name,value);if(name==="source"){var elem=this._element;var source=this._getProperty("source");var scale=this._getProperty("scale");var repeat=scale?"scale":"no-repeat";qx.bom.element.Decoration.update(elem,source,repeat);}},_createDomElement:function(){var scale=this._getProperty("scale");var repeat=scale?"scale":"no-repeat";this._nodeName=qx.bom.element.Decoration.getTagName(repeat);return this.base(arguments);},_copyData:function(fromMarkup){return this.base(arguments,true);},setSource:function(value){this._setProperty("source",value);return this;},getSource:function(){return this._getProperty("source");},resetSource:function(){this._removeProperty("source");return this;},setScale:function(value){this._setProperty("scale",value);return this;},getScale:function(){return this._getProperty("scale");}}});qx.Class.define("qx.bom.element.Decoration",{statics:{DEBUG:false,__enableAlphaFix:qx.core.Variant.isSet("qx.client","mshtml")&&qx.bom.client.Engine.VERSION<8,__alphaFixRepeats:qx.core.Variant.select("qx.client",{"mshtml":{"scale-x":true,"scale-y":true,"scale":true,"no-repeat":true},"default":null}),__repeatToTagname:{"scale-x":"img","scale-y":"img","scale":"img","repeat":"div","no-repeat":"div","repeat-x":"div","repeat-y":"div"},update:function(element,source,repeat,style){var tag=this.getTagName(repeat);if(tag!=element.tagName.toLowerCase()){throw new Error("Image modification not possible because elements could not be replaced at runtime anymore!");}var ret=this.getAttributes(source,repeat,style);if(tag==="img"){element.src=ret.src;}if(element.style.backgroundPosition!=""&&ret.style.backgroundPosition===undefined){ret.style.backgroundPosition=null;}if(element.style.clip!=""&&ret.style.clip===undefined){ret.style.clip=null;}var Style=qx.bom.element.Style;Style.setStyles(element,ret.style);},create:function(source,repeat,style){var tag=this.getTagName(repeat);var ret=this.getAttributes(source,repeat,style);var css=qx.bom.element.Style.compile(ret.style);if(tag==="img"){return '<img src="'+ret.src+'" style="'+css+'"/>';}else{return '<div style="'+css+'"></div>';}},getTagName:function(repeat){if(qx.core.Variant.isSet("qx.client","mshtml")){if(this.__enableAlphaFix&&this.__alphaFixRepeats[repeat]){return "div";}}return this.__repeatToTagname[repeat];},getAttributes:function(source,repeat,style){var ResourceManager=qx.util.ResourceManager;var ImageLoader=qx.io2.ImageLoader;var Background=qx.bom.element.Background;if(!style){style={};}if(!style.position){style.position="absolute";}if(qx.core.Variant.isSet("qx.client","mshtml")){style.fontSize=0;style.lineHeight=0;}else if(qx.core.Variant.isSet("qx.client","webkit")){style.WebkitUserDrag="none";}var width=ResourceManager.getImageWidth(source)||ImageLoader.getWidth(source);var height=ResourceManager.getImageHeight(source)||ImageLoader.getHeight(source);var format=ResourceManager.getImageFormat(source);if(this.__enableAlphaFix&&this.__alphaFixRepeats[repeat]&&format==="png"){if(style.width==null){style.width=width==null?width:width+"px";}if(style.height==null){style.height=height==null?height:height+"px";}style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ResourceManager.toUri(source)+"', sizingMethod='scale')";style.backgroundImage=style.backgroundRepeat="";return {style:style};}else{var clipped=ResourceManager.isClippedImage(source);if(repeat==="scale"){var uri=ResourceManager.toUri(source);if(!style.width){style.width=width==null?width:width+"px";}if(!style.height){style.height=height==null?height:height+"px";}return {src:uri,style:style};}else if(repeat==="scale-x"||repeat==="scale-y"){if(clipped){if(repeat==="scale-x"){var data=ResourceManager.getData(source);var imageHeight=ResourceManager.getImageHeight(data[4]);var uri=ResourceManager.toUri(data[4]);style.clip={top:-data[6],height:height};style.height=imageHeight+"px";if(style.top!=null){style.top=(parseInt(style.top)+data[6])+"px";}else if(style.bottom!=null){style.bottom=(parseInt(style.bottom)+height-imageHeight-data[6])+"px";}return {src:uri,style:style};}else{var data=ResourceManager.getData(source);var imageWidth=ResourceManager.getImageWidth(data[4]);var uri=ResourceManager.toUri(data[4]);style.clip={left:-data[5],width:width};style.width=imageWidth+"px";if(style.left!=null){style.left=(parseInt(style.left)+data[5])+"px";}else if(style.right!=null){style.right=(parseInt(style.right)+width-imageWidth-data[5])+"px";}return {src:uri,style:style};}}else{if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG&&ResourceManager.has(source)&&source.indexOf("qx/icon")==-1){if(!this.__warnings){this.__warnings={};}if(!this.__warnings[source]){qx.log.Logger.debug("Potential clipped image candidate: "+source);this.__warnings[source]=true;}}}if(repeat=="scale-x"){style.height=height==null?null:height+"px";}else if(repeat=="scale-y"){style.width=width==null?null:width+"px";}var uri=ResourceManager.toUri(source);return {src:uri,style:style};}}else{if(clipped&&repeat!=="repeat"){var data=ResourceManager.getData(source);var bg=Background.getStyles(data[4],repeat,data[5],data[6]);for(var key in bg){style[key]=bg[key];}if(repeat=="repeat-y"||repeat==="no-repeat"){style.width=width==null?width:width+"px";}if(repeat=="repeat-x"||repeat==="no-repeat"){style.height=height==null?height:height+"px";}return {style:style};}else{if(qx.core.Variant.isSet("qx.debug","on")){if(this.DEBUG&&ResourceManager.has(source)&&repeat!=="repeat"&&source.indexOf("qx/icon")==-1){if(!this.__warnings){this.__warnings={};}if(!this.__warnings[source]){qx.log.Logger.debug("Potential clipped image candidate: "+source);this.__warnings[source]=true;}}}var bg=Background.getStyles(source,repeat);for(var key in bg){style[key]=bg[key];}style.width=width==null?width:width+"px";style.height=height==null?height:height+"px";return {style:style};}}}}}});qx.Bootstrap.define("qx.io2.ImageLoader",{statics:{__data:{},__defaultSize:{width:null,height:null},isLoaded:function(source){var entry=this.__data[source];return !!(entry&&entry.loaded);},isFailed:function(source){var entry=this.__data[source];return !!(entry&&entry.failed);},isLoading:function(source){var entry=this.__data[source];return !!(entry&&entry.loading);},getSize:function(source){return this.__data[source]||this.__defaultSize;},getWidth:function(source){var entry=this.__data[source];return entry?entry.width:null;},getHeight:function(source){var entry=this.__data[source];return entry?entry.height:null;},load:function(source,callback,context){var entry=this.__data[source];if(!entry){entry=this.__data[source]={};}if(callback&&!context){context=window;}if(entry.loaded||entry.loading||entry.failed){if(callback){if(entry.loading){entry.callbacks.push(callback,context);}else{callback.call(context,source,entry);}}}else{entry.loading=true;entry.callbacks=[];if(callback){entry.callbacks.push(callback,context);}var el=new Image();var boundCallback=qx.lang.Function.listener(this.__onload,this,el,source);el.onload=boundCallback;el.onerror=boundCallback;el.src=source;}},__onload:function(event,element,source){var entry=this.__data[source];if(event.type==="load"){entry.loaded=true;entry.width=this.__getWidth(element);entry.height=this.__getHeight(element);}else{entry.failed=true;}element.onload=element.onerror=null;var callbacks=entry.callbacks;delete entry.loading;delete entry.callbacks;for(var i=0,l=callbacks.length;i<l;i+=2){callbacks[i].call(callbacks[i+1],source,entry);}},__getWidth:qx.core.Variant.select("qx.client",{"gecko":function(element){return element.naturalWidth;},"default":function(element){return element.width;}}),__getHeight:qx.core.Variant.select("qx.client",{"gecko":function(element){return element.naturalHeight;},"default":function(element){return element.height;}})}});qx.Class.define("qx.util.PlaceUtil",{statics:{compute:function(size,area,target,position,smart,offsets){var left=0;var top=0;var fixedRatingX,fixedRatingY;var splitted=position.split("-");var edge=splitted[0];var align=splitted[1];var offsetLeft=0,offsetTop=0,offsetRight=0,offsetBottom=0;if(offsets){offsetLeft+=offsets.left||0;offsetTop+=offsets.top||0;offsetRight+=offsets.right||0;offsetBottom+=offsets.bottom||0;}switch(edge){case "left":left=target.left-size.width-offsetLeft;break;case "top":top=target.top-size.height-offsetTop;break;case "right":left=target.right+offsetRight;break;case "bottom":top=target.bottom+offsetBottom;break;}switch(align){case "left":left=target.left;break;case "top":top=target.top;break;case "right":left=target.right-size.width;break;case "bottom":top=target.bottom-size.height;break;}if(smart===false){return {left:left,top:top};}else{var ratingX=Math.min(left,area.width-left-size.width);if(ratingX<0){var fixedLeft=left;if(left<0){if(edge=="left"){fixedLeft=target.right+offsetRight;}else if(align=="right"){fixedLeft=target.left;}}else{if(edge=="right"){fixedLeft=target.left-size.width-offsetLeft;}else if(align=="left"){fixedLeft=target.right-size.width;}}fixedRatingX=Math.min(fixedLeft,area.width-fixedLeft-size.width);if(fixedRatingX>ratingX){left=fixedLeft;ratingX=fixedRatingX;}}var ratingY=Math.min(top,area.height-top-size.height);if(ratingY<0){var fixedTop=top;if(top<0){if(edge=="top"){fixedTop=target.bottom+offsetBottom;}else if(align=="bottom"){fixedTop=target.top;}}else{if(edge=="bottom"){fixedTop=target.top-size.height-offsetTop;}else if(align=="top"){fixedTop=target.bottom-size.height;}}fixedRatingY=Math.min(fixedTop,area.height-fixedTop-size.height);if(fixedRatingY>ratingY){top=fixedTop;ratingY=fixedRatingY;}}return {left:left,top:top,ratingX:ratingX,ratingY:ratingY};}}}});qx.Class.define("qx.ui.core.FocusHandler",{extend:qx.core.Object,type:"singleton",construct:function(){this.base(arguments);this.__roots={};},members:{__roots:null,__activeChild:null,__focusedChild:null,__currentRoot:null,connectTo:function(root){root.addListener("keypress",this.__onKeyPress,this);root.addListener("focusin",this._onFocusIn,this,true);root.addListener("focusout",this._onFocusOut,this,true);root.addListener("activate",this._onActivate,this,true);root.addListener("deactivate",this._onDeactivate,this,true);},addRoot:function(widget){this.__roots[widget.$$hash]=widget;},removeRoot:function(widget){delete this.__roots[widget.$$hash];},isActive:function(widget){return this.__activeChild==widget;},isFocused:function(widget){return this.__focusedChild==widget;},isFocusRoot:function(widget){!!this.__roots[widget.$$hash];},_onActivate:function(e){var target=e.getTarget();this.__activeChild=target;var root=this.__findFocusRoot(target);if(root!=this.__currentRoot){this.__currentRoot=root;}},_onDeactivate:function(e){var target=e.getTarget();if(this.__activeChild==target){this.__activeChild=null;}},_onFocusIn:function(e){var target=e.getTarget();if(target!=this.__focusedChild){this.__focusedChild=target;target.visualizeFocus();}},_onFocusOut:function(e){var target=e.getTarget();if(target==this.__focusedChild){this.__focusedChild=null;target.visualizeBlur();}},__onKeyPress:function(e){if(e.getKeyIdentifier()!="Tab"){return;}if(!this.__currentRoot){return;}e.stopPropagation();e.preventDefault();var current=this.__focusedChild;if(!e.isShiftPressed()){var next=current?this.__getWidgetAfter(current):this.__getFirstWidget();}else{var next=current?this.__getWidgetBefore(current):this.__getLastWidget();}if(next){next.tabFocus();}},__findFocusRoot:function(widget){var roots=this.__roots;while(widget){if(roots[widget.$$hash]){return widget;}widget=widget.getLayoutParent();}return null;},__compareTabOrder:function(widget1,widget2){if(widget1===widget2){return 0;}var tab1=widget1.getTabIndex()||0;var tab2=widget2.getTabIndex()||0;if(tab1!=tab2){return tab1-tab2;}var el1=widget1.getContainerElement().getDomElement();var el2=widget2.getContainerElement().getDomElement();var Location=qx.bom.element.Location;var loc1=Location.get(el1);var loc2=Location.get(el2);if(loc1.top!=loc2.top){return loc1.top-loc2.top;}if(loc1.left!=loc2.left){return loc1.left-loc2.left;}var z1=widget1.getZIndex();var z2=widget2.getZIndex();if(z1!=z2){return z1-z2;}return 0;},__getFirstWidget:function(){return this.__getFirst(this.__currentRoot,null);},__getLastWidget:function(){return this.__getLast(this.__currentRoot,null);},__getWidgetAfter:function(widget){var root=this.__currentRoot;if(root==widget){return this.__getFirstWidget();}while(widget&&widget.getAnonymous()){widget=widget.getLayoutParent();}if(widget==null){return [];}var result=[];this.__collectAllAfter(root,widget,result);result.sort(this.__compareTabOrder);var len=result.length;return len>0?result[0]:this.__getFirstWidget();},__getWidgetBefore:function(widget){var root=this.__currentRoot;if(root==widget){return this.__getLastWidget();}while(widget&&widget.getAnonymous()){widget=widget.getLayoutParent();}if(widget==null){return [];}var result=[];this.__collectAllBefore(root,widget,result);result.sort(this.__compareTabOrder);var len=result.length;return len>0?result[len-1]:this.__getLastWidget();},__collectAllAfter:function(parent,widget,result){var children=parent.getLayoutChildren();var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(!(child instanceof qx.ui.core.Widget)){continue;}if(!this.isFocusRoot(child)&&child.isEnabled()){if(child.isTabable()&&this.__compareTabOrder(widget,child)<0){result.push(child);}this.__collectAllAfter(child,widget,result);}}},__collectAllBefore:function(parent,widget,result){var children=parent.getLayoutChildren();var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(!(child instanceof qx.ui.core.Widget)){continue;}if(!this.isFocusRoot(child)&&child.isEnabled()){if(child.isTabable()&&this.__compareTabOrder(widget,child)>0){result.push(child);}this.__collectAllBefore(child,widget,result);}}},__getFirst:function(parent,firstWidget){var children=parent.getLayoutChildren();var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(!(child instanceof qx.ui.core.Widget)){continue;}if(!this.isFocusRoot(child)&&child.isEnabled()){if(child.isTabable()){if(firstWidget==null||this.__compareTabOrder(child,firstWidget)<0){firstWidget=child;}}firstWidget=this.__getFirst(child,firstWidget);}}return firstWidget;},__getLast:function(parent,lastWidget){var children=parent.getLayoutChildren();var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(!(child instanceof qx.ui.core.Widget)){continue;}if(!this.isFocusRoot(child)&&child.isEnabled()){if(child.isTabable()){if(lastWidget==null||this.__compareTabOrder(child,lastWidget)>0){lastWidget=child;}}lastWidget=this.__getLast(child,lastWidget);}}return lastWidget;}},destruct:function(){this._disposeMap("__roots");this._disposeFields("__focusedChild","__activeChild","__currentRoot");}});qx.Class.define("qx.ui.layout.Canvas",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){var layoutProperties={top:1,left:1,bottom:1,right:1,width:1,height:1,edge:1};this.assert(layoutProperties[name]==1,"The property '"+name+"' is not supported by the canvas layout!");if(name=="width"||name=="height"){this.assertMatch(value,qx.ui.layout.Util.PERCENT_VALUE);}else{if(typeof value==="number"){this.assertInteger(value);}else if(typeof value=="string"){this.assertMatch(value,qx.ui.layout.Util.PERCENT_VALUE);}else{this.fail("Bad format of layout property '"+name+"': "+value+". The value must be either an integer or an percent string.");}}},"off":null}),renderLayout:function(availWidth,availHeight){var children=this._getLayoutChildren();var child,size,props;var left,top,right,bottom,width,height;var marginTop,marginRight,marginBottom,marginLeft;for(var i=0,l=children.length;i<l;i++){child=children[i];size=child.getSizeHint();props=child.getLayoutProperties();marginTop=child.getMarginTop();marginRight=child.getMarginRight();marginBottom=child.getMarginBottom();marginLeft=child.getMarginLeft();left=props.left!=null?props.left:props.edge;if(left&&typeof left==="string"){left=Math.round(parseFloat(left)*availWidth/100);}right=props.right!=null?props.right:props.edge;if(right&&typeof right==="string"){right=Math.round(parseFloat(right)*availWidth/100);}top=props.top!=null?props.top:props.edge;if(top&&typeof top==="string"){top=Math.round(parseFloat(top)*availHeight/100);}bottom=props.bottom!=null?props.bottom:props.edge;if(bottom&&typeof bottom==="string"){bottom=Math.round(parseFloat(bottom)*availHeight/100);}if(left!=null&&right!=null){width=availWidth-left-right-marginLeft-marginRight;if(width<size.minWidth){width=size.minWidth;}else if(width>size.maxWidth){width=size.maxWidth;}left+=marginLeft;}else{width=props.width;if(width==null){width=size.width;}else{width=Math.round(parseFloat(width)*availWidth/100);if(width<size.minWidth){width=size.minWidth;}else if(width>size.maxWidth){width=size.maxWidth;}}if(right!=null){left=availWidth-width-right-marginRight-marginLeft;}else if(left==null){left=marginLeft;}else{left+=marginLeft;}}if(top!=null&&bottom!=null){height=availHeight-top-bottom-marginTop-marginBottom;if(height<size.minHeight){height=size.minHeight;}else if(height>size.maxHeight){height=size.maxHeight;}top+=marginTop;}else{height=props.height;if(height==null){height=size.height;}else{height=Math.round(parseFloat(height)*availHeight/100);if(height<size.minHeight){height=size.minHeight;}else if(height>size.maxHeight){height=size.maxHeight;}}if(bottom!=null){top=availHeight-height-bottom-marginBottom-marginTop;}else if(top==null){top=marginTop;}else{top+=marginTop;}}child.renderLayout(left,top,width,height);}},_computeSizeHint:function(){var neededWidth=0,neededMinWidth=0;var neededHeight=0,neededMinHeight=0;var width,minWidth;var height,minHeight;var children=this._getLayoutChildren();var child,props,hint;var left,top,right,bottom;for(var i=0,l=children.length;i<l;i++){child=children[i];props=child.getLayoutProperties();hint=child.getSizeHint();var marginX=child.getMarginLeft()+child.getMarginRight();var marginY=child.getMarginTop()+child.getMarginBottom();width=hint.width+marginX;minWidth=hint.minWidth+marginX;left=props.left!=null?props.left:props.edge;if(left&&typeof left==="number"){width+=left;minWidth+=left;}right=props.right!=null?props.right:props.edge;if(right&&typeof right==="number"){width+=right;minWidth+=right;}neededWidth=Math.max(neededWidth,width);neededMinWidth=Math.max(neededMinWidth,minWidth);height=hint.height+marginY;minHeight=hint.minHeight+marginY;top=props.top!=null?props.top:props.edge;if(top&&typeof top==="number"){height+=top;minHeight+=top;}bottom=props.bottom!=null?props.bottom:props.edge;if(bottom&&typeof bottom==="number"){height+=bottom;minHeight+=bottom;}neededHeight=Math.max(neededHeight,height);neededMinHeight=Math.max(neededMinHeight,minHeight);}return {width:neededWidth,minWidth:neededMinWidth,height:neededHeight,minHeight:neededMinHeight};}}});qx.Class.define("qx.ui.layout.Util",{statics:{PERCENT_VALUE:/[0-9]+(?:\.[0-9]+)?%/,computeFlexOffsets:function(flexibles,avail,used){var child,key,flexSum,flexStep;var grow=avail>used;var remaining=Math.abs(avail-used);var roundingOffset,currentOffset;var result={};for(key in flexibles){child=flexibles[key];result[key]={potential:grow?child.max-child.value:child.value-child.min,flex:grow?child.flex:1/child.flex,offset:0};}while(remaining!=0){flexStep=Infinity;flexSum=0;for(key in result){child=result[key];if(child.potential>0){flexSum+=child.flex;flexStep=Math.min(flexStep,child.potential/child.flex);}}if(flexSum==0){break;}flexStep=Math.min(remaining,flexStep*flexSum)/flexSum;roundingOffset=0;for(key in result){child=result[key];if(child.potential>0){currentOffset=Math.min(remaining,child.potential,Math.ceil(flexStep*child.flex));roundingOffset+=currentOffset-flexStep*child.flex;if(roundingOffset>=1){roundingOffset-=1;currentOffset-=1;}child.potential-=currentOffset;if(grow){child.offset+=currentOffset;}else{child.offset-=currentOffset;}remaining-=currentOffset;}}}return result;},computeHorizontalAlignOffset:function(align,width,availWidth,marginLeft,marginRight){if(marginLeft==null){marginLeft=0;}if(marginRight==null){marginRight=0;}var value=0;switch(align){case "left":value=marginLeft;break;case "right":value=availWidth-width-marginRight;break;case "center":value=Math.round((availWidth-width)/2);if(value<marginLeft){value=marginLeft;}else if(value<marginRight){value=Math.max(marginLeft,availWidth-width-marginRight);}break;}return value;},computeVerticalAlignOffset:function(align,height,availHeight,marginTop,marginBottom){if(marginTop==null){marginTop=0;}if(marginBottom==null){marginBottom=0;}var value=0;switch(align){case "top":value=marginTop;break;case "bottom":value=availHeight-height-marginBottom;break;case "middle":value=Math.round((availHeight-height)/2);if(value<marginTop){value=marginTop;}else if(value<marginBottom){value=Math.max(marginTop,availHeight-height-marginBottom);}break;}return value;},collapseMargins:function(varargs){var max=0,min=0;for(var i=0,l=arguments.length;i<l;i++){var value=arguments[i];if(value<0){min=Math.min(min,value);}else if(value>0){max=Math.max(max,value);}}return max+min;},computeHorizontalGaps:function(children,spacing,collapse){if(spacing==null){spacing=0;}var gaps=0;if(collapse){gaps+=children[0].getMarginLeft();for(var i=1,l=children.length;i<l;i+=1){gaps+=this.collapseMargins(spacing,children[i-1].getMarginRight(),children[i].getMarginLeft());}gaps+=children[l-1].getMarginRight();}else{for(var i=1,l=children.length;i<l;i+=1){gaps+=children[i].getMarginLeft()+children[i].getMarginRight();}gaps+=(spacing*(l-1));}return gaps;},computeVerticalGaps:function(children,spacing,collapse){if(spacing==null){spacing=0;}var gaps=0;if(collapse){gaps+=children[0].getMarginTop();for(var i=1,l=children.length;i<l;i+=1){gaps+=this.collapseMargins(spacing,children[i-1].getMarginBottom(),children[i].getMarginTop());}gaps+=children[l-1].getMarginBottom();}else{for(var i=1,l=children.length;i<l;i+=1){gaps+=children[i].getMarginTop()+children[i].getMarginBottom();}gaps+=(spacing*(l-1));}return gaps;},computeHorizontalSeparatorGaps:function(children,spacing,separator){var instance=qx.theme.manager.Decoration.getInstance().resolve(separator);var insets=instance.getInsets();var width=insets.left+insets.right;var gaps=0;for(var i=0,l=children.length;i<l;i++){var child=children[i];gaps+=child.getMarginLeft()+child.getMarginRight();}gaps+=(spacing+width+spacing)*(l-1);return gaps;},computeVerticalSeparatorGaps:function(children,spacing,separator){var instance=qx.theme.manager.Decoration.getInstance().resolve(separator);var insets=instance.getInsets();var height=insets.top+insets.bottom;var gaps=0;for(var i=0,l=children.length;i<l;i++){var child=children[i];gaps+=child.getMarginTop()+child.getMarginBottom();}gaps+=(spacing+height+spacing)*(l-1);return gaps;},arrangeIdeals:function(beginMin,beginIdeal,beginMax,endMin,endIdeal,endMax){if(beginIdeal<beginMin||endIdeal<endMin){if(beginIdeal<beginMin&&endIdeal<endMin){beginIdeal=beginMin;endIdeal=endMin;}else if(beginIdeal<beginMin){endIdeal-=(beginMin-beginIdeal);beginIdeal=beginMin;if(endIdeal<endMin){endIdeal=endMin;}}else if(endIdeal<endMin){beginIdeal-=(endMin-endIdeal);endIdeal=endMin;if(beginIdeal<beginMin){beginIdeal=beginMin;}}}if(beginIdeal>beginMax||endIdeal>endMax){if(beginIdeal>beginMax&&endIdeal>endMax){beginIdeal=beginMax;endIdeal=endMax;}else if(beginIdeal>beginMax){endIdeal+=(beginIdeal-beginMax);beginIdeal=beginMax;if(endIdeal>endMax){endIdeal=endMax;}}else if(endIdeal>endMax){beginIdeal+=(endIdeal-endMax);endIdeal=endMax;if(beginIdeal>beginMax){beginIdeal=beginMax;}}}return {begin:beginIdeal,end:endIdeal};}}});qx.Class.define("qx.html.Root",{extend:qx.html.Element,construct:function(elem){this.base(arguments);if(elem!=null){this.useElement(elem);}},members:{useElement:function(elem){if(this._element){throw new Error("Elements could not be replaced!");}elem.$$hash=this.$$hash;this._element=elem;this._root=true;qx.html.Element._modified[this.$$hash]=this;}}});qx.Bootstrap.define("qx.log.appender.Native",{statics:{process:qx.core.Variant.select("qx.client",{"gecko":function(entry){if(window.console&&console.firebug){console[entry.level].apply(console,this.__toArguments(entry));}},"webkit":function(entry){var level=entry.level;if(level=="debug"){level="log";}var args=this.__toArguments(entry).join(" ");if(window.console&&console[level]){console[level](args);}},"opera":function(entry){},"default":function(entry){}}),__toArguments:qx.core.Variant.select("qx.client",{"gecko|webkit":function(entry){var output=[];output.push(entry.offset+"ms");if(entry.object){var obj=qx.core.ObjectRegistry.fromHashCode(entry.object);if(obj){output.push(obj.classname+"["+obj.$$hash+"]:");}}else if(entry.clazz){output.push(entry.clazz.classname+":");}var items=entry.items;var item,msg;for(var i=0,il=items.length;i<il;i++){item=items[i];msg=item.text;if(msg instanceof Array){var list=[];for(var j=0,jl=msg.length;j<jl;j++){list.push(msg[j].text);}if(item.type==="map"){output.push("{",list.join(", "),"}");}else{output.push("[",list.join(", "),"]");}}else{output.push(msg);}}return output;},"default":null})},defer:function(statics){qx.log.Logger.register(statics);}});qx.Class.define("qx.log.appender.Console",{statics:{init:function(){var style=['.qxconsole{z-index:10000;width:600px;height:300px;top:0px;right:0px;position:absolute;border-left:1px solid black;color:black;border-bottom:1px solid black;color:black;font-family:Consolas,Monaco,monospace;font-size:11px;line-height:1.2;}','.qxconsole .control{background:#cdcdcd;border-bottom:1px solid black;padding:4px 8px;}','.qxconsole .control a{text-decoration:none;color:black;}','.qxconsole .messages{background:white;height:100%;width:100%;overflow:auto;}','.qxconsole .messages div{padding:0px 4px;}','.qxconsole .messages .user-command{color:blue}','.qxconsole .messages .user-result{background:white}','.qxconsole .messages .user-error{background:#FFE2D5}','.qxconsole .messages .level-debug{background:white}','.qxconsole .messages .level-info{background:#DEEDFA}','.qxconsole .messages .level-warn{background:#FFF7D5}','.qxconsole .messages .level-error{background:#FFE2D5}','.qxconsole .messages .level-user{background:#E3EFE9}','.qxconsole .messages .type-string{color:black;font-weight:normal;}','.qxconsole .messages .type-number{color:#155791;font-weight:normal;}','.qxconsole .messages .type-boolean{color:#15BC91;font-weight:normal;}','.qxconsole .messages .type-array{color:#CC3E8A;font-weight:bold;}','.qxconsole .messages .type-map{color:#CC3E8A;font-weight:bold;}','.qxconsole .messages .type-key{color:#565656;font-style:italic}','.qxconsole .messages .type-class{color:#5F3E8A;font-weight:bold}','.qxconsole .messages .type-instance{color:#565656;font-weight:bold}','.qxconsole .messages .type-stringify{color:#565656;font-weight:bold}','.qxconsole .command{background:white;padding:2px 4px;border-top:1px solid black;}','.qxconsole .command input{width:100%;border:0 none;font-family:Consolas,Monaco,monospace;font-size:11px;line-height:1.2;}','.qxconsole .command input:focus{outline:none;}'];qx.bom.Stylesheet.createElement(style.join(""));var markup=['<div class="qxconsole">','<div class="control"><a href="javascript:qx.log.appender.Console.clear()">Clear</a> | <a href="javascript:qx.log.appender.Console.toggle()">Hide</a></div>','<div class="messages">','</div>','<div class="command">','<input type="text"/>','</div>','</div>'];var wrapper=document.createElement("DIV");wrapper.innerHTML=markup.join("");var main=wrapper.firstChild;document.body.appendChild(wrapper.firstChild);this.__main=main;this.__log=main.childNodes[1];this.__cmd=main.childNodes[2].firstChild;this.__onResize();qx.log.Logger.register(this);qx.core.ObjectRegistry.register(this);},dispose:function(){qx.event.Registration.removeListener(document.documentElement,"keypress",this.__onKeyPress,this);qx.log.Logger.unregister(this);},clear:function(){this.__log.innerHTML="";},process:function(entry){this.__log.appendChild(qx.log.appender.Util.toHtml(entry));this.__scrollDown();},__scrollDown:function(){this.__log.scrollTop=this.__log.scrollHeight;},__visible:true,toggle:function(){if(!this.__main){this.init();}else if(this.__main.style.display=="none"){this.__main.style.display="block";this.__log.scrollTop=this.__log.scrollHeight;}else{this.__main.style.display="none";}},__history:[],execute:function(){var value=this.__cmd.value;if(value==""){return;}if(value=="clear"){return this.clear();}var command=document.createElement("div");command.innerHTML=qx.log.appender.Util.escapeHTML(">>> "+value);command.className="user-command";this.__history.push(value);this.__lastCommand=this.__history.length;this.__log.appendChild(command);this.__scrollDown();try{var ret=window.eval(value);}catch(ex){qx.log.Logger.error(ex);}if(ret!==undefined){qx.log.Logger.debug(ret);}},__onResize:function(e){this.__log.style.height=(this.__main.clientHeight-this.__main.firstChild.offsetHeight-this.__main.lastChild.offsetHeight)+"px";},__onKeyPress:function(e){var iden=e.getKeyIdentifier();if((iden=="F7")||(iden=="D"&&e.isCtrlPressed())){this.toggle();e.preventDefault();}if(!this.__main){return;}if(!qx.dom.Hierarchy.contains(this.__main,e.getTarget())){return;}if(iden=="Enter"&&this.__cmd.value!=""){this.execute();this.__cmd.value="";}if(iden=="Up"||iden=="Down"){this.__lastCommand+=iden=="Up"?-1:1;this.__lastCommand=Math.min(Math.max(0,this.__lastCommand),this.__history.length);var entry=this.__history[this.__lastCommand];this.__cmd.value=entry||"";this.__cmd.select();}}},defer:function(statics){qx.event.Registration.addListener(document.documentElement,"keypress",statics.__onKeyPress,statics);}});qx.Class.define("qx.log.appender.Util",{statics:{toHtml:function(entry){var output=[];var item,msg,sub,list;output.push("<span class='offset'>",this.formatOffset(entry.offset),"</span> ");if(entry.object){var obj=qx.core.ObjectRegistry.fromHashCode(entry.object);if(obj){output.push("<span class='object' title='Object instance with hash code: "+obj.$$hash+"'>",obj.classname,"[",obj.$$hash,"]</span>: ");}}else if(entry.clazz){output.push("<span class='object'>"+entry.clazz.classname,"</span>: ");}var items=entry.items;for(var i=0,il=items.length;i<il;i++){item=items[i];msg=item.text;if(msg instanceof Array){var list=[];for(var j=0,jl=msg.length;j<jl;j++){sub=msg[j];if(typeof sub==="string"){list.push("<span>"+this.escapeHTML(sub)+"</span>");}else if(sub.key){list.push("<span class='type-key'>"+sub.key+"</span>:<span class='type-"+sub.type+"'>"+this.escapeHTML(sub.text)+"</span>");}else{list.push("<span class='type-"+sub.type+"'>"+this.escapeHTML(sub.text)+"</span>");}}output.push("<span class='type-"+item.type+"'>");if(item.type==="map"){output.push("{",list.join(", "),"}");}else{output.push("[",list.join(", "),"]");}output.push("</span>");}else{output.push("<span class='type-"+item.type+"'>"+this.escapeHTML(msg)+"</span> ");}}var wrapper=document.createElement("DIV");wrapper.innerHTML=output.join("");wrapper.className="level-"+entry.level;return wrapper;},formatOffset:function(offset,length){var str=offset.toString();var diff=(length||6)-str.length;var pad="";for(var i=0;i<diff;i++){pad+="0";}return pad+str;},escapeHTML:function(value){return String(value).replace(/[<>&"']/g,this.__escapeHTMLReplace);},__escapeHTMLReplace:function(ch){var map={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;",'"':"&quot;"};return map[ch]||"?";}}});qx.Mixin.define("qx.ui.core.MLayoutHandling",{members:{setLayout:function(layout){return this._setLayout(layout);},getLayout:function(){return this._getLayout();}},statics:{remap:function(members){members.getLayout=members._getLayout;members.setLayout=members._setLayout;}}});qx.Class.define("qx.ui.container.Composite",{extend:qx.ui.core.Widget,include:[qx.ui.core.MChildrenHandling,qx.ui.core.MLayoutHandling],construct:function(layout){this.base(arguments);if(layout!=null){this._setLayout(layout);}},events:{addChildWidget:"qx.event.type.Data",removeChildWidget:"qx.event.type.Data"},members:{_afterAddChild:function(child){this.fireNonBubblingEvent("addChildWidget",qx.event.type.Data,[child]);},_afterRemoveChild:function(child){this.fireNonBubblingEvent("removeChildWidget",qx.event.type.Data,[child]);}},defer:function(statics,members){qx.ui.core.MChildrenHandling.remap(members);qx.ui.core.MLayoutHandling.remap(members);}});qx.Class.define("demobrowser.DemoBrowser",{extend:qx.ui.container.Composite,construct:function(){this.base(arguments);var layout=new qx.ui.layout.VBox;layout.setSeparator("separator-vertical");this.setLayout(layout);this.add(this.__createHeader());this.widgets={};this.tests={};this.__currentTheme="qx.theme.Modern";this.__makeCommands();this.add(this.__makeToolBar());var mainsplit=new qx.ui.splitpane.Pane("horizontal");this.mainsplit=mainsplit;var infosplit=new qx.ui.splitpane.Pane("horizontal");infosplit.setDecorator(null);this.infosplit=infosplit;this.add(mainsplit,{flex:1});mainsplit.add(this.__makeTree(),0);mainsplit.add(infosplit,1);var demoView=this.__makeDemoView();infosplit.add(demoView,2);var htmlView=this.__makeHtmlCodeView();var jsView=this.__makeJsCodeView();var logView=this.__makeLogView();var stack=new qx.ui.container.Stack;stack.setDecorator("main");stack.add(htmlView);stack.add(jsView);stack.add(logView);this.viewGroup.addListener("changeValue",function(e){switch(e.getData()){case "html":this.setSelected(htmlView);stack.show();break;case "js":this.setSelected(jsView);stack.show();break;case "log":this.setSelected(logView);stack.show();break;default:this.resetSelected();stack.exclude();}},stack);infosplit.add(stack,1);stack.resetSelected();stack.exclude();this._history=qx.bom.History.getInstance();this._history.addListener("request",function(e){var newSample=e.getData().replace("-","/");if(this._currentSample!=newSample){this.setCurrentSample(newSample);}},this);this.__logSync=new qx.event.Timer(250);this.__logSync.addListener("interval",this.__onLogInterval,this);this.__logSync.start();},members:{__makeCommands:function(){this._cmdObjectSummary=new qx.event.Command("Ctrl+O");this._cmdObjectSummary.addListener("execute",this.__getObjectSummary,this);this._cmdRunSample=new qx.event.Command("F5");this._cmdRunSample.addListener("execute",this.runSample,this);this._cmdPrevSample=new qx.event.Command("Ctrl+Left");this._cmdPrevSample.addListener("execute",this.playPrev,this);this._cmdNextSample=new qx.event.Command("Ctrl+Right");this._cmdNextSample.addListener("execute",this.playNext,this);this._cmdSampleInOwnWindow=new qx.event.Command("Ctrl+N");this._cmdSampleInOwnWindow.addListener("execute",this.__openWindow,this);this._cmdDisposeSample=new qx.event.Command("Ctrl+D");this._cmdDisposeSample.addListener("execute",this.__disposeSample,this);this._cmdNamespacePollution=new qx.event.Command("Ctrl+P");this._cmdNamespacePollution.addListener("execute",this.__showPollution,this);},__getObjectSummary:function(){var cw=this.__iframe.getWindow();if(cw&&cw.qx){alert(cw.qx.dev.ObjectSummary.getInfo());}else{alert("Unable to access namespace. Maybe no demo loaded.");}},__openWindow:function(){var sampUrl=this.__iframe.getWindow().location.href;window.open(sampUrl,"Sample","width=850,height=650");},__disposeSample:function(e){var cw=this.__iframe.getWindow();if(cw&&cw.qx){cw.qx.core.ObjectRegistry.shutdown();alert("Done!");}else{alert("Unable to access application.");}},__showPollution:function(e){var cw=this.__iframe.getWindow();if(cw&&cw.qx){alert(cw.qx.dev.Pollution.getInfo());}else{alert("Unable to access application.");}},__makeToolBar:function(){var bar=new qx.ui.toolbar.ToolBar();var navPart=new qx.ui.toolbar.Part();bar.add(navPart);var runbutton=new qx.ui.toolbar.Button(this.tr("Run"),"icon/22/actions/media-playback-start.png");runbutton.addListener("execute",this.runSample,this);navPart.add(runbutton);var prevbutt=new qx.ui.toolbar.Button(this.tr("Previous"),"icon/22/actions/go-previous.png");prevbutt.addListener("execute",this.playPrev,this);navPart.add(prevbutt);var nextbutt=new qx.ui.toolbar.Button(this.tr("Next"),"icon/22/actions/go-next.png");nextbutt.addListener("execute",this.playNext,this);navPart.add(nextbutt);var sobutt=new qx.ui.toolbar.Button(this.tr("Own Window"),"icon/22/actions/edit-redo.png");sobutt.addListener("execute",this.__openWindow,this);navPart.add(sobutt);var menuPart=new qx.ui.toolbar.Part;bar.add(menuPart);var themeMenu=new qx.ui.menu.Menu;var t1=new qx.ui.menu.RadioButton("Modern Theme");var t2=new qx.ui.menu.RadioButton("Classic Theme");t1.setValue("qx.theme.Modern");t1.setChecked(true);t2.setValue("qx.theme.Classic");var group=new qx.ui.form.RadioGroup(t1,t2);group.addListener("changeValue",this.__onChangeTheme,this);themeMenu.add(t1);themeMenu.add(t2);var themeButton=new qx.ui.toolbar.MenuButton(this.tr("Theme"),"icon/22/apps/utilities-color-chooser.png",themeMenu);menuPart.add(themeButton);var menu=new qx.ui.menu.Menu;var summaryBtn=new qx.ui.menu.Button(this.tr("Object Summary"));summaryBtn.setCommand(this._cmdObjectSummary);menu.add(summaryBtn);var namespaceBtn=new qx.ui.menu.Button(this.tr("Global Namespace Pollution"));namespaceBtn.setCommand(this._cmdNamespacePollution);menu.add(namespaceBtn);var disposeBtn=new qx.ui.menu.Button(this.tr("Dispose Demo"));disposeBtn.setCommand(this._cmdDisposeSample);menu.add(disposeBtn);var debugButton=new qx.ui.toolbar.MenuButton(this.tr("Debug"),"icon/22/apps/office-spreadsheet.png",menu);menuPart.add(debugButton);var viewPart=new qx.ui.toolbar.Part;bar.addSpacer();bar.add(viewPart);var htmlView=new qx.ui.toolbar.RadioButton("HTML Code","icon/22/apps/internet-web-browser.png");var jsView=new qx.ui.toolbar.RadioButton("JS Code","icon/22/mimetypes/executable.png");var logView=new qx.ui.toolbar.RadioButton("Log File","icon/22/apps/utilities-log-viewer.png");htmlView.setValue("html");jsView.setValue("js");logView.setValue("log");viewPart.add(htmlView);viewPart.add(jsView);viewPart.add(logView);var viewGroup=this.viewGroup=new qx.ui.form.RadioGroup;viewGroup.add(htmlView,jsView,logView);viewGroup.resetSelected();return bar;},__makeDemoView:function(){var iframe=new qx.ui.embed.Iframe();iframe.addListener("load",this.__ehIframeLoaded,this);this.__iframe=iframe;return iframe;},__makeLogView:function(){this.f2=new qx.ui.embed.Html();this.f2.setOverflow("auto","auto");this.f2.setFont("monospace");this.f2.setBackgroundColor("white");this.logappender=new qx.log.appender.Element();qx.log.Logger.unregister(this.logappender);var wrap=document.createElement("div");this.logelem=document.createElement("div");this.logelem.style.padding="8px";this.logappender.setElement(this.logelem);wrap.appendChild(this.logelem);this.f2.getContentElement().useElement(wrap);return this.f2;},__makeHtmlCodeView:function(){var f3=new qx.ui.embed.Html("<div class='script'>The sample source will be displayed here.</div>");f3.setOverflow("auto","auto");f3.setFont("monospace");f3.setBackgroundColor("white");this.widgets["outputviews.sourcepage.html.page"]=f3;f3.getContentElement().setAttribute("id","qx_srcview");return f3;},__makeJsCodeView:function(){var f4=new qx.ui.embed.Html("<div class='script'>The sample JS source will be displayed here.</div>");f4.setOverflow("auto","auto");f4.setFont("monospace");f4.setBackgroundColor("white");this.widgets["outputviews.sourcepage.js.page"]=f4;f4.getContentElement().setAttribute("id","qx_srcview");return f4;},__makeTree:function(){var tree1=new qx.ui.tree.Tree();var root=new qx.ui.tree.TreeFolder("Demos");tree1.setAppearance("demo-tree");tree1.setRoot(root);tree1.select(root);this.tree=this.widgets["treeview.flat"]=tree1;tree1.addListener("changeSelection",this.treeGetSelection,this);tree1.addListener("dblclick",function(e){qx.event.Timer.once(this.runSample,this,50);},this);return tree1;},treeGetSelection:function(e){var treeNode=this.tree.getSelectedItem();var modelNode=treeNode.getUserData("modelLink");this.tests.selected=this.tests.handler.getFullName(modelNode);},leftReloadTree:function(e){this._sampleToTreeNodeMap={};var _sampleToTreeNodeMap=this._sampleToTreeNodeMap;var _initialSection="widget";var _initialNode=null;var state=this._history.getState();var section=state.match(/([^~]+)~/);if(section){_initialSection=section[1];}function buildSubTree(widgetR,modelR){var children=modelR.getChildren();var t,tt,desc;for(var i=0;i<children.length;i++){var currNode=children[i];if(currNode.hasChildren()){t=new qx.ui.tree.TreeFolder(that.polish(currNode.label));t.setUserData("filled",false);t.setUserData("node",currNode);buildSubTree(t,t.getUserData("node"));if(currNode.label==_initialSection){_initialNode=t;t.setOpen(true);}}else{t=new qx.ui.tree.TreeFile(that.polish(currNode.label));var fullName=currNode.pwd().slice(1).join("/")+"/"+currNode.label;_sampleToTreeNodeMap[fullName]=t;}widgetR.add(t);t.setUserData("modelLink",currNode);currNode.widgetLinkFull=t;}}var ttree=this.tests.handler.ttree;var that=this;this.tree.setUserData("modelLink",ttree);this.tree.getRoot().setOpen(true);buildSubTree(this.tree.getRoot(),ttree);if(_initialNode!=null){this.tree.select(_initialNode);}},runSample:function(e){var file=this.tests.selected.replace(".","/");this.setCurrentSample(file);},setCurrentSample:function(value){if(!value){return;}if(!this._sampleToTreeNodeMap){return;}var url;var treeNode=this._sampleToTreeNodeMap[value];if(treeNode){treeNode.getTree().select(treeNode);url='demo/'+value+"?qx.theme="+this.__currentTheme;}else{url=this.defaultUrl;}if(this.__iframe.getSource()==url){this.__iframe.reload();}else{this.__iframe.setSource(url);}this._currentSample=value;this._currentSampleUrl=url;},__ehIframeLoaded:function(){var fwindow=this.__iframe.getWindow();var fpath=fwindow.location.pathname+"";var splitIndex=fpath.indexOf("?");if(splitIndex!=-1){fpath=fpath.substring(0,splitIndex+1);}if(window.location.protocol=="file:"&&qx.bom.client.Engine.MSHTML==true&&qx.bom.client.Engine.VERSION<7){var path=fpath.split("\\");}else{var path=fpath.split("/");}var furl=this.__iframe.getSource();if(furl!=null&&furl!=this.defaultUrl){var url=fwindow.location.href;var posHtml=url.indexOf("/demo/")+6;var posSearch=url.indexOf("?");posSearch=posSearch==-1?url.length:posSearch;var split=url.substring(posHtml,posSearch).split("/");var div=String.fromCharCode(187);if(split.length==2){var category=split[0];category=category.charAt(0).toUpperCase()+category.substring(1);var pagename=split[1].replace(".html","").replace("_"," ");pagename=pagename.charAt(0).toUpperCase()+pagename.substring(1);var title="qooxdoo "+div+" Demo Browser "+div+" "+category+" "+div+" "+pagename;}else{var title="qooxdoo "+div+" Demo Browser "+div+" Start";}}},__onLogInterval:function(e){var fwindow=this.__iframe.getWindow();if(fwindow&&fwindow.qx&&fwindow.qx.log&&fwindow.qx.log.appender){if(!this.__logDone){this.__logDone=true;this.debug("Demo loaded: "+this._currentSample);this.logappender.$$id=null;this.logappender.clear();fwindow.qx.log.Logger.register(this.logappender);this._history.addToHistory(this._currentSample.replace("/","-"),this._currentSample);if(this._currentSampleUrl!=this.defaultUrl){this.__getPageSource(this._currentSampleUrl);}}}else{this.__logDone=false;}},__getPageSource:function(url){if(typeof (url)!="string"){return;}var req=new qx.io.remote.Request(url);req.setTimeout(180000);req.setProhibitCaching(false);req.addListener("completed",function(evt){var content=evt.getContent();if(content){var secondSrcTagPosition=content.indexOf("<script",content.indexOf("<script")+7);var srcAttributeStart=content.indexOf("src",secondSrcTagPosition);var srcAttributeEnd=content.indexOf("\"",srcAttributeStart+5);var jsFileName=content.substring(srcAttributeStart+5,srcAttributeEnd);var jsSourceFileName=jsFileName.substring(4,jsFileName.length-3)+".src.js";var u="script/demobrowser.demo";var parts=url.split('/');var cat=parts[1];var base=parts[2];base=base.substr(0,base.indexOf('.html'));u+="."+cat+"."+base+".src.js";jsSourceFileName=u;var reqJSFile=new qx.io.remote.Request(jsSourceFileName);reqJSFile.setTimeout(180000);reqJSFile.setProhibitCaching(false);reqJSFile.addListener("completed",function(evt2){var jsCode=evt2.getContent();if(jsCode){this.widgets["outputviews.sourcepage.js.page"].setHtml(this.__beautySource(jsCode,"javascript"));}},this);reqJSFile.addListener("failed",function(evt){this.error("Couldn't load file: "+url);},this);reqJSFile.send();this.widgets["outputviews.sourcepage.html.page"].setHtml(this.__beautySource(content));}},this);req.addListener("failed",function(evt){this.error("Couldn't load file: "+url);},this);var loadStart=new Date();req.send();},dataLoader:function(url){var req=new qx.io.remote.Request(url);req.setTimeout(180000);req.setProhibitCaching(false);req.addListener("completed",function(evt){var content=evt.getContent();var treeData=eval(content);qx.event.Timer.once(function(){this.tests.handler=new demobrowser.TreeDataHandler(treeData);this.leftReloadTree();var state=this._history.getState();if(state){this.setCurrentSample(state.replace("-","/"));}else{this.setCurrentSample(this.defaultUrl);}},this,0);},this);req.addListener("failed",function(evt){this.error("Couldn't load file: "+url);},this);var loadStart=new Date();req.send();},playPrev:function(e){var currSamp=this.tree.getSelectedItem();if(currSamp){var otherSamp=currSamp.getUserData('modelLink').getPrevSibling().widgetLinkFull;if(otherSamp){this.tree.select(otherSamp);this.runSample();}}},playNext:function(e){var currSamp=this.tree.getSelectedItem();if(currSamp){try{var otherSamp=currSamp.getUserData('modelLink').getNextSibling().widgetLinkFull;}catch(e){this.debug(e);}if(otherSamp){this.tree.select(otherSamp);this.runSample();}}},__beautySource:function(src,type){var bsrc="<pre class='script'>";var lines=[];var currBlock="";var PScriptStart=/^\s*<script\b[^>]*?(?!\bsrc\s*=)[^>]*?>\s*$/i;var PScriptEnd=/^\s*<\/script>\s*$/i;src=src.replace(/\r\n/g,"\n").replace(/\r/g,"\n");var lines=src.split('\n');if(type=="javascript"){return "<pre ><div class='script'>"+qx.dev.Tokenizer.javaScriptToHtml(src)+"</div></pre>";}for(var i=0;i<lines.length;i++){if(PScriptStart.exec(lines[i])){bsrc+=this.__beautyHtml(qx.bom.String.escape(currBlock+lines[i]));currBlock="";}else if(PScriptEnd.exec(lines[i])){var s1=qx.dev.Tokenizer.javaScriptToHtml(currBlock);bsrc+='<div class="script">'+s1+'</div>';currBlock=lines[i]+'\n';}else{currBlock+=lines[i]+'\n';}}bsrc+=this.__beautyHtml(qx.bom.String.escape(currBlock))+"</pre>";return bsrc;},__beautyHtml:function(str){var res=str;function matchfunc(vargs){var s=arguments[1]+'<span class="html-tag-name">'+arguments[2]+'</span>';var curr;var endT=false;if(arguments.length-2>3){for(var i=3;i<arguments.length-2;i++){curr=arguments[i];if(curr=="/"){endT=true;break;}else{var m=/\s*([^=]+?)\s*=\s*((?!&quot;)\S+|&quot;.*?&quot;)\s*/g;var r;while((r=m.exec(curr))!=null){s+=' <span class="keyword">'+r[1]+'</span>=<span class="string">'+r[2].replace(/\s*$/,"")+'</span>';}}}s+=(endT?"/":"");}s+='&gt;';return s;}res=res.replace(/(&lt;\/?)([a-zA-Z]+)(.*?)(\/?)&gt;/g,matchfunc);return res;},polish:function(str){return str.replace(".html","").replace("_"," ");},__fetchLog:function(){var w=this.__iframe.getWindow();var logger;if(w.qx&&w.qx.log&&w.qx.log.Logger){logger=w.qx.log.Logger;logger.register(this.logappender);logger.clear();logger.unregister(this.logappender);}},__onChangeTheme:function(e){this.__currentTheme=e.getData();this.runSample();},__createHeader:function(){var layout=new qx.ui.layout.HBox();var header=new qx.ui.container.Composite(layout);header.setAppearance("app-header");var title=new qx.ui.basic.Label("Demo Browser");var version=new qx.ui.basic.Label("qooxdoo "+qx.core.Setting.get("qx.version"));header.add(title);header.add(new qx.ui.core.Spacer,{flex:1});header.add(version);return header;},defaultUrl:"demo/welcome.html"},destruct:function(){this._disposeFields("widgets","tests","_sampleToTreeNodeMap","tree","logelem");this._disposeObjects("mainsplit","tree1","left","runbutton","toolbar","f1","f2","_history","logappender",'_cmdObjectSummary','_cmdRunSample','_cmdPrevSample','_cmdNextSample','_cmdSampleInOwnWindow','_cmdDisposeSample','_cmdNamespacePollution');}});qx.Class.define("qx.ui.layout.VBox",{extend:qx.ui.layout.Abstract,construct:function(spacing,alignY,separator){this.base(arguments);if(spacing){this.setSpacing(spacing);}if(alignY){this.setAlignY(alignY);}if(separator){this.setSeparator(separator);}},properties:{alignY:{check:["top","middle","bottom"],init:"top",apply:"_applyLayoutChange"},alignX:{check:["left","center","right","baseline"],init:"left",apply:"_applyLayoutChange"},spacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},separator:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},reversed:{check:"Boolean",init:false,apply:"_applyReversed"}},members:{__heights:null,__flexs:null,__enableFlex:null,__children:null,_applyReversed:function(){this._invalidChildrenCache=true;this._applyLayoutChange();},__rebuildCache:function(){var children=this._getLayoutChildren();var length=children.length;var enableFlex=false;var reuse=this.__heights&&this.__heights.length!=length&&this.__flexs&&this.__heights;var props;var heights=reuse?this.__heights:new Array(length);var flexs=reuse?this.__flexs:new Array(length);if(this.getReversed()){children=children.concat().reverse();}for(var i=0;i<length;i++){props=children[i].getLayoutProperties();if(props.height!=null){heights[i]=parseFloat(props.height)/100;}if(props.flex!=null){flexs[i]=props.flex;enableFlex=true;}}if(!reuse){this.__heights=heights;this.__flexs=flexs;}this.__enableFlex=enableFlex;this.__children=children;delete this._invalidChildrenCache;},verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(name==="flex"||name==="height","The property '"+name+"' is not supported by the box layout!");if(name=="height"){this.assertMatch(value,qx.ui.layout.Util.PERCENT_VALUE);}else{this.assertNumber(value);this.assert(value>=0);}},"off":null}),renderLayout:function(availWidth,availHeight){if(this._invalidChildrenCache){this.__rebuildCache();}var children=this.__children;var length=children.length;var util=qx.ui.layout.Util;var spacing=this.getSpacing();var separator=this.getSeparator();if(separator){var gaps=util.computeVerticalSeparatorGaps(children,spacing,separator);}else{var gaps=util.computeVerticalGaps(children,spacing,true);}var i,child,height,percent;var heights=[];var allocatedHeight=gaps;for(i=0;i<length;i+=1){percent=this.__heights[i];height=percent!=null?Math.floor((availHeight-gaps)*percent):children[i].getSizeHint().height;heights.push(height);allocatedHeight+=height;}if(this.__enableFlex&&allocatedHeight!=availHeight){var flexibles={};var flex,offset;for(i=0;i<length;i+=1){flex=this.__flexs[i];if(flex>0){hint=children[i].getSizeHint();flexibles[i]={min:hint.minHeight,value:heights[i],max:hint.maxHeight,flex:flex};}}var result=util.computeFlexOffsets(flexibles,availHeight,allocatedHeight);for(i in result){offset=result[i].offset;heights[i]+=offset;allocatedHeight+=offset;}}var top=children[0].getMarginTop();if(allocatedHeight<availHeight&&this.getAlignY()!="top"){top=availHeight-allocatedHeight;if(this.getAlignY()==="middle"){top=Math.round(top/2);}}var hint,left,width,height,marginBottom,marginLeft,marginRight;var spacing=this.getSpacing();this._clearSeparators();if(separator){var separatorInsets=qx.theme.manager.Decoration.getInstance().resolve(separator).getInsets();var separatorHeight=separatorInsets.top+separatorInsets.bottom;}for(i=0;i<length;i+=1){child=children[i];height=heights[i];hint=child.getSizeHint();marginLeft=child.getMarginLeft();marginRight=child.getMarginRight();width=Math.max(hint.minWidth,Math.min(availWidth-marginLeft-marginRight,hint.maxWidth));left=util.computeHorizontalAlignOffset(child.getAlignX()||this.getAlignX(),width,availWidth,marginLeft,marginRight);if(i>0){if(separator){top+=marginBottom+spacing;this._renderSeparator(separator,{top:top,left:0,height:separatorHeight,width:availWidth});top+=separatorHeight+spacing+child.getMarginTop();}else{top+=util.collapseMargins(spacing,marginBottom,child.getMarginTop());}}child.renderLayout(left,top,width,height);top+=height;marginBottom=child.getMarginBottom();}},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__rebuildCache();}var util=qx.ui.layout.Util;var children=this.__children;var minHeight=0,height=0;var minWidth=0,width=0;var child,hint,margin;for(var i=0,l=children.length;i<l;i+=1){child=children[i];hint=child.getSizeHint();height+=hint.height;minHeight+=this.__flexs[i]>0?hint.minHeight:hint.height;margin=child.getMarginLeft()+child.getMarginRight();if((hint.width+margin)>width){width=hint.width+margin;}if((hint.minWidth+margin)>minWidth){minWidth=hint.minWidth+margin;}}var spacing=this.getSpacing();var separator=this.getSeparator();if(separator){var gaps=util.computeVerticalSeparatorGaps(children,spacing,separator);}else{var gaps=util.computeVerticalGaps(children,spacing,true);}return {minHeight:minHeight+gaps,height:height+gaps,minWidth:minWidth,width:width};}},destruct:function(){this._disposeFields("__heights","__flexs","__children");}});qx.Class.define("qx.ui.splitpane.Pane",{extend:qx.ui.core.Widget,construct:function(orientation){this.base(arguments);if(orientation){this.setOrientation(orientation);}else{this.initOrientation();}this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("mousemove",this._onMouseMove);this.addListener("mouseout",this._onMouseOut);this.addListener("losecapture",this._onMouseUp);},properties:{appearance:{refine:true,init:"splitpane"},orientation:{init:"horizontal",check:["horizontal","vertical"],apply:"_applyOrientation"}},members:{__splitterOffset:null,__activeDragSession:null,__lastMouseX:null,__lastMouseY:null,__isHorizontal:null,__beginSize:null,__endSize:null,_createChildControlImpl:function(id){var control;switch(id){case "slider":control=new qx.ui.splitpane.Slider(this);control.exclude();this._add(control,{type:id});break;case "splitter":control=new qx.ui.splitpane.Splitter(this);this._add(control,{type:id});control.addListener("move",this._onSplitterMove,this);break;}return control||this.base(arguments,id);},_applyOrientation:function(value,old){var slider=this._getChildControl("slider");var splitter=this._getChildControl("splitter");this.__isHorizontal=value==="horizontal";var oldLayout=this._getLayout();if(oldLayout){oldLayout.dispose();}var newLayout=value==="vertical"?new qx.ui.splitpane.VLayout:new qx.ui.splitpane.HLayout;this._setLayout(newLayout);splitter.replaceState(old,value);splitter._getChildControl("knob").replaceState(old,value);slider.replaceState(old,value);},add:function(widget,flex){if(flex==null){this._add(widget);}else{this._add(widget,{flex:flex});}},remove:function(widget){this._remove(widget);},_onMouseDown:function(e){if(!e.isLeftPressed()){return;}var splitter=this._getChildControl("splitter");if(!splitter.hasState("active")){return;}var splitterLocation=splitter.getContainerLocation();var paneLocation=this.getContentLocation();this.__splitterOffset=this.__isHorizontal?e.getDocumentLeft()-splitterLocation.left+paneLocation.left:e.getDocumentTop()-splitterLocation.top+paneLocation.top;var slider=this._getChildControl("slider");var splitterBounds=splitter.getBounds();slider.setUserBounds(splitterBounds.left,splitterBounds.top,splitterBounds.width,splitterBounds.height);slider.setZIndex(splitter.getZIndex()+1);slider.show();this.__activeDragSession=true;this.capture();},_onMouseMove:function(e){this.__lastMouseX=e.getDocumentLeft();this.__lastMouseY=e.getDocumentTop();if(this.__activeDragSession){this.__computeSizes();var slider=this._getChildControl("slider");var pos=this.__beginSize;if(this.__isHorizontal){slider.setDomLeft(pos);}else{slider.setDomTop(pos);}}else{this.__updateCursor();}},_onMouseOut:function(e){this.__lastMouseX=-1;this.__lastMouseY=-1;this.__updateCursor();},_onMouseUp:function(e){if(!this.__activeDragSession){return;}this.__finalizeSizes();var slider=this._getChildControl("slider");slider.exclude();delete this.__activeDragSession;this.releaseCapture();this.__updateCursor();},_onSplitterMove:function(){this.__updateCursor();},__finalizeSizes:function(){var beginSize=this.__beginSize;var endSize=this.__endSize;if(beginSize==null){return;}var children=this._getChildren();var firstWidget=children[2];var secondWidget=children[3];var firstFlexValue=firstWidget.getLayoutProperties().flex;var secondFlexValue=secondWidget.getLayoutProperties().flex;if((firstFlexValue!=0)&&(secondFlexValue!=0)){firstWidget.setLayoutProperties({flex:beginSize});secondWidget.setLayoutProperties({flex:endSize});}else{if(this.__isHorizontal){firstWidget.setWidth(beginSize);secondWidget.setWidth(endSize);}else{firstWidget.setHeight(beginSize);secondWidget.setHeight(endSize);}}},__isNear:function(){var splitter=this._getChildControl("splitter");var splitterBounds=splitter.getBounds();var splitterLocation=splitter.getContainerLocation();var min=6;if(!splitterLocation){return;}var mouse=this.__lastMouseX;var size=splitterBounds.width;var pos=splitterLocation.left;if(size<min){pos-=Math.floor((min-size)/2);size=min;}if(mouse<pos||mouse>(pos+size)){return false;}var mouse=this.__lastMouseY;var size=splitterBounds.height;var pos=splitterLocation.top;if(size<min){pos-=Math.floor((min-size)/2);size=min;}if(mouse<pos||mouse>(pos+size)){return false;}return true;},__updateCursor:function(){var splitter=this._getChildControl("splitter");var root=this.getApplicationRoot();if(this.__activeDragSession||this.__isNear()){var cursor=this.__isHorizontal?"col-resize":"row-resize";this.setCursor(cursor);root.setGlobalCursor(cursor);splitter.addState("active");}else if(splitter.hasState("active")){this.resetCursor();root.resetGlobalCursor();splitter.removeState("active");}},__computeSizes:function(){if(this.__isHorizontal){var min="minWidth",size="width",max="maxWidth",mouse=this.__lastMouseX;}else{var min="minHeight",size="height",max="maxHeight",mouse=this.__lastMouseY;}var children=this._getChildren();var beginHint=children[2].getSizeHint();var endHint=children[3].getSizeHint();var allocatedSize=children[2].getBounds()[size]+children[3].getBounds()[size];var beginSize=mouse-this.__splitterOffset;var endSize=allocatedSize-beginSize;if(beginSize<beginHint[min]){endSize-=beginHint[min]-beginSize;beginSize=beginHint[min];}else if(endSize<endHint[min]){beginSize-=endHint[min]-endSize;endSize=endHint[min];}if(beginSize>beginHint[max]){endSize+=beginSize-beginHint[max];beginSize=beginHint[max];}else if(endSize>endHint[max]){beginSize+=endSize-endHint[max];endSize=endHint[max];}this.__beginSize=beginSize;this.__endSize=endSize;}}});qx.Class.define("qx.ui.splitpane.Slider",{extend:qx.ui.core.Widget,properties:{allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false}}});qx.Class.define("qx.ui.splitpane.Splitter",{extend:qx.ui.core.Widget,construct:function(parentWidget){this.base(arguments);if(parentWidget.getOrientation()=="vertical"){this._setLayout(new qx.ui.layout.HBox(0,"center"));this._getLayout().setAlignY("middle");}else{this._setLayout(new qx.ui.layout.VBox(0,"middle"));this._getLayout().setAlignX("center");}this._createChildControl("knob");},properties:{allowShrinkX:{refine:true,init:false},allowShrinkY:{refine:true,init:false}},members:{_createChildControlImpl:function(id){var control;switch(id){case "knob":control=new qx.ui.basic.Image;this._add(control);break;}return control||this.base(arguments,id);}}});qx.Class.define("qx.ui.layout.HBox",{extend:qx.ui.layout.Abstract,construct:function(spacing,alignX,separator){this.base(arguments);if(spacing){this.setSpacing(spacing);}if(alignX){this.setAlignX(alignX);}if(separator){this.setSeparator(separator);}},properties:{alignX:{check:["left","center","right"],init:"left",apply:"_applyLayoutChange"},alignY:{check:["top","middle","bottom","baseline"],init:"top",apply:"_applyLayoutChange"},spacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},separator:{check:"Decorator",nullable:true,apply:"_applyLayoutChange"},reversed:{check:"Boolean",init:false,apply:"_applyReversed"}},members:{__widths:null,__flexs:null,__enableFlex:null,__children:null,_applyReversed:function(){this._invalidChildrenCache=true;this._applyLayoutChange();},__rebuildCache:function(){var children=this._getLayoutChildren();var length=children.length;var enableFlex=false;var reuse=this.__widths&&this.__widths.length!=length&&this.__flexs&&this.__widths;var props;var widths=reuse?this.__widths:new Array(length);var flexs=reuse?this.__flexs:new Array(length);if(this.getReversed()){children=children.concat().reverse();}for(var i=0;i<length;i++){props=children[i].getLayoutProperties();if(props.width!=null){widths[i]=parseFloat(props.width)/100;}if(props.flex!=null){flexs[i]=props.flex;enableFlex=true;}}if(!reuse){this.__widths=widths;this.__flexs=flexs;}this.__enableFlex=enableFlex;this.__children=children;delete this._invalidChildrenCache;},verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(name==="flex"||name==="width","The property '"+name+"' is not supported by the box layout!");if(name=="width"){this.assertMatch(value,qx.ui.layout.Util.PERCENT_VALUE);}else{this.assertNumber(value);this.assert(value>=0);}},"off":null}),renderLayout:function(availWidth,availHeight){if(this._invalidChildrenCache){this.__rebuildCache();}var children=this.__children;var length=children.length;var util=qx.ui.layout.Util;var spacing=this.getSpacing();var separator=this.getSeparator();if(separator){var gaps=util.computeHorizontalSeparatorGaps(children,spacing,separator);}else{var gaps=util.computeHorizontalGaps(children,spacing,true);}var i,child,width,percent;var widths=[];var allocatedWidth=gaps;for(i=0;i<length;i+=1){percent=this.__widths[i];width=percent!=null?Math.floor((availWidth-gaps)*percent):children[i].getSizeHint().width;widths.push(width);allocatedWidth+=width;}if(this.__enableFlex&&allocatedWidth!=availWidth){var flexibles={};var flex,offset;for(i=0;i<length;i+=1){flex=this.__flexs[i];if(flex>0){hint=children[i].getSizeHint();flexibles[i]={min:hint.minWidth,value:widths[i],max:hint.maxWidth,flex:flex};}}var result=util.computeFlexOffsets(flexibles,availWidth,allocatedWidth);for(i in result){offset=result[i].offset;widths[i]+=offset;allocatedWidth+=offset;}}var left=children[0].getMarginLeft();if(allocatedWidth<availWidth&&this.getAlignX()!="left"){left=availWidth-allocatedWidth;if(this.getAlignX()==="center"){left=Math.round(left/2);}}var hint,top,height,width,marginRight,marginTop,marginBottom;var spacing=this.getSpacing();this._clearSeparators();if(separator){var separatorInsets=qx.theme.manager.Decoration.getInstance().resolve(separator).getInsets();var separatorWidth=separatorInsets.left+separatorInsets.right;}for(i=0;i<length;i+=1){child=children[i];width=widths[i];hint=child.getSizeHint();marginTop=child.getMarginTop();marginBottom=child.getMarginBottom();height=Math.max(hint.minHeight,Math.min(availHeight-marginTop-marginBottom,hint.maxHeight));top=util.computeVerticalAlignOffset(child.getAlignY()||this.getAlignY(),height,availHeight,marginTop,marginBottom);if(i>0){if(separator){left+=marginRight+spacing;this._renderSeparator(separator,{left:left,top:0,width:separatorWidth,height:availHeight});left+=separatorWidth+spacing+child.getMarginLeft();}else{left+=util.collapseMargins(spacing,marginRight,child.getMarginLeft());}}child.renderLayout(left,top,width,height);left+=width;marginRight=child.getMarginRight();}},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__rebuildCache();}var util=qx.ui.layout.Util;var children=this.__children;var minWidth=0,width=0;var minHeight=0,height=0;var child,hint,margin;for(var i=0,l=children.length;i<l;i+=1){child=children[i];hint=child.getSizeHint();width+=hint.width;minWidth+=this.__flexs[i]>0?hint.minWidth:hint.width;margin=child.getMarginTop()+child.getMarginBottom();if((hint.height+margin)>height){height=hint.height+margin;}if((hint.minHeight+margin)>minHeight){minHeight=hint.minHeight+margin;}}var spacing=this.getSpacing();var separator=this.getSeparator();if(separator){var gaps=util.computeHorizontalSeparatorGaps(children,spacing,separator);}else{var gaps=util.computeHorizontalGaps(children,spacing,true);}return {minWidth:minWidth+gaps,width:width+gaps,minHeight:minHeight,height:height};}},destruct:function(){this._disposeFields("__widths","__flexs","__children");}});qx.Class.define("qx.ui.splitpane.VLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(name==="type"||name==="flex","The property '"+name+"' is not supported by the split layout!");if(name=="flex"){this.assertNumber(value);}if(name=="type"){this.assertString(value);}},"off":null}),renderLayout:function(availWidth,availHeight){var children=this._getLayoutChildren();var length=children.length;var child,type;var begin,splitter,slider,end;for(var i=0;i<length;i++){child=children[i];type=child.getLayoutProperties().type;if(type==="splitter"){splitter=child;}else if(type==="slider"){slider=child;}else if(!begin){begin=child;}else{end=child;}}if(begin&&end){var beginFlex=begin.getLayoutProperties().flex;var endFlex=end.getLayoutProperties().flex;if(beginFlex==null){beginFlex=1;}if(endFlex==null){endFlex=1;}var beginHint=begin.getSizeHint();var splitterHint=splitter.getSizeHint();var endHint=end.getSizeHint();var beginHeight=beginHint.height;var splitterHeight=splitterHint.height;var endHeight=endHint.height;if(beginFlex>0&&endFlex>0){var flexSum=beginFlex+endFlex;var flexAvailable=availHeight-splitterHeight;var beginHeight=Math.round((flexAvailable/flexSum)*beginFlex);var endHeight=flexAvailable-beginHeight;var sizes=qx.ui.layout.Util.arrangeIdeals(beginHint.minHeight,beginHeight,beginHint.maxHeight,endHint.minHeight,endHeight,endHint.maxHeight);beginHeight=sizes.begin;endHeight=sizes.end;}else if(beginFlex>0){beginHeight=availHeight-splitterHeight-endHeight;if(beginHeight<beginHint.minHeight){beginHeight=beginHint.minHeight;}if(beginHeight>beginHint.maxHeight){beginHeight=beginHint.maxHeight;}}else if(endFlex>0){endHeight=availHeight-beginHeight-splitterHeight;if(endHeight<endHint.minHeight){endHeight=endHint.minHeight;}if(endHeight>endHint.maxHeight){endHeight=endHint.maxHeight;}}begin.renderLayout(0,0,availWidth,beginHeight);splitter.renderLayout(0,beginHeight,availWidth,splitterHeight);end.renderLayout(0,beginHeight+splitterHeight,availWidth,endHeight);}else{splitter.renderLayout(0,0,0,0);if(begin){begin.renderLayout(0,0,availWidth,availHeight);}else if(end){end.renderLayout(0,0,availWidth,availHeight);}}},_computeSizeHint:function(){var children=this._getLayoutChildren();var length=children.length;var child,hint,props;var minHeight=0,height=0,maxHeight=0;var minWidth=0,width=0,maxWidth=0;for(var i=0;i<length;i++){child=children[i];props=child.getLayoutProperties();if(props.type==="slider"){continue;}hint=child.getSizeHint();minHeight+=hint.minHeight;height+=hint.height;maxHeight+=hint.maxHeight;if(hint.minWidth>minWidth){minWidth=hint.minWidth;}if(hint.width>width){width=hint.width;}if(hint.maxWidth>maxWidth){maxWidth=hint.maxWidth;}}return {minHeight:minHeight,height:height,maxHeight:maxHeight,minWidth:minWidth,width:width,maxWidth:maxWidth};}}});qx.Class.define("qx.ui.splitpane.HLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(name==="type"||name==="flex","The property '"+name+"' is not supported by the split layout!");if(name=="flex"){this.assertNumber(value);}if(name=="type"){this.assertString(value);}},"off":null}),renderLayout:function(availWidth,availHeight){var children=this._getLayoutChildren();var length=children.length;var child,type;var begin,splitter,slider,end;for(var i=0;i<length;i++){child=children[i];type=child.getLayoutProperties().type;if(type==="splitter"){splitter=child;}else if(type==="slider"){slider=child;}else if(!begin){begin=child;}else{end=child;}}if(begin&&end){var beginFlex=begin.getLayoutProperties().flex;var endFlex=end.getLayoutProperties().flex;if(beginFlex==null){beginFlex=1;}if(endFlex==null){endFlex=1;}var beginHint=begin.getSizeHint();var splitterHint=splitter.getSizeHint();var endHint=end.getSizeHint();var beginWidth=beginHint.width;var splitterWidth=splitterHint.width;var endWidth=endHint.width;if(beginFlex>0&&endFlex>0){var flexSum=beginFlex+endFlex;var flexAvailable=availWidth-splitterWidth;var beginWidth=Math.round((flexAvailable/flexSum)*beginFlex);var endWidth=flexAvailable-beginWidth;var sizes=qx.ui.layout.Util.arrangeIdeals(beginHint.minWidth,beginWidth,beginHint.maxWidth,endHint.minWidth,endWidth,endHint.maxWidth);beginWidth=sizes.begin;endWidth=sizes.end;}else if(beginFlex>0){beginWidth=availWidth-splitterWidth-endWidth;if(beginWidth<beginHint.minWidth){beginWidth=beginHint.minWidth;}if(beginWidth>beginHint.maxWidth){beginWidth=beginHint.maxWidth;}}else if(endFlex>0){endWidth=availWidth-beginWidth-splitterWidth;if(endWidth<endHint.minWidth){endWidth=endHint.minWidth;}if(endWidth>endHint.maxWidth){endWidth=endHint.maxWidth;}}begin.renderLayout(0,0,beginWidth,availHeight);splitter.renderLayout(beginWidth,0,splitterWidth,availHeight);end.renderLayout(beginWidth+splitterWidth,0,endWidth,availHeight);}else{splitter.renderLayout(0,0,0,0);if(begin){begin.renderLayout(0,0,availWidth,availHeight);}else if(end){end.renderLayout(0,0,availWidth,availHeight);}}},_computeSizeHint:function(){var children=this._getLayoutChildren();var length=children.length;var child,hint,props;var minWidth=0,width=0,maxWidth=0;var minHeight=0,height=0,maxHeight=0;for(var i=0;i<length;i++){child=children[i];props=child.getLayoutProperties();if(props.type==="slider"){continue;}hint=child.getSizeHint();minWidth+=hint.minWidth;width+=hint.width;maxWidth+=hint.maxWidth;if(hint.minHeight>minHeight){minHeight=hint.minHeight;}if(hint.height>height){height=hint.height;}if(hint.maxHeight>maxHeight){maxHeight=hint.maxHeight;}}return {minWidth:minWidth,width:width,maxWidth:maxWidth,minHeight:minHeight,height:height,maxHeight:maxHeight};}}});qx.Class.define("qx.ui.container.Stack",{extend:qx.ui.core.Widget,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.Grow);},properties:{dynamic:{check:"Boolean",init:false,apply:"_applyDynamic"},selected:{check:"qx.ui.core.Widget",apply:"_applySelected",event:"change",nullable:true}},members:{_applyDynamic:function(value){var children=this._getChildren();var selected=this.getSelected();var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child!=selected){if(value){children[i].exclude();}else{children[i].hide();}}}},_applySelected:function(value,old){if(old){if(this.isDynamic()){old.exclude();}else{old.hide();}}if(value){value.show();}},add:function(widget){this._add(widget);var selected=this.getSelected();if(!selected){this.setSelected(widget);}else if(selected!==widget){if(this.isDynamic()){widget.exclude();}else{widget.hide();}}},remove:function(widget){this._remove(widget);if(this.getSelected()===widget){var first=this._getChildren()[0];if(first){this.setSelected(first);}else{this.resetSelected();}}},indexOf:function(widget){return this._indexOf(widget);},getChildren:function(){return this._getChildren();},previous:function(){var selected=this.getSelected();var go=this._indexOf(selected)-1;var children=this._getChildren();if(go<0){go=children.length-1;}var prev=children[go];this.setSelected(prev);},next:function(){var selected=this.getSelected();var go=this._indexOf(selected)+1;var children=this._getChildren();var next=children[go]||children[0];this.setSelected(next);}}});qx.Class.define("qx.ui.layout.Grow",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(false,"The property '"+name+"' is not supported by the atom layout!");},"off":null}),renderLayout:function(availWidth,availHeight){var children=this._getLayoutChildren();var child,size,width,height;for(var i=0,l=children.length;i<l;i++){child=children[i];size=child.getSizeHint();width=availWidth;if(width<size.minWidth){width=size.minWidth;}else if(width>size.maxWidth){width=size.maxWidth;}height=availHeight;if(height<size.minHeight){height=size.minHeight;}else if(height>size.maxHeight){height=size.maxHeight;}child.renderLayout(0,0,width,height);}},_computeSizeHint:function(){var children=this._getLayoutChildren();var child,size;var neededWidth=0,neededHeight=0;for(var i=0,l=children.length;i<l;i++){child=children[i];size=child.getSizeHint();neededWidth=Math.max(neededWidth,size.width);neededHeight=Math.max(neededHeight,size.height);}return {width:neededWidth,height:neededHeight};}}});qx.Class.define("qx.bom.History",{type:"singleton",extend:qx.core.Object,construct:qx.core.Variant.select("qx.client",{__iframe:null,__titles:null,__state:null,__timer:null,__locationState:null,"mshtml":function(){this.base(arguments);this.__iframe=document.createElement("iframe");this.__iframe.style.visibility="hidden";this.__iframe.style.position="absolute";this.__iframe.style.left="-1000px";this.__iframe.style.top="-1000px";this.__iframe.src=qx.util.ResourceManager.toUri("qx/static/blank.html");document.body.appendChild(this.__iframe);this.__titles={};this.__state=decodeURIComponent(this.__getHash());this.__locationState=decodeURIComponent(this.__getHash());this.__waitForIFrame(function(){this.__storeState(this.__state);this.__startTimer();},this);},"default":function(){this.base(arguments);this.__titles={};this.__state=this.__getState();this.__startTimer();}}),events:{"request":"qx.event.type.Data"},properties:{timeoutInterval:{check:"Number",init:100,apply:"_applyTimeoutInterval"}},members:{addToHistory:function(state,newTitle){if(newTitle!=null){document.title=newTitle;this.__titles[state]=newTitle;}if(state!=this.__state){top.location.hash="#"+encodeURIComponent(state);this.__storeState(state);}},getState:function(){return this.__state;},navigateBack:function(){qx.event.Timer.once(function(){history.back();},0);},navigateForward:function(){qx.event.Timer.once(function(){history.forward();},0);},_applyTimeoutInterval:function(value){this.__timer.setInterval(value);},__onHistoryLoad:function(state){this.__state=state;this.fireDataEvent("request",state);if(this.__titles[state]!=null){document.title=this.__titles[state];}},__startTimer:function(){this.__timer=new qx.event.Timer(this.getTimeoutInterval());this.__timer.addListener("interval",function(e){var newHash=this.__getState();if(newHash!=this.__state){this.__onHistoryLoad(newHash);}},this);this.__timer.start();},__getHash:function(){var href=top.location.href;var idx=href.indexOf("#");return idx>=0?href.substring(idx+1):"";},__getState:qx.core.Variant.select("qx.client",{"mshtml":function(){var locationState=decodeURIComponent(this.__getHash());if(locationState!=this.__locationState){this.__locationState=locationState;this.__storeState(locationState);return locationState;}var doc=this.__iframe.contentWindow.document;var elem=doc.getElementById("state");var iframeState=elem?decodeURIComponent(elem.innerText):"";return iframeState;},"default":function(){return decodeURIComponent(this.__getHash());}}),__storeState:qx.core.Variant.select("qx.client",{"mshtml":function(state){var html='<html><body><div id="state">'+encodeURIComponent(state)+'</div></body></html>';try{var doc=this.__iframe.contentWindow.document;doc.open();doc.write(html);doc.close();}catch(e){return false;}return true;},"default":function(state){qx.event.Timer.once(function(){top.location.hash="#"+encodeURIComponent(state);},this,0);return true;}}),__waitForIFrame:qx.core.Variant.select("qx.client",{"mshtml":function(callback,context){if(!this.__iframe.contentWindow||!this.__iframe.contentWindow.document){qx.event.Timer.once(function(){this.__waitForIFrame(callback,context);},this,10);return;}callback.call(context||window);},"default":null})},destruct:function(){this.__timer.stop();this._disposeObjects("__timer");this._disposeFields("__iframe","__titles");}});qx.Class.define("qx.event.Timer",{extend:qx.core.Object,construct:function(interval){this.base(arguments);this.setEnabled(false);if(interval!=null){this.setInterval(interval);}this.__oninterval=qx.lang.Function.bind(this._oninterval,this);},events:{"interval":"qx.event.type.Event"},statics:{once:function(func,obj,timeout){var timer=new qx.event.Timer(timeout);timer.addListener("interval",function(e){func.call(obj,e);timer.dispose();obj=null;},obj);timer.start();return timer;}},properties:{enabled:{init:true,check:"Boolean",apply:"_applyEnabled"},interval:{check:"Integer",init:1000,apply:"_applyInterval"}},members:{__intervalHandler:null,_applyInterval:function(value,old){if(this.getEnabled()){this.restart();}},_applyEnabled:function(value,old){if(old){window.clearInterval(this.__intervalHandler);this.__intervalHandler=null;}else if(value){this.__intervalHandler=window.setInterval(this.__oninterval,this.getInterval());}},start:function(){this.setEnabled(true);},startWith:function(interval){this.setInterval(interval);this.start();},stop:function(){this.setEnabled(false);},restart:function(){this.stop();this.start();},restartWith:function(interval){this.stop();this.startWith(interval);},_oninterval:function(){if(this.getEnabled()){this.fireEvent("interval");}}},destruct:function(){if(this.__intervalHandler){window.clearInterval(this.__intervalHandler);}this._disposeFields("__intervalHandler","__oninterval");}});qx.Class.define("qx.event.Command",{extend:qx.core.Object,construct:function(shortcut){this.base(arguments);this.__modifier={};this.__key=null;if(shortcut!=null){this.setShortcut(shortcut);}if(qx.core.Variant.isSet("qx.debug","on")){if(this.__modifier.Alt&&this.__key&&this.__key.length==1){if((this.__key>="A"&&this.__key<="Z")||(this.__key>="0"&&this.__key<="9")){this.warn("A shortcut containing Alt and a letter or number will not work under OS X!");}}}this.initEnabled();},events:{"execute":"qx.event.type.Data"},properties:{enabled:{init:true,check:"Boolean",event:"changeEnabled",apply:"_applyEnabled"},shortcut:{check:"String",apply:"_applyShortcut",nullable:true}},members:{execute:function(target){this.fireDataEvent("execute",target);},__onKeyPress:function(event){if(this.getEnabled()&&this.matchesKeyEvent(event)){this.execute(event.getTarget());event.preventDefault();event.stopPropagation();}},_applyEnabled:function(value,old){if(value){qx.event.Registration.addListener(document.documentElement,"keydown",this.__onKeyPress,this);}else{qx.event.Registration.removeListener(document.documentElement,"keydown",this.__onKeyPress,this);}},_applyShortcut:function(value,old){if(value){this.__modifier={};this.__key=null;var a=value.split(/[-+\s]+/);var al=a.length;for(var i=0;i<al;i++){var identifier=this.__noramlizeKeyIdentifier(a[i]);switch(identifier){case "Control":case "Shift":case "Meta":case "Alt":this.__modifier[identifier]=true;break;case "Unidentified":var msg="Not a valid key name for a command: "+a[i];this.error(msg);throw msg;default:if(this.__key){var msg="You can only specify one non modifier key!";this.error(msg);throw msg;}this.__key=identifier;}}}return true;},matchesKeyEvent:function(e){var key=this.__key;if(!key){return ;}if((this.__modifier.Shift&&!e.isShiftPressed())||(this.__modifier.Control&&!e.isCtrlPressed())||(this.__modifier.Meta&&!e.isMetaPressed())||(this.__modifier.Alt&&!e.isAltPressed())){return false;}if(key==e.getKeyIdentifier()){return true;}return false;},__oldKeyNameToKeyIdentifierMap:{esc:"Escape",ctrl:"Control",print:"PrintScreen",del:"Delete",pageup:"PageUp",pagedown:"PageDown",numlock:"NumLock",numpad_0:"0",numpad_1:"1",numpad_2:"2",numpad_3:"3",numpad_4:"4",numpad_5:"5",numpad_6:"6",numpad_7:"7",numpad_8:"8",numpad_9:"9",numpad_divide:"/",numpad_multiply:"*",numpad_minus:"-",numpad_plus:"+"},__noramlizeKeyIdentifier:function(keyName){var KeyHandler=qx.event.handler.Keyboard;var keyIdentifier="Unidentified";if(KeyHandler.isValidKeyIdentifier(keyName)){return keyName;}if(keyName.length==1&&keyName>="a"&&keyName<="z"){return keyName.toUpperCase();}keyName=keyName.toLowerCase();var keyIdentifier=this.__oldKeyNameToKeyIdentifierMap[keyName]||qx.lang.String.firstUp(keyName);if(KeyHandler.isValidKeyIdentifier(keyIdentifier)){return keyIdentifier;}else{return "Unidentified";}},toString:function(){var key=this.__key;var str=[];for(var modifier in this.__modifier){str.push(qx.locale.Key.getKeyName("short",modifier));}if(key){str.push(qx.locale.Key.getKeyName("short",key));}return str.join("+");}},destruct:function(){this.setEnabled(false);this._disposeFields("__modifier","__key");}});qx.Bootstrap.define("qx.bom.client.Locale",{statics:{LOCALE:"",VARIANT:"",__init:function(){var locale=(qx.bom.client.Engine.MSHTML?navigator.userLanguage:navigator.language).toLowerCase();var variant="";var index=locale.indexOf("-");if(index!=-1){variant=locale.substr(index+1);locale=locale.substr(0,index);}this.LOCALE=locale;this.VARIANT=variant;}},defer:function(statics){statics.__init();}});qx.Class.define("qx.core.BaseString",{extend:String,construct:function(txt){if(qx.core.Variant.isSet("qx.debug","on")){this.assertType(txt,"string","Invalid argument 'txt'.");}this._txt=txt;},members:{toString:function(){return this._txt;},valueOf:function(){return this._txt;},toHashCode:function(){return qx.core.ObjectRegistry.toHashCode(this);},base:function(args,varags){return qx.core.Object.prototype.base.apply(this,arguments);}},defer:function(statics){if(qx.core.Variant.isSet("qx.debug","on")){qx.Class.include(statics,qx.core.MAssert);}}});qx.Class.define("qx.locale.LocalizedString",{extend:qx.core.BaseString,construct:function(translation,messageId,args){this.base(arguments,translation);this.__messageId=messageId;this.__args=args;},members:{translate:function(){return qx.locale.Manager.getInstance().translate(this.__messageId,this.__args);}}});qx.Class.define("qx.locale.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__translations=window.qxtranslations||{};this.__locales=window.qxlocales||{};var clazz=qx.bom.client.Locale;var locale=clazz.LOCALE;var variant=clazz.VARIANT;if(variant!==""){locale+="_"+variant;}this.setLocale(locale||this._defaultLocale);},statics:{tr:function(messageId,varargs){var args=qx.lang.Array.fromArguments(arguments);args.splice(0,1);return qx.locale.Manager.getInstance().translate(messageId,args);},trn:function(singularMessageId,pluralMessageId,count,varargs){var args=qx.lang.Array.fromArguments(arguments);args.splice(0,3);if(count!=1){return qx.locale.Manager.getInstance().translate(pluralMessageId,args);}else{return qx.locale.Manager.getInstance().translate(singularMessageId,args);}},trc:function(hint,messageId,varargs){var args=qx.lang.Array.fromArguments(arguments);args.splice(0,2);return qx.locale.Manager.getInstance().translate(messageId,args);},marktr:function(messageId){return messageId;}},properties:{locale:{check:"String",nullable:true,apply:"_applyLocale",event:"changeLocale"}},members:{_defaultLocale:"C",getLanguage:function(){return this._language;},getTerritory:function(){return this.getLocale().split("_")[1]||"";},getAvailableLocales:function(){var locales=[];for(var locale in this.__locales){if(locale!=this._defaultLocale){locales.push(locale);}}return locales;},__extractLanguage:function(locale){var language;var pos=locale.indexOf("_");if(pos==-1){language=locale;}else{language=locale.substring(0,pos);}return language;},_applyLocale:function(value,old){this._locale=value;this._language=this.__extractLanguage(value);},addTranslation:function(languageCode,translationMap){var catalog=this.__translations;if(catalog[languageCode]){for(var key in translationMap){catalog[languageCode][key]=translationMap[key];}}else{catalog[languageCode]=translationMap;}},translate:function(messageId,args,locale){var txt;var catalog=this.__translations;if(!catalog){return messageId;}if(locale){var language=this.__extractLanguage(locale);}else{locale=this._locale;language=this._language;}if(!txt&&catalog[locale]){txt=catalog[locale][messageId];}if(!txt&&catalog[language]){txt=catalog[language][messageId];}if(!txt&&catalog[this._defaultLocale]){txt=catalog[this._defaultLocale][messageId];}if(!txt){txt=messageId;}if(args.length>0){var translatedArgs=[];for(var i=0;i<args.length;i++){var arg=args[i];if(arg.translate){translatedArgs[i]=arg.translate();}else{translatedArgs[i]=arg;}}txt=qx.lang.String.format(txt,translatedArgs);}if(qx.core.Variant.isSet("qx.dynamicLocaleSwitch","on")){txt=new qx.locale.LocalizedString(txt,messageId,args);}return txt;},localize:function(messageId,args,locale){var txt;var catalog=this.__locales;if(!catalog){return messageId;}if(locale){var language=this.__extractLanguage(locale);}else{locale=this._locale;language=this._language;}if(!txt&&catalog[locale]){txt=catalog[locale][messageId];}if(!txt&&catalog[language]){txt=catalog[language][messageId];}if(!txt&&catalog[this._defaultLocale]){txt=catalog[this._defaultLocale][messageId];}if(!txt){txt=messageId;}if(args.length>0){var translatedArgs=[];for(var i=0;i<args.length;i++){var arg=args[i];if(arg.translate){translatedArgs[i]=arg.translate();}else{translatedArgs[i]=arg;}}txt=qx.lang.String.format(txt,translatedArgs);}if(qx.core.Variant.isSet("qx.dynamicLocaleSwitch","on")){txt=new qx.locale.LocalizedString(txt,messageId,args);}return txt;}},destruct:function(){this._disposeFields("__translations","__locales");}});qx.Class.define("qx.locale.Key",{statics:{getKeyName:function(size,keyIdentifier,locale){if(qx.core.Variant.isSet("qx.debug","on")){qx.core.Assert.assertInArray(size,["short","full"]);}var key="key_"+size+"_"+keyIdentifier;var localizedKey=qx.locale.Manager.getInstance().translate(key,[],locale);if(localizedKey==key){return qx.locale.Key._keyNames[key]||keyIdentifier;}else{return localizedKey;}}},defer:function(statics,members,properties){var keyNames={};var Manager=qx.locale.Manager;keyNames[Manager.marktr("key_short_Backspace")]="Backspace";keyNames[Manager.marktr("key_short_Tab")]="Tab";keyNames[Manager.marktr("key_short_Space")]="Space";keyNames[Manager.marktr("key_short_Enter")]="Enter";keyNames[Manager.marktr("key_short_Shift")]="Shift";keyNames[Manager.marktr("key_short_Control")]="Ctrl";keyNames[Manager.marktr("key_short_Alt")]="Alt";keyNames[Manager.marktr("key_short_CapsLock")]="Caps";keyNames[Manager.marktr("key_short_Meta")]="Meta";keyNames[Manager.marktr("key_short_Escape")]="Esc";keyNames[Manager.marktr("key_short_Left")]="Left";keyNames[Manager.marktr("key_short_Up")]="Up";keyNames[Manager.marktr("key_short_Right")]="Right";keyNames[Manager.marktr("key_short_Down")]="Down";keyNames[Manager.marktr("key_short_PageUp")]="PgUp";keyNames[Manager.marktr("key_short_PageDown")]="PgDn";keyNames[Manager.marktr("key_short_End")]="End";keyNames[Manager.marktr("key_short_Home")]="Home";keyNames[Manager.marktr("key_short_Insert")]="Ins";keyNames[Manager.marktr("key_short_Delete")]="Del";keyNames[Manager.marktr("key_short_NumLock")]="Num";keyNames[Manager.marktr("key_short_PrintScreen")]="Print";keyNames[Manager.marktr("key_short_Scroll")]="Scroll";keyNames[Manager.marktr("key_short_Pause")]="Pause";keyNames[Manager.marktr("key_short_Win")]="Win";keyNames[Manager.marktr("key_short_Apps")]="Apps";keyNames[Manager.marktr("key_full_Backspace")]="Backspace";keyNames[Manager.marktr("key_full_Tab")]="Tabulator";keyNames[Manager.marktr("key_full_Space")]="Space";keyNames[Manager.marktr("key_full_Enter")]="Enter";keyNames[Manager.marktr("key_full_Shift")]="Shift";keyNames[Manager.marktr("key_full_Control")]="Control";keyNames[Manager.marktr("key_full_Alt")]="Alt";keyNames[Manager.marktr("key_full_CapsLock")]="CapsLock";keyNames[Manager.marktr("key_full_Meta")]="Meta";keyNames[Manager.marktr("key_full_Escape")]="Escape";keyNames[Manager.marktr("key_full_Left")]="Left";keyNames[Manager.marktr("key_full_Up")]="Up";keyNames[Manager.marktr("key_full_Right")]="Right";keyNames[Manager.marktr("key_full_Down")]="Down";keyNames[Manager.marktr("key_full_PageUp")]="PageUp";keyNames[Manager.marktr("key_full_PageDown")]="PageDown";keyNames[Manager.marktr("key_full_End")]="End";keyNames[Manager.marktr("key_full_Home")]="Home";keyNames[Manager.marktr("key_full_Insert")]="Insert";keyNames[Manager.marktr("key_full_Delete")]="Delete";keyNames[Manager.marktr("key_full_NumLock")]="NumLock";keyNames[Manager.marktr("key_full_PrintScreen")]="PrintScreen";keyNames[Manager.marktr("key_full_Scroll")]="Scroll";keyNames[Manager.marktr("key_full_Pause")]="Pause";keyNames[Manager.marktr("key_full_Win")]="Win";keyNames[Manager.marktr("key_full_Apps")]="Apps";statics._keyNames=keyNames;}});qx.Class.define("qx.ui.toolbar.ToolBar",{extend:qx.ui.core.Widget,include:qx.ui.core.MChildrenHandling,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox());},properties:{appearance:{refine:true,init:"toolbar"},openMenu:{check:"qx.ui.menu.Menu",event:"changeOpenMenu",nullable:true},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"},spacing:{nullable:true,check:"Integer",themeable:true,apply:"_applySpacing"}},members:{_applySpacing:function(value,old){var layout=this._getLayout();value==null?layout.resetSpacing():layout.setSpacing(value);},addSpacer:function(){var spacer=new qx.ui.core.Spacer;this._add(spacer,{flex:1});return spacer;},addSeparator:function(){this.add(new qx.ui.toolbar.Separator);},getMenuButtons:function(){var children=this.getChildren();var buttons=[];var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child instanceof qx.ui.toolbar.MenuButton){buttons.push(child);}else if(child instanceof qx.ui.toolbar.Part){buttons.push.apply(buttons,child.getMenuButtons());}}return buttons;}}});qx.Class.define("qx.ui.core.Spacer",{extend:qx.ui.core.LayoutItem,construct:function(width,height){this.base(arguments);this.setWidth(width!=null?width:0);this.setHeight(height!=null?height:0);},members:{destroy:function(){}}});qx.Class.define("qx.ui.toolbar.Separator",{extend:qx.ui.core.Widget,properties:{appearance:{refine:true,init:"toolbar-separator"},width:{refine:true,init:0},height:{refine:true,init:0}}});qx.Class.define("qx.ui.basic.Atom",{extend:qx.ui.core.Widget,construct:function(label,icon){if(qx.core.Variant.isSet("qx.debug","on")){this.assertArgumentsCount(arguments,0,2);}this.base(arguments);this._setLayout(new qx.ui.layout.Atom());if(label!=null){this.setLabel(label);}if(icon!=null){this.setIcon(icon);}},properties:{appearance:{refine:true,init:"atom"},label:{apply:"_applyLabel",nullable:true,dispose:true,check:"String"},rich:{check:"Boolean",init:false,apply:"_applyRich"},icon:{check:"String",apply:"_applyIcon",nullable:true,themeable:true},gap:{check:"Integer",nullable:false,event:"changeGap",apply:"_applyGap",themeable:true,init:4},show:{init:"both",check:["both","label","icon"],themeable:true,inheritable:true,apply:"_applyShow",event:"changeShow"},iconPosition:{init:"left",check:["top","right","bottom","left"],themeable:true,apply:"_applyIconPosition"},center:{init:false,check:"Boolean",themeable:true,apply:"_applyCenter"}},members:{_createChildControlImpl:function(id){var control;switch(id){case "label":control=new qx.ui.basic.Label(this.getLabel());control.setAnonymous(true);control.setRich(this.getRich());this._add(control);if(this.getLabel()==null||this.getShow()==="icon"){control.exclude();}break;case "icon":control=new qx.ui.basic.Image(this.getIcon());control.setAnonymous(true);this._addAt(control,0);if(this.getIcon()==null||this.getShow()==="label"){control.exclude();}break;}return control||this.base(arguments,id);},_forwardStates:{focused:true,hovered:true},_handleLabel:function(){if(this.getLabel()==null||this.getShow()==="icon"){this._excludeChildControl("label");}else{this._showChildControl("label");}},_handleIcon:function(){if(this.getIcon()==null||this.getShow()==="label"){this._excludeChildControl("icon");}else{this._showChildControl("icon");}},_applyLabel:function(value,old){var label=this._getChildControl("label",true);if(label){label.setContent(value);}this._handleLabel();},_applyRich:function(value,old){var label=this._getChildControl("label",true);if(label){label.setRich(value);}},_applyIcon:function(value,old){var icon=this._getChildControl("icon",true);if(icon){icon.setSource(value);}this._handleIcon();},_applyGap:function(value,old){this._getLayout().setGap(value);},_applyShow:function(value,old){this._handleLabel();this._handleIcon();},_applyIconPosition:function(value,old){this._getLayout().setIconPosition(value);},_applyCenter:function(value,old){this._getLayout().setCenter(value);}}});qx.Mixin.define("qx.ui.core.MExecutable",{events:{"execute":"qx.event.type.Event"},properties:{command:{check:"qx.event.Command",apply:"_applyCommand",event:"changeCommand",nullable:true}},members:{execute:function(){var cmd=this.getCommand();if(cmd){cmd.execute(this);}this.fireEvent("execute");},_applyCommand:function(value,old){if(old){old.removeListener("changeEnabled",this._onChangeEnabledCommand,this);}if(value){value.addListener("changeEnabled",this._onChangeEnabledCommand,this);if(this.getEnabled()===false){value.setEnabled(false);}else if(value.getEnabled()===false){this.setEnabled(false);}}},_onChangeEnabledCommand:function(e){this.setEnabled(e.getData());}}});qx.Interface.define("qx.ui.form.IFormElement",{events:{"changeValue":"qx.event.type.Data","changeName":"qx.event.type.Data","changeEnabled":"qx.event.type.Data"},members:{setEnabled:function(value){this.assertType(value,"boolean");},getEnabled:function(){},setName:function(value){this.assertType(value,"string");},getName:function(){},setValue:function(value){this.assertType(value,"string");},getValue:function(){}}});qx.Class.define("qx.ui.form.Button",{extend:qx.ui.basic.Atom,include:qx.ui.core.MExecutable,implement:qx.ui.form.IFormElement,construct:function(label,icon,command){this.base(arguments,label,icon);if(command!=null){this.setCommand(command);}this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("keydown",this._onKeyDown);this.addListener("keyup",this._onKeyUp);this.addListener("dblclick",this._onStopEvent);},properties:{name:{check:"String",nullable:true,event:"changeName"},value:{check:"String",nullable:true,event:"changeValue"},appearance:{refine:true,init:"button"},focusable:{refine:true,init:true}},members:{press:function(){if(this.hasState("abandoned")){return;}this.addState("pressed");},release:function(){if(this.hasState("pressed")){this.removeState("pressed");}},reset:function(){this.removeState("pressed");this.removeState("abandoned");this.removeState("hovered");},_onMouseOver:function(e){if(!this.isEnabled()||e.getTarget()!==this){return;}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed");}this.addState("hovered");},_onMouseOut:function(e){if(!this.isEnabled()||e.getTarget()!==this){return;}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned");}},_onMouseDown:function(e){if(!e.isLeftPressed()){return;}e.stopPropagation();this.capture();this.removeState("abandoned");this.addState("pressed");},_onMouseUp:function(e){this.releaseCapture();var hasPressed=this.hasState("pressed");var hasAbandoned=this.hasState("abandoned");if(hasPressed){this.removeState("pressed");}if(hasAbandoned){this.removeState("abandoned");}else{this.addState("hovered");if(hasPressed){this.execute();}}e.stopPropagation();},_onKeyDown:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":this.removeState("abandoned");this.addState("pressed");e.stopPropagation();}},_onKeyUp:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":if(this.hasState("pressed")){this.removeState("abandoned");this.removeState("pressed");this.execute();e.stopPropagation();}}}}});qx.Class.define("qx.ui.form.MenuButton",{extend:qx.ui.form.Button,construct:function(label,icon,menu){this.base(arguments,label,icon);if(menu!=null){this.setMenu(menu);}},properties:{menu:{check:"qx.ui.menu.Menu",nullable:true,apply:"_applyMenu",event:"changeMenu"}},members:{_applyMenu:function(value,old){if(old){old.removeListener("changeVisibility",this._onMenuChange,this);old.resetOpener();}if(value){value.addListener("changeVisibility",this._onMenuChange,this);value.setOpener(this);}},open:function(selectFirst){var menu=this.getMenu();if(menu){qx.ui.menu.Manager.getInstance().hideAll();menu.open();if(selectFirst){var first=menu.getChildren()[0];if(first){menu.setSelectedButton(first);}}}},_onMenuChange:function(e){var menu=this.getMenu();if(menu.isVisible()){this.addState("pressed");}else{this.removeState("pressed");}},_onMouseDown:function(e){var menu=this.getMenu();if(menu){if(!menu.isVisible()){this.open();}else{menu.exclude();}e.stopPropagation();}},_onMouseUp:function(e){e.stopPropagation();},_onMouseOver:function(e){this.addState("hovered");},_onMouseOut:function(e){this.removeState("hovered");},_onKeyDown:function(e){switch(e.getKeyIdentifier()){case "Enter":this.removeState("abandoned");this.addState("pressed");var menu=this.getMenu();if(menu){if(!menu.isVisible()){this.open();}else{menu.exclude();}}e.stopPropagation();}},_onKeyUp:function(e){}},destruct:function(){if(this.getMenu()){if(!qx.core.ObjectRegistry.inShutDown){this.getMenu().destroy();}}}});qx.Class.define("qx.ui.menubar.Button",{extend:qx.ui.form.MenuButton,construct:function(label,icon,menu){this.base(arguments,label,icon,menu);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp);},properties:{appearance:{refine:true,init:"menubar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}},members:{getToolBar:function(){var parent=this;while(parent){if(parent instanceof qx.ui.toolbar.ToolBar){return parent;}parent=parent.getLayoutParent();}return null;},_onMenuChange:function(e){var menu=this.getMenu();var toolbar=this.getToolBar();if(menu.isVisible()){this.addState("pressed");if(toolbar){toolbar.setOpenMenu(menu);}}else{this.removeState("pressed");if(toolbar&&toolbar.getOpenMenu()==menu){toolbar.resetOpenMenu();}}},_onMouseOver:function(e){this.addState("hovered");if(this.getMenu()){var toolbar=this.getToolBar();var open=toolbar.getOpenMenu();if(open&&open!=this.getMenu()){qx.ui.menu.Manager.getInstance().hideAll();this.open();}}}}});qx.Class.define("qx.ui.toolbar.MenuButton",{extend:qx.ui.menubar.Button,properties:{appearance:{refine:true,init:"toolbar-menubutton"},showArrow:{check:"Boolean",init:false,themeable:true,apply:"_applyShowArrow"}},members:{_createChildControlImpl:function(id){var control;switch(id){case "arrow":control=new qx.ui.basic.Image();control.setAnonymous(true);this._addAt(control,10);break;}return control||this.base(arguments,id);},_applyShowArrow:function(value,old){if(value){this._showChildControl("arrow");}else{this._excludeChildControl("arrow");}}}});qx.Class.define("qx.ui.layout.Atom",{extend:qx.ui.layout.Abstract,properties:{gap:{check:"Integer",init:4,apply:"_applyLayoutChange"},iconPosition:{check:["left","top","right","bottom"],init:"left",apply:"_applyLayoutChange"},center:{check:"Boolean",init:false,apply:"_applyLayoutChange"}},members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(false,"The property '"+name+"' is not supported by the atom layout!");},"off":null}),renderLayout:function(availWidth,availHeight){var Util=qx.ui.layout.Util;var iconPosition=this.getIconPosition();var children=this._getLayoutChildren();var length=children.length;var left,top,width,height;var child,hint;var gap=this.getGap();var center=this.getCenter();if(iconPosition==="bottom"||iconPosition==="right"){var start=length-1;var end=-1;var increment=-1;}else{var start=0;var end=length;var increment=1;}if(iconPosition=="top"||iconPosition=="bottom"){if(center){var allocatedHeight=0;for(var i=start;i!=end;i+=increment){height=children[i].getSizeHint().height;if(height>0){allocatedHeight+=height;if(i!=start){allocatedHeight+=gap;}}}top=Math.round((availHeight-allocatedHeight)/2);}else{top=0;}for(var i=start;i!=end;i+=increment){child=children[i];hint=child.getSizeHint();width=Math.min(hint.maxWidth,Math.max(availWidth,hint.minWidth));height=hint.height;left=Util.computeHorizontalAlignOffset("center",width,availWidth);child.renderLayout(left,top,width,height);if(height>0){top+=height+gap;}}}else{var remainingWidth=availWidth;var allocatedWidth=0;var shrinkTarget=null;var count=0;for(var i=start;i!=end;i+=increment){child=children[i];width=child.getSizeHint().width;if(width>0){if(!shrinkTarget&&child instanceof qx.ui.basic.Label){shrinkTarget=child;}else{remainingWidth-=width;}allocatedWidth+=width;count++;}}if(count>1){var gapSum=(count-1)*gap;remainingWidth-=gapSum;allocatedWidth+=gapSum;}if(center&&allocatedWidth<availWidth){left=Math.round((availWidth-allocatedWidth)/2);}else{left=0;}for(var i=start;i!=end;i+=increment){child=children[i];hint=child.getSizeHint();height=Math.min(hint.maxHeight,Math.max(availHeight,hint.minHeight));if(child===shrinkTarget){width=Math.max(hint.minWidth,Math.min(remainingWidth,hint.width));}else{width=hint.width;}top=Util.computeVerticalAlignOffset("middle",hint.height,availHeight);child.renderLayout(left,top,width,height);if(width>0){left+=width+gap;}}}},_computeSizeHint:function(){var children=this._getLayoutChildren();var length=children.length;var hint,result;if(length===1){var hint=children[0].getSizeHint();result={width:hint.width,height:hint.height,minWidth:hint.minWidth,minHeight:hint.minHeight};}else{var minWidth=0,width=0;var minHeight=0,height=0;var iconPosition=this.getIconPosition();var gap=this.getGap();if(iconPosition==="top"||iconPosition==="bottom"){var count=0;for(var i=0;i<length;i++){hint=children[i].getSizeHint();width=Math.max(width,hint.width);minWidth=Math.max(minWidth,hint.minWidth);if(hint.height>0){height+=hint.height;minHeight+=hint.minHeight;count++;}}if(count>1){var gapSum=(count-1)*gap;height+=gapSum;minHeight+=gapSum;}}else{var count=0;for(var i=0;i<length;i++){hint=children[i].getSizeHint();height=Math.max(height,hint.height);minHeight=Math.max(minHeight,hint.minHeight);if(hint.width>0){width+=hint.width;minWidth+=hint.minWidth;count++;}}if(count>1){var gapSum=(count-1)*gap;width+=gapSum;minWidth+=gapSum;}}result={minWidth:minWidth,width:width,minHeight:minHeight,height:height};}return result;}}});qx.Class.define("qx.ui.basic.Label",{extend:qx.ui.core.Widget,construct:function(content){this.base(arguments);if(content!=null){this.setContent(content);}if(qx.core.Variant.isSet("qx.dynamicLocaleSwitch","on")){qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this);}},properties:{rich:{check:"Boolean",init:false,apply:"_applyRich"},content:{check:"String",apply:"_applyContent",event:"changeContent",nullable:true},textAlign:{check:["left","center","right"],nullable:true,themeable:true,apply:"_applyTextAlign"},appearance:{refine:true,init:"label"},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false}},members:{__font:null,__invalidContentSize:null,_getContentHint:function(){if(this.__invalidContentSize){this.__computeContentSize();delete this.__invalidContentSize;}return {width:this.__contentSize.width,height:this.__contentSize.height};},_hasHeightForWidth:function(){return this.getRich();},_getContentHeightForWidth:function(width){if(!this.getRich()){return null;}var styles=this.__font?this.__font.getStyles():qx.bom.Font.getDefaultStyles();return qx.bom.Label.getHtmlSize(this.getContent(),styles,width).height;},_createContentElement:function(){return new qx.html.Label;},_applyTextAlign:function(value,old){this.getContentElement().setStyle("textAlign",value);},_applyTextColor:function(value,old){if(value){this.getContentElement().setStyle("color",qx.theme.manager.Color.getInstance().resolve(value));}else{this.getContentElement().removeStyle("color");}},__contentSize:{width:0,height:0},_applyFont:function(value,old){var styles;if(value){this.__font=qx.theme.manager.Font.getInstance().resolve(value);styles=this.__font.getStyles();}else{this.__font=null;styles=qx.bom.Font.getDefaultStyles();}this.getContentElement().setStyles(styles);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this);},__computeContentSize:function(){var Label=qx.bom.Label;var font=this.getFont();var styles=font?this.__font.getStyles():qx.bom.Font.getDefaultStyles();var content=this.getContent()||"A";var rich=this.getRich();this.__contentSize=rich?Label.getHtmlSize(content,styles):Label.getTextSize(content,styles);},_applyRich:function(value){this.getContentElement().setRich(value);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this);},_onChangeLocale:qx.core.Variant.select("qx.dynamicLocaleSwitch",{"on":function(e){var content=this.getContent();if(content.translate){this.setContent(content.translate());}},"off":null}),_applyContent:function(value){this.getContentElement().setContent(value);this.__invalidContentSize=true;qx.ui.core.queue.Layout.add(this);}},destruct:function(){if(qx.core.Variant.isSet("qx.dynamicLocaleSwitch","on")){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this);}this._disposeFields("__font");}});qx.Class.define("qx.bom.Label",{statics:{__styles:{fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},__prepareText:function(){var el=document.createElement("div");var style=el.style;style.width=style.height="auto";style.left=style.top="-1000px";style.visibility="hidden";style.position="absolute";style.overflow="visible";style.whiteSpace="nowrap";if(qx.core.Variant.isSet("qx.client","gecko")){var inner=document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","label");el.appendChild(inner);}document.body.insertBefore(el,document.body.firstChild);return this._textElement=el;},__prepareHtml:function(){var el=qx.bom.Element.create("div");var style=el.style;style.width=style.height="auto";style.left=style.top="-1000px";style.visibility="hidden";style.position="absolute";style.overflow="visible";style.whiteSpace="normal";document.body.insertBefore(el,document.body.firstChild);return this._htmlElement=el;},create:function(content,html,win){if(!win){win=window;}if(html){var el=win.document.createElement("div");el.useHtml=true;}else if(qx.core.Variant.isSet("qx.client","gecko")){var el=win.document.createElement("div");var xulel=win.document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","label");xulel.style.cursor="inherit";xulel.style.overflow="hidden";xulel.style.maxWidth="100%";xulel.setAttribute("crop","end");el.appendChild(xulel);}else{var el=win.document.createElement("div");}if(content){this.setContent(el,content);}return el;},getStyles:function(html){var styles={};if(html){styles.whiteSpace="normal";}else if(qx.core.Variant.isSet("qx.client","gecko")){styles.display="block";}else{styles.overflow="hidden";styles.whiteSpace="nowrap";styles.textOverflow="ellipsis";if(qx.core.Variant.isSet("qx.client","opera")){styles.OTextOverflow="ellipsis";}}styles.userSelect="none";return styles;},setContent:function(element,value){value=value||"";if(element.useHtml){element.innerHTML=value;}else if(qx.core.Variant.isSet("qx.client","gecko")){element.firstChild.setAttribute("value",value);}else{qx.bom.element.Attribute.set(element,"text",value);}},getContent:function(element){if(element.useHtml){return element.innerHTML;}else if(qx.core.Variant.isSet("qx.client","gecko")){return element.firstChild.getAttribute("value")||"";}else{return qx.bom.element.Attribute.get(element,"text");}},getHtmlSize:function(content,styles,width){var element=this._htmlElement||this.__prepareHtml();var keys=this.__styles;if(!styles){styles={};}for(var key in keys){element.style[key]=styles[key]||"";}element.style.width=width!=null?width+"px":"auto";element.innerHTML=content;return {width:element.clientWidth,height:element.clientHeight};},getTextSize:function(text,styles){var element=this._textElement||this.__prepareText();var keys=this.__styles;if(!styles){styles={};}for(var key in keys){element.style[key]=styles[key]||"";}if(qx.core.Variant.isSet("qx.client","gecko")){element.firstChild.setAttribute("value",text);}else if(qx.core.Variant.isSet("qx.client","mshtml|opera")){element.innerText=text;}else{element.textContent=text;}var width=element.clientWidth;var height=element.clientHeight;if(qx.core.Variant.isSet("qx.client","gecko")){if(qx.bom.client.Platform.MAC){width++;}}return {width:width,height:height};}}});qx.Class.define("qx.html.Label",{extend:qx.html.Element,members:{_applyProperty:function(name,value){this.base(arguments,name,value);if(name=="content"){qx.bom.Label.setContent(this._element,value);}},_createDomElement:function(){var rich=this.__rich;var el=qx.bom.Label.create(this._content,rich);var styles=qx.bom.Label.getStyles(rich);for(var key in styles){this.setStyle(key,styles[key]);}return el;},setRich:function(value){if(this._element){throw new Error("The label mode cannot be modified after initial creation");}value=!!value;if(this.__rich==value){return;}this.__rich=value;return this;},setContent:function(value){this._setProperty("content",value);return this;},getContent:function(){return this._getProperty("content");}}});qx.Class.define("qx.ui.menu.Manager",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this.__objects=[];var root=qx.core.Init.getApplication().getRoot();root.addListener("mousedown",this._onMouseDown,this,true);root.addListener("mouseup",this._onMouseUp,this);root.addListener("keydown",this._onKeyUpDown,this,true);root.addListener("keyup",this._onKeyUpDown,this,true);root.addListener("keypress",this._onKeyPress,this,true);qx.bom.Element.addListener(window,"blur",this.hideAll,this);this.__openTimer=new qx.event.Timer;this.__openTimer.addListener("interval",this._onOpenInterval,this);this.__closeTimer=new qx.event.Timer;this.__closeTimer.addListener("interval",this._onCloseInterval,this);},members:{__scheduleOpen:null,__scheduleClose:null,__openTimer:null,__closeTimer:null,__objects:null,_getChild:function(menu,start,iter,loop){var children=menu.getChildren();var length=children.length;var child;for(var i=start;i<length&&i>=0;i+=iter){child=children[i];if(child.isEnabled()&&!child.isAnonymous()){return child;}}if(loop){i=i==length?0:length-1;for(;i!=start;i+=iter){child=children[i];if(child.isEnabled()&&!child.isAnonymous()){return child;}}}return null;},_isInMenu:function(widget){while(widget){if(widget instanceof qx.ui.menu.Menu){return true;}widget=widget.getLayoutParent();}return false;},add:function(obj){if(qx.core.Variant.isSet("qx.debug","on")){if(!(obj instanceof qx.ui.menu.Menu)){throw new Error("Object is no menu: "+obj);}}var reg=this.__objects;reg.push(obj);obj.setZIndex(1e6+reg.length);},remove:function(obj){if(qx.core.Variant.isSet("qx.debug","on")){if(!(obj instanceof qx.ui.menu.Menu)){throw new Error("Object is no menu: "+obj);}}var reg=this.__objects;if(reg){qx.lang.Array.remove(reg,obj);}},hideAll:function(){var reg=this.__objects;if(reg){for(var i=reg.length-1;i>=0;i--){reg[i].exclude();}}},getActiveMenu:function(){var reg=this.__objects;return reg.length>0?reg[reg.length-1]:null;},scheduleOpen:function(menu){this.cancelClose(menu);if(menu.isVisible()){if(this.__scheduleOpen){this.cancelOpen(this.__scheduleOpen);}}else if(this.__scheduleOpen!=menu){this.__scheduleOpen=menu;this.__openTimer.restartWith(menu.getOpenInterval());}},scheduleClose:function(menu){this.cancelOpen(menu);if(!menu.isVisible()){if(this.__scheduleClose){this.cancelClose(this.__scheduleClose);}}else if(this.__scheduleClose!=menu){this.__scheduleClose=menu;this.__closeTimer.restartWith(menu.getCloseInterval());}},cancelOpen:function(menu){if(this.__scheduleOpen==menu){this.__openTimer.stop();this.__scheduleOpen=null;}},cancelClose:function(menu){if(this.__scheduleClose==menu){this.__closeTimer.stop();this.__scheduleClose=null;}},_onOpenInterval:function(e){this.__openTimer.stop();this.__scheduleOpen.open();this.__scheduleOpen=null;},_onCloseInterval:function(e){this.__closeTimer.stop();this.__scheduleClose.exclude();this.__scheduleClose=null;},_onMouseDown:function(e){var target=e.getTarget();if(target.getMenu&&target.getMenu()&&target.getMenu().isVisible()){return;}if(!this._isInMenu(target)){this.hideAll();}},_onMouseUp:function(e){var target=e.getTarget();if(!(target instanceof qx.ui.menu.Menu)){this.hideAll();}},__selectionKeys:{"Enter":1,"Space":1},__navigationKeys:{"Escape":1,"Up":1,"Down":1,"Left":1,"Right":1},_onKeyUpDown:function(e){var menu=this.getActiveMenu();if(!menu){return;}var iden=e.getKeyIdentifier();if(this.__navigationKeys[iden]||(this.__selectionKeys[iden]&&menu.getSelectedButton())){e.stopPropagation();}},_onKeyPress:function(e){var menu=this.getActiveMenu();if(!menu){return;}var iden=e.getKeyIdentifier();var navigation=this.__navigationKeys[iden];var selection=this.__selectionKeys[iden];if(navigation){switch(iden){case "Up":this._onKeyPressUp(menu);break;case "Down":this._onKeyPressDown(menu);break;case "Left":this._onKeyPressLeft(menu);break;case "Right":this._onKeyPressRight(menu);break;case "Escape":this.hideAll();break;}e.stopPropagation();}else if(selection){var button=menu.getSelectedButton();if(button){switch(iden){case "Enter":this._onKeyPressEnter(menu,button,e);break;case "Space":this._onKeyPressSpace(menu,button,e);break;}e.stopPropagation();}}},_onKeyPressUp:function(menu){var selectedButton=menu.getSelectedButton();var children=menu.getChildren();var start=selectedButton?menu.indexOf(selectedButton)-1:children.length-1;var nextItem=this._getChild(menu,start,-1,true);if(nextItem){menu.setSelectedButton(nextItem);}else{menu.resetSelectedButton();}},_onKeyPressDown:function(menu){var selectedButton=menu.getSelectedButton();var start=selectedButton?menu.indexOf(selectedButton)+1:0;var nextItem=this._getChild(menu,start,1,true);if(nextItem){menu.setSelectedButton(nextItem);}else{menu.resetSelectedButton();}},_onKeyPressLeft:function(menu){var menuOpener=menu.getOpener();if(!menuOpener){return;}if(menuOpener instanceof qx.ui.menu.Button){var parentMenu=menuOpener.getLayoutParent();parentMenu.resetOpenedButton();parentMenu.setSelectedButton(menuOpener);}else if(menuOpener instanceof qx.ui.toolbar.MenuButton){var buttons=menuOpener.getToolBar().getMenuButtons();var index=buttons.indexOf(menuOpener);if(index===-1){return;}var prevButton=index==0?buttons[buttons.length-1]:buttons[index-1];if(prevButton!=menuOpener){prevButton.open(true);}}},_onKeyPressRight:function(menu){var selectedButton=menu.getSelectedButton();if(selectedButton){var subMenu=selectedButton.getMenu();if(subMenu){menu.setOpenedButton(selectedButton);var first=this._getChild(subMenu,0,1);if(first){subMenu.setSelectedButton(first);}return;}}else if(!menu.getOpenedButton()){var first=this._getChild(menu,0,1);if(first){menu.setSelectedButton(first);if(first.getMenu()){menu.setOpenedButton(first);}return;}}var menuOpener=menu.getOpener();if(menuOpener instanceof qx.ui.menu.Button&&selectedButton){while(menuOpener){menuOpener=menuOpener.getLayoutParent();if(menuOpener instanceof qx.ui.menu.Menu){menuOpener=menuOpener.getOpener();if(menuOpener instanceof qx.ui.toolbar.MenuButton){break;}}else{break;}}if(!menuOpener){return;}}if(menuOpener instanceof qx.ui.toolbar.MenuButton){var buttons=menuOpener.getToolBar().getMenuButtons();var index=buttons.indexOf(menuOpener);if(index===-1){return;}var nextButton=buttons[index+1];if(!nextButton){nextButton=buttons[0];}if(nextButton!=menuOpener){nextButton.open(true);}}},_onKeyPressEnter:function(menu,button,e){if(button.hasListener("keypress")){var clone=e.clone();clone.setBubbles(false);clone.setTarget(button);button.dispatchEvent(clone);}this.hideAll();},_onKeyPressSpace:function(menu,button,e){if(button.hasListener("keypress")){var clone=e.clone();clone.setBubbles(false);clone.setTarget(button);button.dispatchEvent(clone);}}},destruct:function(){var root=qx.core.Init.getApplication().getRoot();if(root){root.removeListener("mousedown",this._onMouseDown,this,true);root.removeListener("mouseup",this._onMouseUp,this);root.removeListener("keydown",this._onKeyUpDown,this,true);root.removeListener("keyup",this._onKeyUpDown,this,true);root.removeListener("keypress",this._onKeyPress,this,true);}this._disposeObjects("__openTimer","__closeTimer");this._disposeArray("__objects");}});qx.Class.define("qx.ui.menu.Menu",{extend:qx.ui.core.Widget,include:[qx.ui.core.MPlacement,qx.ui.core.MChildrenHandling],construct:function(){this.base(arguments);this._setLayout(new qx.ui.menu.Layout);this.getApplicationRoot().add(this);this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.initVisibility();},properties:{appearance:{refine:true,init:"menu"},allowGrowX:{refine:true,init:false},allowGrowY:{refine:true,init:false},visibility:{refine:true,init:"excluded"},keepFocus:{refine:true,init:true},keepActive:{refine:true,init:true},spacingX:{check:"Integer",apply:"_applySpacingX",init:0,themeable:true},spacingY:{check:"Integer",apply:"_applySpacingY",init:0,themeable:true},iconColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyIconColumnWidth"},arrowColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyArrowColumnWidth"},selectedButton:{check:"qx.ui.core.Widget",nullable:true,apply:"_applySelectedButton"},openedButton:{check:"qx.ui.core.Widget",nullable:true,apply:"_applyOpenedButton"},opener:{check:"qx.ui.core.Widget",nullable:true},openInterval:{check:"Integer",themeable:true,init:250,apply:"_applyOpenInterval"},closeInterval:{check:"Integer",themeable:true,init:250,apply:"_applyCloseInterval"}},members:{__scheduledOpen:null,open:function(){this.placeToWidget(this.getOpener());this.show();},addSeparator:function(){this.add(new qx.ui.menu.Separator);},getColumnSizes:function(){return this._getLayout().getColumnSizes();},_applyIconColumnWidth:function(value,old){this._getLayout().setIconColumnWidth(value);},_applyArrowColumnWidth:function(value,old){this._getLayout().setArrowColumnWidth(value);},_applySpacingX:function(value,old){this._getLayout().setColumnSpacing(value);},_applySpacingY:function(value,old){this._getLayout().setSpacing(value);},_applyVisibility:function(value,old){this.base(arguments,value,old);var mgr=qx.ui.menu.Manager.getInstance();if(value==="visible"){mgr.add(this);var opener=this.getOpener();var parentMenu=opener.getLayoutParent();if(parentMenu&&parentMenu instanceof qx.ui.menu.Menu){parentMenu.setOpenedButton(opener);}}else if(old==="visible"){mgr.remove(this);var opener=this.getOpener();var parentMenu=opener.getLayoutParent();if(parentMenu&&parentMenu instanceof qx.ui.menu.Menu&&parentMenu.getOpenedButton()==opener){parentMenu.resetOpenedButton();}this.resetOpenedButton();this.resetSelectedButton();}},_applySelectedButton:function(value,old){if(old){old.removeState("selected");}if(value){value.addState("selected");}},_applyOpenedButton:function(value,old){if(old){old.getMenu().exclude();}if(value){value.getMenu().open();}},_onMouseOver:function(e){var mgr=qx.ui.menu.Manager.getInstance();mgr.cancelClose(this);var target=e.getTarget();if(target.isEnabled()&&target instanceof qx.ui.menu.AbstractButton){this.setSelectedButton(target);var subMenu=target.getMenu&&target.getMenu();if(subMenu){mgr.scheduleOpen(subMenu);this.__scheduledOpen=subMenu;}else{var opened=this.getOpenedButton();if(opened){mgr.scheduleClose(opened.getMenu());}if(this.__scheduledOpen){mgr.cancelOpen(this.__scheduledOpen);this.__scheduledOpen=null;}}}else if(!this.getOpenedButton()){this.resetSelectedButton();}},_onMouseOut:function(e){var mgr=qx.ui.menu.Manager.getInstance();if(!qx.ui.core.Widget.contains(this,e.getRelatedTarget())){var opened=this.getOpenedButton();opened?this.setSelectedButton(opened):this.resetSelectedButton();if(opened){mgr.cancelClose(opened.getMenu());}if(this.__scheduledOpen){mgr.cancelOpen(this.__scheduledOpen);}}}}});qx.Class.define("qx.ui.menu.Layout",{extend:qx.ui.layout.VBox,properties:{columnSpacing:{check:"Integer",init:0,apply:"_applyLayoutChange"},spanColumn:{check:"Integer",init:1,nullable:true,apply:"_applyLayoutChange"},iconColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyLayoutChange"},arrowColumnWidth:{check:"Integer",init:0,themeable:true,apply:"_applyLayoutChange"}},members:{__columnSizes:null,_computeSizeHint:function(){var children=this._getLayoutChildren();var child,sizes,spacing;var spanColumn=this.getSpanColumn();var columnSizes=this.__columnSizes=[0,0,0,0];var columnSpacing=this.getColumnSpacing();var spanColumnWidth=0;var maxInset=0;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child.isAnonymous()){continue;}sizes=child.getChildrenSizes();for(var column=0;column<sizes.length;column++){if(spanColumn!=null&&column==spanColumn&&sizes[spanColumn+1]==0){spanColumnWidth=Math.max(spanColumnWidth,sizes[column]);}else{columnSizes[column]=Math.max(columnSizes[column],sizes[column]);}}var insets=children[i].getInsets();maxInset=Math.max(maxInset,insets.left+insets.right);}if(spanColumn!=null&&columnSizes[spanColumn]+columnSpacing+columnSizes[spanColumn+1]<spanColumnWidth){columnSizes[spanColumn]=spanColumnWidth-columnSizes[spanColumn+1]-columnSpacing;}if(spanColumnWidth==0){spacing=columnSpacing*2;}else{spacing=columnSpacing*3;}if(columnSizes[0]==0){columnSizes[0]=this.getIconColumnWidth();}if(columnSizes[3]==0){columnSizes[3]=this.getArrowColumnWidth();}return {height:this.base(arguments).height,width:qx.lang.Array.sum(columnSizes)+maxInset+spacing};},getColumnSizes:function(){return this.__columnSizes||null;}}});qx.Class.define("qx.ui.menu.Separator",{extend:qx.ui.core.Widget,properties:{appearance:{refine:true,init:"menu-separator"},anonymous:{refine:true,init:true}}});qx.Class.define("qx.ui.menu.AbstractButton",{extend:qx.ui.core.Widget,type:"abstract",construct:function(){this.base(arguments);this._setLayout(new qx.ui.menu.ButtonLayout);this.addListener("mouseup",this._onMouseUp);this.addListener("keypress",this._onKeyPress);},properties:{label:{check:"String",apply:"_applyLabel",nullable:true},menu:{check:"qx.ui.menu.Menu",apply:"_applyMenu",nullable:true},icon:{check:"String",apply:"_applyIcon",themeable:true,nullable:true}},members:{_createChildControlImpl:function(id){var control;switch(id){case "icon":control=new qx.ui.basic.Image;control.setAnonymous(true);this._add(control,{column:0});break;case "label":control=new qx.ui.basic.Label;control.setAnonymous(true);this._add(control,{column:1});break;case "shortcut":control=new qx.ui.basic.Label;control.setAnonymous(true);this._add(control,{column:2});break;case "arrow":control=new qx.ui.basic.Image;control.setAnonymous(true);this._add(control,{column:3});break;}return control||this.base(arguments,id);},_forwardStates:{selected:1},getChildrenSizes:function(){var iconWidth=0,labelWidth=0,shortcutWidth=0,arrowWidth=0;if(this._isChildControlVisible("icon")){var icon=this._getChildControl("icon");iconWidth=icon.getMarginLeft()+icon.getSizeHint().width+icon.getMarginRight();}if(this._isChildControlVisible("label")){var label=this._getChildControl("label");labelWidth=label.getMarginLeft()+label.getSizeHint().width+label.getMarginRight();}if(this._isChildControlVisible("shortcut")){var shortcut=this._getChildControl("shortcut");shortcutWidth=shortcut.getMarginLeft()+shortcut.getSizeHint().width+shortcut.getMarginRight();}if(this._isChildControlVisible("arrow")){var arrow=this._getChildControl("arrow");arrowWidth=arrow.getMarginLeft()+arrow.getSizeHint().width+arrow.getMarginRight();}return [iconWidth,labelWidth,shortcutWidth,arrowWidth];},_onMouseUp:function(e){},_onKeyPress:function(e){},_applyIcon:function(value,old){if(value){this._showChildControl("icon").setSource(value);}else{this._excludeChildControl("icon");}},_applyLabel:function(value,old){if(value){this._showChildControl("label").setContent(value);}else{this._excludeChildControl("label");}},_applyMenu:function(value,old){if(old){old.resetOpener();old.removeState("submenu");}if(value){this._showChildControl("arrow");value.setOpener(this);value.addState("submenu");}else{this._excludeChildControl("arrow");}}},destruct:function(){if(this.getMenu()){if(!qx.core.ObjectRegistry.inShutDown){this.getMenu().destroy();}}}});qx.Class.define("qx.ui.menu.ButtonLayout",{extend:qx.ui.layout.Abstract,members:{verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){this.assert(name=="column","The property '"+name+"' is not supported by the MenuButton layout!");},"off":null}),renderLayout:function(availWidth,availHeight){var children=this._getLayoutChildren();var child;var column;var columnChildren=[];for(var i=0,l=children.length;i<l;i++){child=children[i];column=child.getLayoutProperties().column;columnChildren[column]=child;}var menu=children[0].getLayoutParent().getLayoutParent();var columns=menu.getColumnSizes();var spacing=menu.getSpacingX();var left=0,top=0;var Util=qx.ui.layout.Util;for(var i=0,l=columns.length;i<l;i++){child=columnChildren[i];if(child){var hint=child.getSizeHint();var top=Util.computeVerticalAlignOffset(child.getAlignY()||"middle",hint.height,availHeight,0,0);var offsetLeft=Util.computeHorizontalAlignOffset(child.getAlignX()||"left",hint.width,columns[i],child.getMarginLeft(),child.getMarginRight());child.renderLayout(left+offsetLeft,top,hint.width,hint.height);}left+=columns[i]+spacing;}},_computeSizeHint:function(){var children=this._getLayoutChildren();var neededHeight=0;for(var i=0,l=children.length;i<l;i++){neededHeight=Math.max(neededHeight,children[i].getSizeHint().height);}return {width:0,height:neededHeight};}}});qx.Class.define("qx.ui.menu.Button",{extend:qx.ui.menu.AbstractButton,include:qx.ui.core.MExecutable,construct:function(label,icon,command,menu){this.base(arguments);this.addListener("changeCommand",this._onChangeCommand,this);if(label!=null){this.setLabel(label);}if(icon!=null){this.setIcon(icon);}if(command!=null){this.setCommand(command);}if(menu!=null){this.setMenu(menu);}},properties:{appearance:{refine:true,init:"menu-button"}},members:{_onChangeCommand:function(e){this._getChildControl("shortcut").setContent(e.getData().toString());},_onMouseUp:function(e){if(e.isLeftPressed()){this.execute();if(this.getMenu()){e.stopPropagation();}}},_onKeyPress:function(e){this.execute();}}});qx.Mixin.define("qx.ui.core.MRemoteChildrenHandling",{members:{getChildren:function(){return this.getChildrenContainer().getChildren();},hasChildren:function(){return this.getChildrenContainer().hasChildren();},add:function(child,options){return this.getChildrenContainer().add(child,options);},remove:function(child){return this.getChildrenContainer().remove(child);},removeAll:function(){return this.getChildrenContainer().removeAll();},indexOf:function(child){return this.getChildrenContainer().indexOf(child);},addAt:function(child,index,options){return this.getChildrenContainer().addAt(child,index,options);},addBefore:function(child,before,options){return this.getChildrenContainer().addBefore(child,before,options);},addAfter:function(child,after,options){return this.getChildrenContainer().addAfter(child,after,options);},removeAt:function(index){return this.getChildrenContainer().removeAt(index);}}});qx.Class.define("qx.ui.toolbar.Part",{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling],construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox);this._createChildControl("handle");},properties:{appearance:{refine:true,init:"toolbar/part"},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"},spacing:{nullable:true,check:"Integer",themeable:true,apply:"_applySpacing"}},members:{_createChildControlImpl:function(id){var control;switch(id){case "handle":control=new qx.ui.basic.Image();control.setAlignY("middle");this._add(control);break;case "container":control=new qx.ui.toolbar.PartContainer;this._add(control);break;}return control||this.base(arguments,id);},getChildrenContainer:function(){return this._getChildControl("container");},_applySpacing:function(value,old){var layout=this._getChildControl("container").getLayout();value==null?layout.resetSpacing():layout.setSpacing(value);},addSeparator:function(){this.add(new qx.ui.toolbar.Separator);},getMenuButtons:function(){var children=this.getChildren();var buttons=[];var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child instanceof qx.ui.toolbar.MenuButton){buttons.push(child);}}return buttons;}}});qx.Class.define("qx.ui.toolbar.PartContainer",{extend:qx.ui.container.Composite,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.HBox);},properties:{appearance:{refine:true,init:"toolbar/part/container"},show:{init:"both",check:["both","label","icon"],inheritable:true,event:"changeShow"}}});qx.Class.define("qx.ui.toolbar.Button",{extend:qx.ui.form.Button,construct:function(label,icon,command){this.base(arguments,label,icon,command);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp);},properties:{appearance:{refine:true,init:"toolbar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}}});qx.Interface.define("qx.ui.form.IRadioItem",{extend:qx.ui.form.IFormElement,events:{"changeChecked":"qx.event.type.Data"},members:{setChecked:function(value){this.assertType(value,"boolean");},getChecked:function(){},setGroup:function(value){this.assertInstance(value,qx.ui.form.RadioGroup);},getGroup:function(){}}});qx.Class.define("qx.ui.menu.RadioButton",{extend:qx.ui.menu.AbstractButton,implement:qx.ui.form.IRadioItem,construct:function(label,menu){this.base(arguments);if(label!=null){this.setLabel(label);}if(menu!=null){this.setMenu(menu);}},properties:{appearance:{refine:true,init:"menu-radiobutton"},value:{check:"String",nullable:true,event:"changeValue"},name:{check:"String",nullable:true,event:"changeName"},group:{check:"qx.ui.form.RadioGroup",nullable:true,apply:"_applyGroup"},checked:{check:"Boolean",init:false,apply:"_applyChecked",event:"changeChecked"}},members:{_applyChecked:function(value,old){value?this.addState("checked"):this.removeState("checked");},_applyGroup:function(value,old){if(old){old.remove(this);}if(value){value.add(this);}},_onMouseUp:function(e){if(e.isLeftPressed()){this.setChecked(true);}},_onKeyPress:function(e){this.setChecked(true);}}});qx.Class.define("qx.ui.form.RadioGroup",{extend:qx.core.Object,implement:qx.ui.form.IFormElement,construct:function(varargs){this.base(arguments);this.__items=[];if(varargs!=null){this.add.apply(this,arguments);}this.addListener("changeSelected",this._onChangeSelected);},properties:{enabled:{check:"Boolean",apply:"_applyEnabled",event:"changeEnabled"},selected:{nullable:true,apply:"_applySelected",event:"changeSelected",check:"qx.ui.form.IRadioItem"},name:{check:"String",nullable:true,apply:"_applyName",event:"changeName"},wrap:{check:"Boolean",init:true}},events:{"changeValue":"qx.event.type.Data"},members:{__items:null,getItems:function(){return this.__items;},select:function(item){this.setSelected(item);},setValue:function(value){var items=this.__items;var item;for(var i=0,l=items.length;i<l;i++){item=items[i];if(item.getValue()==value){this.setSelected(item);break;}}},getValue:function(){var selected=this.getSelected();return selected?selected.getValue():null;},add:function(varargs){var items=this.__items;var item;for(var i=0,l=arguments.length;i<l;i++){item=arguments[i];if(item.getGroup()===this){continue;}item.addListener("changeChecked",this._onItemChangeChecked,this);items.push(item);item.setGroup(this);if(item.getChecked()){this.setSelected(item);}}if(items.length>0&&!this.getSelected()){this.setSelected(items[0]);}},remove:function(item){if(item.getGroup()===this){qx.lang.Array.remove(this.__items,item);item.resetGroup();item.removeListener("changeChecked",this._onItemChangeChecked,this);if(item.getChecked()){this.resetSelected();}}},_onItemChangeChecked:function(e){var item=e.getTarget();if(item.getChecked()){this.setSelected(item);}else if(this.getSelected()==item){this.resetSelected();}},_onChangeSelected:function(e){var item=e.getData();var value=null;if(item){value=item.getValue();if(value==null){value=item.getLabel();}}this.fireDataEvent("changeValue",value);},_applySelected:function(value,old){if(old){old.setChecked(false);}if(value){value.setChecked(true);}var oldValue=old?old.getValue():null;var newValue=value?value.getValue():null;if(oldValue!=newValue){this.fireNonBubblingEvent("changeValue",qx.event.type.Data,[newValue,oldValue]);}},_applyEnabled:function(value,old){var items=this.__items;if(value==null){for(var i=0,l=items.length;i<l;i++){items[i].resetEnabled();}}else{for(var i=0,l=items.length;i<l;i++){items[i].setEnabled(true);}}},_applyName:function(value,old){var items=this.__items;if(value==null){for(var i=0,l=items.length;i<l;i++){items[i].resetName();}}else{for(var i=0,l=items.length;i<l;i++){items[i].setName(value);}}},selectNext:function(){var item=this.getSelected();var items=this.__items;var index=items.indexOf(item);if(index==-1){return;}var i=0;var length=items.length;if(this.getWrap()){index=(index+1)%length;}else{index=Math.min(index+1,length-1);}while(i<length&&!items[index].getEnabled()){index=(index+1)%length;i++;}this.setSelected(items[index]);},selectPrevious:function(){var item=this.getSelected();var items=this.__items;var index=items.indexOf(item);if(index==-1){return;}var i=0;var length=items.length;if(this.getWrap()){index=(index-1+length)%length;}else{index=Math.max(index-1,0);}while(i<length&&!items[index].getEnabled()){index=(index-1+length)%length;i++;}this.setSelected(items[index]);}},destruct:function(){this._disposeArray("__items");}});qx.Class.define("qx.ui.form.ToggleButton",{extend:qx.ui.basic.Atom,implement:qx.ui.form.IFormElement,construct:function(label,icon){this.base(arguments,label,icon);this.addListener("mouseover",this._onMouseOver);this.addListener("mouseout",this._onMouseOut);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("keydown",this._onKeyDown);this.addListener("keyup",this._onKeyUp);},properties:{appearance:{refine:true,init:"button"},checked:{check:"Boolean",init:false,apply:"_applyChecked",event:"changeChecked"},focusable:{refine:true,init:true},name:{check:"String",nullable:true,event:"changeName"},value:{check:"String",nullable:true,event:"changeValue"}},members:{_applyChecked:function(value,old){value?this.addState("checked"):this.removeState("checked");},_onMouseOver:function(e){if(e.getTarget()!==this){return;}this.addState("hovered");if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed");}},_onMouseOut:function(e){if(e.getTarget()!==this){return;}this.removeState("hovered");if(this.hasState("pressed")){if(!this.getChecked()){this.removeState("pressed");}this.addState("abandoned");}},_onMouseDown:function(e){if(!e.isLeftPressed()){return;}this.capture();this.removeState("abandoned");this.addState("pressed");e.stopPropagation();},_onMouseUp:function(e){this.releaseCapture();if(this.hasState("abandoned")){this.removeState("abandoned");}else if(this.hasState("pressed")){this.toggleChecked();}this.removeState("pressed");e.stopPropagation();},_onKeyDown:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":this.removeState("abandoned");this.addState("pressed");e.stopPropagation();}},_onKeyUp:function(e){if(!this.hasState("pressed")){return;}switch(e.getKeyIdentifier()){case "Enter":case "Space":this.removeState("abandoned");this.toggleChecked();e.stopPropagation();}}}});qx.Class.define("qx.ui.toolbar.CheckBox",{extend:qx.ui.form.ToggleButton,construct:function(label,icon){this.base(arguments,label,icon);this.removeListener("keydown",this._onKeyDown);this.removeListener("keyup",this._onKeyUp);},properties:{appearance:{refine:true,init:"toolbar-button"},show:{refine:true,init:"inherit"},focusable:{refine:true,init:false}}});qx.Class.define("qx.ui.toolbar.RadioButton",{extend:qx.ui.toolbar.CheckBox,implement:qx.ui.form.IRadioItem,properties:{group:{check:"qx.ui.form.RadioGroup",apply:"_applyGroup",nullable:true}},members:{_applyChecked:function(value,old){this.base(arguments,value,old);if(value){var grp=this.getGroup();if(grp){grp.select(this);}}},_applyGroup:function(value,old){if(old){old.remove(this);}if(value){value.add(this);}}}});qx.Mixin.define("qx.ui.core.MNativeOverflow",{properties:{overflowX:{check:["hidden","visible","scroll","auto"],nullable:true,apply:"_applyOverflowX"},overflowY:{check:["hidden","visible","scroll","auto"],nullable:true,apply:"_applyOverflowY"},overflow:{group:["overflowX","overflowY"]}},members:{_applyOverflowX:function(value){this.getContentElement().setStyle("overflowX",value);},_applyOverflowY:function(value){this.getContentElement().setStyle("overflowY",value);}}});qx.Class.define("qx.ui.embed.Iframe",{extend:qx.ui.core.Widget,include:qx.ui.core.MNativeOverflow,construct:function(source){if(source!=null){this.__source=source;}this.base(arguments);qx.event.Registration.addListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.addListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.addListener(document.body,"losecapture",this.release,this,true);this.__blockerElement=this._createBlockerElement();this.getContainerElement().add(this.__blockerElement);},events:{"load":"qx.event.type.Event"},properties:{appearance:{refine:true,init:"iframe"},source:{check:"String",apply:"_applySource",nullable:true},frameName:{check:"String",init:"",apply:"_applyFrameName"}},members:{__source:null,__blockerElement:null,renderLayout:function(left,top,width,height){this.base(arguments,left,top,width,height);var pixel="px";var insets=this.getInsets();this.__blockerElement.setStyle("left",insets.left+pixel);this.__blockerElement.setStyle("top",insets.top+pixel);this.__blockerElement.setStyle("width",(width-insets.left-insets.right)+pixel);this.__blockerElement.setStyle("height",(height-insets.top-insets.bottom)+pixel);},_createContentElement:function(){var iframe=new qx.html.Iframe(this.__source);iframe.addListener("load",this._onIframeLoad,this);return iframe;},_createBlockerElement:function(){var el=new qx.html.Element("div");el.setStyle("zIndex",20);el.setStyle("position","absolute");el.setStyle("display","none");if(qx.core.Variant.isSet("qx.client","mshtml")){el.setStyles({backgroundImage:"url("+qx.util.ResourceManager.toUri("qx/static/blank.gif")+")",backgroundRepeat:"repeat"});}return el;},_onIframeLoad:function(e){this.fireNonBubblingEvent("load");},getWindow:function(){return this.getContentElement().getWindow();},getDocument:function(){return this.getContentElement().getDocument();},getBody:function(){return this.getContentElement().getBody();},getName:function(){return this.getContentElement().getName();},block:function(){this.__blockerElement.setStyle("display","block");},release:function(){this.__blockerElement.setStyle("display","none");},reload:function(){this.getContentElement().reload();},_applySource:function(value,old){this.getContentElement().setSource(value);},_applyFrameName:function(value,old){this.getContentElement().setAttribute("name",value);}},destruct:function(){this._disposeObjects("__blockerElement");qx.event.Registration.removeListener(document.body,"mousedown",this.block,this,true);qx.event.Registration.removeListener(document.body,"mouseup",this.release,this,true);qx.event.Registration.removeListener(document.body,"losecapture",this.release,this,true);}});qx.Class.define("qx.html.Iframe",{extend:qx.html.Element,construct:function(){this.base(arguments,"iframe");},events:{"load":"qx.event.type.Event"},members:{_applyProperty:function(name,value){this.base(arguments,name,value);if(name=="source"){qx.bom.Iframe.setSource(this._element,value);}},_createDomElement:function(){return qx.bom.Iframe.create(this._content);},getWindow:function(){if(this._element){return qx.bom.Iframe.getWindow(this._element);}else{return null;}},getDocument:function(){if(this._element){return qx.bom.Iframe.getDocument(this._element);}else{return null;}},getBody:function(){if(this._element){return qx.bom.Iframe.getBody(this._element);}else{return null;}},setSource:function(source){this._setProperty("source",source);return this;},getSource:function(){return this._getProperty("source");},setName:function(name){this.setAttribute("name",name);return this;},getName:function(){return this.setAttribute("name");},reload:function(){if(this._element){var url=this.getSource();this.setSource(null);this.setSource(url);}}}});qx.Class.define("qx.event.handler.Iframe",{extend:qx.core.Object,implement:qx.event.IEventHandler,statics:{PRIORITY:qx.event.Registration.PRIORITY_NORMAL,SUPPORTED_TYPES:{load:1},TARGET_CHECK:qx.event.IEventHandler.TARGET_DOMNODE,IGNORE_CAN_HANDLE:false,onevent:function(target){qx.event.Registration.fireEvent(target,"load");}},members:{canHandleEvent:function(target,type){return target.tagName.toLowerCase()==="iframe";},registerEvent:function(target,type,capture){},unregisterEvent:function(target,type,capture){}},defer:function(statics){qx.event.Registration.addHandler(statics);}});qx.Class.define("qx.bom.Iframe",{statics:{create:function(attributes,win){var attributes=attributes?qx.lang.Object.copy(attributes):{};attributes.onload="qx.event.handler.Iframe.onevent(this)";attributes.frameBorder="0";attributes.frameSpacing="0";attributes.marginWidth="0";attributes.marginHeight="0";attributes.hspace="0";attributes.vspace="0";attributes.border="0";attributes.allowTransparency="true";return qx.bom.Element.create("iframe",attributes,win);},getWindow:qx.core.Variant.select("qx.client",{"mshtml|gecko":function(iframe){try{return iframe.contentWindow;}catch(ex){return null;}},"default":function(iframe){try{var doc=this.getDocument(iframe);return doc?doc.defaultView:null;}catch(ex){return null;}}}),getDocument:qx.core.Variant.select("qx.client",{"mshtml":function(iframe){try{var win=this.getWindow(iframe);return win?win.document:null;}catch(ex){return null;}},"default":function(iframe){try{return iframe.contentDocument;}catch(ex){return null;}}}),getBody:function(iframe){var doc=this.getDocument(iframe);return doc?doc.getElementsByTagName("body")[0]:null;},setSource:function(iframe,source){try{if(this.getWindow(iframe)){try{this.getWindow(iframe).location.replace(source);}catch(ex){iframe.src=source;}}else{iframe.src=source;}}catch(ex){qx.log.Logger.warn("Iframe source could not be set!");}},queryCurrentUrl:function(iframe){var doc=this.getDocument(iframe);try{if(doc&&doc.location){return doc.location.href;}}catch(ex){}return null;}}});qx.Class.define("qx.ui.embed.Html",{extend:qx.ui.core.Widget,include:[qx.ui.core.MNativeOverflow],construct:function(html){this.base(arguments);if(html!=null){this.setHtml(html);}},properties:{html:{check:"String",apply:"_applyHtml",event:"changeHtml",nullable:true},cssClass:{check:"String",init:"",apply:"_applyCssClass"},selectable:{refine:true,init:true},focusable:{refine:true,init:true}},members:{getFocusElement:function(){return this.getContentElement();},_applyHtml:function(value,old){var elem=this.getContentElement();elem.setAttribute("html",value||"");elem.setStyle("padding","0px");elem.setStyle("border","none");},_applyCssClass:function(value,old){this.getContentElement().setAttribute("class",value);},_applyFont:function(value,old){var styles=value?qx.theme.manager.Font.getInstance().resolve(value).getStyles():qx.bom.Font.getDefaultStyles();this.getContentElement().setStyles(styles);},_applyTextColor:function(value,old){if(value){this.getContentElement().setStyle("color",qx.theme.manager.Color.getInstance().resolve(value));}else{this.getContentElement().removeStyle("color");}}}});qx.Class.define("qx.log.appender.Element",{extend:qx.core.Object,construct:function(element){this.base(arguments);var style=['.qxappender .level-debug{background:white}','.qxappender .level-info{background:#DEEDFA}','.qxappender .level-warn{background:#FFF7D5}','.qxappender .level-error{background:#FFE2D5}','.qxappender .level-user{background:#E3EFE9}','.qxappender .type-string{color:black;font-weight:normal;}','.qxappender .type-number{color:#155791;font-weight:normal;}','.qxappender .type-boolean{color:#15BC91;font-weight:normal;}','.qxappender .type-array{color:#CC3E8A;font-weight:bold;}','.qxappender .type-map{color:#CC3E8A;font-weight:bold;}','.qxappender .type-key{color:#565656;font-style:italic}','.qxappender .type-class{color:#5F3E8A;font-weight:bold}','.qxappender .type-instance{color:#565656;font-weight:bold}','.qxappender .type-stringify{color:#565656;font-weight:bold}'];qx.bom.Stylesheet.createElement(style.join(""));qx.log.Logger.register(this);},members:{setElement:function(element){this.clear();if(element){qx.bom.element.Class.add(element,"qxappender");}this.__element=element;},clear:function(){var elem=this.__element;if(elem){elem.innerHTML="";}},process:function(entry){var elem=this.__element;if(!elem){return;}elem.appendChild(qx.log.appender.Util.toHtml(entry));elem.scrollTop=elem.scrollHeight;}},destruct:function(){this._disposeFields("__element");}});qx.Class.define("qx.bom.element.Class",{statics:{add:function(element,name){if(!this.has(element,name)){element.className+=(element.className?" ":"")+name;}return name;},get:function(element){return element.className;},has:function(element,name){var regexp=new RegExp("(^|\\s)"+name+"(\\s|$)");return regexp.test(element.className);},remove:function(element,name){var regexp=new RegExp("(^|\\s)"+name+"(\\s|$)");element.className=element.className.replace(regexp,"$2");return name;},replace:function(element,oldName,newName){this.remove(element,oldName);return this.add(element,newName);},toggle:function(element,name){this.has(element,name)?this.remove(element,name):this.add(element,name);return name;}}});qx.Class.define("qx.ui.core.AbstractScrollArea",{extend:qx.ui.core.Widget,type:"abstract",construct:function(){this.base(arguments);var grid=new qx.ui.layout.Grid();grid.setColumnFlex(0,1);grid.setRowFlex(0,1);this._setLayout(grid);this.addListener("mousewheel",this._onMouseWheel,this);},properties:{appearance:{refine:true,init:"scrollarea"},width:{refine:true,init:100},height:{refine:true,init:200},scrollbarX:{check:["auto","on","off"],init:"auto",apply:"_computeScrollbars"},scrollbarY:{check:["auto","on","off"],init:"auto",apply:"_computeScrollbars"},scrollbar:{group:["scrollbarX","scrollbarY"]}},members:{_createChildControlImpl:function(id){var control;switch(id){case "pane":control=new qx.ui.core.ScrollPane();control.addListener("update",this._computeScrollbars,this);control.addListener("scrollX",this._onScrollPaneX,this);control.addListener("scrollY",this._onScrollPaneY,this);this._add(control,{row:0,column:0});break;case "scrollbar-x":control=new qx.ui.core.ScrollBar("horizontal");control.exclude();control.addListener("scroll",this._onScrollBarX,this);control.addListener("changeVisibility",this._onChangeScrollbarXVisibility,this);this._add(control,{row:1,column:0});break;case "scrollbar-y":control=new qx.ui.core.ScrollBar("vertical");control.exclude();control.addListener("scroll",this._onScrollBarY,this);control.addListener("changeVisibility",this._onChangeScrollbarYVisibility,this);this._add(control,{row:0,column:1});break;case "corner":control=new qx.ui.core.Widget();control.setWidth(0);control.setHeight(0);control.exclude();this._add(control,{row:1,column:1});break;}return control||this.base(arguments,id);},getPaneSize:function(){return this._getChildControl("pane").getBounds();},getItemTop:function(item){return this._getChildControl("pane").getItemTop(item);},getItemBottom:function(item){return this._getChildControl("pane").getItemBottom(item);},getItemLeft:function(item){return this._getChildControl("pane").getItemLeft(item);},getItemRight:function(item){return this._getChildControl("pane").getItemRight(item);},scrollToX:function(value){this._getChildControl("scrollbar-x").scrollTo(value);},scrollByX:function(value){this._getChildControl("scrollbar-x").scrollBy(value);},getScrollX:function(){var scrollbar=this._getChildControl("scrollbar-x",true);return scrollbar?scrollbar.getPosition():0;},scrollToY:function(value){this._getChildControl("scrollbar-y").scrollTo(value);},scrollByY:function(value){this._getChildControl("scrollbar-y").scrollBy(value);},getScrollY:function(){var scrollbar=this._getChildControl("scrollbar-y",true);return scrollbar?scrollbar.getPosition():0;},_onScrollBarX:function(e){this._getChildControl("pane").scrollToX(e.getData());},_onScrollBarY:function(e){this._getChildControl("pane").scrollToY(e.getData());},_onScrollPaneX:function(e){this.scrollToX(e.getData());},_onScrollPaneY:function(e){this.scrollToY(e.getData());},_onMouseWheel:function(e){var scrollbar=this._getChildControl("scrollbar-y",true);if(scrollbar){scrollbar.scrollBySteps(e.getWheelDelta());}e.stop();},_onChangeScrollbarXVisibility:function(e){var showX=this._isChildControlVisible("scrollbar-x");var showY=this._isChildControlVisible("scrollbar-y");if(!showX){this.scrollToX(0);}showX&&showY?this._showChildControl("corner"):this._excludeChildControl("corner");},_onChangeScrollbarYVisibility:function(e){var showX=this._isChildControlVisible("scrollbar-x");var showY=this._isChildControlVisible("scrollbar-y");if(!showY){this.scrollToY(0);}showX&&showY?this._showChildControl("corner"):this._excludeChildControl("corner");},_computeScrollbars:function(){var pane=this._getChildControl("pane");var content=pane.getChild();if(!content){this._excludeChildControl("scrollbar-x");this._excludeChildControl("scrollbar-y");return;}var innerSize=this.getInnerSize();var paneSize=pane.getBounds();var scrollSize=pane.getScrollSize();if(!paneSize||!scrollSize){return;}var scrollbarX=this.getScrollbarX();var scrollbarY=this.getScrollbarY();if(scrollbarX==="auto"&&scrollbarY==="auto"){var showX=scrollSize.width>innerSize.width;var showY=scrollSize.height>innerSize.height;if((showX||showY)&&!(showX&&showY)){if(showX){showY=scrollSize.height>paneSize.height;}else if(showY){showX=scrollSize.width>paneSize.width;}}}else{var showX=scrollbarX==="on";var showY=scrollbarY==="on";if(scrollSize.width>(showX?paneSize.width:innerSize.width)&&scrollbarX==="auto"){showX=true;}if(scrollSize.height>(showX?paneSize.height:innerSize.height)&&scrollbarY==="auto"){showY=true;}}if(showX){var barX=this._getChildControl("scrollbar-x");barX.show();barX.setMaximum(Math.max(0,scrollSize.width-paneSize.width));barX.setKnobFactor(paneSize.width/scrollSize.width);}else{this._excludeChildControl("scrollbar-x");}if(showY){var barY=this._getChildControl("scrollbar-y");barY.show();barY.setMaximum(Math.max(0,scrollSize.height-paneSize.height));barY.setKnobFactor(paneSize.height/scrollSize.height);}else{this._excludeChildControl("scrollbar-y");}}}});qx.Mixin.define("qx.ui.core.MSelectionHandling",{construct:function(){var clazz=this.SELECTION_MANAGER;var manager=this.__manager=new clazz(this);this.addListener("mousedown",manager.handleMouseDown,manager);this.addListener("mouseup",manager.handleMouseUp,manager);this.addListener("mouseover",manager.handleMouseOver,manager);this.addListener("mousemove",manager.handleMouseMove,manager);this.addListener("losecapture",manager.handleLoseCapture,manager);this.addListener("keypress",manager.handleKeyPress,manager);this.addListener("addItem",manager.handleAddItem,manager);this.addListener("removeItem",manager.handleRemoveItem,manager);manager.addListener("changeSelection",this._onSelectionChange,this);},events:{"changeSelection":"qx.event.type.Data"},properties:{selectionMode:{check:["single","multi","additive","one"],init:"single",apply:"_applySelectionMode"},dragSelection:{check:"Boolean",init:false,apply:"_applyDragSelection"},quickSelection:{check:"Boolean",init:false,apply:"_applyQuickSelection"}},members:{__manager:null,selectAll:function(){this.__manager.selectAll();},select:function(item){this.__manager.selectItem(item);},isSelected:function(item){this.__manager.isSelected(item);},addToSelection:function(item){this.__manager.addItem(item);},removeFromSelection:function(item){this.__manager.removeItem(item);},selectRange:function(begin,end){this.__manager.selectItemRange(begin,end);},clearSelection:function(){this.__manager.clearSelection();},replaceSelection:function(items){this.__manager.replaceSelection(items);},getSelectedItem:function(){return this.__manager.getSelectedItem();},getSelection:function(){return this.__manager.getSelection();},getSortedSelection:function(){return this.__manager.getSortedSelection();},isSelectionEmpty:function(){return this.__manager.isSelectionEmpty();},getSelectionContext:function(){return this.__manager.getSelectionContext();},_getManager:function(){return this.__manager;},_applySelectionMode:function(value,old){this.__manager.setMode(value);},_applyDragSelection:function(value,old){this.__manager.setDrag(value);},_applyQuickSelection:function(value,old){this.__manager.setQuick(value);},_onSelectionChange:function(e){this.fireDataEvent("changeSelection",e.getData());}},destruct:function(){this._disposeObjects("__manager");}});qx.Mixin.define("qx.ui.core.MContentPadding",{properties:{contentPaddingTop:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingRight:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingBottom:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPaddingLeft:{check:"Integer",init:0,apply:"_applyContentPadding",themeable:true},contentPadding:{group:["contentPaddingTop","contentPaddingRight","contentPaddingBottom","contentPaddingLeft"],mode:"shorthand",themeable:true}},members:{__contentPaddingSetter:{contentPaddingTop:"setPaddingTop",contentPaddingRight:"setPaddingRight",contentPaddingBottom:"setPaddingBottom",contentPaddingLeft:"setPaddingLeft"},__contentPaddingResetter:{contentPaddingTop:"resetPaddingTop",contentPaddingRight:"resetPaddingRight",contentPaddingBottom:"resetPaddingBottom",contentPaddingLeft:"resetPaddingLeft"},_applyContentPadding:function(value,old,name){var target=this._getContentPaddingTarget();if(value==null){var resetter=this.__contentPaddingResetter[name];target[resetter]();}else{var setter=this.__contentPaddingSetter[name];target[setter](value);}}}});qx.Class.define("qx.ui.core.selection.Abstract",{type:"abstract",extend:qx.core.Object,construct:function(){this.base(arguments);this.__selection={};},events:{"changeSelection":"qx.event.type.Data"},properties:{mode:{check:["single","multi","additive","one"],init:"single",apply:"_applyMode"},drag:{check:"Boolean",init:false},quick:{check:"Boolean",init:false}},members:{__scrollStepX:0,__scrollStepY:0,__scrollTimer:null,__frameScroll:null,__lastRelX:null,__lastRelY:null,__frameLocation:null,__dragStartX:null,__dragStartY:null,__inCapture:null,__mouseX:null,__mouseY:null,__moveDirectionX:null,__moveDirectionY:null,__selectionModified:null,__selectionContext:null,__leadItem:null,__selection:null,__anchorItem:null,__mouseDownOnSelected:null,getSelectionContext:function(){return this.__selectionContext;},selectAll:function(){this._selectAllItems();this._fireChange();},selectItem:function(item){this._setSelectedItem(item);var mode=this.getMode();if(mode!=="single"&&mode!=="one"){this._setLeadItem(item);this._setAnchorItem(item);}this._scrollItemIntoView(item);this._fireChange();},addItem:function(item){var mode=this.getMode();if(mode==="single"||mode==="one"){this._setSelectedItem(item);}else{if(!this._getAnchorItem()){this._setAnchorItem(item);}this._setLeadItem(item);this._addToSelection(item);}this._scrollItemIntoView(item);this._fireChange();},removeItem:function(item){this._removeFromSelection(item);if(this.getMode()==="one"&&this.isSelectionEmpty()){var first=this._getFirstSelectable();if(first){this.addItem(first);}}if(this._getLeadItem()==item){this._setLeadItem(null);}if(this._getAnchorItem()==item){this._setAnchorItem(null);}this._fireChange();},selectItemRange:function(begin,end){this._selectItemRange(begin,end);this._setAnchorItem(begin);this._setLeadItem(end);this._scrollItemIntoView(end);this._fireChange();},clearSelection:function(){if(this.getMode()=="one"){return;}this._clearSelection();this._setLeadItem(null);this._setAnchorItem(null);this._fireChange();},replaceSelection:function(items){this._clearSelection();this._setLeadItem(null);this._setAnchorItem(null);for(var i=0,l=items.length;i<l;i++){this._addToSelection(items[i]);}if(l>0){this._scrollItemIntoView(items[l-1]);}else if(this.getMode()=="one"){var firstItem=this._getFirstSelectable();if(firstItem){this._addToSelection(firstItem);}}this._fireChange();},getSelectedItem:function(){var mode=this.getMode();if(mode==="single"||mode==="one"){return this._getSelectedItem()||null;}throw new Error("The method getSelectedItem() is only supported in 'single' and 'one' selection mode!");},getSelection:function(){return qx.lang.Object.getValues(this.__selection);},getSortedSelection:function(){var children=this._getSelectables();var sel=qx.lang.Object.getValues(this.__selection);sel.sort(function(a,b){return children.indexOf(a)-children.indexOf(b);});return sel;},isItemSelected:function(item){var hash=this._selectableToHashCode(item);return !!this.__selection[hash];},isSelectionEmpty:function(){return qx.lang.Object.isEmpty(this.__selection);},_setLeadItem:function(value){var old=this.__leadItem;if(old){this._styleSelectable(old,"lead",false);}if(value){this._styleSelectable(value,"lead",true);}this.__leadItem=value;},_getLeadItem:function(){return this.__leadItem||null;},_setAnchorItem:function(value){var old=this.__anchorItem;if(old){this._styleSelectable(old,"anchor",false);}if(value){this._styleSelectable(value,"anchor",true);}this.__anchorItem=value;},_getAnchorItem:function(){return this.__anchorItem||null;},_isSelectable:function(item){throw new Error("Abstract method call: _isSelectable()");},_getSelectableFromTarget:function(target){return this._isSelectable(target)?target:null;},_selectableToHashCode:function(item){throw new Error("Abstract method call: _selectableToHashCode()");},_styleSelectable:function(item,type,enabled){throw new Error("Abstract method call: _styleSelectable()");},_capture:function(){throw new Error("Abstract method call: _capture()");},_releaseCapture:function(){throw new Error("Abstract method call: _releaseCapture()");},_getLocation:function(){throw new Error("Abstract method call: _getLocation()");},_getDimension:function(){throw new Error("Abstract method call: _getDimension()");},_getSelectableLocationX:function(item){throw new Error("Abstract method call: _getSelectableLocationX()");},_getSelectableLocationY:function(item){throw new Error("Abstract method call: _getSelectableLocationY()");},_getScroll:function(){throw new Error("Abstract method call: _getScroll()");},_scrollBy:function(xoff,yoff){throw new Error("Abstract method call: _scrollBy()");},_scrollItemIntoView:function(item){throw new Error("Abstract method call: _scrollItemIntoView()");},_getSelectables:function(){throw new Error("Abstract method call: _getSelectables()");},_getSelectableRange:function(item1,item2){throw new Error("Abstract method call: _getSelectableRange()");},_getFirstSelectable:function(){throw new Error("Abstract method call: _getFirstSelectable()");},_getLastSelectable:function(){throw new Error("Abstract method call: _getLastSelectable()");},_getRelatedSelectable:function(item,relation){throw new Error("Abstract method call: _getRelatedSelectable()");},_getPage:function(lead,up){throw new Error("Abstract method call: _getPage()");},_applyMode:function(value,old){this._setLeadItem(null);this._setAnchorItem(null);this._clearSelection();if(value==="one"){var first=this._getFirstSelectable();if(first){this._setSelectedItem(first);this._scrollItemIntoView(first);}}this._fireChange();},handleMouseOver:function(event){if(!this.getQuick()){return;}var mode=this.getMode();if(mode!=="one"&&mode!=="single"){return;}var item=this._getSelectableFromTarget(event.getTarget());if(!item){return;}this._setSelectedItem(item);this._fireChange("quick");},handleMouseDown:function(event){var item=this._getSelectableFromTarget(event.getTarget());if(!item){return;}var isCtrlPressed=event.isCtrlPressed()||(qx.bom.client.Platform.MAC&&event.isMetaPressed());var isShiftPressed=event.isShiftPressed();if(this.isItemSelected(item)&&!isShiftPressed&&!isCtrlPressed){this.__mouseDownOnSelected=item;return;}else{this.__mouseDownOnSelected=null;}this._scrollItemIntoView(item);switch(this.getMode()){case "single":case "one":this._setSelectedItem(item);break;case "additive":this._setLeadItem(item);this._setAnchorItem(item);this._toggleInSelection(item);break;case "multi":this._setLeadItem(item);if(isShiftPressed){var anchor=this._getAnchorItem();if(!anchor){this._setAnchorItem(anchor=this.getFirstItem());}this._selectItemRange(anchor,item,isCtrlPressed);}else if(isCtrlPressed){this._setAnchorItem(item);this._toggleInSelection(item);}else{this._setAnchorItem(item);this._setSelectedItem(item);}break;}var mode=this.getMode();if(this.getDrag()&&mode!=="single"&&mode!=="one"&&!isShiftPressed&&!isCtrlPressed){this.__frameLocation=this._getLocation();this.__frameScroll=this._getScroll();this.__dragStartX=event.getDocumentLeft()+this.__frameScroll.left;this.__dragStartY=event.getDocumentTop()+this.__frameScroll.top;this.__inCapture=true;this._capture();}this._fireChange("click");},handleMouseUp:function(event){var isCtrlPressed=event.isCtrlPressed()||(qx.bom.client.Platform.MAC&&event.isMetaPressed());var isShiftPressed=event.isShiftPressed();if(!isCtrlPressed&&!isShiftPressed&&this.__mouseDownOnSelected){var item=this._getSelectableFromTarget(event.getTarget());if(!item||!this.isItemSelected(item)){return;}var mode=this.getMode();if(mode==="additive"){this._removeFromSelection(item);}else{this._setSelectedItem(item);if(this.getMode()==="multi"){this._setLeadItem(item);this._setAnchorItem(item);}}}this._cleanup();},handleLoseCapture:function(event){this._cleanup();},handleMouseMove:function(event){if(!this.__inCapture){return;}this.__mouseX=event.getDocumentLeft();this.__mouseY=event.getDocumentTop();var dragX=this.__mouseX+this.__frameScroll.left;if(dragX>this.__dragStartX){this.__moveDirectionX=1;}else if(dragX<this.__dragStartX){this.__moveDirectionX=-1;}else{this.__moveDirectionX=0;}var dragY=this.__mouseY+this.__frameScroll.top;if(dragY>this.__dragStartY){this.__moveDirectionY=1;}else if(dragY<this.__dragStartY){this.__moveDirectionY=-1;}else{this.__moveDirectionY=0;}var location=this.__frameLocation;if(this.__mouseX<location.left){this.__scrollStepX=this.__mouseX-location.left;}else if(this.__mouseX>location.right){this.__scrollStepX=this.__mouseX-location.right;}else{this.__scrollStepX=0;}if(this.__mouseY<location.top){this.__scrollStepY=this.__mouseY-location.top;}else if(this.__mouseY>location.bottom){this.__scrollStepY=this.__mouseY-location.bottom;}else{this.__scrollStepY=0;}if(!this.__scrollTimer){this.__scrollTimer=new qx.event.Timer(100);this.__scrollTimer.addListener("interval",this._onInterval,this);}this.__scrollTimer.start();this._autoSelect();},handleAddItem:function(e){var item=e.getData();if(this.getMode()==="one"&&this.isSelectionEmpty()){this.addItem(item);}},handleRemoveItem:function(e){this.removeItem(e.getData());},_cleanup:function(){if(!this.getDrag()&&this.__inCapture){return;}delete this.__inCapture;delete this.__lastRelX;delete this.__lastRelY;this._releaseCapture();if(this.__scrollTimer){this.__scrollTimer.stop();}},_onInterval:function(e){this._scrollBy(this.__scrollStepX,this.__scrollStepY);this.__frameScroll=this._getScroll();this._autoSelect();},_autoSelect:function(){var inner=this._getDimension();var relX=Math.max(0,Math.min(this.__mouseX-this.__frameLocation.left,inner.width))+this.__frameScroll.left;var relY=Math.max(0,Math.min(this.__mouseY-this.__frameLocation.top,inner.height))+this.__frameScroll.top;if(this.__lastRelX===relX&&this.__lastRelY===relY){return;}this.__lastRelX=relX;this.__lastRelY=relY;var anchor=this._getAnchorItem();var moveX=this.__moveDirectionX,leadX=anchor;var nextX,locationX,countX=0;while(moveX!==0){nextX=moveX>0?this._getRelatedSelectable(leadX,"right"):this._getRelatedSelectable(leadX,"left");if(nextX){locationX=this._getSelectableLocationX(nextX);if((moveX>0&&locationX.left<=relX)||(moveX<0&&locationX.right>=relX)){leadX=nextX;countX++;continue;}}break;}var moveY=this.__moveDirectionY,leadY=anchor;var nextY,locationY,countY=0;while(moveY!==0){nextY=moveY>0?this._getRelatedSelectable(leadY,"under"):this._getRelatedSelectable(leadY,"above");if(nextY){locationY=this._getSelectableLocationY(nextY);if((moveY>0&&locationY.top<=relY)||(moveY<0&&locationY.bottom>=relY)){leadY=nextY;countY++;continue;}}break;}var lead=countX>countY?leadX:leadY;var mode=this.getMode();if(mode==="multi"){this._selectItemRange(anchor,lead);}else if(mode==="additive"){if(this.isItemSelected(anchor)){this._selectItemRange(anchor,lead,true);}else{this._deselectItemRange(anchor,lead);}this._setAnchorItem(lead);}this._fireChange("drag");},__navigationKeys:{Home:1,Down:1,Right:1,PageDown:1,End:1,Up:1,Left:1,PageUp:1},handleKeyPress:function(event){var current,next;var key=event.getKeyIdentifier();var mode=this.getMode();var isCtrlPressed=event.isCtrlPressed()||(qx.bom.client.Platform.MAC&&event.isMetaPressed());var isShiftPressed=event.isShiftPressed();var consumed=false;if(key==="A"&&isCtrlPressed){if(mode!=="single"&&mode!=="one"){this._selectAllItems();consumed=true;}}else if(key==="Escape"){if(mode!=="single"&&mode!=="one"){this._clearSelection();consumed=true;}}else if(key==="Space"){var lead=this._getLeadItem();if(lead&&!isShiftPressed){if(isCtrlPressed||mode==="additive"){this._toggleInSelection(lead);}else{this._setSelectedItem(lead);}consumed=true;}}else if(this.__navigationKeys[key]){consumed=true;if(mode==="single"||mode=="one"){current=this._getSelectedItem();}else{current=this._getLeadItem();}var first=this._getFirstSelectable();var last=this._getLastSelectable();if(current){switch(key){case "Home":next=first;break;case "End":next=last;break;case "Up":next=this._getRelatedSelectable(current,"above");break;case "Down":next=this._getRelatedSelectable(current,"under");break;case "Left":next=this._getRelatedSelectable(current,"left");break;case "Right":next=this._getRelatedSelectable(current,"right");break;case "PageUp":next=this._getPage(current,true);break;case "PageDown":next=this._getPage(current,false);break;}}else{switch(key){case "Home":case "Down":case "Right":case "PageDown":next=first;break;case "End":case "Up":case "Left":case "PageUp":next=last;break;}}if(next){switch(mode){case "single":case "one":this._setSelectedItem(next);break;case "additive":this._setLeadItem(next);break;case "multi":if(isShiftPressed){var anchor=this._getAnchorItem();if(!anchor){this._setAnchorItem(anchor=this._getFirstSelectable());}this._setLeadItem(next);this._selectItemRange(anchor,next,isCtrlPressed);}else{this._setAnchorItem(next);this._setLeadItem(next);if(!isCtrlPressed){this._setSelectedItem(next);}}break;}this._scrollItemIntoView(next);}}if(consumed){event.stop();this._fireChange("key");}},_selectAllItems:function(){var range=this._getSelectables();for(var i=0,l=range.length;i<l;i++){this._addToSelection(range[i]);}},_clearSelection:function(){var selection=this.__selection;for(var hash in selection){this._removeFromSelection(selection[hash]);}},_selectItemRange:function(item1,item2,extend){var range=this._getSelectableRange(item1,item2);if(!extend){var selected=this.__selection;var mapped=this.__rangeToMap(range);for(var hash in selected){if(!mapped[hash]){this._removeFromSelection(selected[hash]);}}}for(var i=0,l=range.length;i<l;i++){this._addToSelection(range[i]);}},_deselectItemRange:function(item1,item2){var range=this._getSelectableRange(item1,item2);for(var i=0,l=range.length;i<l;i++){this._removeFromSelection(range[i]);}},__rangeToMap:function(range){var mapped={};var item;for(var i=0,l=range.length;i<l;i++){item=range[i];mapped[this._selectableToHashCode(item)]=item;}return mapped;},_getSelectedItem:function(){for(var hash in this.__selection){return this.__selection[hash];}return null;},_setSelectedItem:function(item){this._clearSelection();this._addToSelection(item);},_addToSelection:function(item){var hash=this._selectableToHashCode(item);if(!this.__selection[hash]){this.__selection[hash]=item;this._styleSelectable(item,"selected",true);this.__selectionModified=true;}},_toggleInSelection:function(item){var hash=this._selectableToHashCode(item);if(!this.__selection[hash]){this.__selection[hash]=item;this._styleSelectable(item,"selected",true);}else{delete this.__selection[hash];this._styleSelectable(item,"selected",false);}this.__selectionModified=true;},_removeFromSelection:function(item){var hash=this._selectableToHashCode(item);if(this.__selection[hash]){delete this.__selection[hash];this._styleSelectable(item,"selected",false);this.__selectionModified=true;}},_fireChange:function(context){if(this.__selectionModified){this.__selectionContext=context||null;this.fireDataEvent("changeSelection",this.getSelection());delete this.__selectionModified;}}},destruct:function(){this._disposeObjects("__scrollTimer");this._disposeFields("__selection","__mouseDownOnSelected","__anchorItem","__leadItem");}});qx.Class.define("qx.ui.core.selection.Widget",{extend:qx.ui.core.selection.Abstract,construct:function(widget){this.base(arguments);this._widget=widget;},members:{_isSelectable:function(item){return item.isEnabled()&&item.getLayoutParent()===this._widget;},_selectableToHashCode:function(item){return item.$$hash;},_styleSelectable:function(item,type,enabled){enabled?item.addState(type):item.removeState(type);},_capture:function(){this._widget.capture();},_releaseCapture:function(){this._widget.releaseCapture();},_getLocation:function(){var elem=this._widget.getContentElement().getDomElement();return elem?qx.bom.element.Location.get(elem):null;},_getDimension:function(){return this._widget.getInnerSize();},_getSelectableLocationX:function(item){var computed=item.getBounds();if(computed){return {left:computed.left,right:computed.left+computed.width};}},_getSelectableLocationY:function(item){var computed=item.getBounds();if(computed){return {top:computed.top,bottom:computed.top+computed.height};}},_getScroll:function(){return {left:0,top:0};},_scrollBy:function(xoff,yoff){},_scrollItemIntoView:function(item){this._widget.scrollChildIntoView(item);},_getSelectables:function(){var children=this._widget.getChildren();var result=[];var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child.isEnabled()){result.push(child);}}return result;},_getSelectableRange:function(item1,item2){if(item1===item2){return [item1];}var children=this._widget.getChildren();var result=[];var active=false;var child;for(var i=0,l=children.length;i<l;i++){child=children[i];if(child===item1||child===item2){if(active){result.push(child);break;}else{active=true;}}if(active&&child.isEnabled()){result.push(child);}}return result;},_getFirstSelectable:function(){var children=this._widget.getChildren();for(var i=0,l=children.length;i<l;i++){if(children[i].isEnabled()){return children[i];}}return null;},_getLastSelectable:function(){var children=this._widget.getChildren();for(var i=children.length-1;i>0;i--){if(children[i].isEnabled()){return children[i];}}return null;},_getRelatedSelectable:function(item,relation){var vertical=this._widget.getOrientation()==="vertical";var children=this._widget.getChildren();var index=children.indexOf(item);var sibling;if((vertical&&relation==="above")||(!vertical&&relation==="left")){for(var i=index-1;i>=0;i--){sibling=children[i];if(sibling.isEnabled()){return sibling;}}}else if((vertical&&relation==="under")||(!vertical&&relation==="right")){for(var i=index+1;i<children.length;i++){sibling=children[i];if(sibling.isEnabled()){return sibling;}}}return null;},_getPage:function(lead,up){if(up){return this._getFirstSelectable();}else{return this._getLastSelectable();}}},destruct:function(){this._disposeFields("_widget");}});qx.Class.define("qx.ui.core.selection.ScrollArea",{extend:qx.ui.core.selection.Widget,members:{_isSelectable:function(item){return item.isEnabled()&&item.getLayoutParent()===this._widget.getChildrenContainer();},_getDimension:function(){return this._widget.getPaneSize();},_getScroll:function(){var widget=this._widget;return {left:widget.getScrollX(),top:widget.getScrollY()};},_scrollBy:function(xoff,yoff){var widget=this._widget;widget.scrollByX(xoff);widget.scrollByY(yoff);},_getPage:function(lead,up){var selectables=this._getSelectables();var length=selectables.length;var start=selectables.indexOf(lead);if(start===-1){throw new Error("Invalid lead item: "+lead);}var widget=this._widget;var scrollTop=widget.getScrollY();var innerHeight=widget.getInnerSize().height;var top,bottom,found;if(up){var min=scrollTop;var i=start;while(1){for(;i>=0;i--){top=widget.getItemTop(selectables[i]);if(top<min){found=i+1;break;}}if(found==null){var first=this._getFirstSelectable();return first==lead?null:first;}if(found>=start){min-=innerHeight+scrollTop-widget.getItemBottom(lead);found=null;continue;}return selectables[found];}}else{var max=innerHeight+scrollTop;var i=start;while(1){for(;i<length;i++){bottom=widget.getItemBottom(selectables[i]);if(bottom>max){found=i-1;break;}}if(found==null){var last=this._getLastSelectable();return last==lead?null:last;}if(found<=start){max+=widget.getItemTop(lead)-scrollTop;found=null;continue;}return selectables[found];}}}}});qx.Class.define("qx.ui.tree.SelectionManager",{extend:qx.ui.core.selection.ScrollArea,members:{_getSelectableLocationY:function(item){var computed=item.getBounds();if(computed){var top=this._widget.getItemOffset(item);return {top:top,bottom:top+computed.height};}},_isSelectable:function(item){return item instanceof qx.ui.tree.AbstractTreeItem;},_getSelectableFromTarget:function(target){return this._widget.getTreeItem(target);},_getSelectables:function(){return this._widget.getRoot().getItems(true,false,this._widget.getHideRoot());},_getSelectableRange:function(item1,item2){if(item1===item2){return [item1];}var selectables=this._getSelectables();var item1Index=selectables.indexOf(item1);var item2Index=selectables.indexOf(item2);if(item1Index<0||item2Index<0){return [];}if(item1Index<item2Index){return selectables.slice(item1Index,item2Index+1);}else{return selectables.slice(item2Index,item1Index+1);}},_getFirstSelectable:function(){return this._getSelectables()[0]||null;},_getLastSelectable:function(){var selectables=this._getSelectables();if(selectables.length>0){return selectables[selectables.length-1];}else{return null;}},_getRelatedSelectable:function(item,relation){switch(relation){case "above":return this._widget.getPreviousSiblingOf(item,false);case "under":return this._widget.getNextSiblingOf(item,false);case "left":if(item.isOpenable()&&item.isOpen()){item.setOpen(false);}break;case "right":if(item.isOpenable()&&!item.isOpen()){item.setOpen(true);}break;}return null;}}});qx.Class.define("qx.ui.tree.Tree",{extend:qx.ui.core.AbstractScrollArea,include:[qx.ui.core.MSelectionHandling,qx.ui.core.MContentPadding],construct:function(){this.base(arguments);this.__content=new qx.ui.container.Composite(new qx.ui.layout.VBox()).set({allowShrinkY:false,allowGrowX:true});this._getChildControl("pane").add(this.__content);this.initOpenMode();this.initRootOpenClose();},events:{addItem:"qx.event.type.Data",removeItem:"qx.event.type.Data"},properties:{openMode:{check:["click","dblclick","none"],init:"dblclick",apply:"_applyOpenMode",event:"changeOpenMode",themeable:true},root:{check:"qx.ui.tree.AbstractTreeItem",init:null,nullable:true,event:"changeRoot",apply:"_applyRoot"},hideRoot:{check:"Boolean",init:false,apply:"_applyHideRoot"},rootOpenClose:{check:"Boolean",init:false,apply:"_applyRootOpenClose"},appearance:{refine:true,init:"tree"},focusable:{refine:true,init:true}},members:{__content:null,SELECTION_MANAGER:qx.ui.tree.SelectionManager,getChildrenContainer:function(){return this.__content;},_applyRoot:function(value,old){var container=this.getChildrenContainer();if(old){container.remove(old);if(old.hasChildren()){container.remove(old.getChildrenContainer());}}if(value){container.add(value);if(value.hasChildren()){container.add(value.getChildrenContainer());}value.setVisibility(this.getHideRoot()?"excluded":"visible");value.recursiveAddToWidgetQueue();}},_applyHideRoot:function(value,old){var root=this.getRoot();if(!root){return;}root.setVisibility(value?"excluded":"visible");root.recursiveAddToWidgetQueue();},_applyRootOpenClose:function(value,old){var root=this.getRoot();if(!root){return;}root.recursiveAddToWidgetQueue();},_getContentPaddingTarget:function(){return this.__content;},getNextSiblingOf:function(treeItem,invisible){if((invisible!==false||treeItem.isOpen())&&treeItem.hasChildren()){return treeItem.getChildren()[0];}while(treeItem){var parent=treeItem.getParent();if(!parent){return null;}var parentChildren=parent.getChildren();var index=parentChildren.indexOf(treeItem);if(index>-1&&index<parentChildren.length-1){return parentChildren[index+1];}treeItem=parent;}return null;},getPreviousSiblingOf:function(treeItem,invisible){var parent=treeItem.getParent();if(!parent){return null;}if(this.getHideRoot()){if(parent==this.getRoot()){if(parent.getChildren()[0]==treeItem){return null;}}}else{if(treeItem==this.getRoot()){return null;}}var parentChildren=parent.getChildren();var index=parentChildren.indexOf(treeItem);if(index>0){var folder=parentChildren[index-1];while((invisible!==false||folder.isOpen())&&folder.hasChildren()){var children=folder.getChildren();folder=children[children.length-1];}return folder;}else{return parent;}},getItems:function(recursive,invisible){return this.getRoot().getItems(recursive,invisible,this.getHideRoot());},scrollChildIntoViewY:function(child,align,direct){if(!this.getNextSiblingOf(child,false)){this.scrollToY(1000000);}else{this.base(arguments,child,align,direct);}},getTreeItem:function(widget){while(widget){if(widget==this){return null;}if(widget instanceof qx.ui.tree.AbstractTreeItem){return widget;}widget=widget.getLayoutParent();}return null;},_applyOpenMode:function(value,old){if(old=="click"){this.removeListener("click",this._onOpen,this);}else if(old=="dblclick"){this.removeListener("dblclick",this._onOpen,this);}if(value=="click"){this.addListener("click",this._onOpen,this);}else if(value=="dblclick"){this.addListener("dblclick",this._onOpen,this);}},_onOpen:function(e){var treeItem=this.getTreeItem(e.getTarget());if(!treeItem||!treeItem.isOpenable()){return;}treeItem.setOpen(!treeItem.isOpen());e.stopPropagation();}},destruct:function(){this._disposeObjects("__content");}});qx.Class.define("qx.ui.layout.Grid",{extend:qx.ui.layout.Abstract,construct:function(spacingX,spacingY){this.base(arguments);this.__rowData=[];this.__colData=[];if(spacingX){this.setSpacingX(spacingX);}if(spacingY){this.setSpacingY(spacingY);}},properties:{spacingX:{check:"Integer",init:0,apply:"_applyLayoutChange"},spacingY:{check:"Integer",init:0,apply:"_applyLayoutChange"}},members:{__grid:null,__rowData:null,__colData:null,__colSpans:null,__rowSpans:null,__maxRowIndex:null,__maxColIndex:null,__rowHeights:null,__colWidths:null,verifyLayoutProperty:qx.core.Variant.select("qx.debug",{"on":function(item,name,value){var layoutProperties={"row":1,"column":1,"rowSpan":1,"colSpan":1};this.assert(layoutProperties[name]==1,"The property '"+name+"' is not supported by the grid layout!");this.assertInteger(value);this.assert(value>=0,"Value must be positive");},"off":null}),__buildGrid:function(){var grid=[];var colSpans=[];var rowSpans=[];var maxRowIndex=0;var maxColIndex=0;var children=this._getLayoutChildren();for(var i=0,l=children.length;i<l;i++){var child=children[i];var props=child.getLayoutProperties();var row=props.row;var column=props.column;props.colSpan=props.colSpan||1;props.rowSpan=props.rowSpan||1;if(row==null||column==null){throw new Error("The layout properties 'row' and 'column' must be defined!");}if(grid[row]&&grid[row][column]){throw new Error("There is already a widget in this cell ("+row+", "+column+")");}for(var x=column;x<column+props.colSpan;x++){for(var y=row;y<row+props.rowSpan;y++){if(grid[y]==undefined){grid[y]=[];}grid[y][x]=child;maxColIndex=Math.max(maxColIndex,x);maxRowIndex=Math.max(maxRowIndex,y);}}if(props.rowSpan>1){rowSpans.push(child);}if(props.colSpan>1){colSpans.push(child);}}for(var y=0;y<=maxRowIndex;y++){if(grid[y]==undefined){grid[y]=[];}}this.__grid=grid;this.__colSpans=colSpans;this.__rowSpans=rowSpans;this.__maxRowIndex=maxRowIndex;this.__maxColIndex=maxColIndex;delete this._invalidChildrenCache;},_setRowData:function(row,key,value){var rowData=this.__rowData[row];if(!rowData){this.__rowData[row]={};this.__rowData[row][key]=value;}else{rowData[key]=value;}},_setColumnData:function(column,key,value){var colData=this.__colData[column];if(!colData){this.__colData[column]={};this.__colData[column][key]=value;}else{colData[key]=value;}},setSpacing:function(spacing){this.setSpacingY(spacing);this.setSpacingX(spacing);},setColumnAlign:function(column,hAlign,vAlign){if(qx.core.Variant.isSet("qx.debug","on")){this.assertInArray(hAlign,["left","center","right"]);this.assertInArray(vAlign,["top","middle","bottom"]);}this._setColumnData(column,"hAlign",hAlign);this._setColumnData(column,"vAlign",vAlign);this._applyLayoutChange();return this;},getColumnAlign:function(column){var colData=this.__colData[column]||{};return {vAlign:colData.vAlign||"top",hAlign:colData.hAlign||"left"};},setRowAlign:function(row,hAlign,vAlign){if(qx.core.Variant.isSet("qx.debug","on")){this.assertInArray(hAlign,["left","center","right"]);this.assertInArray(vAlign,["top","middle","bottom"]);}this._setRowData(row,"hAlign",hAlign);this._setRowData(row,"vAlign",vAlign);this._applyLayoutChange();return this;},getRowAlign:function(row){var rowData=this.__rowData[row]||{};return {vAlign:rowData.vAlign||"top",hAlign:rowData.hAlign||"left"};},getCellWidget:function(row,column){if(this._invalidChildrenCache){this.__buildGrid();}return this.__grid[row][column]||null;},getCellAlign:function(row,column){var vAlign="top";var hAlign="left";var rowData=this.__rowData[row];var colData=this.__colData[column];var widget=this.__grid[row][column];if(widget){var widgetProps={vAlign:widget.getAlignY(),hAlign:widget.getAlignX()};}else{widgetProps={};}if(widgetProps.vAlign){vAlign=widgetProps.vAlign;}else if(rowData&&rowData.vAlign){vAlign=rowData.vAlign;}else if(colData&&colData.vAlign){vAlign=colData.vAlign;}if(widgetProps.hAlign){hAlign=widgetProps.hAlign;}else if(colData&&colData.hAlign){hAlign=colData.hAlign;}else if(rowData&&rowData.hAlign){hAlign=rowData.hAlign;}return {vAlign:vAlign,hAlign:hAlign};},setColumnFlex:function(column,flex){this._setColumnData(column,"flex",flex);this._applyLayoutChange();return this;},getColumnFlex:function(column){var colData=this.__colData[column]||{};return colData.flex!==undefined?colData.flex:0;},setRowFlex:function(row,flex){this._setRowData(row,"flex",flex);this._applyLayoutChange();return this;},getRowFlex:function(row){var rowData=this.__rowData[row]||{};var rowFlex=rowData.flex!==undefined?rowData.flex:0;return rowFlex;},setColumnMaxWidth:function(column,maxWidth){this._setColumnData(column,"maxWidth",maxWidth);this._applyLayoutChange();return this;},getColumnMaxWidth:function(column){var colData=this.__colData[column]||{};return colData.maxWidth!==undefined?colData.maxWidth:Infinity;},setColumnWidth:function(column,width){this._setColumnData(column,"width",width);this._applyLayoutChange();return this;},getColumnWidth:function(column){var colData=this.__colData[column]||{};return colData.width!==undefined?colData.width:null;},setColumnMinWidth:function(column,minWidth){this._setColumnData(column,"minWidth",minWidth);this._applyLayoutChange();return this;},getColumnMinWidth:function(column){var colData=this.__colData[column]||{};return colData.minWidth||0;},setRowMaxHeight:function(row,maxHeight){this._setRowData(row,"maxHeight",maxHeight);this._applyLayoutChange();return this;},getRowMaxHeight:function(row){var rowData=this.__rowData[row]||{};return rowData.maxHeight||Infinity;},setRowHeight:function(row,height){this._setRowData(row,"height",height);this._applyLayoutChange();return this;},getRowHeight:function(row){var rowData=this.__rowData[row]||{};return rowData.height!==undefined?rowData.height:null;},setRowMinHeight:function(row,minHeight){this._setRowData(row,"minHeight",minHeight);this._applyLayoutChange();return this;},getRowMinHeight:function(row){var rowData=this.__rowData[row]||{};return rowData.minHeight||0;},__getOuterSize:function(widget){var hint=widget.getSizeHint();var hMargins=widget.getMarginLeft()+widget.getMarginRight();var vMargins=widget.getMarginTop()+widget.getMarginBottom();var outerSize={height:hint.height+vMargins,width:hint.width+hMargins,minHeight:hint.minHeight+vMargins,minWidth:hint.minWidth+hMargins,maxHeight:hint.maxHeight+vMargins,maxWidth:hint.maxWidth+hMargins};return outerSize;},_fixHeightsRowSpan:function(rowHeights){var vSpacing=this.getSpacingY();for(var i=0,l=this.__rowSpans.length;i<l;i++){var widget=this.__rowSpans[i];var hint=this.__getOuterSize(widget);var widgetProps=widget.getLayoutProperties();var widgetRow=widgetProps.row;var prefSpanHeight=vSpacing*(widgetProps.rowSpan-1);var minSpanHeight=prefSpanHeight;var rowFlexes={};for(var j=0;j<widgetProps.rowSpan;j++){var row=widgetProps.row+j;var rowHeight=rowHeights[row];var rowFlex=this.getRowFlex(row);if(rowFlex>0){rowFlexes[row]={min:rowHeight.minHeight,value:rowHeight.height,max:rowHeight.maxHeight,flex:rowFlex};}prefSpanHeight+=rowHeight.height;minSpanHeight+=rowHeight.minHeight;}if(prefSpanHeight<hint.height){var rowIncrements=qx.ui.layout.Util.computeFlexOffsets(rowFlexes,hint.height,prefSpanHeight);for(var j=0;j<widgetProps.rowSpan;j++){var offset=rowIncrements[widgetRow+j]?rowIncrements[widgetRow+j].offset:0;rowHeights[widgetRow+j].height+=offset;}}if(minSpanHeight<hint.minHeight){var rowIncrements=qx.ui.layout.Util.computeFlexOffsets(rowFlexes,hint.minHeight,minSpanHeight);for(var j=0;j<widgetProps.rowSpan;j++){var offset=rowIncrements[widgetRow+j]?rowIncrements[widgetRow+j].offset:0;rowHeights[widgetRow+j].minHeight+=offset;}}}},_fixWidthsColSpan:function(colWidths){var hSpacing=this.getSpacingX();for(var i=0,l=this.__colSpans.length;i<l;i++){var widget=this.__colSpans[i];var hint=this.__getOuterSize(widget);var widgetProps=widget.getLayoutProperties();var widgetColumn=widgetProps.column;var prefSpanWidth=hSpacing*(widgetProps.colSpan-1);var minSpanWidth=prefSpanWidth;var colFlexes={};var offset;for(var j=0;j<widgetProps.colSpan;j++){var col=widgetProps.column+j;var colWidth=colWidths[col];var colFlex=this.getColumnFlex(col);if(colFlex>0){colFlexes[col]={min:colWidth.minWidth,value:colWidth.width,max:colWidth.maxWidth,flex:colFlex};}prefSpanWidth+=colWidth.width;minSpanWidth+=colWidth.minWidth;}if(prefSpanWidth<hint.width){var colIncrements=qx.ui.layout.Util.computeFlexOffsets(colFlexes,hint.width,prefSpanWidth);for(var j=0;j<widgetProps.colSpan;j++){offset=colIncrements[widgetColumn+j]?colIncrements[widgetColumn+j].offset:0;colWidths[widgetColumn+j].width+=offset;}}if(minSpanWidth<hint.minWidth){var colIncrements=qx.ui.layout.Util.computeFlexOffsets(colFlexes,hint.minWidth,minSpanWidth);for(var j=0;j<widgetProps.colSpan;j++){offset=colIncrements[widgetColumn+j]?colIncrements[widgetColumn+j].offset:0;colWidths[widgetColumn+j].minWidth+=offset;}}}},_getRowHeights:function(){if(this.__rowHeights!=null){return this.__rowHeights;}var rowHeights=[];var maxRowIndex=this.__maxRowIndex;var maxColIndex=this.__maxColIndex;for(var row=0;row<=maxRowIndex;row++){var minHeight=0;var height=0;var maxHeight=0;for(var col=0;col<=maxColIndex;col++){var widget=this.__grid[row][col];if(!widget){continue;}var widgetRowSpan=widget.getLayoutProperties().rowSpan||0;if(widgetRowSpan>1){continue;}var cellSize=this.__getOuterSize(widget);if(this.getRowFlex(row)>0){minHeight=Math.max(minHeight,cellSize.minHeight);}else{minHeight=Math.max(minHeight,cellSize.height);}height=Math.max(height,cellSize.height);}var minHeight=Math.max(minHeight,this.getRowMinHeight(row));var maxHeight=this.getRowMaxHeight(row);if(this.getRowHeight(row)!==null){var height=this.getRowHeight(row);}else{var height=Math.max(minHeight,Math.min(height,maxHeight));}rowHeights[row]={minHeight:minHeight,height:height,maxHeight:maxHeight};}if(this.__rowSpans.length>0){this._fixHeightsRowSpan(rowHeights);}this.__rowHeights=rowHeights;return rowHeights;},_getColWidths:function(){if(this.__colWidths!=null){return this.__colWidths;}var colWidths=[];var maxColIndex=this.__maxColIndex;var maxRowIndex=this.__maxRowIndex;for(var col=0;col<=maxColIndex;col++){var width=0;var minWidth=0;var maxWidth=Infinity;for(var row=0;row<=maxRowIndex;row++){var widget=this.__grid[row][col];if(!widget){continue;}var widgetColSpan=widget.getLayoutProperties().colSpan||0;if(widgetColSpan>1){continue;}var cellSize=this.__getOuterSize(widget);if(this.getColumnFlex(col)>0){minWidth=Math.max(minWidth,cellSize.minWidth);}else{minWidth=Math.max(minWidth,cellSize.width);}width=Math.max(width,cellSize.width);}var minWidth=Math.max(minWidth,this.getColumnMinWidth(col));var maxWidth=this.getColumnMaxWidth(col);if(this.getColumnWidth(col)!==null){var width=this.getColumnWidth(col);}else{var width=Math.max(minWidth,Math.min(width,maxWidth));}colWidths[col]={minWidth:minWidth,width:width,maxWidth:maxWidth};}if(this.__colSpans.length>0){this._fixWidthsColSpan(colWidths);}this.__colWidths=colWidths;return colWidths;},_getColumnFlexOffsets:function(width){var hint=this.getSizeHint();var diff=width-hint.width;if(diff==0){return {};}var colWidths=this._getColWidths();var flexibles={};for(var i=0,l=colWidths.length;i<l;i++){var col=colWidths[i];var colFlex=this.getColumnFlex(i);if((colFlex<=0)||(col.width==col.maxWidth&&diff>0)||(col.width==col.minWidth&&diff<0)){continue;}flexibles[i]={min:col.minWidth,value:col.width,max:col.maxWidth,flex:colFlex};}return qx.ui.layout.Util.computeFlexOffsets(flexibles,width,hint.width);},_getRowFlexOffsets:function(height){var hint=this.getSizeHint();var diff=height-hint.height;if(diff==0){return {};}var rowHeights=this._getRowHeights();var flexibles={};for(var i=0,l=rowHeights.length;i<l;i++){var row=rowHeights[i];var rowFlex=this.getRowFlex(i);if((rowFlex<=0)||(row.height==row.maxHeight&&diff>0)||(row.height==row.minHeight&&diff<0)){continue;}flexibles[i]={min:row.minHeight,value:row.height,max:row.maxHeight,flex:rowFlex};}return qx.ui.layout.Util.computeFlexOffsets(flexibles,height,hint.height);},renderLayout:function(availWidth,availHeight){if(this._invalidChildrenCache){this.__buildGrid();}var Util=qx.ui.layout.Util;var hSpacing=this.getSpacingX();var vSpacing=this.getSpacingY();var prefWidths=this._getColWidths();var colStretchOffsets=this._getColumnFlexOffsets(availWidth);var colWidths=[];var maxColIndex=this.__maxColIndex;var maxRowIndex=this.__maxRowIndex;var offset;for(var col=0;col<=maxColIndex;col++){offset=colStretchOffsets[col]?colStretchOffsets[col].offset:0;colWidths[col]=prefWidths[col].width+offset;}var prefHeights=this._getRowHeights();var rowStretchOffsets=this._getRowFlexOffsets(availHeight);var rowHeights=[];for(var row=0;row<=maxRowIndex;row++){offset=rowStretchOffsets[row]?rowStretchOffsets[row].offset:0;rowHeights[row]=prefHeights[row].height+offset;}var left=0;for(var col=0;col<=maxColIndex;col++){var top=0;for(var row=0;row<=maxRowIndex;row++){var widget=this.__grid[row][col];if(!widget){top+=rowHeights[row]+vSpacing;continue;}var widgetProps=widget.getLayoutProperties();if(widgetProps.row!==row||widgetProps.column!==col){top+=rowHeights[row]+vSpacing;continue;}var spanWidth=hSpacing*(widgetProps.colSpan-1);for(var i=0;i<widgetProps.colSpan;i++){spanWidth+=colWidths[col+i];}var spanHeight=vSpacing*(widgetProps.rowSpan-1);for(var i=0;i<widgetProps.rowSpan;i++){spanHeight+=rowHeights[row+i];}var cellHint=widget.getSizeHint();var marginTop=widget.getMarginTop();var marginLeft=widget.getMarginLeft();var marginBottom=widget.getMarginBottom();var marginRight=widget.getMarginRight();var cellWidth=Math.max(cellHint.minWidth,Math.min(spanWidth-marginLeft-marginRight,cellHint.maxWidth));var cellHeight=Math.max(cellHint.minHeight,Math.min(spanHeight-marginTop-marginBottom,cellHint.maxHeight));var cellAlign=this.getCellAlign(row,col);var cellLeft=left+Util.computeHorizontalAlignOffset(cellAlign.hAlign,cellWidth,spanWidth,marginLeft,marginRight);var cellTop=top+Util.computeVerticalAlignOffset(cellAlign.vAlign,cellHeight,spanHeight,marginTop,marginBottom);widget.renderLayout(cellLeft,cellTop,cellWidth,cellHeight);top+=rowHeights[row]+vSpacing;}left+=colWidths[col]+hSpacing;}},invalidateLayoutCache:function(){this.base(arguments);this.__colWidths=null;this.__rowHeights=null;},_computeSizeHint:function(){if(this._invalidChildrenCache){this.__buildGrid();}var colWidths=this._getColWidths();var minWidth=0,width=0;for(var i=0,l=colWidths.length;i<l;i++){var col=colWidths[i];if(this.getColumnFlex(i)>0){minWidth+=col.minWidth;}else{minWidth+=col.width;}width+=col.width;}var rowHeights=this._getRowHeights();var minHeight=0,height=0;for(var i=0,l=rowHeights.length;i<l;i++){var row=rowHeights[i];if(this.getRowFlex(i)>0){minHeight+=row.minHeight;}else{minHeight+=row.height;}height+=row.height;}var spacingX=this.getSpacingX()*(colWidths.length-1);var spacingY=this.getSpacingY()*(rowHeights.length-1);var hint={minWidth:minWidth+spacingX,width:width+spacingX,minHeight:minHeight+spacingY,height:height+spacingY};return hint;}},destruct:function(){this._disposeFields("__grid","__rowData","__colData","__colSpans","__rowSpans","__colWidths","__rowHeights");}});qx.Class.define("qx.ui.core.ScrollPane",{extend:qx.ui.core.Widget,construct:function(){this.base(arguments);this._setLayout(new qx.ui.layout.Grow());this.addListener("resize",this._onUpdate);var contentEl=this.getContentElement();contentEl.addListener("scroll",this._onScroll,this);contentEl.addListener("appear",this._onAppear,this);},events:{update:"qx.event.type.Event"},properties:{scrollX:{check:"typeof value=='number'&&value>=0&&value<=this.getScrollMaxX()",apply:"_applyScrollX",event:"scrollX",init:0},scrollY:{check:"typeof value=='number'&&value>=0&&value<=this.getScrollMaxY()",apply:"_applyScrollY",event:"scrollY",init:0}},members:{add:function(widget){var old=this._getChildren()[0];if(old){this._remove(old);old.removeListener("resize",this._onUpdate,this);}if(widget){this._add(widget);widget.addListener("resize",this._onUpdate,this);}},remove:function(widget){if(widget){this._remove(widget);widget.removeListener("resize",this._onUpdate,this);}},getChild:function(){return this._getChildren()[0]||null;},_onUpdate:function(e){this.fireEvent("update");},_onScroll:function(e){var contentEl=this.getContentElement();this.setScrollX(contentEl.getScrollX());this.setScrollY(contentEl.getScrollY());},_onAppear:function(e){var contentEl=this.getContentElement();var internalX=this.getScrollX();var domX=contentEl.getScrollX();if(internalX!=domX){contentEl.scrollToX(internalX);}var internalY=this.getScrollY();var domY=contentEl.getScrollY();if(internalY!=domY){contentEl.scrollToY(internalY);}},getItemTop:function(item){var top=0;do{top+=item.getBounds().top;item=item.getLayoutParent();}while(item&&item!==this);return top;},getItemBottom:function(item){return this.getItemTop(item)+item.getBounds().height;},getItemLeft:function(item){var left=0;var parent;do{left+=item.getBounds().left;parent=item.getLayoutParent();if(parent){left+=parent.getInsets().left;}item=parent;}while(item&&item!==this);return left;},getItemRight:function(item){return this.getItemLeft(item)+item.getBounds().width;},getScrollSize:function(){return this.getChild().getBounds();},getScrollMaxX:function(){var paneSize=this.getBounds();var scrollSize=this.getScrollSize();if(paneSize&&scrollSize){return Math.max(0,scrollSize.width-paneSize.width);}return 0;},getScrollMaxY:function(){var paneSize=this.getBounds();var scrollSize=this.getScrollSize();if(paneSize&&scrollSize){return Math.max(0,scrollSize.height-paneSize.height);}return 0;},scrollToX:function(value){var max=this.getScrollMaxX();if(value<0){value=0;}else if(value>max){value=max;}this.setScrollX(value);},scrollToY:function(value){var max=this.getScrollMaxY();if(value<0){value=0;}else if(value>max){value=max;}this.setScrollY(value);},scrollByX:function(x){this.scrollToX(this.getScrollX()+x);},scrollByY:function(y){this.scrollToY(this.getScrollY()+y);},_applyScrollX:function(value){this.getContentElement().scrollToX(value);},_applyScrollY:function(value){this.getContentElement().scrollToY(value);}}});qx.Class.define("qx.ui.core.ScrollBar",{extend:qx.ui.core.Widget,construct:function(orientation){this.base(arguments);this._createChildControl("button-begin");this._createChildControl("slider");this._createChildControl("button-end");if(orientation!=null){this.setOrientation(orientation);}else{this.initOrientation();}},properties:{appearance:{refine:true,init:"scrollbar"},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},maximum:{check:"PositiveInteger",apply:"_applyMaximum",init:100},position:{check:"typeof value==='number'&&value>=0&&value<=this.getMaximum()",init:0,apply:"_applyPosition",event:"scroll"},singleStep:{check:"Integer",init:20},pageStep:{check:"Integer",init:10,apply:"_applyPageStep"},knobFactor:{check:"PositiveNumber",apply:"_applyKnobFactor",nullable:true}},members:{_createChildControlImpl:function(id){var control;switch(id){case "slider":control=new qx.ui.core.ScrollSlider;control.setPageStep(100);control.setFocusable(false);control.addListener("changeValue",this._onChangeSliderValue,this);this._add(control,{flex:1});break;case "button-begin":control=new qx.ui.form.RepeatButton;control.setFocusable(false);control.addListener("execute",this._onExecuteBegin,this);this._add(control);break;case "button-end":control=new qx.ui.form.RepeatButton;control.setFocusable(false);control.addListener("execute",this._onExecuteEnd,this);this._add(control);break;}return control||this.base(arguments,id);},_applyMaximum:function(value){this._getChildControl("slider").setMaximum(value);},_applyPosition:function(value){this._getChildControl("slider").setValue(value);},_applyKnobFactor:function(value){this._getChildControl("slider").setKnobFactor(value);},_applyPageStep:function(value){this._getChildControl("slider").setPageStep(value);},_applyOrientation:function(value,old){var oldLayout=this._getLayout();if(oldLayout){oldLayout.dispose();}if(value==="horizontal"){this._setLayout(new qx.ui.layout.HBox());this.setAllowStretchX(true);this.setAllowStretchY(false);this.replaceState("vertical","horizontal");this._getChildControl("button-begin").replaceState("up","left");this._getChildControl("button-end").replaceState("down","right");}else{this._setLayout(new qx.ui.layout.VBox());this.setAllowStretchX(false);this.setAllowStretchY(true);this.replaceState("horizontal","vertical");this._getChildControl("button-begin").replaceState("left","up");this._getChildControl("button-end").replaceState("right","down");}this._getChildControl("slider").setOrientation(value);},scrollTo:function(position){this._getChildControl("slider").slideTo(position);},scrollBy:function(offset){this._getChildControl("slider").slideBy(offset);},scrollBySteps:function(steps){var size=this.getSingleStep();this._getChildControl("slider").slideBy(steps*size);},_onExecuteBegin:function(e){this.scrollBy(-this.getSingleStep());},_onExecuteEnd:function(e){this.scrollBy(this.getSingleStep());},_onChangeSliderValue:function(e){this.setPosition(e.getData());}}});qx.Class.define("qx.ui.form.Slider",{extend:qx.ui.core.Widget,implement:qx.ui.form.IFormElement,construct:function(orientation){this.base(arguments);this._setLayout(new qx.ui.layout.Canvas());this.addListener("keypress",this._onKeyPress);this.addListener("mousewheel",this._onMouseWheel);this.addListener("mousedown",this._onMouseDown);this.addListener("mouseup",this._onMouseUp);this.addListener("losecapture",this._onMouseUp);this.addListener("resize",this._onUpdate);this.addListener("contextmenu",this._onStopEvent);this.addListener("click",this._onStopEvent);this.addListener("dblclick",this._onStopEvent);if(orientation!=null){this.setOrientation(orientation);}else{this.initOrientation();}},properties:{appearance:{refine:true,init:"slider"},focusable:{refine:true,init:true},orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation"},name:{check:"String",nullable:true,event:"changeName"},value:{check:"typeof value==='number'&&value>=this.getMinimum()&&value<=this.getMaximum()",init:0,apply:"_applyValue",event:"changeValue"},minimum:{check:"Integer",init:0,apply:"_applyMinimum"},maximum:{check:"Integer",init:100,apply:"_applyMaximum"},singleStep:{check:"Integer",init:1},pageStep:{check:"Integer",init:10},knobFactor:{check:"Number",apply:"_applyKnobFactor",nullable:true}},members:{__sliderLocation:null,__knobLocation:null,__knobSize:null,__dragMode:null,__dragOffset:null,__trackingMode:null,__trackingDirection:null,__trackingEnd:null,__timer:null,_createChildControlImpl:function(id){var control;switch(id){case "knob":control=new qx.ui.core.Widget();control.addListener("resize",this._onUpdate,this);this._add(control);break;}return control||this.base(arguments,id);},_onMouseWheel:function(e){var direction=e.getWheelDelta()>0?1:-1;this.slideBy(direction*this.getSingleStep());e.stop();},_onKeyPress:function(e){var isHorizontal=this.getOrientation()==="horizontal";var backward=isHorizontal?"Left":"Up";var forward=isHorizontal?"Right":"Down";switch(e.getKeyIdentifier()){case forward:this.slideForward();break;case backward:this.slideBack();break;case "PageDown":this.slidePageForward();break;case "PageUp":this.slidePageBack();break;case "Home":this.slideToBegin();break;case "End":this.slideToEnd();break;default:return;}e.stop();},_onMouseDown:function(e){var isHorizontal=this.__isHorizontal;var knob=this._getChildControl("knob");var locationProperty=isHorizontal?"left":"top";var cursorLocation=isHorizontal?e.getDocumentLeft():e.getDocumentTop();var sliderLocation=this.__sliderLocation=qx.bom.element.Location.get(this.getContentElement().getDomElement())[locationProperty];var knobLocation=this.__knobLocation=qx.bom.element.Location.get(knob.getContainerElement().getDomElement())[locationProperty];if(e.getTarget()===knob){this.__dragMode=true;this.__dragOffset=cursorLocation+sliderLocation-knobLocation;}else{this.__trackingMode=true;this.__trackingDirection=cursorLocation<=knobLocation?-1:1;this.__computeTrackingEnd(e);this._onInterval();if(!this.__timer){this.__timer=new qx.event.Timer(100);this.__timer.addListener("interval",this._onInterval,this);}this.__timer.start();}this.addListener("mousemove",this._onMouseMove);this.capture();e.stopPropagation();},_onMouseUp:function(e){if(this.__dragMode){this.releaseCapture();delete this.__dragMode;delete this.__dragOffset;}else if(this.__trackingMode){this.__timer.stop();this.releaseCapture();delete this.__trackingMode;delete this.__trackingDirection;delete this.__trackingEnd;}this.removeListener("mousemove",this._onMouseMove);if(e.getType()==="mouseup"){e.stopPropagation();}},_onMouseMove:function(e){if(this.__dragMode){var dragStop=this.__isHorizontal?e.getDocumentLeft():e.getDocumentTop();var position=dragStop-this.__dragOffset;this.slideTo(this._positionToValue(position));}else if(this.__trackingMode){this.__computeTrackingEnd(e);}e.stopPropagation();},_onInterval:function(e){var value=this.getValue()+(this.__trackingDirection*this.getPageStep());if(value<this.getMinimum()){value=this.getMinimum();}else if(value>this.getMaximum()){value=this.getMaximum();}var slideBack=this.__trackingDirection==-1;if((slideBack&&value<=this.__trackingEnd)||(!slideBack&&value>=this.__trackingEnd)){value=this.__trackingEnd;}this.slideTo(value);},_onUpdate:function(e){var availSize=this.getInnerSize();var knobSize=this._getChildControl("knob").getBounds();var sizeProperty=this.__isHorizontal?"width":"height";this._updateKnobSize();this.__slidingSpace=availSize[sizeProperty]-knobSize[sizeProperty];this.__knobSize=knobSize[sizeProperty];this._updateKnobPosition();},__isHorizontal:false,__slidingSpace:0,__computeTrackingEnd:function(e){var isHorizontal=this.__isHorizontal;var cursorLocation=isHorizontal?e.getDocumentLeft():e.getDocumentTop();var sliderLocation=this.__sliderLocation;var knobLocation=this.__knobLocation;var knobSize=this.__knobSize;var position=cursorLocation-sliderLocation;if(cursorLocation>=knobLocation){position-=knobSize;}var value=this._positionToValue(position);var min=this.getMinimum();var max=this.getMaximum();if(value<min){value=min;}else if(value>max){value=max;}else{var old=this.getValue();var step=this.getPageStep();var method=this.__trackingDirection<0?"floor":"ceil";value=old+(Math[method]((value-old)/step)*step);}if(this.__trackingEnd==null||(this.__trackingDirection==-1&&value<=this.__trackingEnd)||(this.__trackingDirection==1&&value>=this.__trackingEnd)){this.__trackingEnd=value;}},_positionToValue:function(position){var avail=this.__slidingSpace;if(avail==null||avail==0){return 0;}var percent=position/avail;if(percent<0){percent=0;}else if(percent>1){percent=1;}var range=this.getMaximum()-this.getMinimum();return this.getMinimum()+Math.round(range*percent);},_valueToPosition:function(value){var avail=this.__slidingSpace;if(avail==null){return 0;}var range=this.getMaximum()-this.getMinimum();if(range==0){return 0;}var value=value-this.getMinimum();var percent=value/range;if(percent<0){percent=0;}else if(percent>1){percent=1;}return Math.round(avail*percent);},_updateKnobPosition:function(){this._setKnobPosition(this._valueToPosition(this.getValue()));},_setKnobPosition:function(position){var container=this._getChildControl("knob").getContainerElement();if(this.__isHorizontal){container.setStyle("left",position+"px",true);}else{container.setStyle("top",position+"px",true);}},_updateKnobSize:function(){var knobFactor=this.getKnobFactor();if(knobFactor==null){return;}var avail=this.getInnerSize();if(avail==null){return;}if(this.__isHorizontal){this._getChildControl("knob").setWidth(Math.round(knobFactor*avail.width));}else{this._getChildControl("knob").setHeight(Math.round(knobFactor*avail.height));}},slideToBegin:function(){this.slideTo(this.getMinimum());},slideToEnd:function(){this.slideTo(this.getMaximum());},slideForward:function(){this.slideBy(this.getSingleStep());},slideBack:function(){this.slideBy(-this.getSingleStep());},slidePageForward:function(){this.slideBy(this.getPageStep());},slidePageBack:function(){this.slideBy(-this.getPageStep());},slideBy:function(offset){this.slideTo(this.getValue()+offset);},slideTo:function(value){if(value<this.getMinimum()){value=this.getMinimum();}else if(value>this.getMaximum()){value=this.getMaximum();}else{value=this.getMinimum()+Math.round((value-this.getMinimum())/this.getSingleStep())*this.getSingleStep();}this.setValue(value);},_applyOrientation:function(value,old){var knob=this._getChildControl("knob");this.__isHorizontal=value==="horizontal";if(this.__isHorizontal){this.removeState("vertical");knob.removeState("vertical");this.addState("horizontal");knob.addState("horizontal");knob.setLayoutProperties({top:0,right:null,bottom:0});}else{this.removeState("horizontal");knob.removeState("horizontal");this.addState("vertical");knob.addState("vertical");knob.setLayoutProperties({right:0,bottom:null,left:0});}this._updateKnobPosition();},_applyKnobFactor:function(value,old){if(value!=null){this._updateKnobSize();}else{if(this.__isHorizontal){this._getChildControl("knob").resetWidth();}else{this._getChildControl("knob").resetHeight();}}},_applyValue:function(value,old){this._updateKnobPosition();},_applyMinimum:function(value,old){if(this.getValue()<value){this.setValue(value);}this._updateKnobPosition();},_applyMaximum:function(value,old){if(this.getValue()>value){this.setValue(value);}this._updateKnobPosition();}}});qx.Class.define("qx.ui.core.ScrollSlider",{extend:qx.ui.form.Slider,construct:function(orientation){this.base(arguments,orientation);this.removeListener("keypress",this._onKeyPress);this.removeListener("mousewheel",this._onMouseWheel);}});qx.Class.define("qx.ui.form.RepeatButton",{extend:qx.ui.form.Button,construct:function(label,icon){this.base(arguments,label,icon);this.__timer=new qx.event.Timer(this.getInterval());this.__timer.addListener("interval",this._onInterval,this);},events:{"execute":"qx.event.type.Event","press":"qx.event.type.Event","release":"qx.event.type.Event"},properties:{interval:{check:"Integer",init:100},firstInterval:{check:"Integer",init:500},minTimer:{check:"Integer",init:20},timerDecrease:{check:"Integer",init:2}},members:{__currentInterval:null,__executed:null,__timer:null,press:function(){if(this.isEnabled()){if(!this.hasState("pressed")){this.__startInternalTimer();}this.removeState("abandoned");this.addState("pressed");}},release:function(fireExecuteEvent){if(!this.isEnabled()){return;}if(this.hasState("pressed")){if(!this.__executed){this.execute();}}this.removeState("pressed");this.removeState("abandoned");this.__stopInternalTimer();},_applyEnabled:function(value,old){this.base(arguments,value,old);if(!value){this.removeState("pressed");this.removeState("abandoned");this.__stopInternalTimer();}},_onMouseOver:function(e){if(!this.isEnabled()||e.getTarget()!==this){return;}if(this.hasState("abandoned")){this.removeState("abandoned");this.addState("pressed");this.__timer.start();}this.addState("hovered");},_onMouseOut:function(e){if(!this.isEnabled()||e.getTarget()!==this){return;}this.removeState("hovered");if(this.hasState("pressed")){this.removeState("pressed");this.addState("abandoned");this.__timer.stop();this.__currentInterval=this.getInterval();}},_onMouseDown:function(e){if(!e.isLeftPressed()){return;}this.capture();this.__startInternalTimer();e.stopPropagation();},_onMouseUp:function(e){this.releaseCapture();if(!this.hasState("abandoned")){this.addState("hovered");if(this.hasState("pressed")&&!this.__executed){this.execute();}}this.__stopInternalTimer();e.stopPropagation();},_onKeyUp:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":if(this.hasState("pressed")){if(!this.__executed){this.execute();}this.removeState("pressed");this.removeState("abandoned");e.stopPropagation();this.__stopInternalTimer();}}},_onKeyDown:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":this.removeState("abandoned");this.addState("pressed");e.stopPropagation();this.__startInternalTimer();}},_onInterval:function(e){this.__timer.stop();if(this.__currentInterval==null){this.__currentInterval=this.getInterval();}this.__currentInterval=(Math.max(this.getMinTimer(),this.__currentInterval-this.getTimerDecrease()));this.__timer.restartWith(this.__currentInterval);this.__executed=true;this.fireEvent("execute");},__startInternalTimer:function(){this.fireEvent("press");this.__executed=false;this.__timer.setInterval(this.getFirstInterval());this.__timer.start();this.removeState("abandoned");this.addState("pressed");},__stopInternalTimer:function(){this.fireEvent("release");this.__timer.stop();this.__currentInterval=null;this.removeState("abandoned");this.removeState("pressed");}},destruct:function(){this._disposeObjects("__timer");}});qx.Class.define("qx.ui.tree.AbstractTreeItem",{extend:qx.ui.core.Widget,type:"abstract",construct:function(){this.base(arguments);this.__children=[];this._setLayout(new qx.ui.layout.HBox());this._addWidgets();this.initOpen();},properties:{open:{check:"Boolean",init:false,event:"changeOpen",apply:"_applyOpen"},openSymbolMode:{check:["always","never","auto"],init:"auto",event:"changeOpenSymbolMode",apply:"_applyOpenSymbolMode"},indent:{check:"Integer",init:19,apply:"_applyIndent",themeable:true},parent:{check:"qx.ui.tree.AbstractTreeItem",nullable:true},icon:{check:"String",apply:"_applyIcon",nullable:true,themeable:true},label:{check:"String",apply:"_applyLabel",init:"",dispose:true}},members:{__children:null,__childrenContainer:null,__labelAdded:null,__iconAdded:null,__spacer:null,_addWidgets:function(){throw new Error("Abstract method call.");},_createChildControlImpl:function(id){var control;switch(id){case "label":control=new qx.ui.basic.Label().set({appearance:this.getAppearance()+"-label",alignY:"middle"});break;case "icon":control=new qx.ui.basic.Image().set({appearance:this.getAppearance()+"-icon",alignY:"middle"});break;case "open":control=new qx.ui.tree.FolderOpenButton().set({alignY:"middle"});control.addListener("changeOpen",this._onChangeOpen,this);control.addListener("resize",this._updateIndent,this);break;}return control||this.base(arguments,id);},getTree:function(){var treeItem=this;while(treeItem.getParent()){treeItem=treeItem.getParent();}var tree=treeItem.getLayoutParent()?treeItem.getLayoutParent().getLayoutParent():0;if(tree&&tree instanceof qx.ui.core.ScrollPane){return tree.getLayoutParent();}return null;},addWidget:function(widget,options){this._add(widget,options);},addSpacer:function(){if(!this.__spacer){this.__spacer=new qx.ui.core.Spacer();}else{this._remove(this.__spacer);}this._add(this.__spacer);},addOpenButton:function(){this._add(this._getChildControl("open"));},_onChangeOpen:function(e){if(this.isOpenable()){this.setOpen(e.getData());}},addIcon:function(){var icon=this._getChildControl("icon");if(this.__iconAdded){this._remove(icon);}this._add(icon);this.__iconAdded=true;},addLabel:function(text){var label=this._getChildControl("label");if(this.__labelAdded){this._remove(label);}if(text){this.setLabel(text);}else{label.setContent(this.getLabel());}this._add(label);this.__labelAdded=true;},addState:function(state){this.base(arguments,state);var children=this._getChildren();for(var i=0,l=children.length;i<l;i++){var child=children[i];if(child.addState){children[i].addState(state);}}},removeState:function(state){this.base(arguments,state);var children=this._getChildren();for(var i=0,l=children.length;i<l;i++){var child=children[i];if(child.addState){children[i].removeState(state);}}},_applyIcon:function(value,old){this._getChildControl("icon").setSource(value);},_applyLabel:function(value,old){this._getChildControl("label").setContent(value);},_applyOpen:function(value,old){if(this.hasChildren()){this.getChildrenContainer().setVisibility(value?"visible":"excluded");}var open=this._getChildControl("open",true);if(open){open.setOpen(value);}value?this.addState("opened"):this.removeState("opened");},isOpenable:function(){var openMode=this.getOpenSymbolMode();return (openMode==="always"||openMode==="auto"&&this.hasChildren());},_shouldShowOpenSymbol:function(){var open=this._getChildControl("open",true);if(!open){return false;}var tree=this.getTree();if(!tree.getRootOpenClose()){if(tree.getHideRoot()){if(tree.getRoot()==this.getParent()){return false;}}else{if(tree.getRoot()==this){return false;}}}return this.isOpenable();},_applyOpenSymbolMode:function(value,old){this._updateIndent();},_updateIndent:function(){if(!this.getTree()){return;}var openWidth=0;var open=this._getChildControl("open",true);if(open){if(this._shouldShowOpenSymbol()){open.show();openWidth=open.getSizeHint().width;}else{open.exclude();}}this.__spacer.setWidth((this.getLevel()+1)*this.getIndent()-openWidth);},_applyIndent:function(value,old){this._updateIndent();},getLevel:function(){var tree=this.getTree();if(!tree){return;}var treeItem=this;var level=-1;while(treeItem){treeItem=treeItem.getParent();level+=1;}if(tree.getHideRoot()){level-=1;}if(!tree.getRootOpenClose()){level-=1;}return level;},syncWidget:function(){this._updateIndent();},getChildrenContainer:function(){if(!this.__childrenContainer){this.__childrenContainer=new qx.ui.container.Composite(new qx.ui.layout.VBox()).set({visibility:this.isOpen()?"visible":"excluded"});}return this.__childrenContainer;},getParentChildrenContainer:function(){if(this.getParent()){return this.getParent().getChildrenContainer();}else if(this.getLayoutParent()){return this.getLayoutParent();}else{return null;}},getChildren:function(){return this.__children;},hasChildren:function(){return this.__children?this.__children.length>0:false;},getItems:function(recursive,invisible,ignoreFirst){if(ignoreFirst!==false){var items=[];}else{var items=[this];}var addChildren=this.hasChildren()&&(invisible!==false||this.isOpen());if(addChildren){var children=this.getChildren();if(recursive===false){items=items.concat(children);}else{for(var i=0,chl=children.length;i<chl;i++){items=items.concat(children[i].getItems(recursive,invisible,false));}}}return items;},recursiveAddToWidgetQueue:function(){var children=this.getItems(true,true,false);for(var i=0,l=children.length;i<l;i++){qx.ui.core.queue.Widget.add(children[i]);}},__addChildrenToParent:function(){if(this.getParentChildrenContainer()){this.getParentChildrenContainer()._addAfter(this.getChildrenContainer(),this);}},add:function(varargs){var container=this.getChildrenContainer();var tree=this.getTree();for(var i=0,l=arguments.length;i<l;i++){var treeItem=arguments[i];var oldParent=treeItem.getParent();if(oldParent){oldParent.remove(treeItem);}treeItem.setParent(this);var hasChildren=this.hasChildren();container.add(treeItem);if(treeItem.hasChildren()){container.add(treeItem.getChildrenContainer());}this.__children.push(treeItem);if(!hasChildren){this.__addChildrenToParent();}if(tree){treeItem.recursiveAddToWidgetQueue();tree.fireNonBubblingEvent("addItem",qx.event.type.Data,[treeItem]);}}if(tree){qx.ui.core.queue.Widget.add(this);}},addAt:function(treeItem,index){if(qx.core.Variant.isSet("qx.debug","on")){this.assert(index<=this.__children.length&&index>=0,"Invalid child index: "+index);}if(index==this.__children.length){this.add(treeItem);return;}var oldParent=treeItem.getParent();if(oldParent){oldParent.remove(treeItem);}var container=this.getChildrenContainer();treeItem.setParent(this);var hasChildren=this.hasChildren();var nextItem=this.__children[index];container.addBefore(treeItem,nextItem);if(treeItem.hasChildren()){container.addAfter(treeItem.getChildrenContainer(),treeItem);}qx.lang.Array.insertAt(this.__children,treeItem,index);if(!hasChildren){this.__addChildrenToParent();}if(this.getTree()){treeItem.recursiveAddToWidgetQueue();qx.ui.core.queue.Widget.add(this);}},addBefore:function(treeItem,before){if(qx.core.Variant.isSet("qx.debug","on")){this.assert(this.__children.indexOf(before)>=0);}this.addAt(treeItem,this.__children.indexOf(before));},addAfter:function(treeItem,after){if(qx.core.Variant.isSet("qx.debug","on")){this.assert(this.__children.indexOf(after)>=0);}this.addAt(treeItem,this.__children.indexOf(after)+1);},addAtBegin:function(treeItem){this.addAt(treeItem,0);},remove:function(varargs){for(var i=0,l=arguments.length;i<l;i++){var treeItem=arguments[i];if(this.__children.indexOf(treeItem)==-1){this.warn("Cannot remove treeitem '"+treeItem+"'. It is not a child of this tree item.");return;}var container=this.getChildrenContainer();if(treeItem.hasChildren()){container.remove(treeItem.getChildrenContainer());}qx.lang.Array.remove(this.__children,treeItem);treeItem.setParent(null);container.remove(treeItem);}var tree=this.getTree();if(tree){tree.fireNonBubblingEvent("addItem",qx.event.type.Data,[treeItem]);}qx.ui.core.queue.Widget.add(this);},removeAt:function(index){var item=this.__children[index];if(item){this.remove(item);}},removeAll:function(){for(var i=this.__children.length-1;i>=0;i--){this.remove(this.__children[i]);}}},destruct:function(){this._disposeArray("__children");this._disposeObjects("__spacer","__childrenContainer");}});qx.Class.define("qx.ui.tree.FolderOpenButton",{extend:qx.ui.basic.Image,include:qx.ui.core.MExecutable,construct:function(){this.base(arguments);this.initOpen();this.addListener("keypress",this._onKeyPress);this.addListener("click",this._onClick);this.addListener("mousedown",this._stopPropagation,this);this.addListener("mouseup",this._stopPropagation,this);},properties:{open:{check:"Boolean",init:false,event:"changeOpen",apply:"_applyOpen"}},members:{_applyOpen:function(value,old){value?this.addState("opened"):this.removeState("opened");this.execute();},_onKeyPress:function(e){switch(e.getKeyIdentifier()){case "Enter":case "Space":this.toggleOpen();e.stopPropagation();}},_stopPropagation:function(e){e.stopPropagation();},_onClick:function(e){this.toggleOpen();e.stopPropagation();}}});qx.Class.define("qx.ui.tree.TreeFolder",{extend:qx.ui.tree.AbstractTreeItem,construct:function(label){this.base(arguments);if(label){this.setLabel(label);}},properties:{appearance:{refine:true,init:"tree-folder"}},members:{_addWidgets:function(){this.addSpacer();this.addOpenButton();this.addIcon();this.addLabel();}}});qx.Class.define("qx.ui.tree.TreeFile",{extend:qx.ui.tree.AbstractTreeItem,construct:function(label){this.base(arguments);if(label){this.setLabel(label);}},properties:{appearance:{refine:true,init:"tree-file"}},members:{_addWidgets:function(){this.addSpacer();this.addIcon();this.addLabel();}}});qx.Class.define("qx.io.remote.Request",{extend:qx.core.Object,construct:function(vUrl,vMethod,vResponseType){this.base(arguments);this._requestHeaders={};this._parameters={};this._formFields={};if(vUrl!==undefined){this.setUrl(vUrl);}if(vMethod!==undefined){this.setMethod(vMethod);}if(vResponseType!==undefined){this.setResponseType(vResponseType);}this.setProhibitCaching(true);this._seqNum=++qx.io.remote.Request._seqNum;},events:{"created":"qx.event.type.Event","configured":"qx.event.type.Event","sending":"qx.event.type.Event","receiving":"qx.event.type.Event","completed":"qx.io.remote.Response","aborted":"qx.io.remote.Response","failed":"qx.io.remote.Response","timeout":"qx.io.remote.Response"},statics:{_seqNum:0},properties:{url:{check:"String",init:""},method:{check:["GET","POST","PUT","HEAD","DELETE"],apply:"_applyMethod",init:"GET"},asynchronous:{check:"Boolean",init:true},data:{check:"String",nullable:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},state:{check:["configured","queued","sending","receiving","completed","aborted","timeout","failed"],init:"configured",apply:"_applyState",event:"changeState"},responseType:{check:["text/plain","text/javascript","application/json","application/xml","text/html"],init:"text/plain",apply:"_applyResponseType"},timeout:{check:"Integer",nullable:true},prohibitCaching:{check:"Boolean",init:true,apply:"_applyProhibitCaching"},crossDomain:{check:"Boolean",init:false},fileUpload:{check:"Boolean",init:false},transport:{check:"qx.io.remote.Exchange",nullable:true},useBasicHttpAuth:{check:"Boolean",init:false}},members:{send:function(){qx.io.remote.RequestQueue.getInstance().add(this);},abort:function(){qx.io.remote.RequestQueue.getInstance().abort(this);},reset:function(){switch(this.getState()){case "sending":case "receiving":this.error("Aborting already sent request!");case "queued":this.abort();break;}},isConfigured:function(){return this.getState()==="configured";},isQueued:function(){return this.getState()==="queued";},isSending:function(){return this.getState()==="sending";},isReceiving:function(){return this.getState()==="receiving";},isCompleted:function(){return this.getState()==="completed";},isAborted:function(){return this.getState()==="aborted";},isTimeout:function(){return this.getState()==="timeout";},isFailed:function(){return this.getState()==="failed";},__forwardEvent:function(e){var clonedEvent=e.clone();clonedEvent.setTarget(this);this.dispatchEvent(clonedEvent);},_onqueued:function(e){this.setState("queued");this.__forwardEvent(e);},_onsending:function(e){this.setState("sending");this.__forwardEvent(e);},_onreceiving:function(e){this.setState("receiving");this.__forwardEvent(e);},_oncompleted:function(e){this.setState("completed");this.__forwardEvent(e);this.dispose();},_onaborted:function(e){this.setState("aborted");this.__forwardEvent(e);this.dispose();},_ontimeout:function(e){this.setState("timeout");this.__forwardEvent(e);this.dispose();},_onfailed:function(e){this.setState("failed");this.__forwardEvent(e);this.dispose();},_applyState:function(value,old){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("State: "+value);}}},_applyProhibitCaching:function(value,old){if(value){this.setParameter("nocache",new Date().valueOf());this.setRequestHeader("Pragma","no-cache");this.setRequestHeader("Cache-Control","no-cache");}else{this.removeParameter("nocache");this.removeRequestHeader("Pragma");this.removeRequestHeader("Cache-Control");}},_applyMethod:function(value,old){if(value==="POST"){this.setRequestHeader("Content-Type","application/x-www-form-urlencoded");}else{this.removeRequestHeader("Content-Type");}},_applyResponseType:function(value,old){this.setRequestHeader("X-Qooxdoo-Response-Type",value);},setRequestHeader:function(vId,vValue){this._requestHeaders[vId]=vValue;},removeRequestHeader:function(vId){delete this._requestHeaders[vId];},getRequestHeader:function(vId){return this._requestHeaders[vId]||null;},getRequestHeaders:function(){return this._requestHeaders;},setParameter:function(vId,vValue){this._parameters[vId]=vValue;},removeParameter:function(vId){delete this._parameters[vId];},getParameter:function(vId){return this._parameters[vId]||null;},getParameters:function(){return this._parameters;},setFormField:function(vId,vValue){this._formFields[vId]=vValue;},removeFormField:function(vId){delete this._formFields[vId];},getFormField:function(vId){return this._formFields[vId]||null;},getFormFields:function(){return this._formFields;},getSequenceNumber:function(){return this._seqNum;}},destruct:function(){this.setTransport(null);this._disposeFields("_requestHeaders","_parameters","_formFields");}});qx.Class.define("qx.io.remote.RequestQueue",{type:"singleton",extend:qx.core.Object,construct:function(){this.base(arguments);this._queue=[];this._active=[];this._totalRequests=0;this._timer=new qx.event.Timer(500);this._timer.addListener("interval",this._oninterval,this);},properties:{enabled:{init:true,check:"Boolean",apply:"_applyEnabled"},maxTotalRequests:{check:"Integer",nullable:true},maxConcurrentRequests:{check:"Integer",init:3},defaultTimeout:{check:"Integer",init:5000}},members:{_debug:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){var vText=this._active.length+"/"+(this._queue.length+this._active.length);this.debug("Progress: "+vText);window.status="Request-Queue Progress: "+vText;}}},_check:function(){this._debug();if(this._active.length==0&&this._queue.length==0){this._timer.stop();}if(!this.getEnabled()){return;}if(this._active.length>=this.getMaxConcurrentRequests()||this._queue.length==0){return;}if(this.getMaxTotalRequests()!=null&&this._totalRequests>=this.getMaxTotalRequests()){return;}var vRequest=this._queue.shift();var vTransport=new qx.io.remote.Exchange(vRequest);this._totalRequests++;this._active.push(vTransport);this._debug();vTransport.addListener("sending",vRequest._onsending,vRequest);vTransport.addListener("receiving",vRequest._onreceiving,vRequest);vTransport.addListener("completed",vRequest._oncompleted,vRequest);vTransport.addListener("aborted",vRequest._onaborted,vRequest);vTransport.addListener("timeout",vRequest._ontimeout,vRequest);vTransport.addListener("failed",vRequest._onfailed,vRequest);vTransport.addListener("sending",this._onsending,this);vTransport.addListener("completed",this._oncompleted,this);vTransport.addListener("aborted",this._oncompleted,this);vTransport.addListener("timeout",this._oncompleted,this);vTransport.addListener("failed",this._oncompleted,this);vTransport._start=(new Date).valueOf();vTransport.send();if(this._queue.length>0){this._check();}},_remove:function(vTransport){qx.lang.Array.remove(this._active,vTransport);vTransport.dispose();this._check();},_activeCount:0,_onsending:function(e){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this._activeCount++;e.getTarget()._counted=true;this.debug("ActiveCount: "+this._activeCount);}}},_oncompleted:function(e){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){if(e.getTarget()._counted){this._activeCount--;this.debug("ActiveCount: "+this._activeCount);}}}this._remove(e.getTarget());},_oninterval:function(e){var vActive=this._active;if(vActive.length==0){this._timer.stop();return;}var vCurrent=(new Date).valueOf();var vTransport;var vRequest;var vDefaultTimeout=this.getDefaultTimeout();var vTimeout;var vTime;for(var i=vActive.length-1;i>=0;i--){vTransport=vActive[i];vRequest=vTransport.getRequest();if(vRequest.isAsynchronous()){vTimeout=vRequest.getTimeout();if(vTimeout==0){continue;}if(vTimeout==null){vTimeout=vDefaultTimeout;}vTime=vCurrent-vTransport._start;if(vTime>vTimeout){this.warn("Timeout: transport "+vTransport.toHashCode());this.warn(vTime+"ms > "+vTimeout+"ms");vTransport.timeout();}}}},_applyEnabled:function(value,old){if(value){this._check();}this._timer.setEnabled(value);},add:function(vRequest){vRequest.setState("queued");this._queue.push(vRequest);this._check();if(this.getEnabled()){this._timer.start();}},abort:function(vRequest){var vTransport=vRequest.getTransport();if(vTransport){vTransport.abort();}else if(qx.lang.Array.contains(this._queue,vRequest)){qx.lang.Array.remove(this._queue,vRequest);}}},destruct:function(){this._disposeArray("_active");this._disposeObjects("_timer");this._disposeFields("_queue");}});qx.Class.define("qx.io.remote.Exchange",{extend:qx.core.Object,construct:function(vRequest){this.base(arguments);this.setRequest(vRequest);vRequest.setTransport(this);},events:{"sending":"qx.event.type.Event","receiving":"qx.event.type.Event","completed":"qx.io.remote.Response","aborted":"qx.io.remote.Response","failed":"qx.io.remote.Response","timeout":"qx.io.remote.Response"},statics:{typesOrder:["qx.io.remote.transport.XmlHttp","qx.io.remote.transport.Iframe","qx.io.remote.transport.Script"],typesReady:false,typesAvailable:{},typesSupported:{},registerType:function(vClass,vId){qx.io.remote.Exchange.typesAvailable[vId]=vClass;},initTypes:function(){if(qx.io.remote.Exchange.typesReady){return;}for(var vId in qx.io.remote.Exchange.typesAvailable){var vTransporterImpl=qx.io.remote.Exchange.typesAvailable[vId];if(vTransporterImpl.isSupported()){qx.io.remote.Exchange.typesSupported[vId]=vTransporterImpl;}}qx.io.remote.Exchange.typesReady=true;if(qx.lang.Object.isEmpty(qx.io.remote.Exchange.typesSupported)){throw new Error("No supported transport types were found!");}},canHandle:function(vImpl,vNeeds,vResponseType){if(!qx.lang.Array.contains(vImpl.handles.responseTypes,vResponseType)){return false;}for(var vKey in vNeeds){if(!vImpl.handles[vKey]){return false;}}return true;},_nativeMap:{0:"created",1:"configured",2:"sending",3:"receiving",4:"completed"},wasSuccessful:function(vStatusCode,vReadyState,vIsLocal){if(vIsLocal){switch(vStatusCode){case null:case 0:return true;case -1:return vReadyState<4;default:return typeof vStatusCode==="undefined";}}else{switch(vStatusCode){case -1:if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")&&vReadyState>3){qx.log.Logger.debug(this,"Failed with statuscode: -1 at readyState "+vReadyState);}}return vReadyState<4;case 200:case 304:return true;case 201:case 202:case 203:case 204:case 205:return true;case 206:if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")&&vReadyState===4){qx.log.Logger.debug(this,"Failed with statuscode: 206 (Partial content while being complete!)");}}return vReadyState!==4;case 300:case 301:case 302:case 303:case 305:case 400:case 401:case 402:case 403:case 404:case 405:case 406:case 407:case 408:case 409:case 410:case 411:case 412:case 413:case 414:case 415:case 500:case 501:case 502:case 503:case 504:case 505:if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){qx.log.Logger.debug(this,"Failed with typical HTTP statuscode: "+vStatusCode);}}return false;case 12002:case 12007:case 12029:case 12030:case 12031:case 12152:case 13030:if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){qx.log.Logger.debug(this,"Failed with MSHTML specific HTTP statuscode: "+vStatusCode);}}return false;default:if(vStatusCode>206&&vStatusCode<300){return true;}qx.log.Logger.debug(this,"Unknown status code: "+vStatusCode+" ("+vReadyState+")");return false;}}},statusCodeToString:function(vStatusCode){switch(vStatusCode){case -1:return "Not available";case 200:return "Ok";case 304:return "Not modified";case 206:return "Partial content";case 204:return "No content";case 300:return "Multiple choices";case 301:return "Moved permanently";case 302:return "Moved temporarily";case 303:return "See other";case 305:return "Use proxy";case 400:return "Bad request";case 401:return "Unauthorized";case 402:return "Payment required";case 403:return "Forbidden";case 404:return "Not found";case 405:return "Method not allowed";case 406:return "Not acceptable";case 407:return "Proxy authentication required";case 408:return "Request time-out";case 409:return "Conflict";case 410:return "Gone";case 411:return "Length required";case 412:return "Precondition failed";case 413:return "Request entity too large";case 414:return "Request-URL too large";case 415:return "Unsupported media type";case 500:return "Server error";case 501:return "Not implemented";case 502:return "Bad gateway";case 503:return "Out of resources";case 504:return "Gateway time-out";case 505:return "HTTP version not supported";case 12002:return "Server timeout";case 12029:return "Connection dropped";case 12030:return "Connection dropped";case 12031:return "Connection dropped";case 12152:return "Connection closed by server";case 13030:return "MSHTML-specific HTTP status code";default:return "Unknown status code";}}},properties:{request:{check:"qx.io.remote.Request",nullable:true},implementation:{check:"qx.io.remote.transport.Abstract",nullable:true,apply:"_applyImplementation"},state:{check:["configured","sending","receiving","completed","aborted","timeout","failed"],init:"configured",event:"changeState",apply:"_applyState"}},members:{send:function(){var vRequest=this.getRequest();if(!vRequest){return this.error("Please attach a request object first");}qx.io.remote.Exchange.initTypes();var vUsage=qx.io.remote.Exchange.typesOrder;var vSupported=qx.io.remote.Exchange.typesSupported;var vResponseType=vRequest.getResponseType();var vNeeds={};if(vRequest.getAsynchronous()){vNeeds.asynchronous=true;}else{vNeeds.synchronous=true;}if(vRequest.getCrossDomain()){vNeeds.crossDomain=true;}if(vRequest.getFileUpload()){vNeeds.fileUpload=true;}for(var field in vRequest.getFormFields()){vNeeds.programaticFormFields=true;break;}var vTransportImpl,vTransport;for(var i=0,l=vUsage.length;i<l;i++){vTransportImpl=vSupported[vUsage[i]];if(vTransportImpl){if(!qx.io.remote.Exchange.canHandle(vTransportImpl,vNeeds,vResponseType)){continue;}try{if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Using implementation: "+vTransportImpl.classname);}}vTransport=new vTransportImpl;this.setImplementation(vTransport);vTransport.setUseBasicHttpAuth(vRequest.getUseBasicHttpAuth());vTransport.send();return true;}catch(ex){this.error("Request handler throws error");this.error(ex);return;}}}this.error("There is no transport implementation available to handle this request: "+vRequest);},abort:function(){var vImplementation=this.getImplementation();if(vImplementation){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Abort: implementation "+vImplementation.toHashCode());}}vImplementation.abort();}else{if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Abort: forcing state to be aborted");}}this.setState("aborted");}},timeout:function(){var vImplementation=this.getImplementation();if(vImplementation){this.warn("Timeout: implementation "+vImplementation.toHashCode());vImplementation.timeout();}else{this.warn("Timeout: forcing state to timeout");this.setState("timeout");}if(this.getRequest()){this.getRequest().setTimeout(0);}},_onsending:function(e){this.setState("sending");},_onreceiving:function(e){this.setState("receiving");},_oncompleted:function(e){this.setState("completed");},_onabort:function(e){this.setState("aborted");},_onfailed:function(e){this.setState("failed");},_ontimeout:function(e){this.setState("timeout");},_applyImplementation:function(value,old){if(old){old.removeListener("sending",this._onsending,this);old.removeListener("receiving",this._onreceiving,this);old.removeListener("completed",this._oncompleted,this);old.removeListener("aborted",this._onabort,this);old.removeListener("timeout",this._ontimeout,this);old.removeListener("failed",this._onfailed,this);}if(value){var vRequest=this.getRequest();value.setUrl(vRequest.getUrl());value.setMethod(vRequest.getMethod());value.setAsynchronous(vRequest.getAsynchronous());value.setUsername(vRequest.getUsername());value.setPassword(vRequest.getPassword());value.setParameters(vRequest.getParameters());value.setFormFields(vRequest.getFormFields());value.setRequestHeaders(vRequest.getRequestHeaders());value.setData(vRequest.getData());value.setResponseType(vRequest.getResponseType());value.addListener("sending",this._onsending,this);value.addListener("receiving",this._onreceiving,this);value.addListener("completed",this._oncompleted,this);value.addListener("aborted",this._onabort,this);value.addListener("timeout",this._ontimeout,this);value.addListener("failed",this._onfailed,this);}},_applyState:function(value,old){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("State: "+old+" => "+value);}}switch(value){case "sending":this.fireEvent("sending");break;case "receiving":this.fireEvent("receiving");break;case "completed":case "aborted":case "timeout":case "failed":var vImpl=this.getImplementation();if(!vImpl){break;}if(this.hasListener(value)){var vResponse=qx.event.Registration.createEvent(value,qx.io.remote.Response);if(value=="completed"){var vContent=vImpl.getResponseContent();vResponse.setContent(vContent);if(vContent===null){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Altered State: "+value+" => failed");}}value="failed";}}vResponse.setStatusCode(vImpl.getStatusCode());vResponse.setResponseHeaders(vImpl.getResponseHeaders());this.dispatchEvent(vResponse);}this.setImplementation(null);vImpl.dispose();break;}}},settings:{"qx.ioRemoteDebug":false,"qx.ioRemoteDebugData":false},destruct:function(){var vImpl=this.getImplementation();if(vImpl){this.setImplementation(null);vImpl.dispose();}this.setRequest(null);}});qx.Class.define("qx.io.remote.transport.Abstract",{type:"abstract",extend:qx.core.Object,construct:function(){this.base(arguments);},events:{"created":"qx.event.type.Event","configured":"qx.event.type.Event","sending":"qx.event.type.Event","receiving":"qx.event.type.Event","completed":"qx.event.type.Event","aborted":"qx.event.type.Event","failed":"qx.event.type.Event","timeout":"qx.event.type.Event"},properties:{url:{check:"String",nullable:true},method:{check:"String",nullable:true},asynchronous:{check:"Boolean",nullable:true},data:{check:"String",nullable:true},username:{check:"String",nullable:true},password:{check:"String",nullable:true},state:{check:["created","configured","sending","receiving","completed","aborted","timeout","failed"],init:"created",event:"changeState",apply:"_applyState"},requestHeaders:{check:"Object",nullable:true},parameters:{check:"Object",nullable:true},formFields:{check:"Object",nullable:true},responseType:{check:"String",nullable:true},useBasicHttpAuth:{check:"Boolean",nullable:true}},members:{send:function(){throw new Error("send is abstract");},abort:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Aborting...");}}this.setState("aborted");},timeout:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Timeout...");}}this.setState("timeout");},failed:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Failed...");}}this.setState("failed");},setRequestHeader:function(vLabel,vValue){throw new Error("setRequestHeader is abstract");},getResponseHeader:function(vLabel){throw new Error("getResponseHeader is abstract");},getResponseHeaders:function(){throw new Error("getResponseHeaders is abstract");},getStatusCode:function(){throw new Error("getStatusCode is abstract");},getStatusText:function(){throw new Error("getStatusText is abstract");},getResponseText:function(){throw new Error("getResponseText is abstract");},getResponseXml:function(){throw new Error("getResponseXml is abstract");},getFetchedLength:function(){throw new Error("getFetchedLength is abstract");},_applyState:function(value,old){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("State: "+value);}}switch(value){case "created":this.fireEvent("created");break;case "configured":this.fireEvent("configured");break;case "sending":this.fireEvent("sending");break;case "receiving":this.fireEvent("receiving");break;case "completed":this.fireEvent("completed");break;case "aborted":this.fireEvent("aborted");break;case "failed":this.fireEvent("failed");break;case "timeout":this.fireEvent("timeout");break;}return true;}}});qx.Class.define("qx.io.remote.transport.XmlHttp",{extend:qx.io.remote.transport.Abstract,construct:function(){this.base(arguments);this._req=qx.io.remote.transport.XmlHttp.createRequestObject();this._req.onreadystatechange=qx.lang.Function.bind(this._onreadystatechange,this);},events:{"created":"qx.event.type.Event","configured":"qx.event.type.Event","sending":"qx.event.type.Event","receiving":"qx.event.type.Event","completed":"qx.event.type.Event","aborted":"qx.event.type.Event","failed":"qx.event.type.Event","timeout":"qx.event.type.Event"},statics:{handles:{synchronous:true,asynchronous:true,crossDomain:false,fileUpload:false,programaticFormFields:false,responseTypes:["text/plain","text/javascript","application/json","application/xml","text/html"]},requestObjects:[],requestObjectCount:0,createRequestObject:qx.core.Variant.select("qx.client",{"default":function(){return new XMLHttpRequest;},"mshtml":function(){if(window.ActiveXObject&&qx.xml.Document.XMLHTTP){return new ActiveXObject(qx.xml.Document.XMLHTTP);}if(window.XMLHttpRequest){return new XMLHttpRequest;}}}),isSupported:function(){return !!this.createRequestObject();},__dummy:function(){}},members:{_localRequest:false,_lastReadyState:0,getRequest:function(){return this._req;},send:function(){this._lastReadyState=0;var vRequest=this.getRequest();var vMethod=this.getMethod();var vAsynchronous=this.getAsynchronous();var vUrl=this.getUrl();var vLocalRequest=(window.location.protocol==="file:"&&!(/^http(s){0,1}\:/.test(vUrl)));this._localRequest=vLocalRequest;var vParameters=this.getParameters();var vParametersList=[];for(var vId in vParameters){var value=vParameters[vId];if(value instanceof Array){for(var i=0;i<value.length;i++){vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value[i]));}}else{vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value));}}if(vParametersList.length>0){vUrl+=(vUrl.indexOf("?")>=0?"&":"?")+vParametersList.join("&");}var encode64=function(input){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}output+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);}while(i<input.length);return output;};vRequest.onreadystatechange=qx.lang.Function.bind(this._onreadystatechange,this);try{if(this.getUsername()){if(this.getUseBasicHttpAuth()){vRequest.open(vMethod,vUrl,vAsynchronous);vRequest.setRequestHeader('Authorization','Basic '+encode64(this.getUsername()+':'+this.getPassword()));}else{vRequest.open(vMethod,vUrl,vAsynchronous,this.getUsername(),this.getPassword());}}else{vRequest.open(vMethod,vUrl,vAsynchronous);}}catch(ex){this.error("Failed with exception: "+ex);this.failed();return;}if(!qx.core.Variant.isSet("qx.client","webkit")){vRequest.setRequestHeader('Referer',window.location.href);}var vRequestHeaders=this.getRequestHeaders();for(var vId in vRequestHeaders){vRequest.setRequestHeader(vId,vRequestHeaders[vId]);}try{if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Request: "+this.getData());}}vRequest.send(this.getData());}catch(ex){if(vLocalRequest){this.failedLocally();}else{this.error("Failed to send data: "+ex,"send");this.failed();}return;}if(!vAsynchronous){this._onreadystatechange();}},failedLocally:function(){if(this.getState()==="failed"){return;}this.warn("Could not load from file: "+this.getUrl());this.failed();},_onreadystatechange:function(e){switch(this.getState()){case "completed":case "aborted":case "failed":case "timeout":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Ignore Ready State Change");}}return;}var vReadyState=this.getReadyState();if(vReadyState==4){if(!qx.io.remote.Exchange.wasSuccessful(this.getStatusCode(),vReadyState,this._localRequest)){return this.failed();}}while(this._lastReadyState<vReadyState){this.setState(qx.io.remote.Exchange._nativeMap[++this._lastReadyState]);}},getReadyState:function(){var vReadyState=null;try{vReadyState=this._req.readyState;}catch(ex){}return vReadyState;},setRequestHeader:function(vLabel,vValue){this._req.setRequestHeader(vLabel,vValue);},getResponseHeader:function(vLabel){var vResponseHeader=null;try{this.getRequest().getResponseHeader(vLabel)||null;}catch(ex){}return vResponseHeader;},getStringResponseHeaders:function(){var vSourceHeader=null;try{var vLoadHeader=this._req.getAllResponseHeaders();if(vLoadHeader){vSourceHeader=vLoadHeader;}}catch(ex){}return vSourceHeader;},getResponseHeaders:function(){var vSourceHeader=this.getStringResponseHeaders();var vHeader={};if(vSourceHeader){var vValues=vSourceHeader.split(/[\r\n]+/g);for(var i=0,l=vValues.length;i<l;i++){var vPair=vValues[i].match(/^([^:]+)\s*:\s*(.+)$/i);if(vPair){vHeader[vPair[1]]=vPair[2];}}}return vHeader;},getStatusCode:function(){var vStatusCode=-1;try{vStatusCode=this.getRequest().status;}catch(ex){}return vStatusCode;},getStatusText:function(){var vStatusText="";try{vStatusText=this.getRequest().statusText;}catch(ex){}return vStatusText;},getResponseText:function(){var vResponseText=null;var vStatus=this.getStatusCode();var vReadyState=this.getReadyState();if(qx.io.remote.Exchange.wasSuccessful(vStatus,vReadyState,this._localRequest)){try{vResponseText=this.getRequest().responseText;}catch(ex){}}return vResponseText;},getResponseXml:function(){var vResponseXML=null;var vStatus=this.getStatusCode();var vReadyState=this.getReadyState();if(qx.io.remote.Exchange.wasSuccessful(vStatus,vReadyState,this._localRequest)){try{vResponseXML=this.getRequest().responseXML;}catch(ex){}}if(typeof vResponseXML=="object"&&vResponseXML!=null){if(!vResponseXML.documentElement){var s=String(this.getRequest().responseText).replace(/<\?xml[^\?]*\?>/,"");vResponseXML.loadXML(s);}if(!vResponseXML.documentElement){throw new Error("Missing Document Element!");}if(vResponseXML.documentElement.tagName=="parseerror"){throw new Error("XML-File is not well-formed!");}}else{throw new Error("Response was not a valid xml document ["+this.getRequest().responseText+"]");}return vResponseXML;},getFetchedLength:function(){var vText=this.getResponseText();return typeof vText=="string"?vText.length:0;},getResponseContent:function(){if(this.getState()!=="completed"){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Transfer not complete, ignoring content!");}}return null;}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType());}}var vText=this.getResponseText();switch(this.getResponseType()){case "text/plain":case "text/html":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText);}}return vText;case "application/json":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText);}}try{if(vText&&vText.length>0){return qx.util.Json.parseQx(vText)||null;}else{return null;}}catch(ex){this.error("Could not execute json: ["+vText+"]",ex);return "<pre>Could not execute json: \n"+vText+"\n</pre>";}case "text/javascript":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText);}}try{if(vText&&vText.length>0){return window.eval(vText)||null;}else{return null;}}catch(ex){this.error("Could not execute javascript: ["+vText+"]",ex);return null;}case "application/xml":vText=this.getResponseXml();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+vText);}}return vText||null;default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null;}},_applyState:function(value,old){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("State: "+value);}}switch(value){case "created":this.fireEvent("created");break;case "configured":this.fireEvent("configured");break;case "sending":this.fireEvent("sending");break;case "receiving":this.fireEvent("receiving");break;case "completed":this.fireEvent("completed");break;case "failed":this.fireEvent("failed");break;case "aborted":this.getRequest().abort();this.fireEvent("aborted");break;case "timeout":this.getRequest().abort();this.fireEvent("timeout");break;}}},defer:function(statics,members){qx.io.remote.Exchange.registerType(qx.io.remote.transport.XmlHttp,"qx.io.remote.transport.XmlHttp");},destruct:function(){var vRequest=this.getRequest();if(vRequest){vRequest.onreadystatechange=qx.io.remote.transport.XmlHttp.__dummy;switch(vRequest.readyState){case 1:case 2:case 3:vRequest.abort();}}this._disposeFields("_req");}});qx.Bootstrap.define("qx.xml.Document",{statics:{DOMDOC:null,XMLHTTP:null,create:qx.core.Variant.select("qx.client",{"mshtml":function(namespaceUri,qualifiedName){var obj=new ActiveXObject(this.DOMDOC);obj.setProperty("SelectionLanguage","XPath");if(qualifiedName){var str='<?xml version="1.0" encoding="utf-8"?>\n<';str+=qualifiedName;if(namespaceUri){str+=" xmlns='"+namespaceUri+"'";}str+=" />";obj.loadXML(str);}return obj;},"default":function(namespaceUri,qualifiedName){return document.implementation.createDocument(namespaceUri||"",qualifiedName||"",null);}}),fromString:qx.core.Variant.select("qx.client",{"mshtml":function(str){var dom=qx.xml.Document.create();dom.loadXML(str);return dom;},"default":function(str){var parser=new DOMParser();return parser.parseFromString(str,"text/xml");}})},defer:function(statics){if(qx.core.Variant.isSet("qx.client","mshtml")){var domDoc=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0"];var httpReq=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0"];for(var i=0,l=domDoc.length;i<l;i++){try{new ActiveXObject(domDoc[i]);new ActiveXObject(httpReq[i]);}catch(ex){continue;}statics.DOMDOC=domDoc[i];statics.XMLHTTP=httpReq[i];break;}}}});qx.Class.define("qx.io.remote.transport.Iframe",{extend:qx.io.remote.transport.Abstract,construct:function(){this.base(arguments);var vUniqueId=(new Date).valueOf();var vFrameName="frame_"+vUniqueId;var vFormName="form_"+vUniqueId;if(qx.core.Variant.isSet("qx.client","mshtml")){this.__frame=document.createElement('<iframe name="'+vFrameName+'"></iframe>');}else{this.__frame=document.createElement("iframe");}this.__frame.src="javascript:void(0)";this.__frame.id=this.__frame.name=vFrameName;this.__frame.onload=qx.lang.Function.bind(this._onload,this);this.__frame.style.display="none";document.body.appendChild(this.__frame);this.__form=document.createElement("form");this.__form.target=vFrameName;this.__form.id=this.__form.name=vFormName;this.__form.style.display="none";document.body.appendChild(this.__form);this._data=document.createElement("textarea");this._data.id=this._data.name="_data_";this.__form.appendChild(this._data);this.__frame.onreadystatechange=qx.lang.Function.bind(this._onreadystatechange,this);},statics:{handles:{synchronous:false,asynchronous:true,crossDomain:false,fileUpload:true,programaticFormFields:true,responseTypes:["text/plain","text/javascript","application/json","application/xml","text/html"]},isSupported:function(){return true;},_numericMap:{"uninitialized":1,"loading":2,"loaded":2,"interactive":3,"complete":4}},members:{__lastReadyState:0,__form:null,__frame:null,send:function(){var vMethod=this.getMethod();var vUrl=this.getUrl();var vParameters=this.getParameters();var vParametersList=[];for(var vId in vParameters){var value=vParameters[vId];if(value instanceof Array){for(var i=0;i<value.length;i++){vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value[i]));}}else{vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value));}}if(vParametersList.length>0){vUrl+=(vUrl.indexOf("?")>=0?"&":"?")+vParametersList.join("&");}var vFormFields=this.getFormFields();for(var vId in vFormFields){var vField=document.createElement("textarea");vField.name=vId;vField.appendChild(document.createTextNode(vFormFields[vId]));this.__form.appendChild(vField);}this.__form.action=vUrl;this.__form.method=vMethod;this._data.appendChild(document.createTextNode(this.getData()));this.__form.submit();this.setState("sending");},_onload:function(e){if(this.__form.src){return;}this._switchReadyState(qx.io.remote.transport.Iframe._numericMap.complete);},_onreadystatechange:function(e){this._switchReadyState(qx.io.remote.transport.Iframe._numericMap[this.__frame.readyState]);},_switchReadyState:function(vReadyState){switch(this.getState()){case "completed":case "aborted":case "failed":case "timeout":this.warn("Ignore Ready State Change");return;}while(this.__lastReadyState<vReadyState){this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState]);}},setRequestHeader:function(vLabel,vValue){},getResponseHeader:function(vLabel){return null;},getResponseHeaders:function(){return {};},getStatusCode:function(){return 200;},getStatusText:function(){return "";},getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__frame);},getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__frame);},getIframeBody:function(){return qx.bom.Iframe.getBody(this.__frame);},getIframeTextContent:function(){var vBody=this.getIframeBody();if(!vBody){return null;}if(!vBody.firstChild){return "";}if(vBody.firstChild.tagName&&vBody.firstChild.tagName.toLowerCase()=="pre"){return vBody.firstChild.innerHTML;}else{return vBody.innerHTML;}},getIframeHtmlContent:function(){var vBody=this.getIframeBody();return vBody?vBody.innerHTML:null;},getFetchedLength:function(){return 0;},getResponseContent:function(){if(this.getState()!=="completed"){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Transfer not complete, ignoring content!");}}return null;}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType());}}var vText=this.getIframeTextContent();switch(this.getResponseType()){case "text/plain":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}return vText;break;case "text/html":vText=this.getIframeHtmlContent();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}return vText;break;case "application/json":vText=this.getIframeHtmlContent();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}try{return vText&&vText.length>0?qx.util.Json.parseQx(vText):null;}catch(ex){return this.error("Could not execute json: ("+vText+")",ex);}case "text/javascript":vText=this.getIframeHtmlContent();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}try{return vText&&vText.length>0?window.eval(vText):null;}catch(ex){return this.error("Could not execute javascript: ("+vText+")",ex);}case "application/xml":vText=this.getIframeDocument();if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}return vText;default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null;}}},defer:function(statics,members,properties){qx.io.remote.Exchange.registerType(qx.io.remote.transport.Iframe,"qx.io.remote.transport.Iframe");},destruct:function(){if(this.__frame){this.__frame.onload=null;this.__frame.onreadystatechange=null;if(qx.core.Variant.isSet("qx.client","gecko")){this.__frame.src=qx.util.ResourceManager.toUri("qx/static/blank.gif");}document.body.removeChild(this.__frame);}if(this.__form){document.body.removeChild(this.__form);}this._disposeFields("__frame","__form");}});qx.Class.define("qx.io.remote.transport.Script",{extend:qx.io.remote.transport.Abstract,construct:function(){this.base(arguments);var vUniqueId=++qx.io.remote.transport.Script._uniqueId;if(vUniqueId>=2000000000){qx.io.remote.transport.Script._uniqueId=vUniqueId=1;}this._element=null;this._uniqueId=vUniqueId;},statics:{_uniqueId:0,_instanceRegistry:{},ScriptTransport_PREFIX:"_ScriptTransport_",ScriptTransport_ID_PARAM:"_ScriptTransport_id",ScriptTransport_DATA_PARAM:"_ScriptTransport_data",handles:{synchronous:false,asynchronous:true,crossDomain:true,fileUpload:false,programaticFormFields:false,responseTypes:["text/plain","text/javascript","application/json"]},isSupported:function(){return true;},_numericMap:{"uninitialized":1,"loading":2,"loaded":2,"interactive":3,"complete":4},_requestFinished:function(id,content){var vInstance=qx.io.remote.transport.Script._instanceRegistry[id];if(vInstance==null){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Request finished for an unknown instance (probably aborted or timed out before)");}}}else{vInstance._responseContent=content;vInstance._switchReadyState(qx.io.remote.transport.Script._numericMap.complete);}}},members:{_lastReadyState:0,send:function(){var vUrl=this.getUrl();vUrl+=(vUrl.indexOf("?")>=0?"&":"?")+qx.io.remote.transport.Script.ScriptTransport_ID_PARAM+"="+this._uniqueId;var vParameters=this.getParameters();var vParametersList=[];for(var vId in vParameters){if(vId.indexOf(qx.io.remote.transport.Script.ScriptTransport_PREFIX)==0){this.error("Illegal parameter name. The following prefix is used internally by qooxdoo): "+qx.io.remote.transport.Script.ScriptTransport_PREFIX);}var value=vParameters[vId];if(value instanceof Array){for(var i=0;i<value.length;i++){vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value[i]));}}else{vParametersList.push(encodeURIComponent(vId)+"="+encodeURIComponent(value));}}if(vParametersList.length>0){vUrl+="&"+vParametersList.join("&");}var vData=this.getData();if(vData!=null){vUrl+="&"+qx.io.remote.transport.Script.ScriptTransport_DATA_PARAM+"="+encodeURIComponent(vData);}qx.io.remote.transport.Script._instanceRegistry[this._uniqueId]=this;this._element=document.createElement("script");this._element.charset="utf-8";this._element.src=vUrl;if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Request: "+vUrl);}}document.body.appendChild(this._element);},_switchReadyState:function(vReadyState){switch(this.getState()){case "completed":case "aborted":case "failed":case "timeout":this.warn("Ignore Ready State Change");return;}while(this._lastReadyState<vReadyState){this.setState(qx.io.remote.Exchange._nativeMap[++this._lastReadyState]);}},setRequestHeader:function(vLabel,vValue){},getResponseHeader:function(vLabel){return null;},getResponseHeaders:function(){return {};},getStatusCode:function(){return 200;},getStatusText:function(){return "";},getFetchedLength:function(){return 0;},getResponseContent:function(){if(this.getState()!=="completed"){if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.warn("Transfer not complete, ignoring content!");}}return null;}if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebug")){this.debug("Returning content for responseType: "+this.getResponseType());}}switch(this.getResponseType()){case "text/plain":case "application/json":case "text/javascript":if(qx.core.Variant.isSet("qx.debug","on")){if(qx.core.Setting.get("qx.ioRemoteDebugData")){this.debug("Response: "+this._responseContent);}}return this._responseContent||null;default:this.warn("No valid responseType specified ("+this.getResponseType()+")!");return null;}}},defer:function(statics,members,properties){qx.io.remote.Exchange.registerType(qx.io.remote.transport.Script,"qx.io.remote.transport.Script");qx.io.remote.ScriptTransport=statics;},destruct:function(){if(this._element){delete qx.io.remote.transport.Script._instanceRegistry[this._uniqueId];document.body.removeChild(this._element);}this._disposeFields("_element","_responseContent");}});qx.Class.define("qx.io.remote.Response",{extend:qx.event.type.Event,properties:{state:{check:"Integer",nullable:true},statusCode:{check:"Integer",nullable:true},content:{nullable:true},responseHeaders:{check:"Object",nullable:true}},members:{clone:function(embryo){var clone=this.base(arguments,embryo);clone.setType(this.getType());clone.setState(this.getState());clone.setStatusCode(this.getStatusCode());clone.setContent(this.getContent());clone.setResponseHeaders(this.getResponseHeaders());return clone;},getResponseHeader:function(){var vAll=this.getResponseHeaders();if(vAll){return vAll[vHeader]||null;}return null;}}});qx.Class.define("demobrowser.TreeDataHandler",{extend:qx.core.Object,construct:function(testRep){this.base(arguments);this.tmap=testRep;this.ttree=this.__readTestRep(testRep);},members:{__readTestRep:function(testRep){var tmap=testRep;function insert(root,el){var mclass=el.classname;var path=mclass.split(".");var dirname=path.slice(0,path.length-1);var basename=path[path.length-1];function createPath(parent,path){if(!path.length){return parent;}else{var head=path[0];var pathrest=path.slice(1,path.length);var target=null;var nextRoot=null;var children=parent.getChildren();for(var i=0;i<children.length;i++){if(children[i].label==head){nextRoot=children[i];break;}}if(nextRoot==null){nextRoot=new demobrowser.Tree(head);parent.add(nextRoot);}target=createPath(nextRoot,pathrest);return target;}}var target=createPath(root,path);if(!target){throw new Exception("No target to insert tests");}that.readTree(el,target);}var root=new demobrowser.Tree("All");var that=this;for(var i=0;i<tmap.length;i++){insert(root,tmap[i]);}return root;},readTree:function(struct,node){var tree=arguments[1]||new demobrowser.Tree(struct.classname);var node;function mysort(a,b){return (a.name<b.name)?-1:(a.name>b.name)?1:0;}struct.tests.sort(mysort);for(var j=0;j<struct.tests.length;j++){node=new demobrowser.Tree(struct.tests[j].name);node.type="test";node.desc=struct.tests[j].desc;tree.add(node);}if(struct.children&&struct.children.length){for(var j=0;j<struct.children.length;j++){tree.add(readTree(struct.children[j]));}}return tree;},getRoot:function(){if(!this.Root){var root={classname:"",tests:[]};var tmap=this.tmap;for(var i=0;i<this.tmap.length;i++){if(root.classname.length>tmap[i].classname.length){root=tmap[i];}}this.Root=root;}return this.Root.classname;},getChilds:function(node){var cldList=[];var tmap=this.tmap;var nodep="^"+node+"\\.[^\\.]+$";var pat=new RegExp(nodep);for(var i=0;i<tmap.length;i++){if(tmap[i].classname.match(pat)){cldList.push(tmap[i]);}}return cldList;},getTests:function(node){var tmap=this.tmap;for(var i=0;i<tmap.length;i++){if(tmap[i].classname==node){return tmap[i].tests;}}return [];},getPath:function(node){if(!node){return "";}var path=node.pwd();path.shift();if(this.isClass(node)){path=path.concat(node.label);}return path;},getChildren:function(node){if(node=="All"){var tmap=this.tmap;var classes=[];for(var i=0;i<tmap.length;i++){classes.push(tmap[i].classname);}return classes;}else if(this.isClass(node)){return this.getTests(node);}else{return [];}},isClass:function(node){if(node.type&&node.type=="test"){return false;}else{return true;}},hasTests:function(node){if(!this.isClass(node))return false;else{var children=node.getChildren();for(var i=0;i<children.length;i++){if(children[i].type&&children[i].type=="test")return true;}return false;}},classFromTest:function(node){var classname="";var tests=[];classloop:for(var i=0;i<this.tmap.length;i++){for(var j=0;j<this.tmap[i].tests.length;j++){if(this.tmap[i].tests[j]==node){classname=this.tmap[i].classname;break classloop;}}}return classname;},getFullName:function(node){if(!node){return "";}var path=this.getPath(node);if(node.type&&node.type=="test"){path=path.concat(node.label);}return path.join(".");},getPreviousNode:function(node){var prevNode=node.getPrevSibling();if(prevNode){return prevNode;}},getNextNode:function(node){var nextNode=node.getNextSibling();if(nextNode){return nextNode;}},testCount:function(node){if(node.type&&node.type=="test"){return 1;}else{var num=0;var iter=node.getIterator("depth");var curr;while(curr=iter()){if(curr.type&&curr.type=="test"){num++;}}return num;}}},destruct:function(){this._disposeFields("tmap");this._disposeObjects("ttree");}});qx.Class.define("demobrowser.Tree",{extend:qx.core.Object,construct:function(){this.base(arguments);this.label=arguments[0]||"";this.children=[];this.parent=null;},members:{pwd:function(){if(this.parent==null){return [];}else{return this.parent.pwd().concat(this.parent.label);}},hasChildren:function(){return this.children.length;},getChildren:function(){return this.children;},map:function(fun,args){var style="depth";var curr=this;var iter=this.getIterator(style);while(curr=iter()){fun.apply(curr,args);}},print:function(){this.map(function(){this.debug(this.label);},[]);},getIterator:function(style){var agenda=[this];var depthfirst=style=="depth"?1:0;function f(){var curr;if(agenda.length){curr=agenda.shift();var children=curr.getChildren();if(children.length){if(depthfirst){agenda=children.concat(agenda);}else{agenda=agenda.concat(children);}}}else{curr=null;}return curr;}return f;},getPrevSibling:function(){return this.getSibling(-1);},getNextSibling:function(){return this.getSibling(1);},getSibling:function(offset){var sibs=this.parent.getChildren();var myIndex=this.self(arguments).indexOf(sibs,this);var sibIndex=myIndex+offset;if(sibs[sibIndex]){return sibs[sibIndex];}},add:function(node){this.children.push(node);node.parent=this;}},statics:{indexOf:function(arr,obj){for(var i=0;i<arr.length;i++){if(arr[i]==obj){return i;}}}},destruct:function(){this._disposeObjects("widgetLinkFull","widgetLinkFlat","parent");this._disposeArray("children");}});qx.Class.define("qx.dev.Tokenizer",{extend:qx.core.Object,statics:{tokenizeJavaScript:function(javaScriptText){var keywords={"break":1,"case":1,"catch":1,"continue":1,"default":1,"delete":1,"do":1,"else":1,"finally":1,"for":1,"function":1,"if":1,"in":1,"instanceof":1,"new":1,"return":1,"switch":1,"throw":1,"try":1,"typeof":1,"var":1,"while":1,"with":1};var atoms={"void":1,"null":1,"true":1,"false":1,"NaN":1,"Infinity":1,"this":1};var qxkeys={"statics":1,"members":1,"construct":1,"destruct":1,"events":1,"properties":1,"extend":1,"implement":1};var re_line_comment=/^\/\/.*[\n\r$]$/;var re_full_comment=/^\/\*(?:.|[\n\r])*?\*\/$/;var re_ident=/^[a-zA-Z_][a-zA-Z0-9_]*\b$/;var re_integer=/^[+-]?\d+$/;var re_float=/^[+-]?\d+(([.]\d+)*([eE][+-]?\d+))?$/;var re_doublequote=/^["][^"]*["]$/;var re_singlequote=/^['][^']*[']$/;var re_tab=/^\t$/;var re_nl=/^\r\n|\r|\n$/;var re_space=/^\s$/;var re_re=/^\/(?:\\.|[^\/])+\/[gimy]*$/;var re_token=/\/\/.*?[\n\r$]|\/\*(?:.|\n|\r)*?\*\/|\/(?:\\.|[^\/])+\/[gimy]*|\w+\b|[+-]?\d+(([.]\d+)*([eE][+-]?\d+))?|["][^"]*["]|['][^']*[']|\n|\r|./g;var tokens=[];var a=javaScriptText.match(re_token);for(var i=0;i<a.length;i++){var token=a[i];if(token.match(re_line_comment)){tokens.push({type:"linecomment",value:token});}else if(token.match(re_full_comment)){tokens.push({type:"fullcomment",value:token});}else if(token.match(re_re)){tokens.push({type:"regexp",value:token});}else if(token.match(re_singlequote)){tokens.push({type:"qstr",value:token});}else if(token.match(re_doublequote)){tokens.push({type:"qqstr",value:token});}else if(keywords[token]){tokens.push({type:"keyword",value:token});}else if(atoms[token]){tokens.push({type:"atom",value:token});}else if(qxkeys[token]){tokens.push({type:"qxkey",value:token});}else if(token.match(re_ident)){tokens.push({type:"ident",value:token});}else if(token.match(re_float)){tokens.push({type:"real",value:token});}else if(token.match(re_integer)){tokens.push({type:"int",value:token});}else if(token.match(re_nl)){tokens.push({type:"nl",value:token});}else if(token.match(re_space)){tokens.push({type:"ws",value:token});}else if(token.match(re_tab)){tokens.push({type:"tab",value:token});}else if(token==">"){tokens.push({type:"sym",value:">"});}else if(token=="<"){tokens.push({type:"sym",value:"<"});}else if(token=="&"){tokens.push({type:"sym",value:"&"});}else{tokens.push({type:"sym",value:token});}}return tokens;},javaScriptToHtml:function(javaScriptText){var tokens=qx.dev.Tokenizer.tokenizeJavaScript(javaScriptText);var js=new qx.util.StringBuilder();for(var i=0;i<tokens.length;i++){var token=tokens[i];var htmlValue=qx.bom.String.escape(token.value);switch(token.type){case "regexp":js.add("<span class='regexp'>",htmlValue,"</span>");break;case "ident":js.add("<span class='ident'>",htmlValue,"</span>");break;case "linecomment":case "fullcomment":js.add("<span class='comment'>",htmlValue,"</span>");break;case "qstr":case "qqstr":js.add("<span class='string'>",htmlValue,"</span>");break;case "keyword":case "atom":case "qxkey":js.add("<span class='",token.type,"'>",htmlValue,"</span>");break;case "nl":js.add("\n");break;default:js.add(htmlValue);}}return js.get();}}});qx.Bootstrap.define("qx.List",{statics:{define:function(name,config){if(!config){var config={};}if(qx.core.Variant.isSet("qx.debug","on")){this.__validateConfig(name,config);}if(qx.core.Variant.isSet("qx.client","mshtml")){var html=new ActiveXObject("htmlfile");html.open();html.write("<html><script><"+"/script></html>");html.close();var clazz=html.parentWindow.Array;clazz.__html=html;}else{var clazz=function(){Array.call(this);this.push.apply(this,arguments);};clazz.prototype=new Array;}var basename=qx.Bootstrap.createNamespace(name,clazz,false);var proto=clazz.prototype;clazz.classname=name;proto.basename=clazz.basename=basename;clazz.toString=this.genericToString;var statics=config.statics;if(statics){for(var key in statics){clazz[key]=statics[key];}}var members=config.members;if(members){for(var key in members){proto[key]=members[key];}}if(config.defer){config.defer.self=clazz;config.defer(clazz,proto);}this.$$registry[name]=clazz;},genericToString:function(){return "[List "+this.classname+"]";},$$registry:qx.Bootstrap.$$registry,__allowedKeys:qx.core.Variant.select("qx.debug",{"on":{"statics":"object","members":"object","defer":"function"},"default":null}),__validateConfig:qx.core.Variant.select("qx.debug",{"on":function(name,config){var allowed=this.__allowedKeys;for(var key in config){if(allowed[key]===undefined){throw new Error('The configuration key "'+key+'" in theme "'+name+'" is not allowed!');}if(config[key]==null){throw new Error('Invalid key "'+key+'" in theme "'+name+'"! The value is undefined/null!');}if(allowed[key]!==null&&typeof config[key]!==allowed[key]){throw new Error('Invalid type of key "'+key+'" in theme "'+name+'"! The type of the key must be "'+allowed[key]+'"!');}}},"default":null})}});qx.List.define("qx.util.StringBuilder",{members:{clear:function(){this.length=0;},get:function(){return this.join("");},add:null,isEmpty:function(){return this.length===0;}},defer:function(statics,members){members.add=members.push;members.toString=members.get;}});qx.Class.define("qx.bom.String",{statics:{TO_CHARCODE:{"quot":34,"amp":38,"lt":60,"gt":62,"nbsp":160,"iexcl":161,"cent":162,"pound":163,"curren":164,"yen":165,"brvbar":166,"sect":167,"uml":168,"copy":169,"ordf":170,"laquo":171,"not":172,"shy":173,"reg":174,"macr":175,"deg":176,"plusmn":177,"sup2":178,"sup3":179,"acute":180,"micro":181,"para":182,"middot":183,"cedil":184,"sup1":185,"ordm":186,"raquo":187,"frac14":188,"frac12":189,"frac34":190,"iquest":191,"Agrave":192,"Aacute":193,"Acirc":194,"Atilde":195,"Auml":196,"Aring":197,"AElig":198,"Ccedil":199,"Egrave":200,"Eacute":201,"Ecirc":202,"Euml":203,"Igrave":204,"Iacute":205,"Icirc":206,"Iuml":207,"ETH":208,"Ntilde":209,"Ograve":210,"Oacute":211,"Ocirc":212,"Otilde":213,"Ouml":214,"times":215,"Oslash":216,"Ugrave":217,"Uacute":218,"Ucirc":219,"Uuml":220,"Yacute":221,"THORN":222,"szlig":223,"agrave":224,"aacute":225,"acirc":226,"atilde":227,"auml":228,"aring":229,"aelig":230,"ccedil":231,"egrave":232,"eacute":233,"ecirc":234,"euml":235,"igrave":236,"iacute":237,"icirc":238,"iuml":239,"eth":240,"ntilde":241,"ograve":242,"oacute":243,"ocirc":244,"otilde":245,"ouml":246,"divide":247,"oslash":248,"ugrave":249,"uacute":250,"ucirc":251,"uuml":252,"yacute":253,"thorn":254,"yuml":255,"fnof":402,"Alpha":913,"Beta":914,"Gamma":915,"Delta":916,"Epsilon":917,"Zeta":918,"Eta":919,"Theta":920,"Iota":921,"Kappa":922,"Lambda":923,"Mu":924,"Nu":925,"Xi":926,"Omicron":927,"Pi":928,"Rho":929,"Sigma":931,"Tau":932,"Upsilon":933,"Phi":934,"Chi":935,"Psi":936,"Omega":937,"alpha":945,"beta":946,"gamma":947,"delta":948,"epsilon":949,"zeta":950,"eta":951,"theta":952,"iota":953,"kappa":954,"lambda":955,"mu":956,"nu":957,"xi":958,"omicron":959,"pi":960,"rho":961,"sigmaf":962,"sigma":963,"tau":964,"upsilon":965,"phi":966,"chi":967,"psi":968,"omega":969,"thetasym":977,"upsih":978,"piv":982,"bull":8226,"hellip":8230,"prime":8242,"Prime":8243,"oline":8254,"frasl":8260,"weierp":8472,"image":8465,"real":8476,"trade":8482,"alefsym":8501,"larr":8592,"uarr":8593,"rarr":8594,"darr":8595,"harr":8596,"crarr":8629,"lArr":8656,"uArr":8657,"rArr":8658,"dArr":8659,"hArr":8660,"forall":8704,"part":8706,"exist":8707,"empty":8709,"nabla":8711,"isin":8712,"notin":8713,"ni":8715,"prod":8719,"sum":8721,"minus":8722,"lowast":8727,"radic":8730,"prop":8733,"infin":8734,"ang":8736,"and":8743,"or":8744,"cap":8745,"cup":8746,"int":8747,"there4":8756,"sim":8764,"cong":8773,"asymp":8776,"ne":8800,"equiv":8801,"le":8804,"ge":8805,"sub":8834,"sup":8835,"sube":8838,"supe":8839,"oplus":8853,"otimes":8855,"perp":8869,"sdot":8901,"lceil":8968,"rceil":8969,"lfloor":8970,"rfloor":8971,"lang":9001,"rang":9002,"loz":9674,"spades":9824,"clubs":9827,"hearts":9829,"diams":9830,"OElig":338,"oelig":339,"Scaron":352,"scaron":353,"Yuml":376,"circ":710,"tilde":732,"ensp":8194,"emsp":8195,"thinsp":8201,"zwnj":8204,"zwj":8205,"lrm":8206,"rlm":8207,"ndash":8211,"mdash":8212,"lsquo":8216,"rsquo":8217,"sbquo":8218,"ldquo":8220,"rdquo":8221,"bdquo":8222,"dagger":8224,"Dagger":8225,"permil":8240,"lsaquo":8249,"rsaquo":8250,"euro":8364},escape:function(str){return qx.util.StringEscape.escape(str,qx.bom.String.FROM_CHARCODE);},unescape:function(str){return qx.util.StringEscape.unescape(str,qx.bom.String.TO_CHARCODE);},fromText:function(str){return qx.bom.String.escape(str).replace(/(  |\n)/g,function(chr){var map={"  ":" &nbsp;","\n":"<br>"};return map[chr]||chr;});},toText:function(str){return qx.bom.String.unescape(str.replace(/\s+|<([^>])+>/gi,function(chr){if(/\s+/.test(chr)){return " ";}else if(/^<BR|^<br/gi.test(chr)){return "\n";}else{return "";}}));}},defer:function(statics,members,properties){statics.FROM_CHARCODE=qx.lang.Object.invert(statics.TO_CHARCODE);}});qx.Bootstrap.define("qx.util.StringEscape",{statics:{escape:qx.core.Variant.select("qx.client",{"mshtml":function(str,charCodeToEntities){var entity,result=[];for(var i=0,l=str.length;i<l;i++){var chr=str.charAt(i);var code=chr.charCodeAt(0);if(charCodeToEntities[code]){entity="&"+charCodeToEntities[code]+";";}else{if(code>0x7F){entity="&#"+code+";";}else{entity=chr;}}result[result.length]=entity;}return result.join("");},"default":function(str,charCodeToEntities){var entity,result="";for(var i=0,l=str.length;i<l;i++){var chr=str.charAt(i);var code=chr.charCodeAt(0);if(charCodeToEntities[code]){entity="&"+charCodeToEntities[code]+";";}else{if(code>0x7F){entity="&#"+code+";";}else{entity=chr;}}result+=entity;}return result;}}),unescape:function(str,entitiesToCharCode){return str.replace(/&[#\w]+;/gi,function(entity){var chr=entity;var entity=entity.substring(1,entity.length-1);var code=entitiesToCharCode[entity];if(code){chr=String.fromCharCode(code);}else{if(entity.charAt(0)=='#'){if(entity.charAt(1).toUpperCase()=='X'){code=entity.substring(2);if(code.match(/^[0-9A-Fa-f]+$/gi)){chr=String.fromCharCode(parseInt(code,16));}}else{code=entity.substring(1);if(code.match(/^\d+$/gi)){chr=String.fromCharCode(parseInt(code,10));}}}}return chr;});}}});qx.Theme.define("qx.theme.modern.Color",{colors:{"background-application":"#DFDFDF","background-pane":"#F3F3F3","background-light":"#FCFCFC","background-medium":"#EEEEEE","background-splitpane":"#AFAFAF","background-tip":"#ffffdd","background-odd":"#E4E4E4","text-light":"#909090","text-gray":"#4a4a4a","text-label":"#1a1a1a","text-title":"#314a6e","text-input":"#000000","text-hovered":"#001533","text-disabled":"#6B6A6E","text-selected":"#fffefe","text-active":"#26364D","text-inactive":"#404955","border-main":"#4d4d4d","border-separator":"#808080","border-input":"#334866","border-pane":"#00204D","border-button":"#666666","border-column":"#CCCCCC","border-focused":"#99C3FE","table-pane":"#F3F3F3","table-focus-indicator":"#0880EF","table-row-background-focused-selected":"#084FAB","table-row-background-focused":"#80B4EF","table-row-background-selected":"#084FAB","table-row-background-even":"#F3F3F3","table-row-background-odd":"#E4E4E4","table-row-selected":"#fffefe","table-row":"#1a1a1a","table-row-line":"#CCCCCC","table-column-line":"#CCCCCC","progressive-table-header":"#AAAAAA","progressive-table-row-background-even":"#F4F4F4","progressive-table-row-background-odd":"#E4E4E4","progressive-progressbar-background":"gray","progressive-progressbar-indicator-done":"#CCCCCC","progressive-progressbar-indicator-undone":"white","progressive-progressbar-percent-background":"gray","progressive-progressbar-percent-text":"white"}});qx.Class.define("qx.ui.decoration.Uniform",{extend:qx.core.Object,implement:[qx.ui.decoration.IDecorator],construct:function(width,style,color){this.base(arguments);if(width!=null){this.setWidth(width);}if(style!=null){this.setStyle(style);}if(color!=null){this.setColor(color);}},properties:{width:{check:"PositiveInteger",init:0,apply:"_applyWidth"},style:{nullable:true,check:["solid","dotted","dashed","double"],init:"solid",apply:"_applyStyle"},color:{nullable:true,check:"Color",apply:"_applyStyle"},backgroundImage:{check:"String",nullable:true,apply:"_applyStyle"},backgroundRepeat:{check:["repeat","repeat-x","repeat-y","no-repeat","scale"],init:"repeat",apply:"_applyStyle"},backgroundColor:{check:"Color",nullable:true,apply:"_applyStyle"}},members:{init:function(element){element.useMarkup(this.getMarkup());},getMarkup:function(){if(this.__markup){return this.__markup;}var styles="position:absolute;top:0;left:0;";var width=this.getWidth();if(qx.core.Variant.isSet("qx.debug","on")){if(width===0){throw new Error("Invalid Uniform decorator (zero border width). Use qx.ui.decorator.Background instead!");}}var Color=qx.theme.manager.Color.getInstance();styles+="border:"+width+"px "+this.getStyle()+" "+Color.resolve(this.getColor())+";";var html=qx.ui.decoration.Util.generateBackgroundMarkup(this.getBackgroundImage(),this.getBackgroundRepeat(),styles);return this.__markup=html;},resize:function(element,width,height){var scaledImage=this.getBackgroundImage()&&this.getBackgroundRepeat()=="scale";if(scaledImage||qx.bom.client.Feature.CONTENT_BOX){var inset=this.getWidth()*2;width-=inset;height-=inset;if(width<0){width=0;}if(height<0){height=0;}}var dom=element.getDomElement();dom.style.width=width+"px";dom.style.height=height+"px";},tint:function(element,bgcolor){var Color=qx.theme.manager.Color.getInstance();var dom=element.getDomElement();if(bgcolor==null){bgcolor=this.getBackgroundColor();}dom.style.backgroundColor=Color.resolve(bgcolor)||"";},getInsets:function(){if(this.__insets){return this.__insets;}var width=this.getWidth();this.__insets={top:width,right:width,bottom:width,left:width};return this.__insets;},_applyWidth:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}this.__insets=null;},_applyStyle:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}}},destruct:function(){this._disposeFields("__markup","__insets");}});qx.Class.define("qx.ui.decoration.Background",{extend:qx.core.Object,implement:[qx.ui.decoration.IDecorator],construct:function(backgroundColor){this.base(arguments);if(backgroundColor!=null){this.setBackgroundColor(backgroundColor);}},properties:{backgroundImage:{check:"String",nullable:true,apply:"_applyStyle"},backgroundRepeat:{check:["repeat","repeat-x","repeat-y","no-repeat","scale"],init:"repeat",apply:"_applyStyle"},backgroundColor:{check:"Color",nullable:true,apply:"_applyStyle"}},members:{init:function(element){element.useMarkup(this.getMarkup());},getMarkup:function(){if(this.__markup){return this.__markup;}var html=qx.ui.decoration.Util.generateBackgroundMarkup(this.getBackgroundImage(),this.getBackgroundRepeat(),"position:absolute;top:0;left:0;");return this.__markup=html;},resize:function(element,width,height){var dom=element.getDomElement();dom.style.width=width+"px";dom.style.height=height+"px";},tint:function(element,bgcolor){var Color=qx.theme.manager.Color.getInstance();var dom=element.getDomElement();if(bgcolor==null){bgcolor=this.getBackgroundColor();}dom.style.backgroundColor=Color.resolve(bgcolor)||"";},__insets:{top:0,right:0,bottom:0,left:0},getInsets:function(){return this.__insets;},_applyStyle:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}}}});qx.Class.define("qx.ui.decoration.Grid",{extend:qx.core.Object,implement:[qx.ui.decoration.IDecorator],construct:function(baseImage,insets){this.base(arguments);if(baseImage!=null){this.setBaseImage(baseImage);}if(insets!=null){this.setInsets(insets);}},properties:{baseImage:{check:"String",nullable:true,apply:"_applyBaseImage"},insetLeft:{check:"Number",init:0,apply:"_applyInsets"},insetRight:{check:"Number",init:0,apply:"_applyInsets"},insetBottom:{check:"Number",init:0,apply:"_applyInsets"},insetTop:{check:"Number",init:0,apply:"_applyInsets"},insets:{group:["insetTop","insetRight","insetBottom","insetLeft"],mode:"shorthand"}},members:{__markup:null,__insets:null,__images:null,__edges:null,init:function(element){element.useMarkup(this.getMarkup());},getMarkup:function(){if(this.__markup){return this.__markup;}var Decoration=qx.bom.element.Decoration;var images=this.__images;var edges=this.__edges;var html=[];html.push('<div style="position:absolute;top:0;left:0;overflow:hidden;font-size:0;line-height:0;">');html.push(Decoration.create(images.tl,"no-repeat",{top:0,left:0}));html.push(Decoration.create(images.t,"scale-x",{top:0,left:edges.left+"px"}));html.push(Decoration.create(images.tr,"no-repeat",{top:0,right:0}));html.push(Decoration.create(images.bl,"no-repeat",{bottom:0,left:0}));html.push(Decoration.create(images.b,"scale-x",{bottom:0,left:edges.left+"px"}));html.push(Decoration.create(images.br,"no-repeat",{bottom:0,right:0}));html.push(Decoration.create(images.l,"scale-y",{top:edges.top+"px",left:0}));html.push(Decoration.create(images.c,"scale",{top:edges.top+"px",left:edges.left+"px"}));html.push(Decoration.create(images.r,"scale-y",{top:edges.top+"px",right:0}));html.push('</div>');return this.__markup=html.join("");},resize:function(element,width,height){var edges=this.__edges;var innerWidth=width-edges.left-edges.right;var innerHeight=height-edges.top-edges.bottom;var frame=element.getDomElement();frame.style.width=width+"px";frame.style.height=height+"px";frame.childNodes[1].style.width=innerWidth+"px";frame.childNodes[4].style.width=innerWidth+"px";frame.childNodes[7].style.width=innerWidth+"px";frame.childNodes[6].style.height=innerHeight+"px";frame.childNodes[7].style.height=innerHeight+"px";frame.childNodes[8].style.height=innerHeight+"px";},tint:function(element,bgcolor){},getInsets:function(){if(this.__insets){return this.__insets;}return this.__insets={left:this.getInsetLeft(),right:this.getInsetRight(),bottom:this.getInsetBottom(),top:this.getInsetTop()};},_applyInsets:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}this.__insets=null;},_applyBaseImage:function(value,old){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}var ResourceManager=qx.util.ResourceManager;if(value){var Alias=qx.util.AliasManager.getInstance();var base=Alias.resolve(value);var split=/(.*)(\.[a-z]+)$/.exec(base);var prefix=split[1];var ext=split[2];var images=this.__images={tl:prefix+"-tl"+ext,t:prefix+"-t"+ext,tr:prefix+"-tr"+ext,bl:prefix+"-bl"+ext,b:prefix+"-b"+ext,br:prefix+"-br"+ext,l:prefix+"-l"+ext,c:prefix+"-c"+ext,r:prefix+"-r"+ext};this.__edges={top:ResourceManager.getImageHeight(images.t),bottom:ResourceManager.getImageHeight(images.b),left:ResourceManager.getImageWidth(images.l),right:ResourceManager.getImageWidth(images.r)};}}},destruct:function(){this._disposeFields("__markup","__insets","__images","__edges");}});qx.Class.define("qx.ui.decoration.Single",{extend:qx.core.Object,implement:[qx.ui.decoration.IDecorator],construct:function(width,style,color){this.base(arguments);if(width!=null){this.setWidth(width);}if(style!=null){this.setStyle(style);}if(color!=null){this.setColor(color);}},properties:{widthTop:{check:"Number",init:0,apply:"_applyWidth"},widthRight:{check:"Number",init:0,apply:"_applyWidth"},widthBottom:{check:"Number",init:0,apply:"_applyWidth"},widthLeft:{check:"Number",init:0,apply:"_applyWidth"},styleTop:{nullable:true,check:["solid","dotted","dashed","double"],init:"solid",apply:"_applyStyle"},styleRight:{nullable:true,check:["solid","dotted","dashed","double"],init:"solid",apply:"_applyStyle"},styleBottom:{nullable:true,check:["solid","dotted","dashed","double"],init:"solid",apply:"_applyStyle"},styleLeft:{nullable:true,check:["solid","dotted","dashed","double"],init:"solid",apply:"_applyStyle"},colorTop:{nullable:true,check:"Color",apply:"_applyStyle"},colorRight:{nullable:true,check:"Color",apply:"_applyStyle"},colorBottom:{nullable:true,check:"Color",apply:"_applyStyle"},colorLeft:{nullable:true,check:"Color",apply:"_applyStyle"},backgroundImage:{check:"String",nullable:true,apply:"_applyStyle"},backgroundRepeat:{check:["repeat","repeat-x","repeat-y","no-repeat","scale"],init:"repeat",apply:"_applyStyle"},backgroundColor:{check:"Color",nullable:true,apply:"_applyStyle"},left:{group:["widthLeft","styleLeft","colorLeft"]},right:{group:["widthRight","styleRight","colorRight"]},top:{group:["widthTop","styleTop","colorTop"]},bottom:{group:["widthBottom","styleBottom","colorBottom"]},width:{group:["widthTop","widthRight","widthBottom","widthLeft"],mode:"shorthand"},style:{group:["styleTop","styleRight","styleBottom","styleLeft"],mode:"shorthand"},color:{group:["colorTop","colorRight","colorBottom","colorLeft"],mode:"shorthand"}},members:{init:function(element){element.useMarkup(this.getMarkup());},getMarkup:function(element){if(this.__markup){return this.__markup;}var Color=qx.theme.manager.Color.getInstance();var styles="";var width=this.getWidthTop();if(width>0){styles+="border-top:"+width+"px "+this.getStyleTop()+" "+Color.resolve(this.getColorTop())+";";}var width=this.getWidthRight();if(width>0){styles+="border-right:"+width+"px "+this.getStyleRight()+" "+Color.resolve(this.getColorRight())+";";}var width=this.getWidthBottom();if(width>0){styles+="border-bottom:"+width+"px "+this.getStyleBottom()+" "+Color.resolve(this.getColorBottom())+";";}var width=this.getWidthLeft();if(width>0){styles+="border-left:"+width+"px "+this.getStyleLeft()+" "+Color.resolve(this.getColorLeft())+";";}if(qx.core.Variant.isSet("qx.debug","on")){if(styles.length===0){throw new Error("Invalid Single decorator (zero border width). Use qx.ui.decorator.Background instead!");}}styles+="position:absolute;top:0;left:0;";var html=qx.ui.decoration.Util.generateBackgroundMarkup(this.getBackgroundImage(),this.getBackgroundRepeat(),styles);return this.__markup=html;},resize:function(element,width,height){var scaledImage=this.getBackgroundImage()&&this.getBackgroundRepeat()=="scale";if(scaledImage||qx.bom.client.Feature.CONTENT_BOX){var insets=this.getInsets();width-=insets.left+insets.right;height-=insets.top+insets.bottom;if(width<0){width=0;}if(height<0){height=0;}}var dom=element.getDomElement();dom.style.width=width+"px";dom.style.height=height+"px";},tint:function(element,bgcolor){var Color=qx.theme.manager.Color.getInstance();var dom=element.getDomElement();if(bgcolor==null){bgcolor=this.getBackgroundColor();}dom.style.backgroundColor=Color.resolve(bgcolor)||"";},getInsets:function(){if(this.__insets){return this.__insets;}this.__insets={top:this.getWidthTop(),right:this.getWidthRight(),bottom:this.getWidthBottom(),left:this.getWidthLeft()};return this.__insets;},_applyWidth:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}this.__insets=null;},_applyStyle:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}}},destruct:function(){this._disposeFields("__markup","__insets");}});qx.Class.define("qx.ui.decoration.Beveled",{extend:qx.core.Object,implement:[qx.ui.decoration.IDecorator],construct:function(outerColor,innerColor,innerOpacity){this.base(arguments);if(outerColor!=null){this.setOuterColor(outerColor);}if(innerColor!=null){this.setInnerColor(innerColor);}if(innerOpacity!=null){this.setInnerOpacity(innerOpacity);}},properties:{innerColor:{check:"Color",nullable:true,apply:"_applyStyle"},innerOpacity:{check:"Number",init:1,apply:"_applyStyle"},outerColor:{check:"Color",nullable:true,apply:"_applyStyle"},backgroundImage:{check:"String",nullable:true,apply:"_applyStyle"},backgroundRepeat:{check:["repeat","repeat-x","repeat-y","no-repeat","scale"],init:"repeat",apply:"_applyStyle"},backgroundColor:{check:"Color",nullable:true,apply:"_applyStyle"}},members:{__markup:null,_applyStyle:function(){if(qx.core.Variant.isSet("qx.debug","on")){if(this.__markup){throw new Error("This decorator is already in-use. Modification is not possible anymore!");}}},init:function(element){element.useMarkup(this.getMarkup());},getMarkup:function(){if(this.__markup){return this.__markup;}var Color=qx.theme.manager.Color.getInstance();var html=[];var outerStyle="1px solid "+Color.resolve(this.getOuterColor())+";";var innerStyle="1px solid "+Color.resolve(this.getInnerColor())+";";html.push('<div style="overflow:hidden;font-size:0;line-height:0;">');html.push('<div style="');html.push('border:',outerStyle);html.push(qx.bom.element.Opacity.compile(0.35));html.push('"></div>');html.push('<div style="position:absolute;top:1px;left:0px;');html.push('border-left:',outerStyle);html.push('border-right:',outerStyle);html.push('"></div>');html.push('<div style="');html.push('position:absolute;top:0px;left:1px;');html.push('border-top:',outerStyle);html.push('border-bottom:',outerStyle);html.push('"></div>');var styles="position:absolute;top:1px;left:1px;";html.push(qx.ui.decoration.Util.generateBackgroundMarkup(this.getBackgroundImage(),this.getBackgroundRepeat(),styles));html.push('<div style="position:absolute;top:1px;left:1px;');html.push('border:',innerStyle);html.push(qx.bom.element.Opacity.compile(this.getInnerOpacity()));html.push('"></div>');html.push('</div>');return this.__markup=html.join("");},resize:function(element,width,height){if(width<4){width=4;}if(height<4){height=4;}if(qx.bom.client.Feature.CONTENT_BOX){var outerWidth=width-2;var outerHeight=height-2;var frameWidth=outerWidth;var frameHeight=outerHeight;var innerWidth=width-4;var innerHeight=height-4;}else{var outerWidth=width;var outerHeight=height;var frameWidth=width-2;var frameHeight=height-2;var innerWidth=frameWidth;var innerHeight=frameHeight;}var dom=element.getDomElement();var pixel="px";var backgroundFrame=dom.childNodes[0].style;backgroundFrame.width=outerWidth+pixel;backgroundFrame.height=outerHeight+pixel;var horizontalFrame=dom.childNodes[1].style;horizontalFrame.width=outerWidth+pixel;horizontalFrame.height=frameHeight+pixel;var verticalFrame=dom.childNodes[2].style;verticalFrame.width=frameWidth+pixel;verticalFrame.height=outerHeight+pixel;var innerBackground=dom.childNodes[3].style;innerBackground.width=frameWidth+pixel;innerBackground.height=frameHeight+pixel;var innerOverlay=dom.childNodes[4].style;innerOverlay.width=innerWidth+pixel;innerOverlay.height=innerHeight+pixel;},tint:function(element,bgcolor){var dom=element.getDomElement();var Color=qx.theme.manager.Color.getInstance();if(bgcolor==null){bgcolor=this.getBackgroundColor();}dom.childNodes[3].style.backgroundColor=Color.resolve(bgcolor)||"";},getInsets:function(){return this.__insets;},__insets:{top:2,right:2,bottom:2,left:2}}});qx.Theme.define("qx.theme.modern.Decoration",{resource:"qx/decoration/Modern",decorations:{"main":{decorator:qx.ui.decoration.Uniform,style:{width:1,color:"border-main"}},"selected":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/selection.png",backgroundRepeat:"scale"}},"pane":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/pane/pane.png",insets:[0,2,3,0]}},"group":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/groupbox/groupbox.png"}},"separator-horizontal":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,colorLeft:"border-separator"}},"separator-vertical":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"border-separator"}},"shadow-window":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/shadow/shadow.png",insets:[4,8,8,4]}},"shadow-popup":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/shadow/shadow-small.png",insets:[0,3,3,0]}},"scrollbar-horizontal":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/scrollbar/scrollbar-bg-horizontal.png",backgroundRepeat:"repeat-x"}},"scrollbar-vertical":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/scrollbar/scrollbar-bg-vertical.png",backgroundRepeat:"repeat-y"}},"scrollbar-slider-horizontal":{decorator:qx.ui.decoration.Beveled,style:{backgroundImage:"decoration/scrollbar/scrollbar-button-bg-horizontal.png",backgroundRepeat:"scale",outerColor:"border-main",innerColor:"white",innerOpacity:0.5}},"scrollbar-slider-vertical":{decorator:qx.ui.decoration.Beveled,style:{backgroundImage:"decoration/scrollbar/scrollbar-button-bg-vertical.png",backgroundRepeat:"scale",outerColor:"border-main",innerColor:"white",innerOpacity:0.5}},"button":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button.png",insets:2}},"button-focused":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button-focused.png",insets:2}},"button-hovered":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button-hovered.png",insets:2}},"button-pressed":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button-pressed.png",insets:2}},"button-checked":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button-checked.png",insets:2}},"button-checked-focused":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/form/button-checked-focused.png",insets:2}},"input":{decorator:qx.ui.decoration.Beveled,style:{outerColor:"border-input",innerColor:"white",innerOpacity:0.5,backgroundImage:"decoration/form/input.png",backgroundRepeat:"repeat-x",backgroundColor:"background-light"}},"input-focused":{decorator:qx.ui.decoration.Beveled,style:{outerColor:"border-input",innerColor:"border-focused",backgroundImage:"decoration/form/input.png",backgroundRepeat:"repeat-x",backgroundColor:"background-light"}},"toolbar":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/toolbar/toolbar-gradient.png",backgroundRepeat:"scale"}},"toolbar-button-hovered":{decorator:qx.ui.decoration.Beveled,style:{outerColor:"#b6b6b6",innerColor:"#f8f8f8",backgroundImage:"decoration/form/button-c.png",backgroundRepeat:"scale"}},"toolbar-button-checked":{decorator:qx.ui.decoration.Beveled,style:{outerColor:"#b6b6b6",innerColor:"#f8f8f8",backgroundImage:"decoration/form/button-checked-c.png",backgroundRepeat:"scale"}},"toolbar-separator":{decorator:qx.ui.decoration.Single,style:{widthLeft:1,widthRight:1,colorLeft:"#b8b8b8",colorRight:"#f4f4f4",styleLeft:"solid",styleRight:"solid"}},"toolbar-part":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/toolbar/toolbar-part.gif",backgroundRepeat:"repeat-y"}},"tabview-pane":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tabview-pane.png",insets:[0,2,3,0]}},"tabview-page-button-top-active":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-top-active.png"}},"tabview-page-button-top-inactive":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-top-inactive.png"}},"tabview-page-button-bottom-active":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-bottom-active.png"}},"tabview-page-button-bottom-inactive":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-bottom-inactive.png"}},"tabview-page-button-left-active":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-left-active.png"}},"tabview-page-button-left-inactive":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-left-inactive.png"}},"tabview-page-button-right-active":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-right-active.png"}},"tabview-page-button-right-inactive":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/tabview/tab-button-right-inactive.png"}},"splitpane":{decorator:qx.ui.decoration.Uniform,style:{backgroundColor:"background-pane",width:3,color:"background-splitpane",style:"solid"}},"window":{decorator:qx.ui.decoration.Single,style:{backgroundColor:"background-pane",width:1,color:"border-main",widthTop:0}},"window-captionbar-active":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/window/captionbar-active.png"}},"window-captionbar-inactive":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/window/captionbar-inactive.png"}},"window-statusbar":{decorator:qx.ui.decoration.Grid,style:{baseImage:"decoration/window/statusbar.png"}},"table":{decorator:qx.ui.decoration.Single,style:{width:1,color:"border-main",style:"solid"}},"table-statusbar":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"border-main",style:"solid"}},"table-scroller-header":{decorator:qx.ui.decoration.Single,style:{backgroundImage:"decoration/table/header-cell.png",backgroundRepeat:"scale",widthBottom:1,colorBottom:"border-main",style:"solid"}},"table-header-cell":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"border-separator",styleRight:"solid"}},"table-header-cell-hovered":{decorator:qx.ui.decoration.Single,style:{widthRight:1,colorRight:"border-separator",styleRight:"solid",widthBottom:1,colorBottom:"white",styleBottom:"solid"}},"table-column-button":{decorator:qx.ui.decoration.Single,style:{backgroundImage:"decoration/table/header-cell.png",backgroundRepeat:"scale",widthBottom:1,colorBottom:"border-main",style:"solid"}},"table-scroller-focus-indicator":{decorator:qx.ui.decoration.Single,style:{width:2,color:"table-focus-indicator",style:"solid"}},"progressive-table-header":{decorator:qx.ui.decoration.Single,style:{width:1,color:"border-main",style:"solid"}},"progressive-table-header-cell":{decorator:qx.ui.decoration.Single,style:{backgroundImage:"decoration/table/header-cell.png",backgroundRepeat:"scale",widthRight:1,colorRight:"#F2F2F2",style:"solid"}},"menu":{decorator:qx.ui.decoration.Single,style:{backgroundImage:"decoration/menu/background.png",backgroundRepeat:"scale",width:1,color:"border-main",style:"solid"}},"menu-separator":{decorator:qx.ui.decoration.Single,style:{widthTop:1,colorTop:"#C5C5C5",widthBottom:1,colorBottom:"#FAFAFA"}},"menubar":{decorator:qx.ui.decoration.Single,style:{backgroundImage:"decoration/menu/bar-background.png",backgroundRepeat:"scale",width:1,color:"border-separator",style:"solid"}},"app-header":{decorator:qx.ui.decoration.Background,style:{backgroundImage:"decoration/app-header.png",backgroundRepeat:"scale"}}}});qx.Bootstrap.define("qx.bom.client.System",{statics:{NAME:"",SP1:false,SP2:false,WIN95:false,WIN98:false,WINME:false,WINNT4:false,WIN2000:false,WINXP:false,WIN2003:false,WINVISTA:false,WINCE:false,LINUX:false,SUNOS:false,FREEBSD:false,NETBSD:false,OSX:false,OS9:false,SYMBIAN:false,NINTENDODS:false,PSP:false,IPHONE:false,__ids:{"Windows NT 6.0":"winvista","Windows NT 5.2":"win2003","Windows NT 5.1":"winxp","Windows NT 5.0":"win2000","Windows 2000":"win2000","Windows NT 4.0":"winnt4","Win 9x 4.90":"winme","Windows CE":"wince","Windows 98":"win98","Win98":"win98","Windows 95":"win95","Win95":"win95","Linux":"linux","FreeBSD":"freebsd","NetBSD":"netbsd","SunOS":"sunos","Symbian System":"symbian","Nitro":"nintendods","PSP":"sonypsp","Mac OS X 10_5":"osx5","Mac OS X 10.5":"osx5","Mac OS X 10_4":"osx4","Mac OS X 10.4":"osx4","Mac OS X 10_3":"osx3","Mac OS X 10.3":"osx3","Mac OS X 10_2":"osx2","Mac OS X 10.2":"osx2","Mac OS X 10_1":"osx1","Mac OS X 10.1":"osx1","Mac OS X 10_0":"osx0","Mac OS X 10.0":"osx0","Mac OS X":"osx","Mac OS 9":"os9"},__init:function(){var agent=navigator.userAgent;var str=[];for(var key in this.__ids){str.push(key);}var reg=new RegExp("("+str.join("|").replace(/\./g,"\.")+")","g");if(!reg.test(agent)){throw new Error("Could not detect system: "+agent);}if(qx.bom.client.Engine.WEBKIT&&RegExp(" Mobile/").test(navigator.userAgent)){this.IPHONE=true;this.NAME="iphone";}else{this.NAME=this.__ids[RegExp.$1];this[this.NAME.toUpperCase()]=true;if(qx.bom.client.Platform.WIN){if(agent.indexOf("Windows NT 5.01")!==-1){this.SP1=true;}else if(qx.bom.client.Engine.MSHTML&&agent.indexOf("SV1")!==-1){this.SP2=true;}}}}},defer:function(statics){statics.__init();}});qx.Theme.define("qx.theme.modern.Font",{fonts:{"default":{size:qx.bom.client.System.WINVISTA?12:11,lineHeight:1.4,family:qx.bom.client.Platform.MAC?["Lucida Grande"]:qx.bom.client.System.WINVISTA?["Segoe UI","Candara"]:["Tahoma","Liberation Sans","Arial"]},"bold":{size:qx.bom.client.System.WINVISTA?12:11,lineHeight:1.4,family:qx.bom.client.Platform.MAC?["Lucida Grande"]:qx.bom.client.System.WINVISTA?["Segoe UI","Candara"]:["Tahoma","Liberation Sans","Arial"],bold:true},"small":{size:qx.bom.client.System.WINVISTA?11:10,lineHeight:1.4,family:qx.bom.client.Platform.MAC?["Lucida Grande"]:qx.bom.client.System.WINVISTA?["Segoe UI","Candara"]:["Tahoma","Liberation Sans","Arial"]},"monospace":{size:11,lineHeight:1.4,family:qx.bom.client.Platform.MAC?["Lucida Grande"]:qx.bom.client.System.WINVISTA?["Consolas"]:["Consolas","DejaVu Sans Mono","Courier New","monospace"]}}});qx.Theme.define("qx.theme.icon.Tango",{title:"Tango",resource:"qx/icon/Tango",icons:{}});qx.Theme.define("qx.theme.modern.Appearance",{appearances:{"widget":{},"root":{style:function(states){return {backgroundColor:"background-application",textColor:"text-label",font:"default"};}},"label":{style:function(states){return {textColor:states.disabled?"text-disabled":"undefined"};}},"move-frame":{style:function(states){return {decorator:"main"};}},"resize-frame":"move-frame","dragdrop-cursor":{style:function(states){var icon="nodrop";if(states.copy){icon="copy";}else if(states.move){icon="move";}else if(states.alias){icon="alias";}return {source:"decoration/cursors/"+icon+".gif",position:"right-top",offset:[2,16,2,6]};}},"image":{style:function(states){return {opacity:!states.replacement&&states.disabled?0.3:1};}},"atom":{},"atom/label":"label","atom/icon":"image","popup":{style:function(states){return {decorator:"main",backgroundColor:"background-light",shadow:"shadow-popup"};}},"button-frame":{alias:"atom",style:function(states){var decorator,textColor;if(states.checked&&states.focused&&!states.inner){decorator="button-checked-focused";textColor="text-label";}else if(states.checked){decorator="button-checked";textColor="text-label";}else if(states.pressed){decorator="button-pressed";textColor="text-hovered";}else if(states.hovered){decorator="button-hovered";textColor="text-hovered";}else if(states.preselected&&states.focused&&!states.inner){decorator="button-preselected-focused";textColor="text-hovered";}else if(states.preselected){decorator="button-preselected";textColor="text-hovered";}else if(states.focused&&!states.inner){decorator="button-focused";textColor="text-label";}else{decorator="button";textColor="text-label";}return {decorator:decorator,textColor:textColor};}},"button":{alias:"button-frame",include:"button-frame",style:function(states){return {padding:[2,8],center:true};}},"splitbutton":{},"splitbutton/button":"button","splitbutton/arrow":{alias:"button",include:"button",style:function(states){return {icon:"decoration/arrows/down.png",padding:2,marginLeft:1};}},"checkbox":{alias:"atom",style:function(states){var icon;if(states.checked&&states.focused){icon="checkbox-checked-focused";}else if(states.checked&&states.disabled){icon="checkbox-checked-disabled";}else if(states.checked&&states.pressed){icon="checkbox-checked-pressed";}else if(states.checked&&states.hovered){icon="checkbox-checked-hovered";}else if(states.checked){icon="checkbox-checked";}else if(states.disabled){icon="checkbox-disabled";}else if(states.focused){icon="checkbox-focused";}else if(states.pressed){icon="checkbox-pressed";}else if(states.hovered){icon="checkbox-hovered";}else{icon="checkbox";}return {icon:"decoration/form/"+icon+".png",gap:6};}},"radiobutton":{alias:"atom",style:function(states){var icon;if(states.checked&&states.focused){icon="radiobutton-checked-focused";}else if(states.checked&&states.disabled){icon="radiobutton-checked-disabled";}else if(states.checked&&states.pressed){icon="radiobutton-checked-pressed";}else if(states.checked&&states.hovered){icon="radiobutton-checked-hovered";}else if(states.checked){icon="radiobutton-checked";}else if(states.disabled){icon="radiobutton-disabled";}else if(states.focused){icon="radiobutton-focused";}else if(states.pressed){icon="radiobutton-pressed";}else if(states.hovered){icon="radiobutton-hovered";}else{icon="radiobutton";}return {icon:"decoration/form/"+icon+".png",gap:6};}},"textfield":{style:function(states){return {decorator:states.focused?"input-focused":"input",padding:[2,4,1],textColor:states.disabled?"text-disabled":"text-input"};}},"textarea":{style:function(states){return {decorator:states.focused?"input-focused":"input",padding:4,textColor:states.disabled?"text-disabled":"text-input"};}},"spinner":{style:function(states){return {decorator:states.focused?"input-focused":"input"};}},"spinner/textfield":{include:"textfield",style:function(states){return {decorator:"undefined",padding:[2,4,1]};}},"spinner/upbutton":{alias:"button-frame",include:"button-frame",style:function(states){return {icon:"decoration/arrows/up-small.png",padding:states.pressed?[2,2,0,4]:[1,3,1,3]};}},"spinner/downbutton":{alias:"button-frame",include:"button-frame",style:function(states){return {icon:"decoration/arrows/down-small.png",padding:states.pressed?[2,2,0,4]:[1,3,1,3]};}},"datefield":"combobox","datefield/button":{alias:"combobox/button",include:"combobox/button",style:function(states){return {icon:"icon/16/apps/office-calendar.png",padding:[0,3],decorator:"undefined"};}},"datefield/textfield":{style:function(states){return {padding:[2,4,1]};}},"datefield/list":{alias:"datechooser",include:"datechooser",style:function(states){return {decorator:"undefined"};}},"groupbox":{style:function(states){return {legendPosition:"top"};}},"groupbox/legend":{alias:"atom",style:function(states){return {padding:[1,0,1,4],textColor:"text-title",font:"bold"};}},"groupbox/frame":{style:function(states){return {padding:12,decorator:"group"};}},"check-groupbox":"groupbox","check-groupbox/legend":{alias:"checkbox",include:"checkbox",style:function(states){return {padding:[1,0,1,4],textColor:"text-title",font:"bold"};}},"radio-groupbox":"groupbox","radio-groupbox/legend":{alias:"radiobutton",include:"radiobutton",style:function(states){return {padding:[1,0,1,4],textColor:"text-title"};}},"scrollarea":"widget","scrollarea/corner":{style:function(states){return {backgroundColor:"background-application"};}},"scrollarea/pane":"widget","scrollarea/scrollbar-x":"scrollbar","scrollarea/scrollbar-y":"scrollbar","scrollbar":{style:function(states){return {width:states.horizontal?"undefined":16,height:states.horizontal?16:"undefined",decorator:states.horizontal?"scrollbar-horizontal":"scrollbar-vertical",padding:1};}},"scrollbar/slider":{alias:"slider",style:function(states){return {padding:states.horizontal?[0,1,0,1]:[1,0,1,0]};}},"scrollbar/slider/knob":{include:"button-frame",style:function(states){return {decorator:states.horizontal?"scrollbar-slider-horizontal":"scrollbar-slider-vertical",minHeight:states.horizontal?"undefined":14,minWidth:states.horizontal?14:"undefined"};}},"scrollbar/button":{alias:"button-frame",include:"button-frame",style:function(states){var icon="decoration/scrollbar/scrollbar-";if(states.left){icon+="left.png";}else if(states.right){icon+="right.png";}else if(states.up){icon+="up.png";}else{icon+="down.png";}if(states.left||states.right){return {padding:[0,0,0,states.left?3:4],icon:icon,width:15,height:14};}else{return {padding:[0,0,0,2],icon:icon,width:14,height:15};}}},"scrollbar/button-begin":"scrollbar/button","scrollbar/button-end":"scrollbar/button","slider":{style:function(states){return {decorator:"input"};}},"slider/knob":{include:"button-frame",style:function(states){return {decorator:"scrollbar-slider-horizontal",height:14,width:14};}},"list":{alias:"scrollarea",style:function(states){return {backgroundColor:"background-light",decorator:"main"};}},"list/pane":"widget","listitem":{alias:"atom",style:function(states){return {padding:4,textColor:states.selected?"text-selected":"undefined",decorator:states.selected?"selected":"undefined"};}},"slidebar":{},"slidebar/scrollpane":{},"slidebar/content":{},"slidebar/button-forward":{alias:"button-frame",include:"button-frame",style:function(states){return {padding:5,center:true,icon:states.barLeft||states.barRight?"decoration/arrows/down.png":"decoration/arrows/right.png"};}},"slidebar/button-backward":{alias:"button-frame",include:"button-frame",style:function(states){return {padding:5,center:true,icon:states.barLeft||states.barRight?"decoration/arrows/up.png":"decoration/arrows/left.png"};}},"tabview":{style:function(states){return {contentPadding:16};}},"tabview/bar":{alias:"slidebar",style:function(states){var result={marginBottom:states.barTop?-1:0,marginTop:states.barBottom?-4:0,marginLeft:states.barRight?-3:0,marginRight:states.barLeft?-1:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};if(states.barTop||states.barBottom){result.paddingLeft=5;result.paddingRight=7;}else{result.paddingTop=5;result.paddingBottom=7;}return result;}},"tabview/bar/button-forward":{include:"slidebar/button-forward",alias:"slidebar/button-forward",style:function(states){if(states.barTop||states.barBottom){return {marginTop:2,marginBottom:2};}else{return {marginLeft:2,marginRight:2};}}},"tabview/bar/button-backward":{include:"slidebar/button-backward",alias:"slidebar/button-backward",style:function(states){if(states.barTop||states.barBottom){return {marginTop:2,marginBottom:2};}else{return {marginLeft:2,marginRight:2};}}},"tabview/bar/scrollpane":{},"tabview/pane":{style:function(states){return {decorator:"tabview-pane",minHeight:100,marginBottom:states.barBottom?-1:0,marginTop:states.barTop?-1:0,marginLeft:states.barLeft?-1:0,marginRight:states.barRight?-1:0};}},"tabview-page":"widget","tabview-page/button":{alias:"atom",style:function(states){var decorator,padding=0;var marginTop=0,marginBottom=0,marginLeft=0,marginRight=0;if(states.checked){if(states.barTop){decorator="tabview-page-button-top-active";padding=[6,14];marginLeft=states.firstTab?0:-5;marginRight=states.lastTab?0:-5;}else if(states.barBottom){decorator="tabview-page-button-bottom-active";padding=[6,14];marginLeft=states.firstTab?0:-5;marginRight=states.lastTab?0:-5;}else if(states.barRight){decorator="tabview-page-button-right-active";padding=[6,13];marginTop=states.firstTab?0:-5;marginBottom=states.lastTab?0:-5;}else{decorator="tabview-page-button-left-active";padding=[6,13];marginTop=states.firstTab?0:-5;marginBottom=states.lastTab?0:-5;}}else{if(states.barTop){decorator="tabview-page-button-top-inactive";padding=[4,10];marginTop=4;marginLeft=states.firstTab?5:1;marginRight=1;}else if(states.barBottom){decorator="tabview-page-button-bottom-inactive";padding=[4,10];marginBottom=4;marginLeft=states.firstTab?5:1;marginRight=1;}else if(states.barRight){decorator="tabview-page-button-right-inactive";padding=[4,10];marginRight=5;marginTop=states.firstTab?5:1;marginBottom=1;marginLeft=1;}else{decorator="tabview-page-button-left-inactive";padding=[4,10];marginLeft=5;marginTop=states.firstTab?5:1;marginBottom=1;marginRight=1;}}return {zIndex:states.checked?10:5,decorator:decorator,padding:padding,marginTop:marginTop,marginBottom:marginBottom,marginLeft:marginLeft,marginRight:marginRight,textColor:states.checked?"text-active":"text-inactive"};}},"toolbar":{style:function(states){return {decorator:"toolbar",spacing:2};}},"toolbar/part":{style:function(states){return {decorator:"toolbar-part",spacing:2};}},"toolbar/part/container":{style:function(states){return {paddingLeft:2,paddingRight:2};}},"toolbar/part/handle":{style:function(states){return {source:"decoration/toolbar/toolbar-handle-knob.gif",marginLeft:3,marginRight:3};}},"toolbar-button":{alias:"atom",style:function(states){return {marginTop:2,marginBottom:2,padding:states.pressed||states.checked||states.hovered?3:5,decorator:states.pressed||states.checked?"toolbar-button-checked":states.hovered?"toolbar-button-hovered":"undefined",textColor:states.disabled?"text-disabled":"undefined"};}},"toolbar-menubutton":{alias:"toolbar-button",include:"toolbar-button",style:function(states){return {showArrow:true};}},"toolbar-menubutton/arrow":{alias:"image",include:"image",style:function(states){return {source:"decoration/arrows/down-small.png"};}},"toolbar-splitbutton":{style:function(states){return {marginTop:2,marginBottom:2};}},"toolbar-splitbutton/button":{alias:"toolbar-button",include:"toolbar-button",style:function(states){return {icon:"decoration/arrows/down.png",marginTop:"undefined",marginBottom:"undefined"};}},"toolbar-splitbutton/arrow":{alias:"toolbar-button",include:"toolbar-button",style:function(states){return {padding:states.pressed||states.checked?1:states.hovered?1:3,icon:"decoration/arrows/down.png",marginTop:"undefined",marginBottom:"undefined"};}},"toolbar-separator":{style:function(states){return {decorator:"toolbar-separator",margin:7};}},"tree":"list","tree-item":{style:function(states){return {padding:[2,6],textColor:states.selected?"text-selected":"undefined",decorator:states.selected?"selected":"undefined"};}},"tree-item/icon":{include:"image",style:function(states){return {paddingRight:5};}},"tree-item/label":"label","tree-item/open":{include:"image",style:function(states){var icon;if(states.selected&&states.opened){icon="decoration/tree/open-selected.png";}else if(states.selected&&!states.opened){icon="decoration/tree/closed-selected.png";}else if(states.opened){icon="decoration/tree/open.png";}else{icon="decoration/tree/closed.png";}return {padding:[0,5,0,2],source:icon};}},"tree-folder":{include:"tree-item",alias:"tree-item",style:function(states){var icon;if(states.small){icon=states.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png";}else if(states.large){icon=states.opened?"icon/32/places/folder-open.png":"icon/32/places/folder.png";}else{icon=states.opened?"icon/22/places/folder-open.png":"icon/22/places/folder.png";}return {icon:icon};}},"tree-file":{include:"tree-item",alias:"tree-item",style:function(states){return {icon:states.small?"icon/16/mimetypes/office-document.png":states.large?"icon/32/mimetypes/office-document.png":"icon/22/mimetypes/office-document.png"};}},"treevirtual":"table","treevirtual-folder":{style:function(states){return {icon:(states.opened?"icon/16/places/folder-open.png":"icon/16/places/folder.png")};}},"treevirtual-file":{include:"treevirtual-folder",alias:"treevirtual-folder",style:function(states){return {icon:"icon/16/mimetypes/office-document.png"};}},"treevirtual-line":{style:function(states){return {icon:"static/blank.gif"};}},"treevirtual-contract":{style:function(states){return {icon:"decoration/tree/open.png",paddingLeft:3};}},"treevirtual-expand":{style:function(states){return {icon:"decoration/tree/closed.png",paddingLeft:5};}},"treevirtual-only-contract":"treevirtual-contract","treevirtual-only-expand":"treevirtual-expand","treevirtual-start-contract":"treevirtual-contract","treevirtual-start-expand":"treevirtual-expand","treevirtual-end-contract":"treevirtual-contract","treevirtual-end-expand":"treevirtual-expand","treevirtual-cross-contract":"treevirtual-contract","treevirtual-cross-expand":"treevirtual-expand","treevirtual-end":{style:function(states){return {icon:"qx/static/blank.gif"};}},"treevirtual-cross":{style:function(states){return {icon:"qx/static/blank.gif"};}},"tooltip":{include:"popup",style:function(states){return {backgroundColor:"background-tip",padding:[1,3,2,3],offset:[1,1,20,1]};}},"tooltip/atom":"atom","window":{style:function(states){return {shadow:"shadow-window",contentPadding:[10,10,10,10]};}},"window/pane":{style:function(states){return {decorator:"window"};}},"window/captionbar":{style:function(states){return {decorator:states.active?"window-captionbar-active":"window-captionbar-inactive",textColor:states.active?"white":"text-gray",minHeight:26,paddingRight:2};}},"window/icon":{style:function(states){return {margin:[5,0,3,6]};}},"window/title":{style:function(states){return {alignY:"middle",font:"bold",marginLeft:6,marginRight:12};}},"window/minimize-button":{alias:"atom",style:function(states){return {icon:states.active?states.hovered?"decoration/window/minimize-active-hovered.png":"decoration/window/minimize-active.png":"decoration/window/minimize-inactive.png",margin:[4,8,2,0]};}},"window/restore-button":{alias:"atom",style:function(states){return {icon:states.active?states.hovered?"decoration/window/restore-active-hovered.png":"decoration/window/restore-active.png":"decoration/window/restore-inactive.png",margin:[5,8,2,0]};}},"window/maximize-button":{alias:"atom",style:function(states){return {icon:states.active?states.hovered?"decoration/window/maximize-active-hovered.png":"decoration/window/maximize-active.png":"decoration/window/maximize-inactive.png",margin:[4,8,2,0]};}},"window/close-button":{alias:"atom",style:function(states){return {icon:states.active?states.hovered?"decoration/window/close-active-hovered.png":"decoration/window/close-active.png":"decoration/window/close-inactive.png",margin:[4,8,2,0]};}},"window/statusbar":{style:function(states){return {padding:[2,6],decorator:"window-statusbar",minHeight:18};}},"window/statusbar-text":{style:function(states){return {font:"small",textColor:"text-label"};}},"iframe":{style:function(states){return {decorator:"main"};}},"resizer":{style:function(states){return {decorator:"pane"};}},"splitpane":{style:function(states){return {decorator:"splitpane"};}},"splitpane/splitter":{style:function(states){return {width:states.horizontal?3:"undefined",height:states.vertical?3:"undefined",backgroundColor:"background-splitpane"};}},"splitpane/splitter/knob":{style:function(states){return {source:states.horizontal?"decoration/splitpane/knob-horizontal.png":"decoration/splitpane/knob-vertical.png"};}},"splitpane/slider":{style:function(states){return {width:states.horizontal?3:"undefined",height:states.vertical?3:"undefined",backgroundColor:"background-splitpane"};}},"selectbox":{alias:"button-frame",include:"button-frame",style:function(states){return {padding:[2,8]};}},"selectbox/atom":"atom","selectbox/popup":"popup","selectbox/list":{alias:"list"},"selectbox/arrow":{style:function(states){return {source:"decoration/arrows/down.png",paddingRight:4,paddingLeft:5};}},"datechooser":{style:function(states){return {padding:2,decorator:"main",backgroundColor:"background-light"};}},"datechooser/navigation-bar":{},"datechooser/nav-button":{include:"button-frame",alias:"button-frame",style:function(states){var result={padding:[2,4]};if(states.lastYear){result.icon="decoration/arrows/rewind.png";result.marginRight=1;}else if(states.lastMonth){result.icon="decoration/arrows/left.png";}else if(states.nextYear){result.icon="decoration/arrows/forward.png";result.marginLeft=1;}else if(states.nextMonth){result.icon="decoration/arrows/right.png";}return result;}},"datechooser/last-year-button-tooltip":"tooltip","datechooser/last-month-button-tooltip":"tooltip","datechooser/next-year-button-tooltip":"tooltip","datechooser/next-month-button-tooltip":"tooltip","datechooser/last-year-button":"datechooser/nav-button","datechooser/last-month-button":"datechooser/nav-button","datechooser/next-month-button":"datechooser/nav-button","datechooser/next-year-button":"datechooser/nav-button","datechooser/month-year-label":{style:function(states){return {font:"bold",textAlign:"center"};}},"datechooser/date-pane":{style:function(states){return {marginTop:2};}},"datechooser-weekday":{style:function(states){return {textColor:states.weekend?"text-light":"undefined",textAlign:"center",paddingTop:2,backgroundColor:"background-medium"};}},"datechooser-week":{style:function(states){return {textAlign:"center",textColor:"text-label",padding:[2,4],backgroundColor:"background-medium"};}},"datechooser-day":{style:function(states){return {textAlign:"center",decorator:states.selected?"selected":"undefined",textColor:states.selected?"text-selected":states.otherMonth?"text-light":"undefined",font:states.today?"bold":"undefined",padding:[2,4]};}},"combobox":{style:function(states){return {decorator:states.focused?"input-focused":"input"};}},"combobox/popup":"popup","combobox/list":{alias:"list"},"combobox/button":{include:"button-frame",alias:"button-frame",style:function(states){var ret={icon:"decoration/arrows/down.png",padding:2};if(states.selected){ret.decorator="button-focused";}return ret;}},"combobox/textfield":{include:"textfield",style:function(states){return {decorator:null,padding:[2,4,1]};}},"menu":{style:function(states){var result={decorator:"menu",shadow:"shadow-popup",spacingX:6,spacingY:1,iconColumnWidth:16,arrowColumnWidth:4};if(states.submenu){result.position="right-top";result.offset=[-2,-3];}return result;}},"menu-separator":{style:function(states){return {height:0,decorator:"menu-separator",margin:[4,2]};}},"menu-button":{alias:"atom",style:function(states){return {decorator:states.selected?"selected":"undefined",textColor:states.selected?"text-selected":"undefined",padding:[4,6]};}},"menu-button/icon":{include:"image",style:function(states){return {alignY:"middle"};}},"menu-button/label":{include:"label",style:function(states){return {alignY:"middle",padding:1};}},"menu-button/shortcut":{include:"label",style:function(states){return {alignY:"middle",marginLeft:14,padding:1};}},"menu-button/arrow":{style:function(states){return {source:states.selected?"decoration/arrows/right-invert.png":"decoration/arrows/right.png",alignY:"middle"};}},"menu-checkbox":{alias:"menu-button",include:"menu-button",style:function(states){return {icon:!states.checked?"undefined":states.selected?"decoration/menu/checkbox-invert.gif":"decoration/menu/checkbox.gif"};}},"menu-radiobutton":{alias:"menu-button",include:"menu-button",style:function(states){return {icon:!states.checked?"undefined":states.selected?"decoration/menu/radiobutton-invert.gif":"decoration/menu/radiobutton.gif"};}},"menubar":{style:function(states){return {decorator:"menubar"};}},"menubar-button":{alias:"atom",style:function(states){return {decorator:states.pressed||states.hovered?"selected":"undefined",textColor:states.pressed||states.hovered?"text-selected":"text-label",padding:[3,8]};}},"colorselector":"widget","colorselector/control-bar":"widget","colorselector/control-pane":"widget","colorselector/visual-pane":"groupbox","colorselector/preset-grid":"widget","colorselector-colorbucket":{style:function(states){return {decorator:"main",width:16,height:16};}},"colorselector/preset-field-set":"groupbox","colorselector/input-field-set":"groupbox","colorselector/preview-field-set":"groupbox","colorselector/hex-field-composite":"widget","colorselector/hex-field":"textfield","colorselector/rgb-spinner-composite":"widget","colorselector/rgb-spinner-red":"spinner","colorselector/rgb-spinner-green":"spinner","colorselector/rgb-spinner-blue":"spinner","colorselector/hsb-spinner-composite":"widget","colorselector/hsb-spinner-hue":"spinner","colorselector/hsb-spinner-saturation":"spinner","colorselector/hsb-spinner-brightness":"spinner","colorselector/preview-content-old":{style:function(states){return {decorator:"main",width:50,height:10};}},"colorselector/preview-content-new":{style:function(states){return {decorator:"main",backgroundColor:"background-light",width:50,height:10};}},"colorselector/hue-saturation-field":{style:function(states){return {decorator:"main",margin:5};}},"colorselector/brightness-field":{style:function(states){return {decorator:"main",margin:[5,7]};}},"colorselector/hue-saturation-pane":"widget","colorselector/hue-saturation-handle":"widget","colorselector/brightness-pane":"widget","colorselector/brightness-handle":"widget","colorpopup":{alias:"popup",include:"popup",style:function(states){return {padding:5,backgroundColor:"background-application"};}},"colorpopup/field":{style:function(states){return {decorator:"main",margin:2,width:14,height:14,backgroundColor:"background-light"};}},"colorpopup/selector-button":"button","colorpopup/auto-button":"button","colorpopup/preview-pane":"groupbox","colorpopup/current-preview":{style:function(state){return {height:20,padding:4,marginLeft:4,decorator:"main",allowGrowX:true};}},"colorpopup/selected-preview":{style:function(state){return {height:20,padding:4,marginRight:4,decorator:"main",allowGrowX:true};}},"table":{alias:"widget",style:function(states){return {decorator:"table"};}},"table-header":{},"table/statusbar":{style:function(states){return {decorator:"table-statusbar",padding:[0,2]};}},"table/column-button":{alias:"button-frame",style:function(states){return {decorator:"table-column-button",padding:3,icon:"decoration/table/select-column-order.png"};}},"table-column-reset-button":{include:"menu-button",alias:"menu-button",style:function(){return {icon:"icon/16/actions/view-refresh.png"};}},"table-scroller":"widget","table-scroller/scrollbar-x":"scrollbar","table-scroller/scrollbar-y":"scrollbar","table-scroller/header":{style:function(states){return {decorator:"table-scroller-header"};}},"table-scroller/pane":{style:function(states){return {backgroundColor:"table-pane"};}},"table-scroller/focus-indicator":{style:function(states){return {decorator:"table-scroller-focus-indicator"};}},"table-scroller/resize-line":{style:function(states){return {backgroundColor:"border-separator",width:2};}},"table-header-cell":{alias:"atom",style:function(states){return {minWidth:40,minHeight:20,padding:states.hovered?[3,4,2,4]:[3,4],decorator:states.hovered?"table-header-cell-hovered":"table-header-cell",sortIcon:states.sorted?(states.sortedAscending?"decoration/table/ascending.png":"decoration/table/descending.png"):"undefined"};}},"table-header-cell/label":{style:function(states){return {minWidth:0,alignY:"middle",paddingRight:5};}},"table-header-cell/sort-icon":{style:function(states){return {alignY:"middle",alignX:"right"};}},"table-header-cell/icon":{style:function(states){return {minWidth:0,alignY:"middle",paddingRight:5};}},"table-editor-textfield":{include:"textfield",style:function(states){return {decorator:"undefined",padding:[2,2],backgroundColor:"background-light"};}},"table-editor-selectbox":{include:"selectbox",alias:"selectbox",style:function(states){return {padding:[0,2],backgroundColor:"background-light"};}},"table-editor-combobox":{include:"combobox",alias:"combobox",style:function(states){return {decorator:"undefined",backgroundColor:"background-light"};}},"progressive-table-header":{alias:"widget",style:function(states){return {decorator:"progressive-table-header"};}},"progressive-table-header-cell":{alias:"atom",style:function(states){return {minWidth:40,minHeight:25,paddingLeft:6,decorator:"progressive-table-header-cell"};}},"app-header":{style:function(states){return {font:"bold",textColor:"text-selected",padding:[8,12],decorator:"app-header"};}}}});qx.Theme.define("demobrowser.Appearance",{extend:qx.theme.modern.Appearance,title:"Demo browser",appearances:{"demo-tree":{alias:"tree",include:"tree",style:function(){return {width:250,decorator:"main"};}}}});qx.Theme.define("demobrowser.Theme",{title:"Demo browser",meta:{color:qx.theme.modern.Color,decoration:qx.theme.modern.Decoration,font:qx.theme.modern.Font,icon:qx.theme.icon.Tango,appearance:demobrowser.Appearance}});qx.Bootstrap.define("qx.bom.client.Feature",{statics:{STANDARD_MODE:false,QUIRKS_MODE:false,CONTENT_BOX:false,BORDER_BOX:false,SVG:false,CANVAS:false,VML:false,XPATH:false,__init:function(){this.STANDARD_MODE=document.compatMode==="CSS1Compat";this.QUIRKS_MODE=!this.STANDARD_MODE;this.CONTENT_BOX=!qx.bom.client.Engine.MSHTML||this.STANDARD_MODE;this.BORDER_BOX=!this.CONTENT_BOX;this.SVG=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("org.w3c.dom.svg","1.0");this.CANVAS=!!window.CanvasRenderingContext2D;this.VML=qx.bom.client.Engine.MSHTML;this.AIR=navigator.userAgent.indexOf("adobeair")!==-1;this.GEARS=!!(window.google&&window.google.gears);this.XPATH=!!document.evaluate;}},defer:function(statics){statics.__init();}});